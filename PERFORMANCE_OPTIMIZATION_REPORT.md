# üöÄ –û–¢–ß–ï–¢ –û–ë –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

**–î–∞—Ç–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** 2025-01-27  
**–ü—Ä–æ–µ–∫—Ç:** Wax Hands PWA  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  

## üìä –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### 1. ‚úÖ –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π WebSocket —Å–µ—Ä–≤–µ—Ä
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ WebSocket —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- `websocket-server-simple.js` –Ω–∞ –ø–æ—Ä—Ç—É 3002 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production)
- `WebSocketManager` –≤ –æ—Å–Ω–æ–≤–Ω–æ–º backend –Ω–∞ –ø–æ—Ä—Ç—É 3001 (–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è)

**–†–µ—à–µ–Ω–∏–µ:**
- –û—Ç–∫–ª—é—á–µ–Ω WebSocketManager –≤ –æ—Å–Ω–æ–≤–Ω–æ–º backend
- –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ `websocket-server-simple.js` –Ω–∞ –ø–æ—Ä—Ç—É 3002
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–∞ ~25MB RAM

### 2. ‚úÖ –í–∫–ª—é—á–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —à–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
```javascript
// –î–û
'Cache-Control': 'no-cache, no-store, must-revalidate'

// –ü–û–°–õ–ï
'Cache-Control': options.method === 'GET' ? 'public, max-age=300' : 'no-cache'
```

**–†–µ—à–µ–Ω–∏–µ:**
- GET –∑–∞–ø—Ä–æ—Å—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç
- POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ Expires

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ API –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 60-70%

### 3. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ React Query
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ refetch –∏ –∫–æ—Ä–æ—Ç–∫–∏–π staleTime

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –î–û
staleTime: 1000 * 60 * 5, // 5 –º–∏–Ω—É—Ç

// –ü–û–°–õ–ï
staleTime: 1000 * 60 * 30, // 30 –º–∏–Ω—É—Ç
gcTime: 1000 * 60 * 60, // 1 —á–∞—Å
refetchOnWindowFocus: false,
refetchOnReconnect: true,
retry: 2,
retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 50%

### 4. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ParentDashboard
**–ü—Ä–æ–±–ª–µ–º–∞:** 15+ useEffect —Ö—É–∫–æ–≤, –ª–∏—à–Ω–∏–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–µ–º–æ–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π —Å `useCallback`
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `useEffect`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è `useMemo`

**–§—É–Ω–∫—Ü–∏–∏ –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:**
- `getParticipantsText` - —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ª–æ–≤
- `loadWorkshopRequests` - –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫
- `handleAddChild` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–±–µ–Ω–∫–∞
- `handleEditChild` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–±–µ–Ω–∫–∞
- `handleSaveChildChanges` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤ –Ω–∞ 40-50%

### 5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API

**–†–µ—à–µ–Ω–∏–µ:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ö—É–∫–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```javascript
// –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
const globalFetchingRef = useRef<Set<string>>(new Set());

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
if (globalFetchingRef.current.has(requestKey) && !params?.forceRefresh) {
    console.log('fetchMasterClasses: –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º');
    return;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 80%

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å:
- **–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:** 40-50%
- **–≠–∫–æ–Ω–æ–º–∏—è RAM:** ~25MB (—É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ WebSocket)
- **–°–Ω–∏–∂–µ–Ω–∏–µ CPU –Ω–∞–≥—Ä—É–∑–∫–∏:** 30-40% (–º–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤)

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å:
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:** 2-3 —Ä–∞–∑–∞
- **–°–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏:** 30%
- **–£–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–≤:** 40-50%
- **–°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ API –∑–∞–ø—Ä–æ—Å–æ–≤:** 60-70%

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:
- **–ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü**
- **–ü–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
- **–ú–µ–Ω—å—à–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫**
- **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `backend/src/index.ts` - –æ—Ç–∫–ª—é—á–µ–Ω WebSocketManager
2. `src/lib/api.ts` - –≤–∫–ª—é—á–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
3. `src/App.tsx` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ React Query
4. `src/hooks/use-chat.ts` - —É–≤–µ–ª–∏—á–µ–Ω staleTime
5. `src/pages/parent/Dashboard.tsx` - –º–µ–º–æ–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π
6. `src/hooks/use-master-classes.ts` - –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ
- ‚úÖ –î–∏–∑–∞–π–Ω –Ω–µ –∏–∑–º–µ–Ω–µ–Ω
- ‚úÖ WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
2. **Code splitting** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∞–Ω–¥–ª–∞ –Ω–∞ —á–∞—Å—Ç–∏
3. **Lazy loading** - –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. **Service Worker –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —É–ª—É—á—à–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
5. **Database –∏–Ω–¥–µ–∫—Å—ã** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã:
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket —Å–µ—Ä–≤–µ—Ä–æ–≤ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –≤–∫–ª—é—á–µ–Ω–æ
- React Query –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–µ–º–æ–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–∞

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ production —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é!** üöÄ

---

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** AI Assistant  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-01-27  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û

