# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ 29 Robokassa

## üìã –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥ –æ–ø–ª–∞—Ç—ã Robokassa –ø–æ—è–≤–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞ **29 - "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä SignatureValue"**.

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Robokassa, –æ—à–∏–±–∫–∞ 29 –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ (MerchantLogin)
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ü–∞—Ä–æ–ª—å 1 (MerchantPass1)  
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ø–æ–¥–ø–∏—Å—å

## üõ†Ô∏è –ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
–í –∫–æ–¥–µ `backend/src/services/robokassaService.ts` –ø–æ–¥–ø–∏—Å—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª–∞—Å—å **–ë–ï–ó** —É—á–µ—Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `Receipt` –¥–ª—è —Ñ–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏–∏:

```typescript
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Å—Ç–∞—Ä—ã–π –∫–æ–¥):
const signatureString = `${this.config.merchantLogin}:${outSum}:${invId}:${this.config.password1}:${shpParams}`;

// –ü–†–ê–í–ò–õ–¨–ù–û (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥):
const signatureString = `${this.config.merchantLogin}:${outSum}:${invId}:${receiptUrlEncoded}:${this.config.password1}`;
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω Receipt –≤ –ø–æ–¥–ø–∏—Å—å
–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Robokassa, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `Receipt` –¥–ª—è —Ñ–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–Ω **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤ –ø–æ–¥–ø–∏—Å—å:

```
–§–æ—Ä–º—É–ª–∞: MerchantLogin:OutSum:InvId:Receipt:–ü–∞—Ä–æ–ª—å#1
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ URL-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ Receipt
–ü–∞—Ä–∞–º–µ—Ç—Ä `Receipt` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å URL-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –≤ –ø–æ–¥–ø–∏—Å—å:

```typescript
const receiptJson = JSON.stringify(receipt);
const receiptUrlEncoded = encodeURIComponent(receiptJson);
const signatureString = `${this.config.merchantLogin}:${outSum}:${invId}:${receiptUrlEncoded}:${this.config.password1}`;
```

### 3. –£–±—Ä–∞–Ω—ã shp-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –ø–æ–¥–ø–∏—Å–∏
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `Receipt` shp-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ù–ï –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –ø–æ–¥–ø–∏—Å—å —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ 29 "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä SignatureValue"
- ‚úÖ –ü–æ–¥–ø–∏—Å—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Robokassa
- ‚úÖ –§–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–µ—Ä–≤–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω –±–µ–∑ –∑–∞—Ö–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

## üì¶ –ë—ç–∫–∞–ø—ã
- –°–æ–∑–¥–∞–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø: `backups/2025-09-23/backend-backup-20250126-154500.zip`
- –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `dist.backup-*` –≤ –ø–∞–ø–∫–µ backend

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- **–§–∞–π–ª**: `backend/src/services/robokassaService.ts`
- **–ú–µ—Ç–æ–¥**: `createInvoice()`
- **–ê—Ä—Ö–∏–≤ –¥–ª—è –¥–µ–ø–ª–æ—è**: `backend-update-20250126-154500.zip`
- **–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞**: ‚úÖ Online (PM2)

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –æ–ø–ª–∞—Ç—ã
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–¥–∞—á—É —á–µ–∫–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å—á–µ—Ç–∞
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤–æ–∑–≤—Ä–∞—Ç–∞ (–¥–æ 3 —á–∞—Å–æ–≤ –¥–æ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å–∞)

---
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 2025-01-26 15:45  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: AI Assistant  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ

