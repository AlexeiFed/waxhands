# üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ FreeKassa

## üìù –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ FreeKassa

### 1. URL –°–ê–ô–¢–ê
```
https://waxhands.ru
```

### 2. API –ö–õ–Æ–ß –ö–ê–°–°–´
**–ù–∞–∂–º–∏—Ç–µ "–°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨"** –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á

–ó–∞—Ç–µ–º –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
FREEKASSA_API_KEY=–≤–∞—à_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_api_–∫–ª—é—á
```

### 3. –°–ï–ö–†–ï–¢–ù–û–ï –°–õ–û–í–û 1
–í–≤–µ–¥–∏—Ç–µ –ª—é–±–æ–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–ª–æ–≤–æ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –ø–ª–∞—Ç–µ–∂–µ–π)

–ù–∞–ø—Ä–∏–º–µ—Ä: `waxhands_secret_key_1_2025`

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
FREEKASSA_SECRET_WORD_1=waxhands_secret_key_1_2025
```

### 4. –°–ï–ö–†–ï–¢–ù–û–ï –°–õ–û–í–û 2
–í–≤–µ–¥–∏—Ç–µ –¥—Ä—É–≥–æ–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–ª–æ–≤–æ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

–ù–∞–ø—Ä–∏–º–µ—Ä: `waxhands_secret_key_2_2025`

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```env
FREEKASSA_SECRET_WORD_2=waxhands_secret_key_2_2025
```

## üîó –°—Å—ã–ª–∫–∏ –∏ –º–µ—Ç–æ–¥—ã

### URL –û–ü–û–í–ï–©–ï–ù–ò–Ø
**URL**: 
```
https://waxhands.ru/api/payment/webhook
```

**–ú–ï–¢–û–î**: `POST`

_–∞–¥—Ä–µ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –ø–æ—Å—ã–ª–∞—Ç—å—Å—è –æ–ø–æ–≤–µ—â–µ–Ω–∏—è_

### URL –£–°–ü–ï–®–ù–û–ô –û–ü–õ–ê–¢–´  
**URL**:
```
https://waxhands.ru/payment/success
```

**–ú–ï–¢–û–î**: `GET`

_–ê–¥—Ä–µ—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –∑–∞–∫–∞–∑–∞_

### URL –í–û–ó–í–†–ê–¢–ê –í –°–õ–£–ß–ê–ï –ù–ï–£–î–ê–ß–ò
**URL**:
```
https://waxhands.ru/payment/fail
```

**–ú–ï–¢–û–î**: `GET`

_–ê–¥—Ä–µ—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞ –æ—Ç –æ–ø–ª–∞—Ç—ã_

## ‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### ‚òë –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
**–ù–ï –æ—Ç–º–µ—á–∞–π—Ç–µ** —ç—Ç—É –≥–∞–ª–æ—á–∫—É  
_–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏_

### ‚òë –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
**–ù–ï –æ—Ç–º–µ—á–∞–π—Ç–µ** —ç—Ç—É –≥–∞–ª–æ—á–∫—É –¥–ª—è production  
**–û—Ç–º–µ—Ç—å—Ç–µ** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üîê –ü–æ–¥–ø–∏—Å–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ FreeKassa

### –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Ñ–æ—Ä–º–∞ (MD5)
```
MD5(merchantId:amount:secretWord1:currency:orderId)
```
**–ü—Ä–∏–º–µ—Ä:** `MD5(66509:1000.00:uqlTWAXu^hgw{Nq:RUB:12345)`

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è webhook (MD5)
```
MD5(MERCHANT_ID:AMOUNT:secretWord2:MERCHANT_ORDER_ID)
```
**–ü—Ä–∏–º–µ—Ä:** `MD5(66509:1000.00:s--vO&HvNfKxsyO:12345)`

### API –∑–∞–ø—Ä–æ—Å—ã (HMAC-SHA256)
```
HMAC-SHA256(sortedValues.join('|'), apiKey)
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –∫–ª—é—á–∞–º –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `|`

**–í–∞–∂–Ω—ã–µ URL —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Ñ–æ—Ä–º–∞: `https://pay.fk.money/`
- API endpoint: `https://api.fk.life/v1/`

## üîÑ –ü–æ–ª–Ω—ã–π .env —Ñ–∞–π–ª –¥–ª—è FreeKassa

```env
# Payment Provider Selection
PAYMENT_PROVIDER=freekassa

# FreeKassa Configuration
FREEKASSA_MERCHANT_ID=–≤–∞—à_merchant_id_–∏–∑_–ª–∏—á–Ω–æ–≥–æ_–∫–∞–±–∏–Ω–µ—Ç–∞
FREEKASSA_API_KEY=–≤–∞—à_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_api_–∫–ª—é—á
FREEKASSA_SECRET_WORD_1=waxhands_secret_key_1_2025
FREEKASSA_SECRET_WORD_2=waxhands_secret_key_2_2025
FREEKASSA_SUCCESS_URL=https://waxhands.ru/payment/success
FREEKASSA_FAIL_URL=https://waxhands.ru/payment/fail
FREEKASSA_WEBHOOK_URL=https://waxhands.ru/api/payment/webhook
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–∞–∂–º–∏—Ç–µ **"–ü–†–û–í–ï–†–ò–¢–¨ –°–¢–ê–¢–£–°"** —á—Ç–æ–±—ã FreeKassa –ø—Ä–æ–≤–µ—Ä–∏–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ URL.

## üìä –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ FreeKassa
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` —Ñ–∞–π–ª
3. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (—Å–º. `PAYMENT_PROVIDERS_SETUP.md`)
4. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend: `pm2 restart waxhands-backend`
5. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂

## üÜò –ü–æ–º–æ—â—å

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/PAYMENT_PROVIDERS_SETUP.md`

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-16

