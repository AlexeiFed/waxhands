# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ WebSocket

## –ü—Ä–æ–±–ª–µ–º–∞
WebSocket –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–ª—Å—è –∏ –æ—Ç–∫–ª—é—á–∞–ª—Å—è, —Å–æ–∑–¥–∞–≤–∞—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

## –ü—Ä–∏—á–∏–Ω–∞
–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –±—ã–ª –≤—ã–∑–≤–∞–Ω:
1. –õ–∏—à–Ω–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –≤ `useCallback` —Ö—É–∫–æ–≤
2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–π `connect` –∏ `disconnect` –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `useEffect`

## –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `useWorkshopRequestsWebSocket`
- –î–æ–±–∞–≤–ª–µ–Ω `connectionAttemptsRef` –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫
- –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `useCallback`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —É–∂–µ –∏–¥—É—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –£–ª—É—á—à–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `useWebSocketChat`
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ WebSocket —Ö—É–∫–∞
- –£–±—Ä–∞–Ω –ª–∏—à–Ω–∏–π `useEffect` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 3. –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```typescript
// –ë—ã–ª–æ: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç state –≤—ã–∑—ã–≤–∞–ª–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
}, [userId, isAdmin, onMessage, wsState.connectionAttempts, maxReconnectAttempts, reconnectDelay]);

// –°—Ç–∞–ª–æ: —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
}, [userId, isAdmin]);

// –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–∂–µ –∏–¥—É—â–µ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
if (wsState.isConnecting) {
    console.log('üîå WebSocket: –£–∂–µ –∏–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º');
    return;
}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
- WebSocket —Ç–µ–ø–µ—Ä—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å—Ç–∞–ª–∏ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–º–∏ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏

## –§–∞–π–ª—ã
- `src/hooks/use-workshop-requests-websocket.ts`
- `src/hooks/use-websocket-chat.ts`

---

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞—è–≤–∫–∞—Ö

## –ü—Ä–æ–±–ª–µ–º–∞
1. –ó–∞—è–≤–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è–ª–∏—Å—å —É —Ä–æ–¥–∏—Ç–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
2. –£ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å —Ñ–∞–º–∏–ª–∏—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω —Ä–æ–¥–∏—Ç–µ–ª—è

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–æ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏
- –°–æ–∑–¥–∞–Ω –º–µ—Ç–æ–¥ `notifyWorkshopRequestCreated` –≤ WebSocket —Å–µ—Ä–≤–µ—Ä–µ
- –†–æ–¥–∏—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 2. –£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–æ–¥–∏—Ç–µ–ª–µ
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `parent_surname` –∏ `parent_phone` –≤ SQL –∑–∞–ø—Ä–æ—Å—ã
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã TypeScript –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: –∏–º—è, —Ñ–∞–º–∏–ª–∏—è, —Ç–µ–ª–µ—Ñ–æ–Ω, email

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ WebSocket —Å–æ–æ–±—â–µ–Ω–∏–π
- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `workshop_request_created`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –†–µ–∑—É–ª—å—Ç–∞—Ç
- –ó–∞—è–≤–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —É —Ä–æ–¥–∏—Ç–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–æ–¥–∏—Ç–µ–ª–µ
- WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π

## –§–∞–π–ª—ã
- `backend/src/websocket-server.ts`
- `backend/src/controllers/workshopRequests.ts`
- `backend/src/types/index.ts`
- `src/types/index.ts`
- `src/pages/parent/Dashboard.tsx`
- `src/components/admin/WorkshopRequestsTab.tsx`
