Тестовый режим
Тестовый режим предназначен для отладки взаимодействия между магазином и сервисом ROBOKASSA и особенно полезен для магазина, который еще не был активирован.

Тестовая среда представляет из себя интерфейс «платёжных страниц» Robokassa, но без возможности провести оплату.

Тестовая среда облегчает подключение магазинов к интерфейсам сервиса Robokassa. Она позволяет получать детальное описание ошибок, возникающих при проверке передаваемых параметров, имитировать получение различных состояний операции без необходимости проведения реального платежа.

Для работы в тестовом режиме обязателен параметр IsTest
Внимание!
Для работы в тестовом режиме используется специальный тестовый набор паролей, не совпадающих с основными рабочими паролями вашего магазина. Они прописываются в специальном блоке в Технических настройках вашего магазина. Это делается для обеспечения безопасности вашего интернет-магазина, чтобы злоумышленник не имел возможности «обмануть» ваш интернет-магазин.

Настройка и отладка
Для работы в тестовом режиме магазину необходим дополнительный набор паролей, которые не должны совпадать с Пароль #1 и Пароль #2. Они прописываются в специальном разделе Технических настроек магазина. Там же выбирается Алгоритм расчёта хэша для тестовых платежей. Алгоритм расчета контрольной суммы для тестового режима должен совпадать с рабочим.

Карточка магазина
Shopname
 Операции
 Вывод средств
 Настройки
Баланс магазина:
Активный магазин
350 000,00 ₽
Вы можете принимать и выводить деньги
Вкладка «Технические настройки»
Сгенерируйте тестовые пароли
Для того, что бы со стороны магазина инициировать тестовую операцию оплаты, в скрипт к остальным параметрам необходимо добавить параметр IsTest со значением 1

Внимание!
Если данный параметр вообще отсутствует, или в качестве значения параметра IsTest передан 0 или значение параметра пусто, то такой запрос не считается тестовым и происходит инициализация обычной операции оплаты.

Инициализация тестовой оплаты через магазин
Рассмотрим подробно тестирование оплаты через свой магазин с помощью модифицированного скрипта на PHP с параметром IsTest.

PHP


1
2
3
4
5
6
7
8
9
10
11
12
13
14

        <?
          $mrh_login = "Test1999";
          $mrh_pass1 = "password_1";
          $inv_id = 678678;
          $inv_desc = "Товары для животных";
          $out_summ = "100.00";
          $IsTest = 1;
          $crc = md5("$mrh_login:$out_summ:$inv_id:$mrh_pass1");
          print "<html><script language=JavaScript ".
            "src='https://auth.robokassa.ru/Merchant/PaymentForm/FormMS.js?".
            "MerchantLogin=$mrh_login&OutSum=$out_summ&InvoiceID=$inv_id".

        "&Description=$inv_desc&SignatureValue=$crc&IsTest=$IsTest'></script></html>";
        ?>
            
Здесь уже заменены “значение” соответствующими данными, (подробнее можно почитать тут). Вам следует проделать аналогичные шаги для Вашего тестируемого магазина:1

Параметр

Подставляемые Данные

Комментарий

MerchantLogin
Test1999
Это ваш ID магазина

Pass1
Пароль#1
Указан в тестовых настройках

InvId
678678
Номер счета

OutSum
100
Стоимость товара, ₽

Description
Товары для животных
описание покупки

IsTest
1
Указатель на тестовую оплату

Настроим оповещение об оплате на ResultURL для работы с тестовым интерфейсом. Для этого потребуется в расчёт SignatureValue включить Пароль#2 из тестовых настроек.2

Сохранените эти настройки.
Теперь вы можете инициировать из вашего магазина тестовую операцию оплаты.3

Внимание!
Тестовые оплаты не отображаются в поиске операций в Личном кабинете клиента.

Интерфейс оплаты (платёжная страница)
