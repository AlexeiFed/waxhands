var Xv=e=>{throw TypeError(e)};var E0=(e,t,r)=>t.has(e)||Xv("Cannot "+r);var Q=(e,t,r)=>(E0(e,t,"read from private field"),r?r.call(e):t.get(e)),ot=(e,t,r)=>t.has(e)?Xv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ge=(e,t,r,n)=>(E0(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),pt=(e,t,r)=>(E0(e,t,"access private method"),r);var Cu=(e,t,r,n)=>({set _(a){Ge(e,t,a,r)},get _(){return Q(e,t,n)}});function ZC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function h2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m2={exports:{}},Ah={},p2={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=Symbol.for("react.element"),eT=Symbol.for("react.portal"),tT=Symbol.for("react.fragment"),rT=Symbol.for("react.strict_mode"),nT=Symbol.for("react.profiler"),sT=Symbol.for("react.provider"),aT=Symbol.for("react.context"),iT=Symbol.for("react.forward_ref"),oT=Symbol.for("react.suspense"),lT=Symbol.for("react.memo"),cT=Symbol.for("react.lazy"),Kv=Symbol.iterator;function dT(e){return e===null||typeof e!="object"?null:(e=Kv&&e[Kv]||e["@@iterator"],typeof e=="function"?e:null)}var x2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g2=Object.assign,v2={};function sc(e,t,r){this.props=e,this.context=t,this.refs=v2,this.updater=r||x2}sc.prototype.isReactComponent={};sc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function y2(){}y2.prototype=sc.prototype;function vx(e,t,r){this.props=e,this.context=t,this.refs=v2,this.updater=r||x2}var yx=vx.prototype=new y2;yx.constructor=vx;g2(yx,sc.prototype);yx.isPureReactComponent=!0;var Yv=Array.isArray,w2=Object.prototype.hasOwnProperty,wx={current:null},N2={key:!0,ref:!0,__self:!0,__source:!0};function j2(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)w2.call(t,n)&&!N2.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Zd,type:e,key:i,ref:o,props:a,_owner:wx.current}}function uT(e,t){return{$$typeof:Zd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zd}function fT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qv=/\/+/g;function _0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fT(""+e.key):t.toString(36)}function cf(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zd:case eT:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+_0(o,0):n,Yv(a)?(r="",e!=null&&(r=e.replace(Qv,"$&/")+"/"),cf(a,t,r,"",function(d){return d})):a!=null&&(Nx(a)&&(a=uT(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Qv,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Yv(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+_0(i,l);o+=cf(i,t,r,c,a)}else if(c=dT(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+_0(i,l++),o+=cf(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Tu(e,t,r){if(e==null)return e;var n=[],a=0;return cf(e,n,"","",function(i){return t.call(r,i,a++)}),n}function hT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var An={current:null},df={transition:null},mT={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:df,ReactCurrentOwner:wx};function b2(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:Tu,forEach:function(e,t,r){Tu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Tu(e,function(){t++}),t},toArray:function(e){return Tu(e,function(t){return t})||[]},only:function(e){if(!Nx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};vt.Component=sc;vt.Fragment=tT;vt.Profiler=nT;vt.PureComponent=vx;vt.StrictMode=rT;vt.Suspense=oT;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT;vt.act=b2;vt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=g2({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=wx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w2.call(t,c)&&!N2.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Zd,type:e.type,key:a,ref:i,props:n,_owner:o}};vt.createContext=function(e){return e={$$typeof:aT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sT,_context:e},e.Consumer=e};vt.createElement=j2;vt.createFactory=function(e){var t=j2.bind(null,e);return t.type=e,t};vt.createRef=function(){return{current:null}};vt.forwardRef=function(e){return{$$typeof:iT,render:e}};vt.isValidElement=Nx;vt.lazy=function(e){return{$$typeof:cT,_payload:{_status:-1,_result:e},_init:hT}};vt.memo=function(e,t){return{$$typeof:lT,type:e,compare:t===void 0?null:t}};vt.startTransition=function(e){var t=df.transition;df.transition={};try{e()}finally{df.transition=t}};vt.unstable_act=b2;vt.useCallback=function(e,t){return An.current.useCallback(e,t)};vt.useContext=function(e){return An.current.useContext(e)};vt.useDebugValue=function(){};vt.useDeferredValue=function(e){return An.current.useDeferredValue(e)};vt.useEffect=function(e,t){return An.current.useEffect(e,t)};vt.useId=function(){return An.current.useId()};vt.useImperativeHandle=function(e,t,r){return An.current.useImperativeHandle(e,t,r)};vt.useInsertionEffect=function(e,t){return An.current.useInsertionEffect(e,t)};vt.useLayoutEffect=function(e,t){return An.current.useLayoutEffect(e,t)};vt.useMemo=function(e,t){return An.current.useMemo(e,t)};vt.useReducer=function(e,t,r){return An.current.useReducer(e,t,r)};vt.useRef=function(e){return An.current.useRef(e)};vt.useState=function(e){return An.current.useState(e)};vt.useSyncExternalStore=function(e,t,r){return An.current.useSyncExternalStore(e,t,r)};vt.useTransition=function(){return An.current.useTransition()};vt.version="18.3.1";p2.exports=vt;var v=p2.exports;const Yn=h2(v),S2=ZC({__proto__:null,default:Yn},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT=v,xT=Symbol.for("react.element"),gT=Symbol.for("react.fragment"),vT=Object.prototype.hasOwnProperty,yT=pT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wT={key:!0,ref:!0,__self:!0,__source:!0};function E2(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)vT.call(t,n)&&!wT.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:xT,type:e,key:i,ref:o,props:a,_owner:yT.current}}Ah.Fragment=gT;Ah.jsx=E2;Ah.jsxs=E2;m2.exports=Ah;var s=m2.exports,Dm={},_2={exports:{}},ls={},C2={exports:{}},T2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,re){var xe=K.length;K.push(re);e:for(;0<xe;){var J=xe-1>>>1,D=K[J];if(0<a(D,re))K[J]=re,K[xe]=D,xe=J;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var re=K[0],xe=K.pop();if(xe!==re){K[0]=xe;e:for(var J=0,D=K.length,X=D>>>1;J<X;){var V=2*(J+1)-1,E=K[V],I=V+1,G=K[I];if(0>a(E,xe))I<D&&0>a(G,E)?(K[J]=G,K[I]=xe,J=I):(K[J]=E,K[V]=xe,J=V);else if(I<D&&0>a(G,xe))K[J]=G,K[I]=xe,J=I;else break e}}return re}function a(K,re){var xe=K.sortIndex-re.sortIndex;return xe!==0?xe:K.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,f=3,p=!1,g=!1,h=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(K){for(var re=r(d);re!==null;){if(re.callback===null)n(d);else if(re.startTime<=K)n(d),re.sortIndex=re.expirationTime,t(c,re);else break;re=r(d)}}function j(K){if(h=!1,N(K),!g)if(r(c)!==null)g=!0,ae(b);else{var re=r(d);re!==null&&ne(j,re.startTime-K)}}function b(K,re){g=!1,h&&(h=!1,w(C),C=-1),p=!0;var xe=f;try{for(N(re),m=r(c);m!==null&&(!(m.expirationTime>re)||K&&!k());){var J=m.callback;if(typeof J=="function"){m.callback=null,f=m.priorityLevel;var D=J(m.expirationTime<=re);re=e.unstable_now(),typeof D=="function"?m.callback=D:m===r(c)&&n(c),N(re)}else n(c);m=r(c)}if(m!==null)var X=!0;else{var V=r(d);V!==null&&ne(j,V.startTime-re),X=!1}return X}finally{m=null,f=xe,p=!1}}var _=!1,S=null,C=-1,A=5,U=-1;function k(){return!(e.unstable_now()-U<A)}function R(){if(S!==null){var K=e.unstable_now();U=K;var re=!0;try{re=S(!0,K)}finally{re?te():(_=!1,S=null)}}else _=!1}var te;if(typeof y=="function")te=function(){y(R)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,se=Z.port2;Z.port1.onmessage=R,te=function(){se.postMessage(null)}}else te=function(){x(R,0)};function ae(K){S=K,_||(_=!0,te())}function ne(K,re){C=x(function(){K(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,ae(b))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(K){switch(f){case 1:case 2:case 3:var re=3;break;default:re=f}var xe=f;f=re;try{return K()}finally{f=xe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var xe=f;f=K;try{return re()}finally{f=xe}},e.unstable_scheduleCallback=function(K,re,xe){var J=e.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?J+xe:J):xe=J,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=xe+D,K={id:u++,callback:re,priorityLevel:K,startTime:xe,expirationTime:D,sortIndex:-1},xe>J?(K.sortIndex=xe,t(d,K),r(c)===null&&K===r(d)&&(h?(w(C),C=-1):h=!0,ne(j,xe-J))):(K.sortIndex=D,t(c,K),g||p||(g=!0,ae(b))),K},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(K){var re=f;return function(){var xe=f;f=re;try{return K.apply(this,arguments)}finally{f=xe}}}})(T2);C2.exports=T2;var NT=C2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT=v,as=NT;function De(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k2=new Set,id={};function Lo(e,t){Gl(e,t),Gl(e+"Capture",t)}function Gl(e,t){for(id[e]=t,e=0;e<t.length;e++)k2.add(t[e])}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rm=Object.prototype.hasOwnProperty,bT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jv={},Zv={};function ST(e){return Rm.call(Zv,e)?!0:Rm.call(Jv,e)?!1:bT.test(e)?Zv[e]=!0:(Jv[e]=!0,!1)}function ET(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _T(e,t,r,n){if(t===null||typeof t>"u"||ET(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function On(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nn[e]=new On(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nn[t]=new On(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nn[e]=new On(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nn[e]=new On(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nn[e]=new On(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nn[e]=new On(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nn[e]=new On(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nn[e]=new On(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nn[e]=new On(e,5,!1,e.toLowerCase(),null,!1,!1)});var jx=/[\-:]([a-z])/g;function bx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jx,bx);nn[t]=new On(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jx,bx);nn[t]=new On(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jx,bx);nn[t]=new On(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nn[e]=new On(e,1,!1,e.toLowerCase(),null,!1,!1)});nn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nn[e]=new On(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sx(e,t,r,n){var a=nn.hasOwnProperty(t)?nn[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_T(t,r,a,n)&&(r=null),n||a===null?ST(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var La=jT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ku=Symbol.for("react.element"),nl=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),Ex=Symbol.for("react.strict_mode"),Pm=Symbol.for("react.profiler"),A2=Symbol.for("react.provider"),O2=Symbol.for("react.context"),_x=Symbol.for("react.forward_ref"),Fm=Symbol.for("react.suspense"),Mm=Symbol.for("react.suspense_list"),Cx=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),D2=Symbol.for("react.offscreen"),e1=Symbol.iterator;function vc(e){return e===null||typeof e!="object"?null:(e=e1&&e[e1]||e["@@iterator"],typeof e=="function"?e:null)}var xr=Object.assign,C0;function Dc(e){if(C0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);C0=t&&t[1]||""}return`
`+C0+e}var T0=!1;function k0(e,t){if(!e||T0)return"";T0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{T0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Dc(e):""}function CT(e){switch(e.tag){case 5:return Dc(e.type);case 16:return Dc("Lazy");case 13:return Dc("Suspense");case 19:return Dc("SuspenseList");case 0:case 2:case 15:return e=k0(e.type,!1),e;case 11:return e=k0(e.type.render,!1),e;case 1:return e=k0(e.type,!0),e;default:return""}}function Im(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sl:return"Fragment";case nl:return"Portal";case Pm:return"Profiler";case Ex:return"StrictMode";case Fm:return"Suspense";case Mm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O2:return(e.displayName||"Context")+".Consumer";case A2:return(e._context.displayName||"Context")+".Provider";case _x:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cx:return t=e.displayName||null,t!==null?t:Im(e.type)||"Memo";case ti:t=e._payload,e=e._init;try{return Im(e(t))}catch{}}return null}function TT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Im(t);case 8:return t===Ex?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ki(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function R2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kT(e){var t=R2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Au(e){e._valueTracker||(e._valueTracker=kT(e))}function P2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=R2(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function kf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lm(e,t){var r=t.checked;return xr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function t1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ki(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F2(e,t){t=t.checked,t!=null&&Sx(e,"checked",t,!1)}function $m(e,t){F2(e,t);var r=ki(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Bm(e,t.type,ki(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Bm(e,t,r){(t!=="number"||kf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Rc=Array.isArray;function xl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ki(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Wm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(De(91));return xr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function n1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(De(92));if(Rc(r)){if(1<r.length)throw Error(De(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ki(r)}}function M2(e,t){var r=ki(t.value),n=ki(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function s1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function I2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Um(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?I2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ou,L2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ou=Ou||document.createElement("div"),Ou.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ou.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function od(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AT=["Webkit","ms","Moz","O"];Object.keys(Wc).forEach(function(e){AT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wc[t]=Wc[e]})});function $2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Wc.hasOwnProperty(e)&&Wc[e]?(""+t).trim():t+"px"}function B2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=$2(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var OT=xr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zm(e,t){if(t){if(OT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(De(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(De(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(De(61))}if(t.style!=null&&typeof t.style!="object")throw Error(De(62))}}function Hm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function Tx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gm=null,gl=null,vl=null;function a1(e){if(e=ru(e)){if(typeof Gm!="function")throw Error(De(280));var t=e.stateNode;t&&(t=Fh(t),Gm(e.stateNode,e.type,t))}}function W2(e){gl?vl?vl.push(e):vl=[e]:gl=e}function U2(){if(gl){var e=gl,t=vl;if(vl=gl=null,a1(e),t)for(e=0;e<t.length;e++)a1(t[e])}}function z2(e,t){return e(t)}function H2(){}var A0=!1;function V2(e,t,r){if(A0)return e(t,r);A0=!0;try{return z2(e,t,r)}finally{A0=!1,(gl!==null||vl!==null)&&(H2(),U2())}}function ld(e,t){var r=e.stateNode;if(r===null)return null;var n=Fh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(De(231,t,typeof r));return r}var qm=!1;if(Aa)try{var yc={};Object.defineProperty(yc,"passive",{get:function(){qm=!0}}),window.addEventListener("test",yc,yc),window.removeEventListener("test",yc,yc)}catch{qm=!1}function DT(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Uc=!1,Af=null,Of=!1,Xm=null,RT={onError:function(e){Uc=!0,Af=e}};function PT(e,t,r,n,a,i,o,l,c){Uc=!1,Af=null,DT.apply(RT,arguments)}function FT(e,t,r,n,a,i,o,l,c){if(PT.apply(this,arguments),Uc){if(Uc){var d=Af;Uc=!1,Af=null}else throw Error(De(198));Of||(Of=!0,Xm=d)}}function $o(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function G2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function i1(e){if($o(e)!==e)throw Error(De(188))}function MT(e){var t=e.alternate;if(!t){if(t=$o(e),t===null)throw Error(De(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return i1(a),e;if(i===n)return i1(a),t;i=i.sibling}throw Error(De(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(De(189))}}if(r.alternate!==n)throw Error(De(190))}if(r.tag!==3)throw Error(De(188));return r.stateNode.current===r?e:t}function q2(e){return e=MT(e),e!==null?X2(e):null}function X2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X2(e);if(t!==null)return t;e=e.sibling}return null}var K2=as.unstable_scheduleCallback,o1=as.unstable_cancelCallback,IT=as.unstable_shouldYield,LT=as.unstable_requestPaint,Er=as.unstable_now,$T=as.unstable_getCurrentPriorityLevel,kx=as.unstable_ImmediatePriority,Y2=as.unstable_UserBlockingPriority,Df=as.unstable_NormalPriority,BT=as.unstable_LowPriority,Q2=as.unstable_IdlePriority,Oh=null,la=null;function WT(e){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(Oh,e,void 0,(e.current.flags&128)===128)}catch{}}var $s=Math.clz32?Math.clz32:HT,UT=Math.log,zT=Math.LN2;function HT(e){return e>>>=0,e===0?32:31-(UT(e)/zT|0)|0}var Du=64,Ru=4194304;function Pc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Pc(l):(i&=o,i!==0&&(n=Pc(i)))}else o=r&~a,o!==0?n=Pc(o):i!==0&&(n=Pc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-$s(t),a=1<<r,n|=e[r],t&=~a;return n}function VT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GT(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-$s(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=VT(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Km(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function J2(){var e=Du;return Du<<=1,!(Du&4194240)&&(Du=64),e}function O0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function eu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$s(t),e[t]=r}function qT(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-$s(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Ax(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-$s(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ut=0;function Z2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eN,Ox,tN,rN,nN,Ym=!1,Pu=[],yi=null,wi=null,Ni=null,cd=new Map,dd=new Map,ni=[],XT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l1(e,t){switch(e){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":cd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dd.delete(t.pointerId)}}function wc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=ru(t),t!==null&&Ox(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function KT(e,t,r,n,a){switch(t){case"focusin":return yi=wc(yi,e,t,r,n,a),!0;case"dragenter":return wi=wc(wi,e,t,r,n,a),!0;case"mouseover":return Ni=wc(Ni,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return cd.set(i,wc(cd.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,dd.set(i,wc(dd.get(i)||null,e,t,r,n,a)),!0}return!1}function sN(e){var t=so(e.target);if(t!==null){var r=$o(t);if(r!==null){if(t=r.tag,t===13){if(t=G2(r),t!==null){e.blockedOn=t,nN(e.priority,function(){tN(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Vm=n,r.target.dispatchEvent(n),Vm=null}else return t=ru(r),t!==null&&Ox(t),e.blockedOn=r,!1;t.shift()}return!0}function c1(e,t,r){uf(e)&&r.delete(t)}function YT(){Ym=!1,yi!==null&&uf(yi)&&(yi=null),wi!==null&&uf(wi)&&(wi=null),Ni!==null&&uf(Ni)&&(Ni=null),cd.forEach(c1),dd.forEach(c1)}function Nc(e,t){e.blockedOn===t&&(e.blockedOn=null,Ym||(Ym=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,YT)))}function ud(e){function t(a){return Nc(a,e)}if(0<Pu.length){Nc(Pu[0],e);for(var r=1;r<Pu.length;r++){var n=Pu[r];n.blockedOn===e&&(n.blockedOn=null)}}for(yi!==null&&Nc(yi,e),wi!==null&&Nc(wi,e),Ni!==null&&Nc(Ni,e),cd.forEach(t),dd.forEach(t),r=0;r<ni.length;r++)n=ni[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ni.length&&(r=ni[0],r.blockedOn===null);)sN(r),r.blockedOn===null&&ni.shift()}var yl=La.ReactCurrentBatchConfig,Pf=!0;function QT(e,t,r,n){var a=Ut,i=yl.transition;yl.transition=null;try{Ut=1,Dx(e,t,r,n)}finally{Ut=a,yl.transition=i}}function JT(e,t,r,n){var a=Ut,i=yl.transition;yl.transition=null;try{Ut=4,Dx(e,t,r,n)}finally{Ut=a,yl.transition=i}}function Dx(e,t,r,n){if(Pf){var a=Qm(e,t,r,n);if(a===null)W0(e,t,n,Ff,r),l1(e,n);else if(KT(a,e,t,r,n))n.stopPropagation();else if(l1(e,n),t&4&&-1<XT.indexOf(e)){for(;a!==null;){var i=ru(a);if(i!==null&&eN(i),i=Qm(e,t,r,n),i===null&&W0(e,t,n,Ff,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else W0(e,t,n,null,r)}}var Ff=null;function Qm(e,t,r,n){if(Ff=null,e=Tx(n),e=so(e),e!==null)if(t=$o(e),t===null)e=null;else if(r=t.tag,r===13){if(e=G2(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ff=e,null}function aN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($T()){case kx:return 1;case Y2:return 4;case Df:case BT:return 16;case Q2:return 536870912;default:return 16}default:return 16}}var mi=null,Rx=null,ff=null;function iN(){if(ff)return ff;var e,t=Rx,r=t.length,n,a="value"in mi?mi.value:mi.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return ff=a.slice(e,1<n?1-n:void 0)}function hf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fu(){return!0}function d1(){return!1}function cs(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fu:d1,this.isPropagationStopped=d1,this}return xr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fu)},persist:function(){},isPersistent:Fu}),t}var ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Px=cs(ac),tu=xr({},ac,{view:0,detail:0}),ZT=cs(tu),D0,R0,jc,Dh=xr({},tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jc&&(jc&&e.type==="mousemove"?(D0=e.screenX-jc.screenX,R0=e.screenY-jc.screenY):R0=D0=0,jc=e),D0)},movementY:function(e){return"movementY"in e?e.movementY:R0}}),u1=cs(Dh),ek=xr({},Dh,{dataTransfer:0}),tk=cs(ek),rk=xr({},tu,{relatedTarget:0}),P0=cs(rk),nk=xr({},ac,{animationName:0,elapsedTime:0,pseudoElement:0}),sk=cs(nk),ak=xr({},ac,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ik=cs(ak),ok=xr({},ac,{data:0}),f1=cs(ok),lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ck={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dk[e])?!!t[e]:!1}function Fx(){return uk}var fk=xr({},tu,{key:function(e){if(e.key){var t=lk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ck[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fx,charCode:function(e){return e.type==="keypress"?hf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hk=cs(fk),mk=xr({},Dh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h1=cs(mk),pk=xr({},tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fx}),xk=cs(pk),gk=xr({},ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),vk=cs(gk),yk=xr({},Dh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wk=cs(yk),Nk=[9,13,27,32],Mx=Aa&&"CompositionEvent"in window,zc=null;Aa&&"documentMode"in document&&(zc=document.documentMode);var jk=Aa&&"TextEvent"in window&&!zc,oN=Aa&&(!Mx||zc&&8<zc&&11>=zc),m1=" ",p1=!1;function lN(e,t){switch(e){case"keyup":return Nk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var al=!1;function bk(e,t){switch(e){case"compositionend":return cN(t);case"keypress":return t.which!==32?null:(p1=!0,m1);case"textInput":return e=t.data,e===m1&&p1?null:e;default:return null}}function Sk(e,t){if(al)return e==="compositionend"||!Mx&&lN(e,t)?(e=iN(),ff=Rx=mi=null,al=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oN&&t.locale!=="ko"?null:t.data;default:return null}}var Ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ek[e.type]:t==="textarea"}function dN(e,t,r,n){W2(n),t=Mf(t,"onChange"),0<t.length&&(r=new Px("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hc=null,fd=null;function _k(e){NN(e,0)}function Rh(e){var t=ll(e);if(P2(t))return e}function Ck(e,t){if(e==="change")return t}var uN=!1;if(Aa){var F0;if(Aa){var M0="oninput"in document;if(!M0){var g1=document.createElement("div");g1.setAttribute("oninput","return;"),M0=typeof g1.oninput=="function"}F0=M0}else F0=!1;uN=F0&&(!document.documentMode||9<document.documentMode)}function v1(){Hc&&(Hc.detachEvent("onpropertychange",fN),fd=Hc=null)}function fN(e){if(e.propertyName==="value"&&Rh(fd)){var t=[];dN(t,fd,e,Tx(e)),V2(_k,t)}}function Tk(e,t,r){e==="focusin"?(v1(),Hc=t,fd=r,Hc.attachEvent("onpropertychange",fN)):e==="focusout"&&v1()}function kk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rh(fd)}function Ak(e,t){if(e==="click")return Rh(t)}function Ok(e,t){if(e==="input"||e==="change")return Rh(t)}function Dk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Us=typeof Object.is=="function"?Object.is:Dk;function hd(e,t){if(Us(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Rm.call(t,a)||!Us(e[a],t[a]))return!1}return!0}function y1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function w1(e,t){var r=y1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=y1(r)}}function hN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mN(){for(var e=window,t=kf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=kf(e.document)}return t}function Ix(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rk(e){var t=mN(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hN(r.ownerDocument.documentElement,r)){if(n!==null&&Ix(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=w1(r,i);var o=w1(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pk=Aa&&"documentMode"in document&&11>=document.documentMode,il=null,Jm=null,Vc=null,Zm=!1;function N1(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zm||il==null||il!==kf(n)||(n=il,"selectionStart"in n&&Ix(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vc&&hd(Vc,n)||(Vc=n,n=Mf(Jm,"onSelect"),0<n.length&&(t=new Px("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=il)))}function Mu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ol={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionend:Mu("Transition","TransitionEnd")},I0={},pN={};Aa&&(pN=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Ph(e){if(I0[e])return I0[e];if(!ol[e])return e;var t=ol[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in pN)return I0[e]=t[r];return e}var xN=Ph("animationend"),gN=Ph("animationiteration"),vN=Ph("animationstart"),yN=Ph("transitionend"),wN=new Map,j1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bi(e,t){wN.set(e,t),Lo(t,[e])}for(var L0=0;L0<j1.length;L0++){var $0=j1[L0],Fk=$0.toLowerCase(),Mk=$0[0].toUpperCase()+$0.slice(1);Bi(Fk,"on"+Mk)}Bi(xN,"onAnimationEnd");Bi(gN,"onAnimationIteration");Bi(vN,"onAnimationStart");Bi("dblclick","onDoubleClick");Bi("focusin","onFocus");Bi("focusout","onBlur");Bi(yN,"onTransitionEnd");Gl("onMouseEnter",["mouseout","mouseover"]);Gl("onMouseLeave",["mouseout","mouseover"]);Gl("onPointerEnter",["pointerout","pointerover"]);Gl("onPointerLeave",["pointerout","pointerover"]);Lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ik=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fc));function b1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,FT(n,t,void 0,e),e.currentTarget=null}function NN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;b1(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;b1(a,l,d),i=c}}}if(Of)throw e=Xm,Of=!1,Xm=null,e}function ar(e,t){var r=t[sp];r===void 0&&(r=t[sp]=new Set);var n=e+"__bubble";r.has(n)||(jN(t,e,2,!1),r.add(n))}function B0(e,t,r){var n=0;t&&(n|=4),jN(r,e,n,t)}var Iu="_reactListening"+Math.random().toString(36).slice(2);function md(e){if(!e[Iu]){e[Iu]=!0,k2.forEach(function(r){r!=="selectionchange"&&(Ik.has(r)||B0(r,!1,e),B0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Iu]||(t[Iu]=!0,B0("selectionchange",!1,t))}}function jN(e,t,r,n){switch(aN(t)){case 1:var a=QT;break;case 4:a=JT;break;default:a=Dx}r=a.bind(null,t,r,e),a=void 0,!qm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function W0(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=so(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}V2(function(){var d=i,u=Tx(r),m=[];e:{var f=wN.get(e);if(f!==void 0){var p=Px,g=e;switch(e){case"keypress":if(hf(r)===0)break e;case"keydown":case"keyup":p=hk;break;case"focusin":g="focus",p=P0;break;case"focusout":g="blur",p=P0;break;case"beforeblur":case"afterblur":p=P0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=u1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=xk;break;case xN:case gN:case vN:p=sk;break;case yN:p=vk;break;case"scroll":p=ZT;break;case"wheel":p=wk;break;case"copy":case"cut":case"paste":p=ik;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=h1}var h=(t&4)!==0,x=!h&&e==="scroll",w=h?f!==null?f+"Capture":null:f;h=[];for(var y=d,N;y!==null;){N=y;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,w!==null&&(j=ld(y,w),j!=null&&h.push(pd(y,j,N)))),x)break;y=y.return}0<h.length&&(f=new p(f,g,null,r,u),m.push({event:f,listeners:h}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Vm&&(g=r.relatedTarget||r.fromElement)&&(so(g)||g[Oa]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=d,g=g?so(g):null,g!==null&&(x=$o(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=d),p!==g)){if(h=u1,j="onMouseLeave",w="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(h=h1,j="onPointerLeave",w="onPointerEnter",y="pointer"),x=p==null?f:ll(p),N=g==null?f:ll(g),f=new h(j,y+"leave",p,r,u),f.target=x,f.relatedTarget=N,j=null,so(u)===d&&(h=new h(w,y+"enter",g,r,u),h.target=N,h.relatedTarget=x,j=h),x=j,p&&g)t:{for(h=p,w=g,y=0,N=h;N;N=Xo(N))y++;for(N=0,j=w;j;j=Xo(j))N++;for(;0<y-N;)h=Xo(h),y--;for(;0<N-y;)w=Xo(w),N--;for(;y--;){if(h===w||w!==null&&h===w.alternate)break t;h=Xo(h),w=Xo(w)}h=null}else h=null;p!==null&&S1(m,f,p,h,!1),g!==null&&x!==null&&S1(m,x,g,h,!0)}}e:{if(f=d?ll(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var b=Ck;else if(x1(f))if(uN)b=Ok;else{b=kk;var _=Tk}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Ak);if(b&&(b=b(e,d))){dN(m,b,r,u);break e}_&&_(e,f,d),e==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Bm(f,"number",f.value)}switch(_=d?ll(d):window,e){case"focusin":(x1(_)||_.contentEditable==="true")&&(il=_,Jm=d,Vc=null);break;case"focusout":Vc=Jm=il=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,N1(m,r,u);break;case"selectionchange":if(Pk)break;case"keydown":case"keyup":N1(m,r,u)}var S;if(Mx)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else al?lN(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(oN&&r.locale!=="ko"&&(al||C!=="onCompositionStart"?C==="onCompositionEnd"&&al&&(S=iN()):(mi=u,Rx="value"in mi?mi.value:mi.textContent,al=!0)),_=Mf(d,C),0<_.length&&(C=new f1(C,e,null,r,u),m.push({event:C,listeners:_}),S?C.data=S:(S=cN(r),S!==null&&(C.data=S)))),(S=jk?bk(e,r):Sk(e,r))&&(d=Mf(d,"onBeforeInput"),0<d.length&&(u=new f1("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=S))}NN(m,t)})}function pd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Mf(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=ld(e,r),i!=null&&n.unshift(pd(e,i,a)),i=ld(e,t),i!=null&&n.push(pd(e,i,a))),e=e.return}return n}function Xo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S1(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=ld(r,i),c!=null&&o.unshift(pd(r,c,l))):a||(c=ld(r,i),c!=null&&o.push(pd(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Lk=/\r\n?/g,$k=/\u0000|\uFFFD/g;function E1(e){return(typeof e=="string"?e:""+e).replace(Lk,`
`).replace($k,"")}function Lu(e,t,r){if(t=E1(t),E1(e)!==t&&r)throw Error(De(425))}function If(){}var ep=null,tp=null;function rp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var np=typeof setTimeout=="function"?setTimeout:void 0,Bk=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,Wk=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(e){return _1.resolve(null).then(e).catch(Uk)}:np;function Uk(e){setTimeout(function(){throw e})}function U0(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),ud(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);ud(t)}function ji(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function C1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ic=Math.random().toString(36).slice(2),ra="__reactFiber$"+ic,xd="__reactProps$"+ic,Oa="__reactContainer$"+ic,sp="__reactEvents$"+ic,zk="__reactListeners$"+ic,Hk="__reactHandles$"+ic;function so(e){var t=e[ra];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Oa]||r[ra]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=C1(e);e!==null;){if(r=e[ra])return r;e=C1(e)}return t}e=r,r=e.parentNode}return null}function ru(e){return e=e[ra]||e[Oa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ll(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(De(33))}function Fh(e){return e[xd]||null}var ap=[],cl=-1;function Wi(e){return{current:e}}function ir(e){0>cl||(e.current=ap[cl],ap[cl]=null,cl--)}function er(e,t){cl++,ap[cl]=e.current,e.current=t}var Ai={},mn=Wi(Ai),In=Wi(!1),wo=Ai;function ql(e,t){var r=e.type.contextTypes;if(!r)return Ai;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ln(e){return e=e.childContextTypes,e!=null}function Lf(){ir(In),ir(mn)}function T1(e,t,r){if(mn.current!==Ai)throw Error(De(168));er(mn,t),er(In,r)}function bN(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(De(108,TT(e)||"Unknown",a));return xr({},r,n)}function $f(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,wo=mn.current,er(mn,e),er(In,In.current),!0}function k1(e,t,r){var n=e.stateNode;if(!n)throw Error(De(169));r?(e=bN(e,t,wo),n.__reactInternalMemoizedMergedChildContext=e,ir(In),ir(mn),er(mn,e)):ir(In),er(In,r)}var Na=null,Mh=!1,z0=!1;function SN(e){Na===null?Na=[e]:Na.push(e)}function Vk(e){Mh=!0,SN(e)}function Ui(){if(!z0&&Na!==null){z0=!0;var e=0,t=Ut;try{var r=Na;for(Ut=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Na=null,Mh=!1}catch(a){throw Na!==null&&(Na=Na.slice(e+1)),K2(kx,Ui),a}finally{Ut=t,z0=!1}}return null}var dl=[],ul=0,Bf=null,Wf=0,ms=[],ps=0,No=null,ba=1,Sa="";function Qi(e,t){dl[ul++]=Wf,dl[ul++]=Bf,Bf=e,Wf=t}function EN(e,t,r){ms[ps++]=ba,ms[ps++]=Sa,ms[ps++]=No,No=e;var n=ba;e=Sa;var a=32-$s(n)-1;n&=~(1<<a),r+=1;var i=32-$s(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ba=1<<32-$s(t)+a|r<<a|n,Sa=i+e}else ba=1<<i|r<<a|n,Sa=e}function Lx(e){e.return!==null&&(Qi(e,1),EN(e,1,0))}function $x(e){for(;e===Bf;)Bf=dl[--ul],dl[ul]=null,Wf=dl[--ul],dl[ul]=null;for(;e===No;)No=ms[--ps],ms[ps]=null,Sa=ms[--ps],ms[ps]=null,ba=ms[--ps],ms[ps]=null}var rs=null,ts=null,cr=!1,Ps=null;function _N(e,t){var r=vs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function A1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rs=e,ts=ji(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rs=e,ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=No!==null?{id:ba,overflow:Sa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=vs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rs=e,ts=null,!0):!1;default:return!1}}function ip(e){return(e.mode&1)!==0&&(e.flags&128)===0}function op(e){if(cr){var t=ts;if(t){var r=t;if(!A1(e,t)){if(ip(e))throw Error(De(418));t=ji(r.nextSibling);var n=rs;t&&A1(e,t)?_N(n,r):(e.flags=e.flags&-4097|2,cr=!1,rs=e)}}else{if(ip(e))throw Error(De(418));e.flags=e.flags&-4097|2,cr=!1,rs=e}}}function O1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rs=e}function $u(e){if(e!==rs)return!1;if(!cr)return O1(e),cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rp(e.type,e.memoizedProps)),t&&(t=ts)){if(ip(e))throw CN(),Error(De(418));for(;t;)_N(e,t),t=ji(t.nextSibling)}if(O1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(De(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ts=ji(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ts=null}}else ts=rs?ji(e.stateNode.nextSibling):null;return!0}function CN(){for(var e=ts;e;)e=ji(e.nextSibling)}function Xl(){ts=rs=null,cr=!1}function Bx(e){Ps===null?Ps=[e]:Ps.push(e)}var Gk=La.ReactCurrentBatchConfig;function bc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(De(309));var n=r.stateNode}if(!n)throw Error(De(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(De(284));if(!r._owner)throw Error(De(290,e))}return e}function Bu(e,t){throw e=Object.prototype.toString.call(t),Error(De(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function D1(e){var t=e._init;return t(e._payload)}function TN(e){function t(w,y){if(e){var N=w.deletions;N===null?(w.deletions=[y],w.flags|=16):N.push(y)}}function r(w,y){if(!e)return null;for(;y!==null;)t(w,y),y=y.sibling;return null}function n(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function a(w,y){return w=_i(w,y),w.index=0,w.sibling=null,w}function i(w,y,N){return w.index=N,e?(N=w.alternate,N!==null?(N=N.index,N<y?(w.flags|=2,y):N):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,y,N,j){return y===null||y.tag!==6?(y=Y0(N,w.mode,j),y.return=w,y):(y=a(y,N),y.return=w,y)}function c(w,y,N,j){var b=N.type;return b===sl?u(w,y,N.props.children,j,N.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ti&&D1(b)===y.type)?(j=a(y,N.props),j.ref=bc(w,y,N),j.return=w,j):(j=wf(N.type,N.key,N.props,null,w.mode,j),j.ref=bc(w,y,N),j.return=w,j)}function d(w,y,N,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==N.containerInfo||y.stateNode.implementation!==N.implementation?(y=Q0(N,w.mode,j),y.return=w,y):(y=a(y,N.children||[]),y.return=w,y)}function u(w,y,N,j,b){return y===null||y.tag!==7?(y=xo(N,w.mode,j,b),y.return=w,y):(y=a(y,N),y.return=w,y)}function m(w,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Y0(""+y,w.mode,N),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ku:return N=wf(y.type,y.key,y.props,null,w.mode,N),N.ref=bc(w,null,y),N.return=w,N;case nl:return y=Q0(y,w.mode,N),y.return=w,y;case ti:var j=y._init;return m(w,j(y._payload),N)}if(Rc(y)||vc(y))return y=xo(y,w.mode,N,null),y.return=w,y;Bu(w,y)}return null}function f(w,y,N,j){var b=y!==null?y.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return b!==null?null:l(w,y,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ku:return N.key===b?c(w,y,N,j):null;case nl:return N.key===b?d(w,y,N,j):null;case ti:return b=N._init,f(w,y,b(N._payload),j)}if(Rc(N)||vc(N))return b!==null?null:u(w,y,N,j,null);Bu(w,N)}return null}function p(w,y,N,j,b){if(typeof j=="string"&&j!==""||typeof j=="number")return w=w.get(N)||null,l(y,w,""+j,b);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ku:return w=w.get(j.key===null?N:j.key)||null,c(y,w,j,b);case nl:return w=w.get(j.key===null?N:j.key)||null,d(y,w,j,b);case ti:var _=j._init;return p(w,y,N,_(j._payload),b)}if(Rc(j)||vc(j))return w=w.get(N)||null,u(y,w,j,b,null);Bu(y,j)}return null}function g(w,y,N,j){for(var b=null,_=null,S=y,C=y=0,A=null;S!==null&&C<N.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var U=f(w,S,N[C],j);if(U===null){S===null&&(S=A);break}e&&S&&U.alternate===null&&t(w,S),y=i(U,y,C),_===null?b=U:_.sibling=U,_=U,S=A}if(C===N.length)return r(w,S),cr&&Qi(w,C),b;if(S===null){for(;C<N.length;C++)S=m(w,N[C],j),S!==null&&(y=i(S,y,C),_===null?b=S:_.sibling=S,_=S);return cr&&Qi(w,C),b}for(S=n(w,S);C<N.length;C++)A=p(S,w,C,N[C],j),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),y=i(A,y,C),_===null?b=A:_.sibling=A,_=A);return e&&S.forEach(function(k){return t(w,k)}),cr&&Qi(w,C),b}function h(w,y,N,j){var b=vc(N);if(typeof b!="function")throw Error(De(150));if(N=b.call(N),N==null)throw Error(De(151));for(var _=b=null,S=y,C=y=0,A=null,U=N.next();S!==null&&!U.done;C++,U=N.next()){S.index>C?(A=S,S=null):A=S.sibling;var k=f(w,S,U.value,j);if(k===null){S===null&&(S=A);break}e&&S&&k.alternate===null&&t(w,S),y=i(k,y,C),_===null?b=k:_.sibling=k,_=k,S=A}if(U.done)return r(w,S),cr&&Qi(w,C),b;if(S===null){for(;!U.done;C++,U=N.next())U=m(w,U.value,j),U!==null&&(y=i(U,y,C),_===null?b=U:_.sibling=U,_=U);return cr&&Qi(w,C),b}for(S=n(w,S);!U.done;C++,U=N.next())U=p(S,w,C,U.value,j),U!==null&&(e&&U.alternate!==null&&S.delete(U.key===null?C:U.key),y=i(U,y,C),_===null?b=U:_.sibling=U,_=U);return e&&S.forEach(function(R){return t(w,R)}),cr&&Qi(w,C),b}function x(w,y,N,j){if(typeof N=="object"&&N!==null&&N.type===sl&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ku:e:{for(var b=N.key,_=y;_!==null;){if(_.key===b){if(b=N.type,b===sl){if(_.tag===7){r(w,_.sibling),y=a(_,N.props.children),y.return=w,w=y;break e}}else if(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===ti&&D1(b)===_.type){r(w,_.sibling),y=a(_,N.props),y.ref=bc(w,_,N),y.return=w,w=y;break e}r(w,_);break}else t(w,_);_=_.sibling}N.type===sl?(y=xo(N.props.children,w.mode,j,N.key),y.return=w,w=y):(j=wf(N.type,N.key,N.props,null,w.mode,j),j.ref=bc(w,y,N),j.return=w,w=j)}return o(w);case nl:e:{for(_=N.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===N.containerInfo&&y.stateNode.implementation===N.implementation){r(w,y.sibling),y=a(y,N.children||[]),y.return=w,w=y;break e}else{r(w,y);break}else t(w,y);y=y.sibling}y=Q0(N,w.mode,j),y.return=w,w=y}return o(w);case ti:return _=N._init,x(w,y,_(N._payload),j)}if(Rc(N))return g(w,y,N,j);if(vc(N))return h(w,y,N,j);Bu(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,y!==null&&y.tag===6?(r(w,y.sibling),y=a(y,N),y.return=w,w=y):(r(w,y),y=Y0(N,w.mode,j),y.return=w,w=y),o(w)):r(w,y)}return x}var Kl=TN(!0),kN=TN(!1),Uf=Wi(null),zf=null,fl=null,Wx=null;function Ux(){Wx=fl=zf=null}function zx(e){var t=Uf.current;ir(Uf),e._currentValue=t}function lp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wl(e,t){zf=e,Wx=fl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fn=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Wx!==e)if(e={context:e,memoizedValue:t,next:null},fl===null){if(zf===null)throw Error(De(308));fl=e,zf.dependencies={lanes:0,firstContext:e}}else fl=fl.next=e;return t}var ao=null;function Hx(e){ao===null?ao=[e]:ao.push(e)}function AN(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Hx(t)):(r.next=a.next,a.next=r),t.interleaved=r,Da(e,n)}function Da(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ri=!1;function Vx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ON(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ea(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Nt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Da(e,r)}return a=n.interleaved,a===null?(t.next=t,Hx(n)):(t.next=a.next,a.next=t),n.interleaved=t,Da(e,r)}function mf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ax(e,r)}}function R1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hf(e,t,r,n){var a=e.updateQueue;ri=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,h=l;switch(f=t,p=r,h.tag){case 1:if(g=h.payload,typeof g=="function"){m=g.call(p,m,f);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=h.payload,f=typeof g=="function"?g.call(p,m,f):g,f==null)break e;m=xr({},m,f);break e;case 2:ri=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=m):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);bo|=o,e.lanes=o,e.memoizedState=m}}function P1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(De(191,a));a.call(n)}}}var nu={},ca=Wi(nu),gd=Wi(nu),vd=Wi(nu);function io(e){if(e===nu)throw Error(De(174));return e}function Gx(e,t){switch(er(vd,t),er(gd,e),er(ca,nu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Um(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Um(t,e)}ir(ca),er(ca,t)}function Yl(){ir(ca),ir(gd),ir(vd)}function DN(e){io(vd.current);var t=io(ca.current),r=Um(t,e.type);t!==r&&(er(gd,e),er(ca,r))}function qx(e){gd.current===e&&(ir(ca),ir(gd))}var mr=Wi(0);function Vf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var H0=[];function Xx(){for(var e=0;e<H0.length;e++)H0[e]._workInProgressVersionPrimary=null;H0.length=0}var pf=La.ReactCurrentDispatcher,V0=La.ReactCurrentBatchConfig,jo=0,pr=null,Mr=null,Wr=null,Gf=!1,Gc=!1,yd=0,qk=0;function ln(){throw Error(De(321))}function Kx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Us(e[r],t[r]))return!1;return!0}function Yx(e,t,r,n,a,i){if(jo=i,pr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pf.current=e===null||e.memoizedState===null?Qk:Jk,e=r(n,a),Gc){i=0;do{if(Gc=!1,yd=0,25<=i)throw Error(De(301));i+=1,Wr=Mr=null,t.updateQueue=null,pf.current=Zk,e=r(n,a)}while(Gc)}if(pf.current=qf,t=Mr!==null&&Mr.next!==null,jo=0,Wr=Mr=pr=null,Gf=!1,t)throw Error(De(300));return e}function Qx(){var e=yd!==0;return yd=0,e}function Qs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?pr.memoizedState=Wr=e:Wr=Wr.next=e,Wr}function js(){if(Mr===null){var e=pr.alternate;e=e!==null?e.memoizedState:null}else e=Mr.next;var t=Wr===null?pr.memoizedState:Wr.next;if(t!==null)Wr=t,Mr=e;else{if(e===null)throw Error(De(310));Mr=e,e={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Wr===null?pr.memoizedState=Wr=e:Wr=Wr.next=e}return Wr}function wd(e,t){return typeof t=="function"?t(e):t}function G0(e){var t=js(),r=t.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=e;var n=Mr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((jo&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,pr.lanes|=u,bo|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,Us(n,t.memoizedState)||(Fn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,pr.lanes|=i,bo|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function q0(e){var t=js(),r=t.queue;if(r===null)throw Error(De(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Us(i,t.memoizedState)||(Fn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function RN(){}function PN(e,t){var r=pr,n=js(),a=t(),i=!Us(n.memoizedState,a);if(i&&(n.memoizedState=a,Fn=!0),n=n.queue,Jx(IN.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Wr!==null&&Wr.memoizedState.tag&1){if(r.flags|=2048,Nd(9,MN.bind(null,r,n,a,t),void 0,null),qr===null)throw Error(De(349));jo&30||FN(r,t,a)}return a}function FN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function MN(e,t,r,n){t.value=r,t.getSnapshot=n,LN(t)&&$N(e)}function IN(e,t,r){return r(function(){LN(t)&&$N(e)})}function LN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Us(e,r)}catch{return!0}}function $N(e){var t=Da(e,1);t!==null&&Bs(t,e,1,-1)}function F1(e){var t=Qs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wd,lastRenderedState:e},t.queue=e,e=e.dispatch=Yk.bind(null,pr,e),[t.memoizedState,e]}function Nd(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=pr.updateQueue,t===null?(t={lastEffect:null,stores:null},pr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function BN(){return js().memoizedState}function xf(e,t,r,n){var a=Qs();pr.flags|=e,a.memoizedState=Nd(1|t,r,void 0,n===void 0?null:n)}function Ih(e,t,r,n){var a=js();n=n===void 0?null:n;var i=void 0;if(Mr!==null){var o=Mr.memoizedState;if(i=o.destroy,n!==null&&Kx(n,o.deps)){a.memoizedState=Nd(t,r,i,n);return}}pr.flags|=e,a.memoizedState=Nd(1|t,r,i,n)}function M1(e,t){return xf(8390656,8,e,t)}function Jx(e,t){return Ih(2048,8,e,t)}function WN(e,t){return Ih(4,2,e,t)}function UN(e,t){return Ih(4,4,e,t)}function zN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function HN(e,t,r){return r=r!=null?r.concat([e]):null,Ih(4,4,zN.bind(null,t,e),r)}function Zx(){}function VN(e,t){var r=js();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Kx(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function GN(e,t){var r=js();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Kx(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function qN(e,t,r){return jo&21?(Us(r,t)||(r=J2(),pr.lanes|=r,bo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fn=!0),e.memoizedState=r)}function Xk(e,t){var r=Ut;Ut=r!==0&&4>r?r:4,e(!0);var n=V0.transition;V0.transition={};try{e(!1),t()}finally{Ut=r,V0.transition=n}}function XN(){return js().memoizedState}function Kk(e,t,r){var n=Ei(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},KN(e))YN(t,r);else if(r=AN(e,t,r,n),r!==null){var a=_n();Bs(r,e,n,a),QN(r,t,n)}}function Yk(e,t,r){var n=Ei(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(KN(e))YN(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Us(l,o)){var c=t.interleaved;c===null?(a.next=a,Hx(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=AN(e,t,a,n),r!==null&&(a=_n(),Bs(r,e,n,a),QN(r,t,n))}}function KN(e){var t=e.alternate;return e===pr||t!==null&&t===pr}function YN(e,t){Gc=Gf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function QN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ax(e,r)}}var qf={readContext:Ns,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},Qk={readContext:Ns,useCallback:function(e,t){return Qs().memoizedState=[e,t===void 0?null:t],e},useContext:Ns,useEffect:M1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xf(4194308,4,zN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xf(4194308,4,e,t)},useInsertionEffect:function(e,t){return xf(4,2,e,t)},useMemo:function(e,t){var r=Qs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Qs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Kk.bind(null,pr,e),[n.memoizedState,e]},useRef:function(e){var t=Qs();return e={current:e},t.memoizedState=e},useState:F1,useDebugValue:Zx,useDeferredValue:function(e){return Qs().memoizedState=e},useTransition:function(){var e=F1(!1),t=e[0];return e=Xk.bind(null,e[1]),Qs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=pr,a=Qs();if(cr){if(r===void 0)throw Error(De(407));r=r()}else{if(r=t(),qr===null)throw Error(De(349));jo&30||FN(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,M1(IN.bind(null,n,i,e),[e]),n.flags|=2048,Nd(9,MN.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Qs(),t=qr.identifierPrefix;if(cr){var r=Sa,n=ba;r=(n&~(1<<32-$s(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=yd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=qk++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jk={readContext:Ns,useCallback:VN,useContext:Ns,useEffect:Jx,useImperativeHandle:HN,useInsertionEffect:WN,useLayoutEffect:UN,useMemo:GN,useReducer:G0,useRef:BN,useState:function(){return G0(wd)},useDebugValue:Zx,useDeferredValue:function(e){var t=js();return qN(t,Mr.memoizedState,e)},useTransition:function(){var e=G0(wd)[0],t=js().memoizedState;return[e,t]},useMutableSource:RN,useSyncExternalStore:PN,useId:XN,unstable_isNewReconciler:!1},Zk={readContext:Ns,useCallback:VN,useContext:Ns,useEffect:Jx,useImperativeHandle:HN,useInsertionEffect:WN,useLayoutEffect:UN,useMemo:GN,useReducer:q0,useRef:BN,useState:function(){return q0(wd)},useDebugValue:Zx,useDeferredValue:function(e){var t=js();return Mr===null?t.memoizedState=e:qN(t,Mr.memoizedState,e)},useTransition:function(){var e=q0(wd)[0],t=js().memoizedState;return[e,t]},useMutableSource:RN,useSyncExternalStore:PN,useId:XN,unstable_isNewReconciler:!1};function Os(e,t){if(e&&e.defaultProps){t=xr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function cp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:xr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Lh={isMounted:function(e){return(e=e._reactInternals)?$o(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_n(),a=Ei(e),i=Ea(n,a);i.payload=t,r!=null&&(i.callback=r),t=bi(e,i,a),t!==null&&(Bs(t,e,a,n),mf(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_n(),a=Ei(e),i=Ea(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=bi(e,i,a),t!==null&&(Bs(t,e,a,n),mf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_n(),n=Ei(e),a=Ea(r,n);a.tag=2,t!=null&&(a.callback=t),t=bi(e,a,n),t!==null&&(Bs(t,e,n,r),mf(t,e,n))}};function I1(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!hd(r,n)||!hd(a,i):!0}function JN(e,t,r){var n=!1,a=Ai,i=t.contextType;return typeof i=="object"&&i!==null?i=Ns(i):(a=Ln(t)?wo:mn.current,n=t.contextTypes,i=(n=n!=null)?ql(e,a):Ai),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function L1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lh.enqueueReplaceState(t,t.state,null)}function dp(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Vx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ns(i):(i=Ln(t)?wo:mn.current,a.context=ql(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(cp(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Lh.enqueueReplaceState(a,a.state,null),Hf(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ql(e,t){try{var r="",n=t;do r+=CT(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function X0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function up(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var e3=typeof WeakMap=="function"?WeakMap:Map;function ZN(e,t,r){r=Ea(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Kf||(Kf=!0,Np=n),up(e,t)},r}function ej(e,t,r){r=Ea(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){up(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){up(e,t),typeof n!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function $1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new e3;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=m3.bind(null,e,t,r),t.then(e,e))}function B1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function W1(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ea(-1,1),t.tag=2,bi(r,t,1))),r.lanes|=1),e)}var t3=La.ReactCurrentOwner,Fn=!1;function jn(e,t,r,n){t.child=e===null?kN(t,null,r,n):Kl(t,e.child,r,n)}function U1(e,t,r,n,a){r=r.render;var i=t.ref;return wl(t,a),n=Yx(e,t,r,n,i,a),r=Qx(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ra(e,t,a)):(cr&&r&&Lx(t),t.flags|=1,jn(e,t,n,a),t.child)}function z1(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!og(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,tj(e,t,i,n,a)):(e=wf(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:hd,r(o,n)&&e.ref===t.ref)return Ra(e,t,a)}return t.flags|=1,e=_i(i,n),e.ref=t.ref,e.return=t,t.child=e}function tj(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(hd(i,n)&&e.ref===t.ref)if(Fn=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Fn=!0);else return t.lanes=e.lanes,Ra(e,t,a)}return fp(e,t,r,n,a)}function rj(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(ml,Kn),Kn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,er(ml,Kn),Kn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,er(ml,Kn),Kn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,er(ml,Kn),Kn|=n;return jn(e,t,a,r),t.child}function nj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fp(e,t,r,n,a){var i=Ln(r)?wo:mn.current;return i=ql(t,i),wl(t,a),r=Yx(e,t,r,n,i,a),n=Qx(),e!==null&&!Fn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ra(e,t,a)):(cr&&n&&Lx(t),t.flags|=1,jn(e,t,r,a),t.child)}function H1(e,t,r,n,a){if(Ln(r)){var i=!0;$f(t)}else i=!1;if(wl(t,a),t.stateNode===null)gf(e,t),JN(t,r,n),dp(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Ns(d):(d=Ln(r)?wo:mn.current,d=ql(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&L1(t,o,n,d),ri=!1;var f=t.memoizedState;o.state=f,Hf(t,n,o,a),c=t.memoizedState,l!==n||f!==c||In.current||ri?(typeof u=="function"&&(cp(t,r,u,n),c=t.memoizedState),(l=ri||I1(t,r,l,n,f,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ON(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Os(t.type,l),o.props=d,m=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ns(c):(c=Ln(r)?wo:mn.current,c=ql(t,c));var p=r.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||f!==c)&&L1(t,o,n,c),ri=!1,f=t.memoizedState,o.state=f,Hf(t,n,o,a);var g=t.memoizedState;l!==m||f!==g||In.current||ri?(typeof p=="function"&&(cp(t,r,p,n),g=t.memoizedState),(d=ri||I1(t,r,d,n,f,g,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return hp(e,t,r,n,i,a)}function hp(e,t,r,n,a,i){nj(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&k1(t,r,!1),Ra(e,t,i);n=t.stateNode,t3.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Kl(t,e.child,null,i),t.child=Kl(t,null,l,i)):jn(e,t,l,i),t.memoizedState=n.state,a&&k1(t,r,!0),t.child}function sj(e){var t=e.stateNode;t.pendingContext?T1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&T1(e,t.context,!1),Gx(e,t.containerInfo)}function V1(e,t,r,n,a){return Xl(),Bx(a),t.flags|=256,jn(e,t,r,n),t.child}var mp={dehydrated:null,treeContext:null,retryLane:0};function pp(e){return{baseLanes:e,cachePool:null,transitions:null}}function aj(e,t,r){var n=t.pendingProps,a=mr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),er(mr,a&1),e===null)return op(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wh(o,n,0,null),e=xo(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pp(r),t.memoizedState=mp,e):eg(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return r3(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=_i(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=_i(l,i):(i=xo(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?pp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=mp,n}return i=e.child,e=i.sibling,n=_i(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function eg(e,t){return t=Wh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wu(e,t,r,n){return n!==null&&Bx(n),Kl(t,e.child,null,r),e=eg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function r3(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=X0(Error(De(422))),Wu(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Wh({mode:"visible",children:n.children},a,0,null),i=xo(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Kl(t,e.child,null,o),t.child.memoizedState=pp(o),t.memoizedState=mp,i);if(!(t.mode&1))return Wu(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(De(419)),n=X0(i,n,void 0),Wu(e,t,o,n)}if(l=(o&e.childLanes)!==0,Fn||l){if(n=qr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Da(e,a),Bs(n,e,a,-1))}return ig(),n=X0(Error(De(421))),Wu(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=p3.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ts=ji(a.nextSibling),rs=t,cr=!0,Ps=null,e!==null&&(ms[ps++]=ba,ms[ps++]=Sa,ms[ps++]=No,ba=e.id,Sa=e.overflow,No=t),t=eg(t,n.children),t.flags|=4096,t)}function G1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),lp(e.return,t,r)}function K0(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function ij(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(jn(e,t,n.children,r),n=mr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&G1(e,r,t);else if(e.tag===19)G1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(er(mr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Vf(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),K0(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Vf(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}K0(t,!0,r,null,i);break;case"together":K0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ra(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),bo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(De(153));if(t.child!==null){for(e=t.child,r=_i(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_i(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function n3(e,t,r){switch(t.tag){case 3:sj(t),Xl();break;case 5:DN(t);break;case 1:Ln(t.type)&&$f(t);break;case 4:Gx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;er(Uf,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(er(mr,mr.current&1),t.flags|=128,null):r&t.child.childLanes?aj(e,t,r):(er(mr,mr.current&1),e=Ra(e,t,r),e!==null?e.sibling:null);er(mr,mr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ij(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),er(mr,mr.current),n)break;return null;case 22:case 23:return t.lanes=0,rj(e,t,r)}return Ra(e,t,r)}var oj,xp,lj,cj;oj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xp=function(){};lj=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,io(ca.current);var i=null;switch(r){case"input":a=Lm(e,a),n=Lm(e,n),i=[];break;case"select":a=xr({},a,{value:void 0}),n=xr({},n,{value:void 0}),i=[];break;case"textarea":a=Wm(e,a),n=Wm(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=If)}zm(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(id.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(id.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ar("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};cj=function(e,t,r,n){r!==n&&(t.flags|=4)};function Sc(e,t){if(!cr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function cn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function s3(e,t,r){var n=t.pendingProps;switch($x(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(t),null;case 1:return Ln(t.type)&&Lf(),cn(t),null;case 3:return n=t.stateNode,Yl(),ir(In),ir(mn),Xx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($u(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ps!==null&&(Sp(Ps),Ps=null))),xp(e,t),cn(t),null;case 5:qx(t);var a=io(vd.current);if(r=t.type,e!==null&&t.stateNode!=null)lj(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(De(166));return cn(t),null}if(e=io(ca.current),$u(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ra]=t,n[xd]=i,e=(t.mode&1)!==0,r){case"dialog":ar("cancel",n),ar("close",n);break;case"iframe":case"object":case"embed":ar("load",n);break;case"video":case"audio":for(a=0;a<Fc.length;a++)ar(Fc[a],n);break;case"source":ar("error",n);break;case"img":case"image":case"link":ar("error",n),ar("load",n);break;case"details":ar("toggle",n);break;case"input":t1(n,i),ar("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ar("invalid",n);break;case"textarea":n1(n,i),ar("invalid",n)}zm(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Lu(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Lu(n.textContent,l,e),a=["children",""+l]):id.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ar("scroll",n)}switch(r){case"input":Au(n),r1(n,i,!0);break;case"textarea":Au(n),s1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=If)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=I2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ra]=t,e[xd]=n,oj(e,t,!1,!1),t.stateNode=e;e:{switch(o=Hm(r,n),r){case"dialog":ar("cancel",e),ar("close",e),a=n;break;case"iframe":case"object":case"embed":ar("load",e),a=n;break;case"video":case"audio":for(a=0;a<Fc.length;a++)ar(Fc[a],e);a=n;break;case"source":ar("error",e),a=n;break;case"img":case"image":case"link":ar("error",e),ar("load",e),a=n;break;case"details":ar("toggle",e),a=n;break;case"input":t1(e,n),a=Lm(e,n),ar("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=xr({},n,{value:void 0}),ar("invalid",e);break;case"textarea":n1(e,n),a=Wm(e,n),ar("invalid",e);break;default:a=n}zm(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?B2(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&L2(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&od(e,c):typeof c=="number"&&od(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(id.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ar("scroll",e):c!=null&&Sx(e,i,c,o))}switch(r){case"input":Au(e),r1(e,n,!1);break;case"textarea":Au(e),s1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ki(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?xl(e,!!n.multiple,i,!1):n.defaultValue!=null&&xl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=If)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cn(t),null;case 6:if(e&&t.stateNode!=null)cj(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(De(166));if(r=io(vd.current),io(ca.current),$u(t)){if(n=t.stateNode,r=t.memoizedProps,n[ra]=t,(i=n.nodeValue!==r)&&(e=rs,e!==null))switch(e.tag){case 3:Lu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lu(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ra]=t,t.stateNode=n}return cn(t),null;case 13:if(ir(mr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cr&&ts!==null&&t.mode&1&&!(t.flags&128))CN(),Xl(),t.flags|=98560,i=!1;else if(i=$u(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(De(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(De(317));i[ra]=t}else Xl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cn(t),i=!1}else Ps!==null&&(Sp(Ps),Ps=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||mr.current&1?Lr===0&&(Lr=3):ig())),t.updateQueue!==null&&(t.flags|=4),cn(t),null);case 4:return Yl(),xp(e,t),e===null&&md(t.stateNode.containerInfo),cn(t),null;case 10:return zx(t.type._context),cn(t),null;case 17:return Ln(t.type)&&Lf(),cn(t),null;case 19:if(ir(mr),i=t.memoizedState,i===null)return cn(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Sc(i,!1);else{if(Lr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Vf(e),o!==null){for(t.flags|=128,Sc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return er(mr,mr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Er()>Jl&&(t.flags|=128,n=!0,Sc(i,!1),t.lanes=4194304)}else{if(!n)if(e=Vf(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Sc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!cr)return cn(t),null}else 2*Er()-i.renderingStartTime>Jl&&r!==1073741824&&(t.flags|=128,n=!0,Sc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Er(),t.sibling=null,r=mr.current,er(mr,n?r&1|2:r&1),t):(cn(t),null);case 22:case 23:return ag(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Kn&1073741824&&(cn(t),t.subtreeFlags&6&&(t.flags|=8192)):cn(t),null;case 24:return null;case 25:return null}throw Error(De(156,t.tag))}function a3(e,t){switch($x(t),t.tag){case 1:return Ln(t.type)&&Lf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yl(),ir(In),ir(mn),Xx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return qx(t),null;case 13:if(ir(mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(De(340));Xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ir(mr),null;case 4:return Yl(),null;case 10:return zx(t.type._context),null;case 22:case 23:return ag(),null;case 24:return null;default:return null}}var Uu=!1,un=!1,i3=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function hl(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yr(e,t,n)}else r.current=null}function gp(e,t,r){try{r()}catch(n){yr(e,t,n)}}var q1=!1;function o3(e,t){if(ep=Pf,e=mN(),Ix(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var p;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(p=m.firstChild)!==null;)f=m,m=p;for(;;){if(m===e)break t;if(f===r&&++d===a&&(l=o),f===i&&++u===n&&(c=o),(p=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(tp={focusedElem:e,selectionRange:r},Pf=!1,Ke=t;Ke!==null;)if(t=Ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ke=e;else for(;Ke!==null;){t=Ke;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var h=g.memoizedProps,x=g.memoizedState,w=t.stateNode,y=w.getSnapshotBeforeUpdate(t.elementType===t.type?h:Os(t.type,h),x);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(De(163))}}catch(j){yr(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Ke=e;break}Ke=t.return}return g=q1,q1=!1,g}function qc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&gp(t,r,i)}a=a.next}while(a!==n)}}function $h(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function dj(e){var t=e.alternate;t!==null&&(e.alternate=null,dj(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ra],delete t[xd],delete t[sp],delete t[zk],delete t[Hk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uj(e){return e.tag===5||e.tag===3||e.tag===4}function X1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=If));else if(n!==4&&(e=e.child,e!==null))for(yp(e,t,r),e=e.sibling;e!==null;)yp(e,t,r),e=e.sibling}function wp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(wp(e,t,r),e=e.sibling;e!==null;)wp(e,t,r),e=e.sibling}var Qr=null,Rs=!1;function Va(e,t,r){for(r=r.child;r!==null;)fj(e,t,r),r=r.sibling}function fj(e,t,r){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(Oh,r)}catch{}switch(r.tag){case 5:un||hl(r,t);case 6:var n=Qr,a=Rs;Qr=null,Va(e,t,r),Qr=n,Rs=a,Qr!==null&&(Rs?(e=Qr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Qr.removeChild(r.stateNode));break;case 18:Qr!==null&&(Rs?(e=Qr,r=r.stateNode,e.nodeType===8?U0(e.parentNode,r):e.nodeType===1&&U0(e,r),ud(e)):U0(Qr,r.stateNode));break;case 4:n=Qr,a=Rs,Qr=r.stateNode.containerInfo,Rs=!0,Va(e,t,r),Qr=n,Rs=a;break;case 0:case 11:case 14:case 15:if(!un&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gp(r,t,o),a=a.next}while(a!==n)}Va(e,t,r);break;case 1:if(!un&&(hl(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){yr(r,t,l)}Va(e,t,r);break;case 21:Va(e,t,r);break;case 22:r.mode&1?(un=(n=un)||r.memoizedState!==null,Va(e,t,r),un=n):Va(e,t,r);break;default:Va(e,t,r)}}function K1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new i3),t.forEach(function(n){var a=x3.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Cs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qr=l.stateNode,Rs=!1;break e;case 3:Qr=l.stateNode.containerInfo,Rs=!0;break e;case 4:Qr=l.stateNode.containerInfo,Rs=!0;break e}l=l.return}if(Qr===null)throw Error(De(160));fj(i,o,a),Qr=null,Rs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){yr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hj(t,e),t=t.sibling}function hj(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cs(t,e),Xs(e),n&4){try{qc(3,e,e.return),$h(3,e)}catch(h){yr(e,e.return,h)}try{qc(5,e,e.return)}catch(h){yr(e,e.return,h)}}break;case 1:Cs(t,e),Xs(e),n&512&&r!==null&&hl(r,r.return);break;case 5:if(Cs(t,e),Xs(e),n&512&&r!==null&&hl(r,r.return),e.flags&32){var a=e.stateNode;try{od(a,"")}catch(h){yr(e,e.return,h)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&F2(a,i),Hm(l,o);var d=Hm(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?B2(a,m):u==="dangerouslySetInnerHTML"?L2(a,m):u==="children"?od(a,m):Sx(a,u,m,d)}switch(l){case"input":$m(a,i);break;case"textarea":M2(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?xl(a,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?xl(a,!!i.multiple,i.defaultValue,!0):xl(a,!!i.multiple,i.multiple?[]:"",!1))}a[xd]=i}catch(h){yr(e,e.return,h)}}break;case 6:if(Cs(t,e),Xs(e),n&4){if(e.stateNode===null)throw Error(De(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(h){yr(e,e.return,h)}}break;case 3:if(Cs(t,e),Xs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ud(t.containerInfo)}catch(h){yr(e,e.return,h)}break;case 4:Cs(t,e),Xs(e);break;case 13:Cs(t,e),Xs(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ng=Er())),n&4&&K1(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(un=(d=un)||u,Cs(t,e),un=d):Cs(t,e),Xs(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Ke=e,u=e.child;u!==null;){for(m=Ke=u;Ke!==null;){switch(f=Ke,p=f.child,f.tag){case 0:case 11:case 14:case 15:qc(4,f,f.return);break;case 1:hl(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(h){yr(n,r,h)}}break;case 5:hl(f,f.return);break;case 22:if(f.memoizedState!==null){Q1(m);continue}}p!==null?(p.return=f,Ke=p):Q1(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$2("display",o))}catch(h){yr(e,e.return,h)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(h){yr(e,e.return,h)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Cs(t,e),Xs(e),n&4&&K1(e);break;case 21:break;default:Cs(t,e),Xs(e)}}function Xs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(uj(r)){var n=r;break e}r=r.return}throw Error(De(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(od(a,""),n.flags&=-33);var i=X1(e);wp(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=X1(e);yp(e,l,o);break;default:throw Error(De(161))}}catch(c){yr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function l3(e,t,r){Ke=e,mj(e)}function mj(e,t,r){for(var n=(e.mode&1)!==0;Ke!==null;){var a=Ke,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Uu;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||un;l=Uu;var d=un;if(Uu=o,(un=c)&&!d)for(Ke=a;Ke!==null;)o=Ke,c=o.child,o.tag===22&&o.memoizedState!==null?J1(a):c!==null?(c.return=o,Ke=c):J1(a);for(;i!==null;)Ke=i,mj(i),i=i.sibling;Ke=a,Uu=l,un=d}Y1(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ke=i):Y1(e)}}function Y1(e){for(;Ke!==null;){var t=Ke;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:un||$h(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!un)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Os(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&P1(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}P1(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&ud(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(De(163))}un||t.flags&512&&vp(t)}catch(f){yr(t,t.return,f)}}if(t===e){Ke=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ke=r;break}Ke=t.return}}function Q1(e){for(;Ke!==null;){var t=Ke;if(t===e){Ke=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ke=r;break}Ke=t.return}}function J1(e){for(;Ke!==null;){var t=Ke;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$h(4,t)}catch(c){yr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){yr(t,a,c)}}var i=t.return;try{vp(t)}catch(c){yr(t,i,c)}break;case 5:var o=t.return;try{vp(t)}catch(c){yr(t,o,c)}}}catch(c){yr(t,t.return,c)}if(t===e){Ke=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ke=l;break}Ke=t.return}}var c3=Math.ceil,Xf=La.ReactCurrentDispatcher,tg=La.ReactCurrentOwner,ws=La.ReactCurrentBatchConfig,Nt=0,qr=null,Tr=null,tn=0,Kn=0,ml=Wi(0),Lr=0,jd=null,bo=0,Bh=0,rg=0,Xc=null,Pn=null,ng=0,Jl=1/0,wa=null,Kf=!1,Np=null,Si=null,zu=!1,pi=null,Yf=0,Kc=0,jp=null,vf=-1,yf=0;function _n(){return Nt&6?Er():vf!==-1?vf:vf=Er()}function Ei(e){return e.mode&1?Nt&2&&tn!==0?tn&-tn:Gk.transition!==null?(yf===0&&(yf=J2()),yf):(e=Ut,e!==0||(e=window.event,e=e===void 0?16:aN(e.type)),e):1}function Bs(e,t,r,n){if(50<Kc)throw Kc=0,jp=null,Error(De(185));eu(e,r,n),(!(Nt&2)||e!==qr)&&(e===qr&&(!(Nt&2)&&(Bh|=r),Lr===4&&si(e,tn)),$n(e,n),r===1&&Nt===0&&!(t.mode&1)&&(Jl=Er()+500,Mh&&Ui()))}function $n(e,t){var r=e.callbackNode;GT(e,t);var n=Rf(e,e===qr?tn:0);if(n===0)r!==null&&o1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&o1(r),t===1)e.tag===0?Vk(Z1.bind(null,e)):SN(Z1.bind(null,e)),Wk(function(){!(Nt&6)&&Ui()}),r=null;else{switch(Z2(n)){case 1:r=kx;break;case 4:r=Y2;break;case 16:r=Df;break;case 536870912:r=Q2;break;default:r=Df}r=jj(r,pj.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function pj(e,t){if(vf=-1,yf=0,Nt&6)throw Error(De(327));var r=e.callbackNode;if(Nl()&&e.callbackNode!==r)return null;var n=Rf(e,e===qr?tn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Qf(e,n);else{t=n;var a=Nt;Nt|=2;var i=gj();(qr!==e||tn!==t)&&(wa=null,Jl=Er()+500,po(e,t));do try{f3();break}catch(l){xj(e,l)}while(!0);Ux(),Xf.current=i,Nt=a,Tr!==null?t=0:(qr=null,tn=0,t=Lr)}if(t!==0){if(t===2&&(a=Km(e),a!==0&&(n=a,t=bp(e,a))),t===1)throw r=jd,po(e,0),si(e,n),$n(e,Er()),r;if(t===6)si(e,n);else{if(a=e.current.alternate,!(n&30)&&!d3(a)&&(t=Qf(e,n),t===2&&(i=Km(e),i!==0&&(n=i,t=bp(e,i))),t===1))throw r=jd,po(e,0),si(e,n),$n(e,Er()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(De(345));case 2:Ji(e,Pn,wa);break;case 3:if(si(e,n),(n&130023424)===n&&(t=ng+500-Er(),10<t)){if(Rf(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){_n(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=np(Ji.bind(null,e,Pn,wa),t);break}Ji(e,Pn,wa);break;case 4:if(si(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-$s(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Er()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*c3(n/1960))-n,10<n){e.timeoutHandle=np(Ji.bind(null,e,Pn,wa),n);break}Ji(e,Pn,wa);break;case 5:Ji(e,Pn,wa);break;default:throw Error(De(329))}}}return $n(e,Er()),e.callbackNode===r?pj.bind(null,e):null}function bp(e,t){var r=Xc;return e.current.memoizedState.isDehydrated&&(po(e,t).flags|=256),e=Qf(e,t),e!==2&&(t=Pn,Pn=r,t!==null&&Sp(t)),e}function Sp(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function d3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Us(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function si(e,t){for(t&=~rg,t&=~Bh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-$s(t),n=1<<r;e[r]=-1,t&=~n}}function Z1(e){if(Nt&6)throw Error(De(327));Nl();var t=Rf(e,0);if(!(t&1))return $n(e,Er()),null;var r=Qf(e,t);if(e.tag!==0&&r===2){var n=Km(e);n!==0&&(t=n,r=bp(e,n))}if(r===1)throw r=jd,po(e,0),si(e,t),$n(e,Er()),r;if(r===6)throw Error(De(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ji(e,Pn,wa),$n(e,Er()),null}function sg(e,t){var r=Nt;Nt|=1;try{return e(t)}finally{Nt=r,Nt===0&&(Jl=Er()+500,Mh&&Ui())}}function So(e){pi!==null&&pi.tag===0&&!(Nt&6)&&Nl();var t=Nt;Nt|=1;var r=ws.transition,n=Ut;try{if(ws.transition=null,Ut=1,e)return e()}finally{Ut=n,ws.transition=r,Nt=t,!(Nt&6)&&Ui()}}function ag(){Kn=ml.current,ir(ml)}function po(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Bk(r)),Tr!==null)for(r=Tr.return;r!==null;){var n=r;switch($x(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Lf();break;case 3:Yl(),ir(In),ir(mn),Xx();break;case 5:qx(n);break;case 4:Yl();break;case 13:ir(mr);break;case 19:ir(mr);break;case 10:zx(n.type._context);break;case 22:case 23:ag()}r=r.return}if(qr=e,Tr=e=_i(e.current,null),tn=Kn=t,Lr=0,jd=null,rg=Bh=bo=0,Pn=Xc=null,ao!==null){for(t=0;t<ao.length;t++)if(r=ao[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ao=null}return e}function xj(e,t){do{var r=Tr;try{if(Ux(),pf.current=qf,Gf){for(var n=pr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Gf=!1}if(jo=0,Wr=Mr=pr=null,Gc=!1,yd=0,tg.current=null,r===null||r.return===null){Lr=1,jd=t,Tr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=tn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=B1(o);if(p!==null){p.flags&=-257,W1(p,o,l,i,t),p.mode&1&&$1(i,d,t),t=p,c=d;var g=t.updateQueue;if(g===null){var h=new Set;h.add(c),t.updateQueue=h}else g.add(c);break e}else{if(!(t&1)){$1(i,d,t),ig();break e}c=Error(De(426))}}else if(cr&&l.mode&1){var x=B1(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),W1(x,o,l,i,t),Bx(Ql(c,l));break e}}i=c=Ql(c,l),Lr!==4&&(Lr=2),Xc===null?Xc=[i]:Xc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=ZN(i,c,t);R1(i,w);break e;case 1:l=c;var y=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Si===null||!Si.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=ej(i,l,t);R1(i,j);break e}}i=i.return}while(i!==null)}yj(r)}catch(b){t=b,Tr===r&&r!==null&&(Tr=r=r.return);continue}break}while(!0)}function gj(){var e=Xf.current;return Xf.current=qf,e===null?qf:e}function ig(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),qr===null||!(bo&268435455)&&!(Bh&268435455)||si(qr,tn)}function Qf(e,t){var r=Nt;Nt|=2;var n=gj();(qr!==e||tn!==t)&&(wa=null,po(e,t));do try{u3();break}catch(a){xj(e,a)}while(!0);if(Ux(),Nt=r,Xf.current=n,Tr!==null)throw Error(De(261));return qr=null,tn=0,Lr}function u3(){for(;Tr!==null;)vj(Tr)}function f3(){for(;Tr!==null&&!IT();)vj(Tr)}function vj(e){var t=Nj(e.alternate,e,Kn);e.memoizedProps=e.pendingProps,t===null?yj(e):Tr=t,tg.current=null}function yj(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=a3(r,t),r!==null){r.flags&=32767,Tr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Lr=6,Tr=null;return}}else if(r=s3(r,t,Kn),r!==null){Tr=r;return}if(t=t.sibling,t!==null){Tr=t;return}Tr=t=e}while(t!==null);Lr===0&&(Lr=5)}function Ji(e,t,r){var n=Ut,a=ws.transition;try{ws.transition=null,Ut=1,h3(e,t,r,n)}finally{ws.transition=a,Ut=n}return null}function h3(e,t,r,n){do Nl();while(pi!==null);if(Nt&6)throw Error(De(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(De(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(qT(e,i),e===qr&&(Tr=qr=null,tn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zu||(zu=!0,jj(Df,function(){return Nl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ws.transition,ws.transition=null;var o=Ut;Ut=1;var l=Nt;Nt|=4,tg.current=null,o3(e,r),hj(r,e),Rk(tp),Pf=!!ep,tp=ep=null,e.current=r,l3(r),LT(),Nt=l,Ut=o,ws.transition=i}else e.current=r;if(zu&&(zu=!1,pi=e,Yf=a),i=e.pendingLanes,i===0&&(Si=null),WT(r.stateNode),$n(e,Er()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Kf)throw Kf=!1,e=Np,Np=null,e;return Yf&1&&e.tag!==0&&Nl(),i=e.pendingLanes,i&1?e===jp?Kc++:(Kc=0,jp=e):Kc=0,Ui(),null}function Nl(){if(pi!==null){var e=Z2(Yf),t=ws.transition,r=Ut;try{if(ws.transition=null,Ut=16>e?16:e,pi===null)var n=!1;else{if(e=pi,pi=null,Yf=0,Nt&6)throw Error(De(331));var a=Nt;for(Nt|=4,Ke=e.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ke=d;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:qc(8,u,i)}var m=u.child;if(m!==null)m.return=u,Ke=m;else for(;Ke!==null;){u=Ke;var f=u.sibling,p=u.return;if(dj(u),u===d){Ke=null;break}if(f!==null){f.return=p,Ke=f;break}Ke=p}}}var g=i.alternate;if(g!==null){var h=g.child;if(h!==null){g.child=null;do{var x=h.sibling;h.sibling=null,h=x}while(h!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Ke=w;break e}Ke=i.return}}var y=e.current;for(Ke=y;Ke!==null;){o=Ke;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Ke=N;else e:for(o=y;Ke!==null;){if(l=Ke,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$h(9,l)}}catch(b){yr(l,l.return,b)}if(l===o){Ke=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Ke=j;break e}Ke=l.return}}if(Nt=a,Ui(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(Oh,e)}catch{}n=!0}return n}finally{Ut=r,ws.transition=t}}return!1}function ey(e,t,r){t=Ql(r,t),t=ZN(e,t,1),e=bi(e,t,1),t=_n(),e!==null&&(eu(e,1,t),$n(e,t))}function yr(e,t,r){if(e.tag===3)ey(e,e,r);else for(;t!==null;){if(t.tag===3){ey(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Si===null||!Si.has(n))){e=Ql(r,e),e=ej(t,e,1),t=bi(t,e,1),e=_n(),t!==null&&(eu(t,1,e),$n(t,e));break}}t=t.return}}function m3(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_n(),e.pingedLanes|=e.suspendedLanes&r,qr===e&&(tn&r)===r&&(Lr===4||Lr===3&&(tn&130023424)===tn&&500>Er()-ng?po(e,0):rg|=r),$n(e,t)}function wj(e,t){t===0&&(e.mode&1?(t=Ru,Ru<<=1,!(Ru&130023424)&&(Ru=4194304)):t=1);var r=_n();e=Da(e,t),e!==null&&(eu(e,t,r),$n(e,r))}function p3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wj(e,r)}function x3(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(De(314))}n!==null&&n.delete(t),wj(e,r)}var Nj;Nj=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||In.current)Fn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Fn=!1,n3(e,t,r);Fn=!!(e.flags&131072)}else Fn=!1,cr&&t.flags&1048576&&EN(t,Wf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;gf(e,t),e=t.pendingProps;var a=ql(t,mn.current);wl(t,r),a=Yx(null,t,n,e,a,r);var i=Qx();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ln(n)?(i=!0,$f(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Vx(t),a.updater=Lh,t.stateNode=a,a._reactInternals=t,dp(t,n,e,r),t=hp(null,t,n,!0,i,r)):(t.tag=0,cr&&i&&Lx(t),jn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(gf(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=v3(n),e=Os(n,e),a){case 0:t=fp(null,t,n,e,r);break e;case 1:t=H1(null,t,n,e,r);break e;case 11:t=U1(null,t,n,e,r);break e;case 14:t=z1(null,t,n,Os(n.type,e),r);break e}throw Error(De(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Os(n,a),fp(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Os(n,a),H1(e,t,n,a,r);case 3:e:{if(sj(t),e===null)throw Error(De(387));n=t.pendingProps,i=t.memoizedState,a=i.element,ON(e,t),Hf(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ql(Error(De(423)),t),t=V1(e,t,n,r,a);break e}else if(n!==a){a=Ql(Error(De(424)),t),t=V1(e,t,n,r,a);break e}else for(ts=ji(t.stateNode.containerInfo.firstChild),rs=t,cr=!0,Ps=null,r=kN(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xl(),n===a){t=Ra(e,t,r);break e}jn(e,t,n,r)}t=t.child}return t;case 5:return DN(t),e===null&&op(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,rp(n,a)?o=null:i!==null&&rp(n,i)&&(t.flags|=32),nj(e,t),jn(e,t,o,r),t.child;case 6:return e===null&&op(t),null;case 13:return aj(e,t,r);case 4:return Gx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Kl(t,null,n,r):jn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Os(n,a),U1(e,t,n,a,r);case 7:return jn(e,t,t.pendingProps,r),t.child;case 8:return jn(e,t,t.pendingProps.children,r),t.child;case 12:return jn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,er(Uf,n._currentValue),n._currentValue=o,i!==null)if(Us(i.value,o)){if(i.children===a.children&&!In.current){t=Ra(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ea(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),lp(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(De(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),lp(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,wl(t,r),a=Ns(a),n=n(a),t.flags|=1,jn(e,t,n,r),t.child;case 14:return n=t.type,a=Os(n,t.pendingProps),a=Os(n.type,a),z1(e,t,n,a,r);case 15:return tj(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Os(n,a),gf(e,t),t.tag=1,Ln(n)?(e=!0,$f(t)):e=!1,wl(t,r),JN(t,n,a),dp(t,n,a,r),hp(null,t,n,!0,e,r);case 19:return ij(e,t,r);case 22:return rj(e,t,r)}throw Error(De(156,t.tag))};function jj(e,t){return K2(e,t)}function g3(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(e,t,r,n){return new g3(e,t,r,n)}function og(e){return e=e.prototype,!(!e||!e.isReactComponent)}function v3(e){if(typeof e=="function")return og(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_x)return 11;if(e===Cx)return 14}return 2}function _i(e,t){var r=e.alternate;return r===null?(r=vs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wf(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")og(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case sl:return xo(r.children,a,i,t);case Ex:o=8,a|=8;break;case Pm:return e=vs(12,r,t,a|2),e.elementType=Pm,e.lanes=i,e;case Fm:return e=vs(13,r,t,a),e.elementType=Fm,e.lanes=i,e;case Mm:return e=vs(19,r,t,a),e.elementType=Mm,e.lanes=i,e;case D2:return Wh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A2:o=10;break e;case O2:o=9;break e;case _x:o=11;break e;case Cx:o=14;break e;case ti:o=16,n=null;break e}throw Error(De(130,e==null?e:typeof e,""))}return t=vs(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function xo(e,t,r,n){return e=vs(7,e,n,t),e.lanes=r,e}function Wh(e,t,r,n){return e=vs(22,e,n,t),e.elementType=D2,e.lanes=r,e.stateNode={isHidden:!1},e}function Y0(e,t,r){return e=vs(6,e,null,t),e.lanes=r,e}function Q0(e,t,r){return t=vs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function y3(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O0(0),this.expirationTimes=O0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O0(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function lg(e,t,r,n,a,i,o,l,c){return e=new y3(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=vs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vx(i),e}function w3(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nl,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function bj(e){if(!e)return Ai;e=e._reactInternals;e:{if($o(e)!==e||e.tag!==1)throw Error(De(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ln(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(De(171))}if(e.tag===1){var r=e.type;if(Ln(r))return bN(e,r,t)}return t}function Sj(e,t,r,n,a,i,o,l,c){return e=lg(r,n,!0,e,a,i,o,l,c),e.context=bj(null),r=e.current,n=_n(),a=Ei(r),i=Ea(n,a),i.callback=t??null,bi(r,i,a),e.current.lanes=a,eu(e,a,n),$n(e,n),e}function Uh(e,t,r,n){var a=t.current,i=_n(),o=Ei(a);return r=bj(r),t.context===null?t.context=r:t.pendingContext=r,t=Ea(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bi(a,t,o),e!==null&&(Bs(e,a,o,i),mf(e,a,o)),o}function Jf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ty(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function cg(e,t){ty(e,t),(e=e.alternate)&&ty(e,t)}function N3(){return null}var Ej=typeof reportError=="function"?reportError:function(e){console.error(e)};function dg(e){this._internalRoot=e}zh.prototype.render=dg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(De(409));Uh(e,t,null,null)};zh.prototype.unmount=dg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;So(function(){Uh(null,e,null,null)}),t[Oa]=null}};function zh(e){this._internalRoot=e}zh.prototype.unstable_scheduleHydration=function(e){if(e){var t=rN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ni.length&&t!==0&&t<ni[r].priority;r++);ni.splice(r,0,e),r===0&&sN(e)}};function ug(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ry(){}function j3(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Jf(o);i.call(d)}}var o=Sj(t,n,e,0,null,!1,!1,"",ry);return e._reactRootContainer=o,e[Oa]=o.current,md(e.nodeType===8?e.parentNode:e),So(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Jf(c);l.call(d)}}var c=lg(e,0,!1,null,null,!1,!1,"",ry);return e._reactRootContainer=c,e[Oa]=c.current,md(e.nodeType===8?e.parentNode:e),So(function(){Uh(t,c,r,n)}),c}function Vh(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Jf(o);l.call(c)}}Uh(t,o,e,a)}else o=j3(r,t,e,a,n);return Jf(o)}eN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pc(t.pendingLanes);r!==0&&(Ax(t,r|1),$n(t,Er()),!(Nt&6)&&(Jl=Er()+500,Ui()))}break;case 13:So(function(){var n=Da(e,1);if(n!==null){var a=_n();Bs(n,e,1,a)}}),cg(e,1)}};Ox=function(e){if(e.tag===13){var t=Da(e,134217728);if(t!==null){var r=_n();Bs(t,e,134217728,r)}cg(e,134217728)}};tN=function(e){if(e.tag===13){var t=Ei(e),r=Da(e,t);if(r!==null){var n=_n();Bs(r,e,t,n)}cg(e,t)}};rN=function(){return Ut};nN=function(e,t){var r=Ut;try{return Ut=e,t()}finally{Ut=r}};Gm=function(e,t,r){switch(t){case"input":if($m(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Fh(n);if(!a)throw Error(De(90));P2(n),$m(n,a)}}}break;case"textarea":M2(e,r);break;case"select":t=r.value,t!=null&&xl(e,!!r.multiple,t,!1)}};z2=sg;H2=So;var b3={usingClientEntryPoint:!1,Events:[ru,ll,Fh,W2,U2,sg]},Ec={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S3={bundleType:Ec.bundleType,version:Ec.version,rendererPackageName:Ec.rendererPackageName,rendererConfig:Ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:La.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=q2(e),e===null?null:e.stateNode},findFiberByHostInstance:Ec.findFiberByHostInstance||N3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Oh=Hu.inject(S3),la=Hu}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b3;ls.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(t))throw Error(De(200));return w3(e,t,null,r)};ls.createRoot=function(e,t){if(!ug(e))throw Error(De(299));var r=!1,n="",a=Ej;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=lg(e,1,!1,null,null,r,!1,n,a),e[Oa]=t.current,md(e.nodeType===8?e.parentNode:e),new dg(t)};ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(De(188)):(e=Object.keys(e).join(","),Error(De(268,e)));return e=q2(t),e=e===null?null:e.stateNode,e};ls.flushSync=function(e){return So(e)};ls.hydrate=function(e,t,r){if(!Hh(t))throw Error(De(200));return Vh(null,e,t,!0,r)};ls.hydrateRoot=function(e,t,r){if(!ug(e))throw Error(De(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=Ej;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Sj(t,null,e,1,r??null,a,!1,i,o),e[Oa]=t.current,md(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new zh(t)};ls.render=function(e,t,r){if(!Hh(t))throw Error(De(200));return Vh(null,e,t,!1,r)};ls.unmountComponentAtNode=function(e){if(!Hh(e))throw Error(De(40));return e._reactRootContainer?(So(function(){Vh(null,null,e,!1,function(){e._reactRootContainer=null,e[Oa]=null})}),!0):!1};ls.unstable_batchedUpdates=sg;ls.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Hh(r))throw Error(De(200));if(e==null||e._reactInternals===void 0)throw Error(De(38));return Vh(e,t,r,!1,n)};ls.version="18.3.1-next-f1338f8080-20240426";function _j(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_j)}catch(e){console.error(e)}}_j(),_2.exports=ls;var Bo=_2.exports;const E3=h2(Bo);var ny=Bo;Dm.createRoot=ny.createRoot,Dm.hydrateRoot=ny.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bd.apply(this,arguments)}var xi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xi||(xi={}));const sy="popstate";function _3(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Ep("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Tj(a)}return T3(t,r,null,e)}function kr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Cj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function C3(){return Math.random().toString(36).substr(2,8)}function ay(e,t){return{usr:e.state,key:e.key,idx:t}}function Ep(e,t,r,n){return r===void 0&&(r=null),bd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?oc(t):t,{state:r,key:t&&t.key||n||C3()})}function Tj(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function oc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function T3(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=xi.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(bd({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=xi.Pop;let x=u(),w=x==null?null:x-d;d=x,c&&c({action:l,location:h.location,delta:w})}function f(x,w){l=xi.Push;let y=Ep(h.location,x,w);d=u()+1;let N=ay(y,d),j=h.createHref(y);try{o.pushState(N,"",j)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;a.location.assign(j)}i&&c&&c({action:l,location:h.location,delta:1})}function p(x,w){l=xi.Replace;let y=Ep(h.location,x,w);d=u();let N=ay(y,d),j=h.createHref(y);o.replaceState(N,"",j),i&&c&&c({action:l,location:h.location,delta:0})}function g(x){let w=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof x=="string"?x:Tj(x);return y=y.replace(/ $/,"%20"),kr(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let h={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(sy,m),c=x,()=>{a.removeEventListener(sy,m),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let w=g(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:p,go(x){return o.go(x)}};return h}var iy;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(iy||(iy={}));function k3(e,t,r){return r===void 0&&(r="/"),A3(e,t,r,!1)}function A3(e,t,r,n){let a=typeof t=="string"?oc(t):t,i=Oj(a.pathname||"/",r);if(i==null)return null;let o=kj(e);O3(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=U3(i);l=B3(o[c],d,n)}return l}function kj(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(kr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=go([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(kr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),kj(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:L3(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Aj(i.path))a(i,o,c)}),t}function Aj(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Aj(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function O3(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:$3(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const D3=/^:[\w-]+$/,R3=3,P3=2,F3=1,M3=10,I3=-2,oy=e=>e==="*";function L3(e,t){let r=e.split("/"),n=r.length;return r.some(oy)&&(n+=I3),t&&(n+=P3),r.filter(a=>!oy(a)).reduce((a,i)=>a+(D3.test(i)?R3:i===""?F3:M3),n)}function $3(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function B3(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=ly({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!m&&d&&r&&!n[n.length-1].route.index&&(m=ly({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:go([i,m.pathname]),pathnameBase:G3(go([i,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(i=go([i,m.pathnameBase]))}return o}function ly(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=W3(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let h=l[m]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const g=l[m];return p&&!g?d[f]=void 0:d[f]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function W3(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Cj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function U3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Cj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Oj(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function z3(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?oc(e):e;return{pathname:r?r.startsWith("/")?r:H3(r,t):t,search:q3(n),hash:X3(a)}}function H3(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function J0(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V3(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Dj(e,t){let r=V3(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Rj(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=oc(e):(a=bd({},e),kr(!a.pathname||!a.pathname.includes("?"),J0("?","pathname","search",a)),kr(!a.pathname||!a.pathname.includes("#"),J0("#","pathname","hash",a)),kr(!a.search||!a.search.includes("#"),J0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let m=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}l=m>=0?t[m]:"/"}let c=z3(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const go=e=>e.join("/").replace(/\/\/+/g,"/"),G3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,X3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function K3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Pj=["post","put","patch","delete"];new Set(Pj);const Y3=["get",...Pj];new Set(Y3);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sd.apply(this,arguments)}const fg=v.createContext(null),Q3=v.createContext(null),su=v.createContext(null),Gh=v.createContext(null),zi=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Fj=v.createContext(null);function au(){return v.useContext(Gh)!=null}function iu(){return au()||kr(!1),v.useContext(Gh).location}function Mj(e){v.useContext(su).static||v.useLayoutEffect(e)}function ha(){let{isDataRoute:e}=v.useContext(zi);return e?u5():J3()}function J3(){au()||kr(!1);let e=v.useContext(fg),{basename:t,future:r,navigator:n}=v.useContext(su),{matches:a}=v.useContext(zi),{pathname:i}=iu(),o=JSON.stringify(Dj(a,r.v7_relativeSplatPath)),l=v.useRef(!1);return Mj(()=>{l.current=!0}),v.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=Rj(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:go([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}function Z3(){let{matches:e}=v.useContext(zi),t=e[e.length-1];return t?t.params:{}}function e5(e,t){return t5(e,t)}function t5(e,t,r,n){au()||kr(!1);let{navigator:a}=v.useContext(su),{matches:i}=v.useContext(zi),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=iu(),u;if(t){var m;let x=typeof t=="string"?oc(t):t;c==="/"||(m=x.pathname)!=null&&m.startsWith(c)||kr(!1),u=x}else u=d;let f=u.pathname||"/",p=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=k3(e,{pathname:p}),h=i5(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:go([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:go([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&h?v.createElement(Gh.Provider,{value:{location:Sd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:xi.Pop}},h):h}function r5(){let e=d5(),t=K3(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,null)}const n5=v.createElement(r5,null);class s5 extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(zi.Provider,{value:this.props.routeContext},v.createElement(Fj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a5(e){let{routeContext:t,match:r,children:n}=e,a=v.useContext(fg);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(zi.Provider,{value:t},n)}function i5(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||kr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:f,errors:p}=r,g=m.route.loader&&f[m.route.id]===void 0&&(!p||p[m.route.id]===void 0);if(m.route.lazy||g){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,f)=>{let p,g=!1,h=null,x=null;r&&(p=l&&m.route.id?l[m.route.id]:void 0,h=m.route.errorElement||n5,c&&(d<0&&f===0?(g=!0,x=null):d===f&&(g=!0,x=m.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,f+1)),y=()=>{let N;return p?N=h:g?N=x:m.route.Component?N=v.createElement(m.route.Component,null):m.route.element?N=m.route.element:N=u,v.createElement(a5,{match:m,routeContext:{outlet:u,matches:w,isDataRoute:r!=null},children:N})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?v.createElement(s5,{location:r.location,revalidation:r.revalidation,component:h,error:p,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var Ij=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ij||{}),Zf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zf||{});function o5(e){let t=v.useContext(fg);return t||kr(!1),t}function l5(e){let t=v.useContext(Q3);return t||kr(!1),t}function c5(e){let t=v.useContext(zi);return t||kr(!1),t}function Lj(e){let t=c5(),r=t.matches[t.matches.length-1];return r.route.id||kr(!1),r.route.id}function d5(){var e;let t=v.useContext(Fj),r=l5(Zf.UseRouteError),n=Lj(Zf.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function u5(){let{router:e}=o5(Ij.UseNavigateStable),t=Lj(Zf.UseNavigateStable),r=v.useRef(!1);return Mj(()=>{r.current=!0}),v.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Sd({fromRouteId:t},i)))},[e,t])}function cy(e){let{to:t,replace:r,state:n,relative:a}=e;au()||kr(!1);let{future:i,static:o}=v.useContext(su),{matches:l}=v.useContext(zi),{pathname:c}=iu(),d=ha(),u=Rj(t,Dj(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return v.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:a}),[d,m,a,r,n]),null}function yn(e){kr(!1)}function f5(e){let{basename:t="/",children:r=null,location:n,navigationType:a=xi.Pop,navigator:i,static:o=!1,future:l}=e;au()&&kr(!1);let c=t.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:c,navigator:i,static:o,future:Sd({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=oc(n));let{pathname:u="/",search:m="",hash:f="",state:p=null,key:g="default"}=n,h=v.useMemo(()=>{let x=Oj(u,c);return x==null?null:{location:{pathname:x,search:m,hash:f,state:p,key:g},navigationType:a}},[c,u,m,f,p,g,a]);return h==null?null:v.createElement(su.Provider,{value:d},v.createElement(Gh.Provider,{children:r,value:h}))}function h5(e){let{children:t,location:r}=e;return e5(_p(t),r)}new Promise(()=>{});function _p(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let i=[...t,a];if(n.type===v.Fragment){r.push.apply(r,_p(n.props.children,i));return}n.type!==yn&&kr(!1),!n.props.index||!n.props.children||kr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=_p(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const m5="6";try{window.__reactRouterVersion=m5}catch{}const p5="startTransition",dy=S2[p5];function x5(e){let{basename:t,children:r,future:n,window:a}=e,i=v.useRef();i.current==null&&(i.current=_3({window:a,v5Compat:!0}));let o=i.current,[l,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=v.useCallback(m=>{d&&dy?dy(()=>c(m)):c(m)},[c,d]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.createElement(f5,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var uy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uy||(uy={}));var fy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fy||(fy={}));var lc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Eo=typeof window>"u"||"Deno"in globalThis;function fs(){}function g5(e,t){return typeof e=="function"?e(t):e}function Cp(e){return typeof e=="number"&&e>=0&&e!==1/0}function $j(e,t){return Math.max(e+(t||0)-Date.now(),0)}function jl(e,t){return typeof e=="function"?e(t):e}function Fs(e,t){return typeof e=="function"?e(t):e}function hy(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==hg(o,t.options))return!1}else if(!Ed(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function my(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(_o(t.options.mutationKey)!==_o(i))return!1}else if(!Ed(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function hg(e,t){return((t==null?void 0:t.queryKeyHashFn)||_o)(e)}function _o(e){return JSON.stringify(e,(t,r)=>Tp(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Ed(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Ed(e[r],t[r])):!1}function Bj(e,t){if(e===t)return e;const r=py(e)&&py(t);if(r||Tp(e)&&Tp(t)){const n=r?e:Object.keys(e),a=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d];(!r&&n.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=Bj(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function eh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function py(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Tp(e){if(!xy(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!xy(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xy(e){return Object.prototype.toString.call(e)==="[object Object]"}function v5(e){return new Promise(t=>{setTimeout(t,e)})}function kp(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Bj(e,t):t}function y5(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function w5(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var mg=Symbol();function Wj(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===mg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var oo,ai,Rl,n2,N5=(n2=class extends lc{constructor(){super();ot(this,oo);ot(this,ai);ot(this,Rl);Ge(this,Rl,t=>{if(!Eo&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Q(this,ai)||this.setEventListener(Q(this,Rl))}onUnsubscribe(){var t;this.hasListeners()||((t=Q(this,ai))==null||t.call(this),Ge(this,ai,void 0))}setEventListener(t){var r;Ge(this,Rl,t),(r=Q(this,ai))==null||r.call(this),Ge(this,ai,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Q(this,oo)!==t&&(Ge(this,oo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Q(this,oo)=="boolean"?Q(this,oo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},oo=new WeakMap,ai=new WeakMap,Rl=new WeakMap,n2),pg=new N5,Pl,ii,Fl,s2,j5=(s2=class extends lc{constructor(){super();ot(this,Pl,!0);ot(this,ii);ot(this,Fl);Ge(this,Fl,t=>{if(!Eo&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Q(this,ii)||this.setEventListener(Q(this,Fl))}onUnsubscribe(){var t;this.hasListeners()||((t=Q(this,ii))==null||t.call(this),Ge(this,ii,void 0))}setEventListener(t){var r;Ge(this,Fl,t),(r=Q(this,ii))==null||r.call(this),Ge(this,ii,t(this.setOnline.bind(this)))}setOnline(t){Q(this,Pl)!==t&&(Ge(this,Pl,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Q(this,Pl)}},Pl=new WeakMap,ii=new WeakMap,Fl=new WeakMap,s2),th=new j5;function Ap(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function b5(e){return Math.min(1e3*2**e,3e4)}function Uj(e){return(e??"online")==="online"?th.isOnline():!0}var zj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Z0(e){return e instanceof zj}function Hj(e){let t=!1,r=0,n=!1,a;const i=Ap(),o=h=>{var x;n||(f(new zj(h)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>pg.isFocused()&&(e.networkMode==="always"||th.isOnline())&&e.canRun(),u=()=>Uj(e.networkMode)&&e.canRun(),m=h=>{var x;n||(n=!0,(x=e.onSuccess)==null||x.call(e,h),a==null||a(),i.resolve(h))},f=h=>{var x;n||(n=!0,(x=e.onError)==null||x.call(e,h),a==null||a(),i.reject(h))},p=()=>new Promise(h=>{var x;a=w=>{(n||d())&&h(w)},(x=e.onPause)==null||x.call(e)}).then(()=>{var h;a=void 0,n||(h=e.onContinue)==null||h.call(e)}),g=()=>{if(n)return;let h;const x=r===0?e.initialPromise:void 0;try{h=x??e.fn()}catch(w){h=Promise.reject(w)}Promise.resolve(h).then(m).catch(w=>{var _;if(n)return;const y=e.retry??(Eo?0:3),N=e.retryDelay??b5,j=typeof N=="function"?N(r,w):N,b=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,w);if(t||!b){f(w);return}r++,(_=e.onFail)==null||_.call(e,r,w),v5(j).then(()=>d()?void 0:p()).then(()=>{t?f(w):g()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?g():p().then(g),i)}}function S5(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=l=>setTimeout(l,0);const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Ir=S5(),lo,a2,Vj=(a2=class{constructor(){ot(this,lo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Cp(this.gcTime)&&Ge(this,lo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Eo?1/0:5*60*1e3))}clearGcTimeout(){Q(this,lo)&&(clearTimeout(Q(this,lo)),Ge(this,lo,void 0))}},lo=new WeakMap,a2),Ml,Il,us,dn,Kd,co,Ds,ya,i2,E5=(i2=class extends Vj{constructor(t){super();ot(this,Ds);ot(this,Ml);ot(this,Il);ot(this,us);ot(this,dn);ot(this,Kd);ot(this,co);Ge(this,co,!1),Ge(this,Kd,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ge(this,us,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ge(this,Ml,_5(this.options)),this.state=t.state??Q(this,Ml),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Q(this,dn))==null?void 0:t.promise}setOptions(t){this.options={...Q(this,Kd),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,us).remove(this)}setData(t,r){const n=kp(this.state.data,t,this.options);return pt(this,Ds,ya).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){pt(this,Ds,ya).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=Q(this,dn))==null?void 0:n.promise;return(a=Q(this,dn))==null||a.cancel(t),r?r.then(fs).catch(fs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Ml))}isActive(){return this.observers.some(t=>Fs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!$j(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Q(this,dn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Q(this,dn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Q(this,us).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Q(this,dn)&&(Q(this,co)?Q(this,dn).cancel({revert:!0}):Q(this,dn).cancelRetry()),this.scheduleGc()),Q(this,us).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pt(this,Ds,ya).call(this,{type:"invalidate"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,dn))return Q(this,dn).continueRetry(),Q(this,dn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ge(this,co,!0),n.signal)})},i=()=>{const m=Wj(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return a(f),Ge(this,co,!1),this.options.persister?this.options.persister(m,f,this):m(f)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),Ge(this,Il,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&pt(this,Ds,ya).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=m=>{var f,p,g,h;Z0(m)&&m.silent||pt(this,Ds,ya).call(this,{type:"error",error:m}),Z0(m)||((p=(f=Q(this,us).config).onError)==null||p.call(f,m,this),(h=(g=Q(this,us).config).onSettled)==null||h.call(g,this.state.data,m,this)),this.scheduleGc()};return Ge(this,dn,Hj({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var f,p,g,h;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){l(x);return}(p=(f=Q(this,us).config).onSuccess)==null||p.call(f,m,this),(h=(g=Q(this,us).config).onSettled)==null||h.call(g,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,f)=>{pt(this,Ds,ya).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{pt(this,Ds,ya).call(this,{type:"pause"})},onContinue:()=>{pt(this,Ds,ya).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Q(this,dn).start()}},Ml=new WeakMap,Il=new WeakMap,us=new WeakMap,dn=new WeakMap,Kd=new WeakMap,co=new WeakMap,Ds=new WeakSet,ya=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Gj(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Z0(a)&&a.revert&&Q(this,Il)?{...Q(this,Il),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ir.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Q(this,us).notify({query:this,type:"updated",action:t})})},i2);function Gj(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Uj(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function _5(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Js,o2,C5=(o2=class extends lc{constructor(t={}){super();ot(this,Js);this.config=t,Ge(this,Js,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??hg(a,r);let o=this.get(i);return o||(o=new E5({cache:this,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Q(this,Js).has(t.queryHash)||(Q(this,Js).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Q(this,Js).get(t.queryHash);r&&(t.destroy(),r===t&&Q(this,Js).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ir.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Q(this,Js).get(t)}getAll(){return[...Q(this,Js).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>hy(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>hy(t,n)):r}notify(t){Ir.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ir.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ir.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Js=new WeakMap,o2),Zs,wn,uo,ea,Qa,l2,T5=(l2=class extends Vj{constructor(t){super();ot(this,ea);ot(this,Zs);ot(this,wn);ot(this,uo);this.mutationId=t.mutationId,Ge(this,wn,t.mutationCache),Ge(this,Zs,[]),this.state=t.state||qj(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Q(this,Zs).includes(t)||(Q(this,Zs).push(t),this.clearGcTimeout(),Q(this,wn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ge(this,Zs,Q(this,Zs).filter(r=>r!==t)),this.scheduleGc(),Q(this,wn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Q(this,Zs).length||(this.state.status==="pending"?this.scheduleGc():Q(this,wn).remove(this))}continue(){var t;return((t=Q(this,uo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,l,c,d,u,m,f,p,g,h,x,w,y,N,j,b,_,S;Ge(this,uo,Hj({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,A)=>{pt(this,ea,Qa).call(this,{type:"failed",failureCount:C,error:A})},onPause:()=>{pt(this,ea,Qa).call(this,{type:"pause"})},onContinue:()=>{pt(this,ea,Qa).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,wn).canRun(this)}));const r=this.state.status==="pending",n=!Q(this,uo).canStart();try{if(!r){pt(this,ea,Qa).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(a=Q(this,wn).config).onMutate)==null?void 0:i.call(a,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&pt(this,ea,Qa).call(this,{type:"pending",context:A,variables:t,isPaused:n})}const C=await Q(this,uo).start();return await((d=(c=Q(this,wn).config).onSuccess)==null?void 0:d.call(c,C,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,C,t,this.state.context)),await((p=(f=Q(this,wn).config).onSettled)==null?void 0:p.call(f,C,null,this.state.variables,this.state.context,this)),await((h=(g=this.options).onSettled)==null?void 0:h.call(g,C,null,t,this.state.context)),pt(this,ea,Qa).call(this,{type:"success",data:C}),C}catch(C){try{throw await((w=(x=Q(this,wn).config).onError)==null?void 0:w.call(x,C,t,this.state.context,this)),await((N=(y=this.options).onError)==null?void 0:N.call(y,C,t,this.state.context)),await((b=(j=Q(this,wn).config).onSettled)==null?void 0:b.call(j,void 0,C,this.state.variables,this.state.context,this)),await((S=(_=this.options).onSettled)==null?void 0:S.call(_,void 0,C,t,this.state.context)),C}finally{pt(this,ea,Qa).call(this,{type:"error",error:C})}}finally{Q(this,wn).runNext(this)}}},Zs=new WeakMap,wn=new WeakMap,uo=new WeakMap,ea=new WeakSet,Qa=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ir.batch(()=>{Q(this,Zs).forEach(n=>{n.onMutationUpdate(t)}),Q(this,wn).notify({mutation:this,type:"updated",action:t})})},l2);function qj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vn,Yd,c2,k5=(c2=class extends lc{constructor(t={}){super();ot(this,Vn);ot(this,Yd);this.config=t,Ge(this,Vn,new Map),Ge(this,Yd,Date.now())}build(t,r,n){const a=new T5({mutationCache:this,mutationId:++Cu(this,Yd)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){const r=Vu(t),n=Q(this,Vn).get(r)??[];n.push(t),Q(this,Vn).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=Vu(t);if(Q(this,Vn).has(r)){const a=(n=Q(this,Vn).get(r))==null?void 0:n.filter(i=>i!==t);a&&(a.length===0?Q(this,Vn).delete(r):Q(this,Vn).set(r,a))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=Q(this,Vn).get(Vu(t)))==null?void 0:n.find(a=>a.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=Q(this,Vn).get(Vu(t)))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Ir.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Q(this,Vn).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>my(r,n))}findAll(t={}){return this.getAll().filter(r=>my(t,r))}notify(t){Ir.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ir.batch(()=>Promise.all(t.map(r=>r.continue().catch(fs))))}},Vn=new WeakMap,Yd=new WeakMap,c2);function Vu(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function gy(e){return{onFetch:(t,r)=>{var u,m,f,p,g;const n=t.options,a=(f=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let h=!1;const x=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},w=Wj(t.options,t.fetchOptions),y=async(N,j,b)=>{if(h)return Promise.reject();if(j==null&&N.pages.length)return Promise.resolve(N);const _={queryKey:t.queryKey,pageParam:j,direction:b?"backward":"forward",meta:t.options.meta};x(_);const S=await w(_),{maxPages:C}=t.options,A=b?w5:y5;return{pages:A(N.pages,S,C),pageParams:A(N.pageParams,j,C)}};if(a&&i.length){const N=a==="backward",j=N?A5:vy,b={pages:i,pageParams:o},_=j(n,b);l=await y(b,_,N)}else{const N=e??i.length;do{const j=c===0?o[0]??n.initialPageParam:vy(n,l);if(c>0&&j==null)break;l=await y(l,j),c++}while(c<N)}return l};t.options.persister?t.fetchFn=()=>{var h,x;return(x=(h=t.options).persister)==null?void 0:x.call(h,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function vy(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function A5(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var vr,oi,li,Ll,$l,ci,Bl,Wl,d2,O5=(d2=class{constructor(e={}){ot(this,vr);ot(this,oi);ot(this,li);ot(this,Ll);ot(this,$l);ot(this,ci);ot(this,Bl);ot(this,Wl);Ge(this,vr,e.queryCache||new C5),Ge(this,oi,e.mutationCache||new k5),Ge(this,li,e.defaultOptions||{}),Ge(this,Ll,new Map),Ge(this,$l,new Map),Ge(this,ci,0)}mount(){Cu(this,ci)._++,Q(this,ci)===1&&(Ge(this,Bl,pg.subscribe(async e=>{e&&(await this.resumePausedMutations(),Q(this,vr).onFocus())})),Ge(this,Wl,th.subscribe(async e=>{e&&(await this.resumePausedMutations(),Q(this,vr).onOnline())})))}unmount(){var e,t;Cu(this,ci)._--,Q(this,ci)===0&&((e=Q(this,Bl))==null||e.call(this),Ge(this,Bl,void 0),(t=Q(this,Wl))==null||t.call(this),Ge(this,Wl,void 0))}isFetching(e){return Q(this,vr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Q(this,oi).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Q(this,vr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=Q(this,vr).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(jl(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return Q(this,vr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=Q(this,vr).get(n.queryHash),i=a==null?void 0:a.state.data,o=g5(t,i);if(o!==void 0)return Q(this,vr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ir.batch(()=>Q(this,vr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Q(this,vr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Q(this,vr);Ir.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Q(this,vr),n={type:"active",...e};return Ir.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=Ir.batch(()=>Q(this,vr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(fs).catch(fs)}invalidateQueries(e={},t={}){return Ir.batch(()=>{if(Q(this,vr).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=Ir.batch(()=>Q(this,vr).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(fs)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(fs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Q(this,vr).build(this,t);return r.isStaleByTime(jl(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(fs).catch(fs)}fetchInfiniteQuery(e){return e.behavior=gy(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(fs).catch(fs)}ensureInfiniteQueryData(e){return e.behavior=gy(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return th.isOnline()?Q(this,oi).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,vr)}getMutationCache(){return Q(this,oi)}getDefaultOptions(){return Q(this,li)}setDefaultOptions(e){Ge(this,li,e)}setQueryDefaults(e,t){Q(this,Ll).set(_o(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Q(this,Ll).values()];let r={};return t.forEach(n=>{Ed(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){Q(this,$l).set(_o(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Q(this,$l).values()];let r={};return t.forEach(n=>{Ed(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Q(this,li).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===mg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Q(this,li).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Q(this,vr).clear(),Q(this,oi).clear()}},vr=new WeakMap,oi=new WeakMap,li=new WeakMap,Ll=new WeakMap,$l=new WeakMap,ci=new WeakMap,Bl=new WeakMap,Wl=new WeakMap,d2),Dn,yt,Qd,Nn,fo,Ul,di,ta,Jd,zl,Hl,ho,mo,ui,Vl,Ft,Mc,Op,Dp,Rp,Pp,Fp,Mp,Ip,Xj,u2,D5=(u2=class extends lc{constructor(t,r){super();ot(this,Ft);ot(this,Dn);ot(this,yt);ot(this,Qd);ot(this,Nn);ot(this,fo);ot(this,Ul);ot(this,di);ot(this,ta);ot(this,Jd);ot(this,zl);ot(this,Hl);ot(this,ho);ot(this,mo);ot(this,ui);ot(this,Vl,new Set);this.options=r,Ge(this,Dn,t),Ge(this,ta,null),Ge(this,di,Ap()),this.options.experimental_prefetchInRender||Q(this,di).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,yt).addObserver(this),yy(Q(this,yt),this.options)?pt(this,Ft,Mc).call(this):this.updateResult(),pt(this,Ft,Pp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Lp(Q(this,yt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Lp(Q(this,yt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pt(this,Ft,Fp).call(this),pt(this,Ft,Mp).call(this),Q(this,yt).removeObserver(this)}setOptions(t,r){const n=this.options,a=Q(this,yt);if(this.options=Q(this,Dn).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fs(this.options.enabled,Q(this,yt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pt(this,Ft,Ip).call(this),Q(this,yt).setOptions(this.options),n._defaulted&&!eh(this.options,n)&&Q(this,Dn).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,yt),observer:this});const i=this.hasListeners();i&&wy(Q(this,yt),a,this.options,n)&&pt(this,Ft,Mc).call(this),this.updateResult(r),i&&(Q(this,yt)!==a||Fs(this.options.enabled,Q(this,yt))!==Fs(n.enabled,Q(this,yt))||jl(this.options.staleTime,Q(this,yt))!==jl(n.staleTime,Q(this,yt)))&&pt(this,Ft,Op).call(this);const o=pt(this,Ft,Dp).call(this);i&&(Q(this,yt)!==a||Fs(this.options.enabled,Q(this,yt))!==Fs(n.enabled,Q(this,yt))||o!==Q(this,ui))&&pt(this,Ft,Rp).call(this,o)}getOptimisticResult(t){const r=Q(this,Dn).getQueryCache().build(Q(this,Dn),t),n=this.createResult(r,t);return P5(this,n)&&(Ge(this,Nn,n),Ge(this,Ul,this.options),Ge(this,fo,Q(this,yt).state)),n}getCurrentResult(){return Q(this,Nn)}trackResult(t,r){const n={};return Object.keys(t).forEach(a=>{Object.defineProperty(n,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),t[a])})}),n}trackProp(t){Q(this,Vl).add(t)}getCurrentQuery(){return Q(this,yt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Q(this,Dn).defaultQueryOptions(t),n=Q(this,Dn).getQueryCache().build(Q(this,Dn),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return pt(this,Ft,Mc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Nn)))}createResult(t,r){var C;const n=Q(this,yt),a=this.options,i=Q(this,Nn),o=Q(this,fo),l=Q(this,Ul),d=t!==n?t.state:Q(this,Qd),{state:u}=t;let m={...u},f=!1,p;if(r._optimisticResults){const A=this.hasListeners(),U=!A&&yy(t,r),k=A&&wy(t,n,r,a);(U||k)&&(m={...m,...Gj(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:h,status:x}=m;if(r.select&&m.data!==void 0)if(i&&m.data===(o==null?void 0:o.data)&&r.select===Q(this,Jd))p=Q(this,zl);else try{Ge(this,Jd,r.select),p=r.select(m.data),p=kp(i==null?void 0:i.data,p,r),Ge(this,zl,p),Ge(this,ta,null)}catch(A){Ge(this,ta,A)}else p=m.data;if(r.placeholderData!==void 0&&p===void 0&&x==="pending"){let A;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))A=i.data;else if(A=typeof r.placeholderData=="function"?r.placeholderData((C=Q(this,Hl))==null?void 0:C.state.data,Q(this,Hl)):r.placeholderData,r.select&&A!==void 0)try{A=r.select(A),Ge(this,ta,null)}catch(U){Ge(this,ta,U)}A!==void 0&&(x="success",p=kp(i==null?void 0:i.data,A,r),f=!0)}Q(this,ta)&&(g=Q(this,ta),p=Q(this,zl),h=Date.now(),x="error");const w=m.fetchStatus==="fetching",y=x==="pending",N=x==="error",j=y&&w,b=p!==void 0,S={status:x,fetchStatus:m.fetchStatus,isPending:y,isSuccess:x==="success",isError:N,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:h,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!y,isLoadingError:N&&!b,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&b,isStale:xg(t,r),refetch:this.refetch,promise:Q(this,di)};if(this.options.experimental_prefetchInRender){const A=R=>{S.status==="error"?R.reject(S.error):S.data!==void 0&&R.resolve(S.data)},U=()=>{const R=Ge(this,di,S.promise=Ap());A(R)},k=Q(this,di);switch(k.status){case"pending":t.queryHash===n.queryHash&&A(k);break;case"fulfilled":(S.status==="error"||S.data!==k.value)&&U();break;case"rejected":(S.status!=="error"||S.error!==k.reason)&&U();break}}return S}updateResult(t){const r=Q(this,Nn),n=this.createResult(Q(this,yt),this.options);if(Ge(this,fo,Q(this,yt).state),Ge(this,Ul,this.options),Q(this,fo).data!==void 0&&Ge(this,Hl,Q(this,yt)),eh(n,r))return;Ge(this,Nn,n);const a={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!Q(this,Vl).size)return!0;const c=new Set(l??Q(this,Vl));return this.options.throwOnError&&c.add("error"),Object.keys(Q(this,Nn)).some(d=>{const u=d;return Q(this,Nn)[u]!==r[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&i()&&(a.listeners=!0),pt(this,Ft,Xj).call(this,{...a,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pt(this,Ft,Pp).call(this)}},Dn=new WeakMap,yt=new WeakMap,Qd=new WeakMap,Nn=new WeakMap,fo=new WeakMap,Ul=new WeakMap,di=new WeakMap,ta=new WeakMap,Jd=new WeakMap,zl=new WeakMap,Hl=new WeakMap,ho=new WeakMap,mo=new WeakMap,ui=new WeakMap,Vl=new WeakMap,Ft=new WeakSet,Mc=function(t){pt(this,Ft,Ip).call(this);let r=Q(this,yt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(fs)),r},Op=function(){pt(this,Ft,Fp).call(this);const t=jl(this.options.staleTime,Q(this,yt));if(Eo||Q(this,Nn).isStale||!Cp(t))return;const n=$j(Q(this,Nn).dataUpdatedAt,t)+1;Ge(this,ho,setTimeout(()=>{Q(this,Nn).isStale||this.updateResult()},n))},Dp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,yt)):this.options.refetchInterval)??!1},Rp=function(t){pt(this,Ft,Mp).call(this),Ge(this,ui,t),!(Eo||Fs(this.options.enabled,Q(this,yt))===!1||!Cp(Q(this,ui))||Q(this,ui)===0)&&Ge(this,mo,setInterval(()=>{(this.options.refetchIntervalInBackground||pg.isFocused())&&pt(this,Ft,Mc).call(this)},Q(this,ui)))},Pp=function(){pt(this,Ft,Op).call(this),pt(this,Ft,Rp).call(this,pt(this,Ft,Dp).call(this))},Fp=function(){Q(this,ho)&&(clearTimeout(Q(this,ho)),Ge(this,ho,void 0))},Mp=function(){Q(this,mo)&&(clearInterval(Q(this,mo)),Ge(this,mo,void 0))},Ip=function(){const t=Q(this,Dn).getQueryCache().build(Q(this,Dn),this.options);if(t===Q(this,yt))return;const r=Q(this,yt);Ge(this,yt,t),Ge(this,Qd,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Xj=function(t){Ir.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Q(this,Nn))}),Q(this,Dn).getQueryCache().notify({query:Q(this,yt),type:"observerResultsUpdated"})})},u2);function R5(e,t){return Fs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function yy(e,t){return R5(e,t)||e.state.data!==void 0&&Lp(e,t,t.refetchOnMount)}function Lp(e,t,r){if(Fs(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&xg(e,t)}return!1}function wy(e,t,r,n){return(e!==t||Fs(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&xg(e,r)}function xg(e,t){return Fs(t.enabled,e)!==!1&&e.isStaleByTime(jl(t.staleTime,e))}function P5(e,t){return!eh(e.getCurrentResult(),t)}var fi,hi,Rn,ja,ka,Nf,$p,f2,F5=(f2=class extends lc{constructor(r,n){super();ot(this,ka);ot(this,fi);ot(this,hi);ot(this,Rn);ot(this,ja);Ge(this,fi,r),this.setOptions(n),this.bindMethods(),pt(this,ka,Nf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=Q(this,fi).defaultMutationOptions(r),eh(this.options,n)||Q(this,fi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Q(this,Rn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&_o(n.mutationKey)!==_o(this.options.mutationKey)?this.reset():((a=Q(this,Rn))==null?void 0:a.state.status)==="pending"&&Q(this,Rn).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Q(this,Rn))==null||r.removeObserver(this)}onMutationUpdate(r){pt(this,ka,Nf).call(this),pt(this,ka,$p).call(this,r)}getCurrentResult(){return Q(this,hi)}reset(){var r;(r=Q(this,Rn))==null||r.removeObserver(this),Ge(this,Rn,void 0),pt(this,ka,Nf).call(this),pt(this,ka,$p).call(this)}mutate(r,n){var a;return Ge(this,ja,n),(a=Q(this,Rn))==null||a.removeObserver(this),Ge(this,Rn,Q(this,fi).getMutationCache().build(Q(this,fi),this.options)),Q(this,Rn).addObserver(this),Q(this,Rn).execute(r)}},fi=new WeakMap,hi=new WeakMap,Rn=new WeakMap,ja=new WeakMap,ka=new WeakSet,Nf=function(){var n;const r=((n=Q(this,Rn))==null?void 0:n.state)??qj();Ge(this,hi,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},$p=function(r){Ir.batch(()=>{var n,a,i,o,l,c,d,u;if(Q(this,ja)&&this.hasListeners()){const m=Q(this,hi).variables,f=Q(this,hi).context;(r==null?void 0:r.type)==="success"?((a=(n=Q(this,ja)).onSuccess)==null||a.call(n,r.data,m,f),(o=(i=Q(this,ja)).onSettled)==null||o.call(i,r.data,null,m,f)):(r==null?void 0:r.type)==="error"&&((c=(l=Q(this,ja)).onError)==null||c.call(l,r.error,m,f),(u=(d=Q(this,ja)).onSettled)==null||u.call(d,void 0,r.error,m,f))}this.listeners.forEach(m=>{m(Q(this,hi))})})},f2),Kj=v.createContext(void 0),$a=e=>{const t=v.useContext(Kj);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},M5=({client:e,children:t})=>(v.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(Kj.Provider,{value:e,children:t})),Yj=v.createContext(!1),I5=()=>v.useContext(Yj);Yj.Provider;function L5(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var $5=v.createContext(L5()),B5=()=>v.useContext($5);function Qj(e,t){return typeof e=="function"?e(...t):!!e}function Jj(){}var W5=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},U5=e=>{v.useEffect(()=>{e.clearReset()},[e])},z5=({result:e,errorResetBoundary:t,throwOnError:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&Qj(r,[e.error,n]),H5=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},V5=(e,t)=>e.isLoading&&e.isFetching&&!t,G5=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ny=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function q5(e,t,r){var u,m,f,p,g;const n=$a(),a=I5(),i=B5(),o=n.defaultQueryOptions(e);(m=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||m.call(u,o),o._optimisticResults=a?"isRestoring":"optimistic",H5(o),W5(o,i),U5(i);const l=!n.getQueryCache().get(o.queryHash),[c]=v.useState(()=>new t(n,o)),d=c.getOptimisticResult(o);if(v.useSyncExternalStore(v.useCallback(h=>{const x=a?()=>{}:c.subscribe(Ir.batchCalls(h));return c.updateResult(),x},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),v.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),G5(o,d))throw Ny(o,c,i);if(z5({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw d.error;if((p=(f=n.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,d),o.experimental_prefetchInRender&&!Eo&&V5(d,a)){const h=l?Ny(o,c,i):(g=n.getQueryCache().get(o.queryHash))==null?void 0:g.promise;h==null||h.catch(Jj).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function vo(e,t){return q5(e,D5)}function Co(e,t){const r=$a(),[n]=v.useState(()=>new F5(r,e));v.useEffect(()=>{n.setOptions(e)},[n,e]);const a=v.useSyncExternalStore(v.useCallback(o=>n.subscribe(Ir.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=v.useCallback((o,l)=>{n.mutate(o,l).catch(Jj)},[n]);if(a.error&&Qj(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const eo="https://waxhands.ru/api",gg=()=>localStorage.getItem("authToken"),jy=e=>{localStorage.setItem("authToken",e)},Zj=()=>{localStorage.removeItem("authToken")},lt=async(e,t={})=>{const r=gg(),n={"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"};r?(n.Authorization=`Bearer ${r}`,console.log("🔑 Using auth token:",r.substring(0,20)+"...")):console.log("⚠️ No auth token found");const a=`${eo}${e}`;console.log("🌐 Making API request to:",a),console.log("📋 Request options:",{method:t.method||"GET",headers:n});try{const i=await fetch(a,{...t,headers:n});console.log("📡 Response status:",i.status),console.log("📡 Response headers:",Object.fromEntries(i.headers.entries()));const o=await i.json();if(console.log("📄 Response data:",o),!i.ok){if(i.status===401)throw console.log("❌ Unauthorized access, clearing auth token"),Zj(),window.location.href="/login",new Error("Unauthorized access");if(i.status===429){console.log("⏳ Rate limit exceeded, retrying in 5 seconds..."),await new Promise(d=>setTimeout(d,5e3));const l=await fetch(a,{...t,headers:n}),c=await l.json();if(!l.ok)throw new Error(c.error||`HTTP error! status: ${l.status}`);return c}throw new Error(o.error||`HTTP error! status: ${i.status}`)}return o}catch(i){throw console.error("❌ API request error:",i),i}},X5={login:async e=>{const t={...e,name:e.name||e.username},{username:r,...n}=t,a=await lt("/auth/login",{method:"POST",body:JSON.stringify(n)});if(a.success&&a.data)return jy(a.data.token),a.data;throw new Error(a.error||"Login failed")},register:async e=>{const t=await lt("/auth/register",{method:"POST",body:JSON.stringify(e)});if(t.success&&t.data)return jy(t.data.token),t.data;throw new Error(t.error||"Registration failed")},getProfile:async()=>{const e=await lt("/auth/profile");if(e.success&&e.data)return e.data;throw new Error(e.error||"Failed to get profile")},updateProfile:async e=>{const t={};e.name!==void 0&&(t.name=e.name),e.surname!==void 0&&(t.surname=e.surname),e.email!==void 0&&(t.email=e.email),e.phone!==void 0&&(t.phone=e.phone),e.age!==void 0&&(t.age=e.age),e.schoolId!==void 0&&(t.school_id=e.schoolId),e.class!==void 0&&(t.class=e.class,t.class_group=e.class),console.log("📤 Sending profile update data:",t);const r=await lt("/auth/profile",{method:"PUT",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to update profile")},logout:()=>{Zj()},isAuthenticated:()=>!!gg()},K5={getSchools:async e=>{const t=new URLSearchParams;e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.search&&t.append("search",e.search);const r=await lt(`/schools?${t.toString()}`);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to get schools")},getSchoolById:async e=>{const t=await lt(`/schools/${e}`);if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to get school")},createSchool:async e=>{const t=await lt("/schools",{method:"POST",body:JSON.stringify(e)});if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to create school")},updateSchool:async(e,t)=>{const r=await lt(`/schools/${e}`,{method:"PUT",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to update school")},deleteSchool:async e=>{const t=await lt(`/schools/${e}`,{method:"DELETE"});if(!t.success)throw new Error(t.error||"Failed to delete school")},getSchoolClasses:async e=>{const t=await lt(`/schools/${e}/classes`);if(t.success&&t.data)return t.data.classes;throw new Error(t.error||"Failed to get school classes")}},Y5={getUsers:async e=>{const t=new URLSearchParams;e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.role&&t.append("role",e.role);const r=await lt(`/users?${t.toString()}`);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to get users")},getUserById:async e=>{const t=await lt(`/users/${e}`);if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to get user")},createUser:async e=>{const t=await lt("/users",{method:"POST",body:JSON.stringify(e)});if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to create user")},updateUser:async(e,t)=>{const r=await lt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to update user")},deleteUser:async e=>{const t=await lt(`/users/${e}`,{method:"DELETE"});if(!t.success)throw new Error(t.error||"Failed to delete user")},getChildrenByParentId:async e=>{const t=await lt(`/users/${e}/children`);if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to get children")}},Bp={getServices:async e=>{const t=new URLSearchParams;e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.category&&t.append("category",e.category);const r=await lt(`/services?${t.toString()}`);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to get services")},getServiceById:async e=>{const t=await lt(`/services/${e}`);if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to get service")},getServiceMedia:async e=>{const t=await lt(`/services/${e}/media`);if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to get service media")},createService:async e=>{const t=await lt("/services",{method:"POST",body:JSON.stringify(e)});if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to create service")},updateService:async(e,t)=>{const r=await lt(`/services/${e}`,{method:"PUT",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to update service")},deleteService:async e=>{const t=await lt(`/services/${e}`,{method:"DELETE"});if(!t.success)throw new Error(t.error||"Failed to delete service")},addStyleToService:async(e,t)=>{const r=await lt(`/services/${e}/styles`,{method:"POST",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to add style to service")},addOptionToService:async(e,t)=>{const r=await lt(`/services/${e}/options`,{method:"POST",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to add option to service")},updateServiceStyle:async(e,t,r)=>{console.log("api: updateServiceStyle called:",{serviceId:e,styleId:t,styleData:r}),console.log("api: styleData price type:",typeof r.price,"value:",r.price);const n=await lt(`/services/${e}/styles/${t}`,{method:"PUT",body:JSON.stringify(r)});if(console.log("api: updateServiceStyle response:",n),n.success&&n.data)return n.data;throw new Error(n.error||"Failed to update service style")},updateServiceOption:async(e,t,r)=>{const n=await lt(`/services/${e}/options/${t}`,{method:"PUT",body:JSON.stringify(r)});if(n.success&&n.data)return n.data;throw new Error(n.error||"Failed to update service option")}},Q5={uploadServiceFiles:async e=>{const t=new FormData;e.avatar&&t.append("avatar",e.avatar),e.images&&(console.log("API: добавляем изображения в FormData:",e.images.length),e.images.forEach((a,i)=>{console.log(`API: добавляем изображение ${i+1}:`,a.name,a.type,a.size),t.append("images",a)})),e.videos&&e.videos.forEach(a=>{t.append("videos",a)}),console.log("API: отправляем FormData на сервер"),console.log("API: FormData entries:");for(const[a,i]of t.entries())i instanceof File?console.log(`  ${a}: File(${i.name}, ${i.type}, ${i.size} bytes)`):console.log(`  ${a}: ${i}`);const r=await fetch(`${eo}/upload/service-files`,{method:"POST",headers:{Authorization:`Bearer ${gg()}`},body:t});if(!r.ok){const a=await r.json().catch(()=>({}));throw new Error(a.error||`HTTP error! status: ${r.status}`)}const n=await r.json();if(n.success&&n.data)return n.data;throw new Error(n.error||"Failed to upload files")}},J5={getMasterClasses:async e=>{const t=new URLSearchParams;e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),(e==null?void 0:e.isActive)!==void 0&&t.append("isActive",e.isActive.toString());const r=await lt(`/master-classes?${t.toString()}`);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to get master classes")},getMasterClassById:async e=>{const t=await lt(`/master-classes/${e}`);if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to get master class")},createMasterClass:async e=>{const t=await lt("/master-classes",{method:"POST",body:JSON.stringify(e)});if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to create master class")},updateMasterClass:async(e,t)=>{const r=await lt(`/master-classes/${e}`,{method:"PUT",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to update master class")},deleteMasterClass:async e=>{const t=await lt(`/master-classes/${e}`,{method:"DELETE"});if(!t.success)throw new Error(t.error||"Failed to delete master class")}},Z5={getEvents:async e=>{var t,r;try{const n=new URLSearchParams;e!=null&&e.schoolId&&n.append("schoolId",e.schoolId),e!=null&&e.classGroup&&n.append("classGroup",e.classGroup),e!=null&&e.date&&n.append("date",e.date),e!=null&&e.userId&&n.append("userId",e.userId);const a=await lt(`/master-classes?${n.toString()}`);if(a.success&&a.data){const i=await lt("/schools"),o=await lt("/services"),l=i.success?((t=i.data)==null?void 0:t.schools)||[]:[],c=o.success?((r=o.data)==null?void 0:r.services)||[]:[];return{masterClasses:a.data.masterClasses.map(u=>{const m=l.find(g=>g.id===u.school_id),f=c.find(g=>g.id===u.service_id),p=u.school_address?u.school_address.split(",")[0].trim():"Неизвестно";return u.participants&&u.participants.length>0&&(console.log(`API: Мастер-класс ${u.id} имеет ${u.participants.length} участников:`,u.participants),u.participants.forEach((g,h)=>{console.log(`API: Участник ${h+1}:`,{selectedStyles:g.selectedStyles,selectedOptions:g.selectedOptions,totalAmount:g.totalAmount})})),{id:u.id,date:u.date,time:u.time,schoolId:u.school_id,classGroup:u.class_group,serviceId:u.service_id,executors:u.executors,notes:u.notes,participants:u.participants,statistics:u.statistics,createdAt:u.created_at,updatedAt:u.updated_at,schoolName:u.school_name||(m==null?void 0:m.name)||`Школа ${u.school_id}`,serviceName:u.service_name||(f==null?void 0:f.name)||`Услуга ${u.service_id}`,city:p}}),total:a.data.total}}throw new Error(a.error||"Failed to get master class events")}catch(n){throw console.error("Error in getEvents:",n),n}},getEventById:async e=>{const t=await lt(`/master-classes/${e}`);if(t.success&&t.data){const r=t.data;return{id:r.id,date:r.date,time:r.time,school_id:r.school_id,class_group:r.class_group,service_id:r.service_id,executors:r.executors,notes:r.notes,participants:r.participants,statistics:r.statistics,school_address:r.school_address,created_at:r.created_at,updated_at:r.updated_at}}throw new Error(t.error||"Failed to get master class event")},createEvent:async e=>{console.log("API createEvent: отправляем данные:",{originalData:e,dateValue:e.date,dateType:typeof e.date,parsedDate:e.date?new Date(e.date):null});const t=await lt("/master-classes",{method:"POST",body:JSON.stringify(e)});if(t.success&&t.data)return t.data;throw new Error(t.error||"Failed to create master class event")},updateEvent:async(e,t)=>{const r=await lt(`/master-classes/${e}`,{method:"PUT",body:JSON.stringify(t)});if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to update master class event")},deleteEvent:async e=>{const t=await lt(`/master-classes/${e}`,{method:"DELETE"});if(!t.success)throw new Error(t.error||"Failed to delete master class event")},updateParticipantPaymentStatus:async(e,t,r)=>{const n=await lt(`/master-classes/${e}/participants/${t}/payment-status`,{method:"PATCH",body:JSON.stringify({isPaid:r})});if(!n.success)throw new Error(n.error||"Failed to update participant payment status")}},eb={getUserRegistrations:async e=>{const t=await lt(`/workshop-registrations/user/${e}`);if(t.success&&Array.isArray(t.data))return t.data;throw new Error("Failed to get user workshop registrations - invalid response format")},createRegistration:async e=>{const t=await lt("/workshop-registrations",{method:"POST",body:JSON.stringify(e)});if(t&&typeof t=="object"&&"id"in t&&"workshop_id"in t)return t;throw new Error("Failed to create workshop registration - invalid response format")},createGroupRegistration:async e=>{const t=await lt("/workshop-registrations/group",{method:"POST",body:JSON.stringify(e)});if(t&&typeof t=="object"&&"invoice"in t&&"registrations"in t&&"participants"in t)return{invoice:t.invoice,registrations:t.registrations,participants:t.participants};throw new Error("Failed to create group workshop registration - invalid response format")},getRegistrations:async e=>{const t=await lt(`/workshop-registrations/${e}`);if(t.success&&Array.isArray(t.data))return t.data;throw new Error("Failed to get workshop registrations - invalid response format")},getWorkshopStats:async e=>{const t=await lt(`/workshop-registrations/${e}/stats`);if(t.success&&t.data)return t.data;throw new Error("Failed to get workshop stats - invalid response format")},updateRegistrationStatus:async(e,t)=>{const r=await lt(`/workshop-registrations/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})});if(!(r&&typeof r=="object"))throw new Error("Failed to update registration status")},deleteRegistration:async e=>{const t=await lt(`/workshop-registrations/${e}`,{method:"DELETE"});if(!(t&&typeof t=="object"))throw new Error("Failed to delete workshop registration")}},eA={getInvoices:async(e={})=>{const t=new URLSearchParams;Object.entries(e).forEach(([a,i])=>{i&&i!=="all"&&t.append(a,i)});const r=await fetch(`${eo}/invoices?${t.toString()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!r.ok)throw new Error("Не удалось загрузить счета");const n=await r.json();if(!n.success)throw new Error(n.error||"Не удалось загрузить счета");return n.data},createInvoice:async e=>{const t=await fetch(`${eo}/invoices`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Не удалось создать счет");const r=await t.json();if(!r.success)throw new Error(r.error||"Не удалось создать счет");return r.data},updateInvoiceStatus:async(e,t)=>{const r=await fetch(`${eo}/invoices/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({status:t})});if(!r.ok)throw new Error("Не удалось обновить статус счета");const n=await r.json();if(!n.success)throw new Error(n.error||"Не удалось обновить статус счета");return n.data},syncAllInvoicesWithParticipants:async()=>{const e=await fetch(`${eo}/invoices/sync-participants`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!e.ok)throw new Error("Не удалось синхронизировать счета");const t=await e.json();if(!t.success)throw new Error(t.error||"Не удалось синхронизировать счета");return t.data},getInvoicesByDate:async e=>{const t=await fetch(`${eo}/invoices/date/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!t.ok)throw new Error("Не удалось загрузить счета по дате");const r=await t.json();if(!r.success)throw new Error(r.error||"Не удалось загрузить счета по дате");return r.data}},et={auth:X5,schools:K5,users:Y5,services:Bp,masterClasses:J5,masterClassEvents:Z5,workshopRegistrations:eb,invoices:eA,get:async e=>lt(e,{method:"GET"}),post:async(e,t)=>lt(e,{method:"POST",body:JSON.stringify(t)}),put:async(e,t)=>lt(e,{method:"PUT",body:JSON.stringify(t)}),patch:async(e,t)=>lt(e,{method:"PATCH",body:JSON.stringify(t)}),delete:async e=>lt(e,{method:"DELETE"})},tb=v.createContext(void 0),tA=({children:e})=>{const[t,r]=v.useState(null),[n,a]=v.useState(!0),[i,o]=v.useState(!1);v.useEffect(()=>{const p=setTimeout(async()=>{try{if(a(!0),et.auth.isAuthenticated())try{const g=await et.auth.getProfile();r({...g,role:g.role}),o(!0),console.log("Auth check successful, user:",g)}catch(g){console.error("Profile fetch failed, token may be invalid:",g),et.auth.logout(),r(null),o(!1)}else r(null),o(!1),console.log("No auth token found")}catch(g){console.error("Auth check failed:",g),et.auth.logout(),r(null),o(!1)}finally{a(!1)}},100);return()=>clearTimeout(p)},[]);const m={user:t,loading:n,login:async f=>{try{a(!0);const p=await et.auth.login(f);return r({...p.user,role:p.user.role}),o(!0),!0}catch(p){return console.error("Login failed:",p),!1}finally{a(!1)}},register:async f=>{try{a(!0);const p={...f,...f.role==="parent"&&f.children&&{children:f.children}},g=await et.auth.register(p);f.role==="parent"&&f.children&&g.user.children&&(localStorage.setItem("registered_children",JSON.stringify(g.user.children)),console.log("👶 Дети сохранены в localStorage:",g.user.children)),r({...g.user,role:g.user.role}),o(!0)}catch(p){throw console.error("Registration failed:",p),p}finally{a(!1)}},logout:()=>{et.auth.logout(),r(null),o(!1)},updateProfile:async f=>{try{a(!0);const p=await et.auth.updateProfile(f);r({...p,role:p.role})}catch(p){throw console.error("Profile update failed:",p),p}finally{a(!1)}},isAuthenticated:i};return s.jsx(tb.Provider,{value:m,children:e})},Sr=()=>{const e=v.useContext(tb);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};function at(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function rA(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function rb(...e){return t=>e.forEach(r=>rA(r,t))}function Mt(...e){return v.useCallback(rb(...e),e)}function nA(e,t){const r=v.createContext(t),n=i=>{const{children:o,...l}=i,c=v.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=v.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function Hi(e,t=[]){let r=[];function n(i,o){const l=v.createContext(o),c=r.length;r=[...r,o];const d=m=>{var w;const{scope:f,children:p,...g}=m,h=((w=f==null?void 0:f[e])==null?void 0:w[c])||l,x=v.useMemo(()=>g,Object.values(g));return s.jsx(h.Provider,{value:x,children:p})};d.displayName=i+"Provider";function u(m,f){var h;const p=((h=f==null?void 0:f[e])==null?void 0:h[c])||l,g=v.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>v.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,sA(a,...t)]}function sA(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var To=v.forwardRef((e,t)=>{const{children:r,...n}=e,a=v.Children.toArray(r),i=a.find(aA);if(i){const o=i.props.children,l=a.map(c=>c===i?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:c);return s.jsx(Wp,{...n,ref:t,children:v.isValidElement(o)?v.cloneElement(o,void 0,l):null})}return s.jsx(Wp,{...n,ref:t,children:r})});To.displayName="Slot";var Wp=v.forwardRef((e,t)=>{const{children:r,...n}=e;if(v.isValidElement(r)){const a=oA(r);return v.cloneElement(r,{...iA(n,r.props),ref:t?rb(t,a):a})}return v.Children.count(r)>1?v.Children.only(null):null});Wp.displayName="SlotClone";var vg=({children:e})=>s.jsx(s.Fragment,{children:e});function aA(e){return v.isValidElement(e)&&e.type===vg}function iA(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{i(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function oA(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var lA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ht=lA.reduce((e,t)=>{const r=v.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?To:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function nb(e,t){e&&Bo.flushSync(()=>e.dispatchEvent(t))}function Un(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function cA(e,t=globalThis==null?void 0:globalThis.document){const r=Un(e);v.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var dA="DismissableLayer",Up="dismissableLayer.update",uA="dismissableLayer.pointerDownOutside",fA="dismissableLayer.focusOutside",by,sb=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ou=v.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=v.useContext(sb),[u,m]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=v.useState({}),g=Mt(t,S=>m(S)),h=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=h.indexOf(x),y=u?h.indexOf(u):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,j=y>=w,b=mA(S=>{const C=S.target,A=[...d.branches].some(U=>U.contains(C));!j||A||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},f),_=pA(S=>{const C=S.target;[...d.branches].some(U=>U.contains(C))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},f);return cA(S=>{y===d.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},f),v.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(by=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Sy(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=by)}},[u,f,r,d]),v.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Sy())},[u,d]),v.useEffect(()=>{const S=()=>p({});return document.addEventListener(Up,S),()=>document.removeEventListener(Up,S)},[]),s.jsx(ht.div,{...c,ref:g,style:{pointerEvents:N?j?"auto":"none":void 0,...e.style},onFocusCapture:at(e.onFocusCapture,_.onFocusCapture),onBlurCapture:at(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:at(e.onPointerDownCapture,b.onPointerDownCapture)})});ou.displayName=dA;var hA="DismissableLayerBranch",ab=v.forwardRef((e,t)=>{const r=v.useContext(sb),n=v.useRef(null),a=Mt(t,n);return v.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(ht.div,{...e,ref:a})});ab.displayName=hA;function mA(e,t=globalThis==null?void 0:globalThis.document){const r=Un(e),n=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){ib(uA,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function pA(e,t=globalThis==null?void 0:globalThis.document){const r=Un(e),n=v.useRef(!1);return v.useEffect(()=>{const a=i=>{i.target&&!n.current&&ib(fA,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Sy(){const e=new CustomEvent(Up);document.dispatchEvent(e)}function ib(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?nb(a,i):a.dispatchEvent(i)}var xA=ou,gA=ab,pn=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},vA=S2.useId||(()=>{}),yA=0;function Ci(e){const[t,r]=v.useState(vA());return pn(()=>{r(n=>n??String(yA++))},[e]),t?`radix-${t}`:""}const wA=["top","right","bottom","left"],Oi=Math.min,Jn=Math.max,rh=Math.round,Gu=Math.floor,Di=e=>({x:e,y:e}),NA={left:"right",right:"left",bottom:"top",top:"bottom"},jA={start:"end",end:"start"};function zp(e,t,r){return Jn(e,Oi(t,r))}function Pa(e,t){return typeof e=="function"?e(t):e}function Fa(e){return e.split("-")[0]}function cc(e){return e.split("-")[1]}function yg(e){return e==="x"?"y":"x"}function wg(e){return e==="y"?"height":"width"}function Ri(e){return["top","bottom"].includes(Fa(e))?"y":"x"}function Ng(e){return yg(Ri(e))}function bA(e,t,r){r===void 0&&(r=!1);const n=cc(e),a=Ng(e),i=wg(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=nh(o)),[o,nh(o)]}function SA(e){const t=nh(e);return[Hp(e),t,Hp(t)]}function Hp(e){return e.replace(/start|end/g,t=>jA[t])}function EA(e,t,r){const n=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:n:t?n:a;case"left":case"right":return t?i:o;default:return[]}}function _A(e,t,r,n){const a=cc(e);let i=EA(Fa(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Hp)))),i}function nh(e){return e.replace(/left|right|bottom|top/g,t=>NA[t])}function CA(e){return{top:0,right:0,bottom:0,left:0,...e}}function ob(e){return typeof e!="number"?CA(e):{top:e,right:e,bottom:e,left:e}}function sh(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function Ey(e,t,r){let{reference:n,floating:a}=e;const i=Ri(t),o=Ng(t),l=wg(o),c=Fa(t),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,f=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:n.y-a.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:m};break;case"left":p={x:n.x-a.width,y:m};break;default:p={x:n.x,y:n.y}}switch(cc(t)){case"start":p[o]-=f*(r&&d?-1:1);break;case"end":p[o]+=f*(r&&d?-1:1);break}return p}const TA=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:m}=Ey(d,n,c),f=n,p={},g=0;for(let h=0;h<l.length;h++){const{name:x,fn:w}=l[h],{x:y,y:N,data:j,reset:b}=await w({x:u,y:m,initialPlacement:n,placement:f,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=y??u,m=N??m,p={...p,[x]:{...p[x],...j}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(d=b.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):b.rects),{x:u,y:m}=Ey(d,f,c)),h=-1)}return{x:u,y:m,placement:f,strategy:a,middlewareData:p}};async function _d(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:f=!1,padding:p=0}=Pa(t,e),g=ob(p),x=l[f?m==="floating"?"reference":"floating":m],w=sh(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(x)))==null||r?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=m==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},b=sh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:N,strategy:c}):y);return{top:(w.top-b.top+g.top)/j.y,bottom:(b.bottom-w.bottom+g.bottom)/j.y,left:(w.left-b.left+g.left)/j.x,right:(b.right-w.right+g.right)/j.x}}const kA=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Pa(e,t)||{};if(d==null)return{};const m=ob(u),f={x:r,y:n},p=Ng(a),g=wg(p),h=await o.getDimensions(d),x=p==="y",w=x?"top":"left",y=x?"bottom":"right",N=x?"clientHeight":"clientWidth",j=i.reference[g]+i.reference[p]-f[p]-i.floating[g],b=f[p]-i.reference[p],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let S=_?_[N]:0;(!S||!await(o.isElement==null?void 0:o.isElement(_)))&&(S=l.floating[N]||i.floating[g]);const C=j/2-b/2,A=S/2-h[g]/2-1,U=Oi(m[w],A),k=Oi(m[y],A),R=U,te=S-h[g]-k,Z=S/2-h[g]/2+C,se=zp(R,Z,te),ae=!c.arrow&&cc(a)!=null&&Z!==se&&i.reference[g]/2-(Z<R?U:k)-h[g]/2<0,ne=ae?Z<R?Z-R:Z-te:0;return{[p]:f[p]+ne,data:{[p]:se,centerOffset:Z-se-ne,...ae&&{alignmentOffset:ne}},reset:ae}}}),AA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:h=!0,...x}=Pa(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const w=Fa(a),y=Ri(l),N=Fa(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),b=f||(N||!h?[nh(l)]:SA(l)),_=g!=="none";!f&&_&&b.push(..._A(l,h,g,j));const S=[l,...b],C=await _d(t,x),A=[];let U=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&A.push(C[w]),m){const Z=bA(a,o,j);A.push(C[Z[0]],C[Z[1]])}if(U=[...U,{placement:a,overflows:A}],!A.every(Z=>Z<=0)){var k,R;const Z=(((k=i.flip)==null?void 0:k.index)||0)+1,se=S[Z];if(se)return{data:{index:Z,overflows:U},reset:{placement:se}};let ae=(R=U.filter(ne=>ne.overflows[0]<=0).sort((ne,K)=>ne.overflows[1]-K.overflows[1])[0])==null?void 0:R.placement;if(!ae)switch(p){case"bestFit":{var te;const ne=(te=U.filter(K=>{if(_){const re=Ri(K.placement);return re===y||re==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(re=>re>0).reduce((re,xe)=>re+xe,0)]).sort((K,re)=>K[1]-re[1])[0])==null?void 0:te[0];ne&&(ae=ne);break}case"initialPlacement":ae=l;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function _y(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Cy(e){return wA.some(t=>e[t]>=0)}const OA=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Pa(e,t);switch(n){case"referenceHidden":{const i=await _d(t,{...a,elementContext:"reference"}),o=_y(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Cy(o)}}}case"escaped":{const i=await _d(t,{...a,altBoundary:!0}),o=_y(i,r.floating);return{data:{escapedOffsets:o,escaped:Cy(o)}}}default:return{}}}}};async function DA(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=Fa(r),l=cc(r),c=Ri(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,m=Pa(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),c?{x:p*u,y:f*d}:{x:f*d,y:p*u}}const RA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await DA(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},PA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:w,y}=x;return{x:w,y}}},...c}=Pa(e,t),d={x:r,y:n},u=await _d(t,c),m=Ri(Fa(a)),f=yg(m);let p=d[f],g=d[m];if(i){const x=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=p+u[x],N=p-u[w];p=zp(y,p,N)}if(o){const x=m==="y"?"top":"left",w=m==="y"?"bottom":"right",y=g+u[x],N=g-u[w];g=zp(y,g,N)}const h=l.fn({...t,[f]:p,[m]:g});return{...h,data:{x:h.x-r,y:h.y-n,enabled:{[f]:i,[m]:o}}}}}},FA=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Pa(e,t),u={x:r,y:n},m=Ri(a),f=yg(m);let p=u[f],g=u[m];const h=Pa(l,t),x=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(c){const N=f==="y"?"height":"width",j=i.reference[f]-i.floating[N]+x.mainAxis,b=i.reference[f]+i.reference[N]-x.mainAxis;p<j?p=j:p>b&&(p=b)}if(d){var w,y;const N=f==="y"?"width":"height",j=["top","left"].includes(Fa(a)),b=i.reference[m]-i.floating[N]+(j&&((w=o.offset)==null?void 0:w[m])||0)+(j?0:x.crossAxis),_=i.reference[m]+i.reference[N]+(j?0:((y=o.offset)==null?void 0:y[m])||0)-(j?x.crossAxis:0);g<b?g=b:g>_&&(g=_)}return{[f]:p,[m]:g}}}},MA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Pa(e,t),u=await _d(t,d),m=Fa(a),f=cc(a),p=Ri(a)==="y",{width:g,height:h}=i.floating;let x,w;m==="top"||m==="bottom"?(x=m,w=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=m,x=f==="end"?"top":"bottom");const y=h-u.top-u.bottom,N=g-u.left-u.right,j=Oi(h-u[x],y),b=Oi(g-u[w],N),_=!t.middlewareData.shift;let S=j,C=b;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=N),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=y),_&&!f){const U=Jn(u.left,0),k=Jn(u.right,0),R=Jn(u.top,0),te=Jn(u.bottom,0);p?C=g-2*(U!==0||k!==0?U+k:Jn(u.left,u.right)):S=h-2*(R!==0||te!==0?R+te:Jn(u.top,u.bottom))}await c({...t,availableWidth:C,availableHeight:S});const A=await o.getDimensions(l.floating);return g!==A.width||h!==A.height?{reset:{rects:!0}}:{}}}};function qh(){return typeof window<"u"}function dc(e){return lb(e)?(e.nodeName||"").toLowerCase():"#document"}function ns(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ma(e){var t;return(t=(lb(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lb(e){return qh()?e instanceof Node||e instanceof ns(e).Node:!1}function zs(e){return qh()?e instanceof Element||e instanceof ns(e).Element:!1}function da(e){return qh()?e instanceof HTMLElement||e instanceof ns(e).HTMLElement:!1}function Ty(e){return!qh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ns(e).ShadowRoot}function lu(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Hs(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function IA(e){return["table","td","th"].includes(dc(e))}function Xh(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function jg(e){const t=bg(),r=zs(e)?Hs(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function LA(e){let t=Pi(e);for(;da(t)&&!Zl(t);){if(jg(t))return t;if(Xh(t))return null;t=Pi(t)}return null}function bg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zl(e){return["html","body","#document"].includes(dc(e))}function Hs(e){return ns(e).getComputedStyle(e)}function Kh(e){return zs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Pi(e){if(dc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ty(e)&&e.host||ma(e);return Ty(t)?t.host:t}function cb(e){const t=Pi(e);return Zl(t)?e.ownerDocument?e.ownerDocument.body:e.body:da(t)&&lu(t)?t:cb(t)}function Cd(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=cb(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=ns(a);if(i){const l=Vp(o);return t.concat(o,o.visualViewport||[],lu(a)?a:[],l&&r?Cd(l):[])}return t.concat(a,Cd(a,[],r))}function Vp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function db(e){const t=Hs(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=da(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=rh(r)!==i||rh(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Sg(e){return zs(e)?e:e.contextElement}function bl(e){const t=Sg(e);if(!da(t))return Di(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=db(t);let o=(i?rh(r.width):r.width)/n,l=(i?rh(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const $A=Di(0);function ub(e){const t=ns(e);return!bg()||!t.visualViewport?$A:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function BA(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ns(e)?!1:t}function ko(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=Sg(e);let o=Di(1);t&&(n?zs(n)&&(o=bl(n)):o=bl(e));const l=BA(i,r,n)?ub(i):Di(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,m=a.height/o.y;if(i){const f=ns(i),p=n&&zs(n)?ns(n):n;let g=f,h=Vp(g);for(;h&&n&&p!==g;){const x=bl(h),w=h.getBoundingClientRect(),y=Hs(h),N=w.left+(h.clientLeft+parseFloat(y.paddingLeft))*x.x,j=w.top+(h.clientTop+parseFloat(y.paddingTop))*x.y;c*=x.x,d*=x.y,u*=x.x,m*=x.y,c+=N,d+=j,g=ns(h),h=Vp(g)}}return sh({width:u,height:m,x:c,y:d})}function WA(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=ma(n),l=t?Xh(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Di(1);const u=Di(0),m=da(n);if((m||!m&&!i)&&((dc(n)!=="body"||lu(o))&&(c=Kh(n)),da(n))){const f=ko(n);d=bl(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x,y:r.y*d.y-c.scrollTop*d.y+u.y}}function UA(e){return Array.from(e.getClientRects())}function Gp(e,t){const r=Kh(e).scrollLeft;return t?t.left+r:ko(ma(e)).left+r}function zA(e){const t=ma(e),r=Kh(e),n=e.ownerDocument.body,a=Jn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Jn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Gp(e);const l=-r.scrollTop;return Hs(n).direction==="rtl"&&(o+=Jn(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}function HA(e,t){const r=ns(e),n=ma(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=bg();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function VA(e,t){const r=ko(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=da(e)?bl(e):Di(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function ky(e,t,r){let n;if(t==="viewport")n=HA(e,r);else if(t==="document")n=zA(ma(e));else if(zs(t))n=VA(t,r);else{const a=ub(e);n={...t,x:t.x-a.x,y:t.y-a.y}}return sh(n)}function fb(e,t){const r=Pi(e);return r===t||!zs(r)||Zl(r)?!1:Hs(r).position==="fixed"||fb(r,t)}function GA(e,t){const r=t.get(e);if(r)return r;let n=Cd(e,[],!1).filter(l=>zs(l)&&dc(l)!=="body"),a=null;const i=Hs(e).position==="fixed";let o=i?Pi(e):e;for(;zs(o)&&!Zl(o);){const l=Hs(o),c=jg(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||lu(o)&&!c&&fb(e,o))?n=n.filter(u=>u!==o):a=l,o=Pi(o)}return t.set(e,n),n}function qA(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?Xh(t)?[]:GA(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const m=ky(t,u,a);return d.top=Jn(m.top,d.top),d.right=Oi(m.right,d.right),d.bottom=Oi(m.bottom,d.bottom),d.left=Jn(m.left,d.left),d},ky(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function XA(e){const{width:t,height:r}=db(e);return{width:t,height:r}}function KA(e,t,r){const n=da(t),a=ma(t),i=r==="fixed",o=ko(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Di(0);if(n||!n&&!i)if((dc(t)!=="body"||lu(a))&&(l=Kh(t)),n){const p=ko(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&(c.x=Gp(a));let d=0,u=0;if(a&&!n&&!i){const p=a.getBoundingClientRect();u=p.top+l.scrollTop,d=p.left+l.scrollLeft-Gp(a,p)}const m=o.left+l.scrollLeft-c.x-d,f=o.top+l.scrollTop-c.y-u;return{x:m,y:f,width:o.width,height:o.height}}function em(e){return Hs(e).position==="static"}function Ay(e,t){if(!da(e)||Hs(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ma(e)===r&&(r=r.ownerDocument.body),r}function hb(e,t){const r=ns(e);if(Xh(e))return r;if(!da(e)){let a=Pi(e);for(;a&&!Zl(a);){if(zs(a)&&!em(a))return a;a=Pi(a)}return r}let n=Ay(e,t);for(;n&&IA(n)&&em(n);)n=Ay(n,t);return n&&Zl(n)&&em(n)&&!jg(n)?r:n||LA(e)||r}const YA=async function(e){const t=this.getOffsetParent||hb,r=this.getDimensions,n=await r(e.floating);return{reference:KA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function QA(e){return Hs(e).direction==="rtl"}const JA={convertOffsetParentRelativeRectToViewportRelativeRect:WA,getDocumentElement:ma,getClippingRect:qA,getOffsetParent:hb,getElementRects:YA,getClientRects:UA,getDimensions:XA,getScale:bl,isElement:zs,isRTL:QA};function ZA(e,t){let r=null,n;const a=ma(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:d,top:u,width:m,height:f}=e.getBoundingClientRect();if(l||t(),!m||!f)return;const p=Gu(u),g=Gu(a.clientWidth-(d+m)),h=Gu(a.clientHeight-(u+f)),x=Gu(d),y={rootMargin:-p+"px "+-g+"px "+-h+"px "+-x+"px",threshold:Jn(0,Oi(1,c))||1};let N=!0;function j(b){const _=b[0].intersectionRatio;if(_!==c){if(!N)return o();_?o(!1,_):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N=!1}try{r=new IntersectionObserver(j,{...y,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,y)}r.observe(e)}return o(!0),i}function e6(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Sg(e),u=a||i?[...d?Cd(d):[],...Cd(t)]:[];u.forEach(w=>{a&&w.addEventListener("scroll",r,{passive:!0}),i&&w.addEventListener("resize",r)});const m=d&&l?ZA(d,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(w=>{let[y]=w;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var N;(N=p)==null||N.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let g,h=c?ko(e):null;c&&x();function x(){const w=ko(e);h&&(w.x!==h.x||w.y!==h.y||w.width!==h.width||w.height!==h.height)&&r(),h=w,g=requestAnimationFrame(x)}return r(),()=>{var w;u.forEach(y=>{a&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),m==null||m(),(w=p)==null||w.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const t6=RA,r6=PA,n6=AA,s6=MA,a6=OA,Oy=kA,i6=FA,o6=(e,t,r)=>{const n=new Map,a={platform:JA,...r},i={...a.platform,_c:n};return TA(e,t,{...a,platform:i})};var jf=typeof document<"u"?v.useLayoutEffect:v.useEffect;function ah(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!ah(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!ah(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function mb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Dy(e,t){const r=mb(e);return Math.round(t*r)/r}function tm(e){const t=v.useRef(e);return jf(()=>{t.current=e}),t}function l6(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,m]=v.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=v.useState(n);ah(f,n)||p(n);const[g,h]=v.useState(null),[x,w]=v.useState(null),y=v.useCallback(K=>{K!==_.current&&(_.current=K,h(K))},[]),N=v.useCallback(K=>{K!==S.current&&(S.current=K,w(K))},[]),j=i||g,b=o||x,_=v.useRef(null),S=v.useRef(null),C=v.useRef(u),A=c!=null,U=tm(c),k=tm(a),R=tm(d),te=v.useCallback(()=>{if(!_.current||!S.current)return;const K={placement:t,strategy:r,middleware:f};k.current&&(K.platform=k.current),o6(_.current,S.current,K).then(re=>{const xe={...re,isPositioned:R.current!==!1};Z.current&&!ah(C.current,xe)&&(C.current=xe,Bo.flushSync(()=>{m(xe)}))})},[f,t,r,k,R]);jf(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(K=>({...K,isPositioned:!1})))},[d]);const Z=v.useRef(!1);jf(()=>(Z.current=!0,()=>{Z.current=!1}),[]),jf(()=>{if(j&&(_.current=j),b&&(S.current=b),j&&b){if(U.current)return U.current(j,b,te);te()}},[j,b,te,U,A]);const se=v.useMemo(()=>({reference:_,floating:S,setReference:y,setFloating:N}),[y,N]),ae=v.useMemo(()=>({reference:j,floating:b}),[j,b]),ne=v.useMemo(()=>{const K={position:r,left:0,top:0};if(!ae.floating)return K;const re=Dy(ae.floating,u.x),xe=Dy(ae.floating,u.y);return l?{...K,transform:"translate("+re+"px, "+xe+"px)",...mb(ae.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:re,top:xe}},[r,l,ae.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:te,refs:se,elements:ae,floatingStyles:ne}),[u,te,se,ae,ne])}const c6=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Oy({element:n.current,padding:a}).fn(r):{}:n?Oy({element:n,padding:a}).fn(r):{}}}},d6=(e,t)=>({...t6(e),options:[e,t]}),u6=(e,t)=>({...r6(e),options:[e,t]}),f6=(e,t)=>({...i6(e),options:[e,t]}),h6=(e,t)=>({...n6(e),options:[e,t]}),m6=(e,t)=>({...s6(e),options:[e,t]}),p6=(e,t)=>({...a6(e),options:[e,t]}),x6=(e,t)=>({...c6(e),options:[e,t]});var g6="Arrow",pb=v.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(ht.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});pb.displayName=g6;var v6=pb;function y6(e,t=[]){let r=[];function n(i,o){const l=v.createContext(o),c=r.length;r=[...r,o];function d(m){const{scope:f,children:p,...g}=m,h=(f==null?void 0:f[e][c])||l,x=v.useMemo(()=>g,Object.values(g));return s.jsx(h.Provider,{value:x,children:p})}function u(m,f){const p=(f==null?void 0:f[e][c])||l,g=v.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>v.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,w6(a,...t)]}function w6(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Eg(e){const[t,r]=v.useState(void 0);return pn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var _g="Popper",[xb,Yh]=y6(_g),[N6,gb]=xb(_g),vb=e=>{const{__scopePopper:t,children:r}=e,[n,a]=v.useState(null);return s.jsx(N6,{scope:t,anchor:n,onAnchorChange:a,children:r})};vb.displayName=_g;var yb="PopperAnchor",wb=v.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=gb(yb,r),o=v.useRef(null),l=Mt(t,o);return v.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:s.jsx(ht.div,{...a,ref:l})});wb.displayName=yb;var Cg="PopperContent",[j6,b6]=xb(Cg),Nb=v.forwardRef((e,t)=>{var G,me,he,B,be,pe;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...h}=e,x=gb(Cg,r),[w,y]=v.useState(null),N=Mt(t,Y=>y(Y)),[j,b]=v.useState(null),_=Eg(j),S=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,A=n+(i!=="center"?"-"+i:""),U=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(d)?d:[d],R=k.length>0,te={padding:U,boundary:k.filter(E6),altBoundary:R},{refs:Z,floatingStyles:se,placement:ae,isPositioned:ne,middlewareData:K}=l6({strategy:"fixed",placement:A,whileElementsMounted:(...Y)=>e6(...Y,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[d6({mainAxis:a+C,alignmentAxis:o}),c&&u6({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?f6():void 0,...te}),c&&h6({...te}),m6({...te,apply:({elements:Y,rects:P,availableWidth:ce,availableHeight:Se})=>{const{width:ue,height:Pe}=P.reference,je=Y.floating.style;je.setProperty("--radix-popper-available-width",`${ce}px`),je.setProperty("--radix-popper-available-height",`${Se}px`),je.setProperty("--radix-popper-anchor-width",`${ue}px`),je.setProperty("--radix-popper-anchor-height",`${Pe}px`)}}),j&&x6({element:j,padding:l}),_6({arrowWidth:S,arrowHeight:C}),f&&p6({strategy:"referenceHidden",...te})]}),[re,xe]=Sb(ae),J=Un(g);pn(()=>{ne&&(J==null||J())},[ne,J]);const D=(G=K.arrow)==null?void 0:G.x,X=(me=K.arrow)==null?void 0:me.y,V=((he=K.arrow)==null?void 0:he.centerOffset)!==0,[E,I]=v.useState();return pn(()=>{w&&I(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:ne?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:E,"--radix-popper-transform-origin":[(B=K.transformOrigin)==null?void 0:B.x,(be=K.transformOrigin)==null?void 0:be.y].join(" "),...((pe=K.hide)==null?void 0:pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(j6,{scope:r,placedSide:re,onArrowChange:b,arrowX:D,arrowY:X,shouldHideArrow:V,children:s.jsx(ht.div,{"data-side":re,"data-align":xe,...h,ref:N,style:{...h.style,animation:ne?void 0:"none"}})})})});Nb.displayName=Cg;var jb="PopperArrow",S6={top:"bottom",right:"left",bottom:"top",left:"right"},bb=v.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=b6(jb,n),o=S6[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(v6,{...a,ref:r,style:{...a.style,display:"block"}})})});bb.displayName=jb;function E6(e){return e!==null}var _6=e=>({name:"transformOrigin",options:e,fn(t){var x,w,y;const{placement:r,rects:n,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=Sb(r),m={start:"0%",center:"50%",end:"100%"}[u],f=(((w=a.arrow)==null?void 0:w.x)??0)+l/2,p=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let g="",h="";return d==="bottom"?(g=o?m:`${f}px`,h=`${-c}px`):d==="top"?(g=o?m:`${f}px`,h=`${n.floating.height+c}px`):d==="right"?(g=`${-c}px`,h=o?m:`${p}px`):d==="left"&&(g=`${n.floating.width+c}px`,h=o?m:`${p}px`),{data:{x:g,y:h}}}});function Sb(e){const[t,r="center"]=e.split("-");return[t,r]}var C6=vb,Eb=wb,_b=Nb,Cb=bb,T6="Portal",Qh=v.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=v.useState(!1);pn(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?E3.createPortal(s.jsx(ht.div,{...n,ref:t}),o):null});Qh.displayName=T6;function k6(e,t){return v.useReducer((r,n)=>t[r][n]??r,e)}var Vi=e=>{const{present:t,children:r}=e,n=A6(t),a=typeof r=="function"?r({present:n.isPresent}):v.Children.only(r),i=Mt(n.ref,O6(a));return typeof r=="function"||n.isPresent?v.cloneElement(a,{ref:i}):null};Vi.displayName="Presence";function A6(e){const[t,r]=v.useState(),n=v.useRef({}),a=v.useRef(e),i=v.useRef("none"),o=e?"mounted":"unmounted",[l,c]=k6(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const d=qu(n.current);i.current=l==="mounted"?d:"none"},[l]),pn(()=>{const d=n.current,u=a.current;if(u!==e){const f=i.current,p=qu(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),pn(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,m=p=>{const h=qu(n.current).includes(p.animationName);if(p.target===t&&h&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},f=p=>{p.target===t&&(i.current=qu(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:v.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function qu(e){return(e==null?void 0:e.animationName)||"none"}function O6(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Fi({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=D6({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,l=Un(r),c=v.useCallback(d=>{if(i){const m=typeof d=="function"?d(e):d;m!==e&&l(m)}else a(d)},[i,e,a,l]);return[o,c]}function D6({defaultProp:e,onChange:t}){const r=v.useState(e),[n]=r,a=v.useRef(n),i=Un(t);return v.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}var R6="VisuallyHidden",cu=v.forwardRef((e,t)=>s.jsx(ht.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));cu.displayName=R6;var P6=cu,[Jh,fH]=Hi("Tooltip",[Yh]),Tg=Yh(),Tb="TooltipProvider",F6=700,Ry="tooltip.open",[M6,kb]=Jh(Tb),Ab=e=>{const{__scopeTooltip:t,delayDuration:r=F6,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,[o,l]=v.useState(!0),c=v.useRef(!1),d=v.useRef(0);return v.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),s.jsx(M6,{scope:t,isOpenDelayed:o,delayDuration:r,onOpen:v.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:v.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:v.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:i})};Ab.displayName=Tb;var Ob="Tooltip",[hH,Zh]=Jh(Ob),qp="TooltipTrigger",I6=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Zh(qp,r),i=kb(qp,r),o=Tg(r),l=v.useRef(null),c=Mt(t,l,a.onTriggerChange),d=v.useRef(!1),u=v.useRef(!1),m=v.useCallback(()=>d.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(Eb,{asChild:!0,...o,children:s.jsx(ht.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:at(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:at(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:at(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:at(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:at(e.onBlur,a.onClose),onClick:at(e.onClick,a.onClose)})})});I6.displayName=qp;var L6="TooltipPortal",[mH,$6]=Jh(L6,{forceMount:void 0}),ec="TooltipContent",Db=v.forwardRef((e,t)=>{const r=$6(ec,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Zh(ec,e.__scopeTooltip);return s.jsx(Vi,{present:n||o.open,children:o.disableHoverableContent?s.jsx(Rb,{side:a,...i,ref:t}):s.jsx(B6,{side:a,...i,ref:t})})}),B6=v.forwardRef((e,t)=>{const r=Zh(ec,e.__scopeTooltip),n=kb(ec,e.__scopeTooltip),a=v.useRef(null),i=Mt(t,a),[o,l]=v.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:m}=n,f=v.useCallback(()=>{l(null),m(!1)},[m]),p=v.useCallback((g,h)=>{const x=g.currentTarget,w={x:g.clientX,y:g.clientY},y=H6(w,x.getBoundingClientRect()),N=V6(w,y),j=G6(h.getBoundingClientRect()),b=X6([...N,...j]);l(b),m(!0)},[m]);return v.useEffect(()=>()=>f(),[f]),v.useEffect(()=>{if(c&&u){const g=x=>p(x,u),h=x=>p(x,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",h),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",h)}}},[c,u,p,f]),v.useEffect(()=>{if(o){const g=h=>{const x=h.target,w={x:h.clientX,y:h.clientY},y=(c==null?void 0:c.contains(x))||(u==null?void 0:u.contains(x)),N=!q6(w,o);y?f():N&&(f(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,d,f]),s.jsx(Rb,{...e,ref:i})}),[W6,U6]=Jh(Ob,{isInside:!1}),Rb=v.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Zh(ec,r),d=Tg(r),{onClose:u}=c;return v.useEffect(()=>(document.addEventListener(Ry,u),()=>document.removeEventListener(Ry,u)),[u]),v.useEffect(()=>{if(c.trigger){const m=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,u]),s.jsx(ou,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:s.jsxs(_b,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(vg,{children:n}),s.jsx(W6,{scope:r,isInside:!0,children:s.jsx(P6,{id:c.contentId,role:"tooltip",children:a||n})})]})})});Db.displayName=ec;var Pb="TooltipArrow",z6=v.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Tg(r);return U6(Pb,r).isInside?null:s.jsx(Cb,{...a,...n,ref:t})});z6.displayName=Pb;function H6(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function V6(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function G6(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function q6(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i].x,c=t[i].y,d=t[o].x,u=t[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function X6(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),K6(t)}function K6(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var Y6=Ab,Fb=Db;function Mb(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Mb(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ib(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Mb(e))&&(n&&(n+=" "),n+=t);return n}const kg="-",Q6=e=>{const t=Z6(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(kg);return l[0]===""&&l.length!==1&&l.shift(),Lb(l,t)||J6(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Lb=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Lb(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(kg);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Py=/^\[(.+)\]$/,J6=e=>{if(Py.test(e)){const t=Py.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Z6=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return tO(Object.entries(e.classGroups),r).forEach(([i,o])=>{Xp(o,n,i,t)}),n},Xp=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Fy(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(eO(a)){Xp(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{Xp(o,Fy(t,i),r,n)})})},Fy=(e,t)=>{let r=e;return t.split(kg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},eO=e=>e.isThemeGetter,tO=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,rO=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},$b="!",nO=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,m;for(let x=0;x<l.length;x++){let w=l[x];if(d===0){if(w===a&&(n||l.slice(x,x+i)===t)){c.push(l.slice(u,x)),u=x+i;continue}if(w==="/"){m=x;continue}}w==="["?d++:w==="]"&&d--}const f=c.length===0?l:l.substring(u),p=f.startsWith($b),g=p?f.substring(1):f,h=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:h}};return r?l=>r({className:l,parseClassName:o}):o},sO=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},aO=e=>({cache:rO(e.cacheSize),parseClassName:nO(e),...Q6(e)}),iO=/\s+/,oO=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(iO);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:p}=r(d);let g=!!p,h=n(g?f.substring(0,p):f);if(!h){if(!g){l=d+(l.length>0?" "+l:l);continue}if(h=n(f),!h){l=d+(l.length>0?" "+l:l);continue}g=!1}const x=sO(u).join(":"),w=m?x+$b:x,y=w+h;if(i.includes(y))continue;i.push(y);const N=a(h,g);for(let j=0;j<N.length;++j){const b=N[j];i.push(w+b)}l=d+(l.length>0?" "+l:l)}return l};function lO(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Bb(t))&&(n&&(n+=" "),n+=r);return n}const Bb=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Bb(e[n]))&&(r&&(r+=" "),r+=t);return r};function cO(e,...t){let r,n,a,i=o;function o(c){const d=t.reduce((u,m)=>m(u),e());return r=aO(d),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=oO(c,r);return a(c,u),u}return function(){return i(lO.apply(null,arguments))}}const sr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Wb=/^\[(?:([a-z-]+):)?(.+)\]$/i,dO=/^\d+\/\d+$/,uO=new Set(["px","full","screen"]),fO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ga=e=>Sl(e)||uO.has(e)||dO.test(e),Ga=e=>uc(e,"length",SO),Sl=e=>!!e&&!Number.isNaN(Number(e)),rm=e=>uc(e,"number",Sl),_c=e=>!!e&&Number.isInteger(Number(e)),gO=e=>e.endsWith("%")&&Sl(e.slice(0,-1)),mt=e=>Wb.test(e),qa=e=>fO.test(e),vO=new Set(["length","size","percentage"]),yO=e=>uc(e,vO,Ub),wO=e=>uc(e,"position",Ub),NO=new Set(["image","url"]),jO=e=>uc(e,NO,_O),bO=e=>uc(e,"",EO),Cc=()=>!0,uc=(e,t,r)=>{const n=Wb.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},SO=e=>hO.test(e)&&!mO.test(e),Ub=()=>!1,EO=e=>pO.test(e),_O=e=>xO.test(e),CO=()=>{const e=sr("colors"),t=sr("spacing"),r=sr("blur"),n=sr("brightness"),a=sr("borderColor"),i=sr("borderRadius"),o=sr("borderSpacing"),l=sr("borderWidth"),c=sr("contrast"),d=sr("grayscale"),u=sr("hueRotate"),m=sr("invert"),f=sr("gap"),p=sr("gradientColorStops"),g=sr("gradientColorStopPositions"),h=sr("inset"),x=sr("margin"),w=sr("opacity"),y=sr("padding"),N=sr("saturate"),j=sr("scale"),b=sr("sepia"),_=sr("skew"),S=sr("space"),C=sr("translate"),A=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",mt,t],R=()=>[mt,t],te=()=>["",ga,Ga],Z=()=>["auto",Sl,mt],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ae=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],re=()=>["","0",mt],xe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[Sl,mt];return{cacheSize:500,separator:":",theme:{colors:[Cc],spacing:[ga,Ga],blur:["none","",qa,mt],brightness:J(),borderColor:[e],borderRadius:["none","","full",qa,mt],borderSpacing:R(),borderWidth:te(),contrast:J(),grayscale:re(),hueRotate:J(),invert:re(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[gO,Ga],inset:k(),margin:k(),opacity:J(),padding:R(),saturate:J(),scale:J(),sepia:re(),skew:J(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",mt]}],container:["container"],columns:[{columns:[qa]}],"break-after":[{"break-after":xe()}],"break-before":[{"break-before":xe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),mt]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_c,mt]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mt]}],grow:[{grow:re()}],shrink:[{shrink:re()}],order:[{order:["first","last","none",_c,mt]}],"grid-cols":[{"grid-cols":[Cc]}],"col-start-end":[{col:["auto",{span:["full",_c,mt]},mt]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[Cc]}],"row-start-end":[{row:["auto",{span:[_c,mt]},mt]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mt,t]}],"min-w":[{"min-w":[mt,t,"min","max","fit"]}],"max-w":[{"max-w":[mt,t,"none","full","min","max","fit","prose",{screen:[qa]},qa]}],h:[{h:[mt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qa,Ga]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rm]}],"font-family":[{font:[Cc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mt]}],"line-clamp":[{"line-clamp":["none",Sl,rm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ga,mt]}],"list-image":[{"list-image":["none",mt]}],"list-style-type":[{list:["none","disc","decimal",mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ga,Ga]}],"underline-offset":[{"underline-offset":["auto",ga,mt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),wO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},jO]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ae(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ae()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ae()]}],"outline-offset":[{"outline-offset":[ga,mt]}],"outline-w":[{outline:[ga,Ga]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ga,Ga]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qa,bO]}],"shadow-color":[{shadow:[Cc]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qa,mt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mt]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",mt]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[_c,mt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ga,Ga,rm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},TO=cO(CO);function We(...e){return TO(Ib(e))}const kO=Y6,AO=v.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(Fb,{ref:n,sideOffset:t,className:We("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));AO.displayName=Fb.displayName;const OO=1,DO=1e6;let nm=0;function RO(){return nm=(nm+1)%Number.MAX_SAFE_INTEGER,nm.toString()}const sm=new Map,My=e=>{if(sm.has(e))return;const t=setTimeout(()=>{sm.delete(e),Yc({type:"REMOVE_TOAST",toastId:e})},DO);sm.set(e,t)},PO=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,OO)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?My(r):e.toasts.forEach(n=>{My(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},bf=[];let Sf={toasts:[]};function Yc(e){Sf=PO(Sf,e),bf.forEach(t=>{t(Sf)})}function Kp({...e}){const t=RO(),r=a=>Yc({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Yc({type:"DISMISS_TOAST",toastId:t});return Yc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Gt(){const[e,t]=v.useState(Sf);return v.useEffect(()=>(bf.push(t),()=>{const r=bf.indexOf(t);r>-1&&bf.splice(r,1)}),[e]),{...e,toast:Kp,dismiss:r=>Yc({type:"DISMISS_TOAST",toastId:r})}}function FO(e,t=[]){let r=[];function n(i,o){const l=v.createContext(o),c=r.length;r=[...r,o];function d(m){const{scope:f,children:p,...g}=m,h=(f==null?void 0:f[e][c])||l,x=v.useMemo(()=>g,Object.values(g));return s.jsx(h.Provider,{value:x,children:p})}function u(m,f){const p=(f==null?void 0:f[e][c])||l,g=v.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>v.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,MO(a,...t)]}function MO(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Ag(e){const t=e+"CollectionProvider",[r,n]=FO(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:h}=p,x=Yn.useRef(null),w=Yn.useRef(new Map).current;return s.jsx(a,{scope:g,itemMap:w,collectionRef:x,children:h})};o.displayName=t;const l=e+"CollectionSlot",c=Yn.forwardRef((p,g)=>{const{scope:h,children:x}=p,w=i(l,h),y=Mt(g,w.collectionRef);return s.jsx(To,{ref:y,children:x})});c.displayName=l;const d=e+"CollectionItemSlot",u="data-radix-collection-item",m=Yn.forwardRef((p,g)=>{const{scope:h,children:x,...w}=p,y=Yn.useRef(null),N=Mt(g,y),j=i(d,h);return Yn.useEffect(()=>(j.itemMap.set(y,{ref:y,...w}),()=>void j.itemMap.delete(y))),s.jsx(To,{[u]:"",ref:N,children:x})});m.displayName=d;function f(p){const g=i(e+"CollectionConsumer",p);return Yn.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((j,b)=>w.indexOf(j.ref.current)-w.indexOf(b.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},f,n]}var Og="ToastProvider",[Dg,IO,LO]=Ag("Toast"),[zb,pH]=Hi("Toast",[LO]),[$O,e0]=zb(Og),Hb=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=v.useState(null),[d,u]=v.useState(0),m=v.useRef(!1),f=v.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Og}\`. Expected non-empty \`string\`.`),s.jsx(Dg.Provider,{scope:t,children:s.jsx($O,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:v.useCallback(()=>u(p=>p+1),[]),onToastRemove:v.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:f,children:o})})};Hb.displayName=Og;var Vb="ToastViewport",BO=["F8"],Yp="toast.viewportPause",Qp="toast.viewportResume",Gb=v.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=BO,label:a="Notifications ({hotkey})",...i}=e,o=e0(Vb,r),l=IO(r),c=v.useRef(null),d=v.useRef(null),u=v.useRef(null),m=v.useRef(null),f=Mt(t,m,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;v.useEffect(()=>{const x=w=>{var N;n.length!==0&&n.every(j=>w[j]||w.code===j)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[n]),v.useEffect(()=>{const x=c.current,w=m.current;if(g&&x&&w){const y=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(Yp);w.dispatchEvent(_),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(Qp);w.dispatchEvent(_),o.isClosePausedRef.current=!1}},j=_=>{!x.contains(_.relatedTarget)&&N()},b=()=>{x.contains(document.activeElement)||N()};return x.addEventListener("focusin",y),x.addEventListener("focusout",j),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",b),window.addEventListener("blur",y),window.addEventListener("focus",N),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",b),window.removeEventListener("blur",y),window.removeEventListener("focus",N)}}},[g,o.isClosePausedRef]);const h=v.useCallback(({tabbingDirection:x})=>{const y=l().map(N=>{const j=N.ref.current,b=[j,...ZO(j)];return x==="forwards"?b:b.reverse()});return(x==="forwards"?y.reverse():y).flat()},[l]);return v.useEffect(()=>{const x=m.current;if(x){const w=y=>{var b,_,S;const N=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!N){const C=document.activeElement,A=y.shiftKey;if(y.target===x&&A){(b=d.current)==null||b.focus();return}const R=h({tabbingDirection:A?"backwards":"forwards"}),te=R.findIndex(Z=>Z===C);am(R.slice(te+1))?y.preventDefault():A?(_=d.current)==null||_.focus():(S=u.current)==null||S.focus()}};return x.addEventListener("keydown",w),()=>x.removeEventListener("keydown",w)}},[l,h]),s.jsxs(gA,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(Jp,{ref:d,onFocusFromOutsideViewport:()=>{const x=h({tabbingDirection:"forwards"});am(x)}}),s.jsx(Dg.Slot,{scope:r,children:s.jsx(ht.ol,{tabIndex:-1,...i,ref:f})}),g&&s.jsx(Jp,{ref:u,onFocusFromOutsideViewport:()=>{const x=h({tabbingDirection:"backwards"});am(x)}})]})});Gb.displayName=Vb;var qb="ToastFocusProxy",Jp=v.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=e0(qb,r);return s.jsx(cu,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Jp.displayName=qb;var t0="Toast",WO="toast.swipeStart",UO="toast.swipeMove",zO="toast.swipeCancel",HO="toast.swipeEnd",Xb=v.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l=!0,c]=Fi({prop:n,defaultProp:a,onChange:i});return s.jsx(Vi,{present:r||l,children:s.jsx(qO,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Un(e.onPause),onResume:Un(e.onResume),onSwipeStart:at(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:at(e.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:at(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:at(e.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});Xb.displayName=t0;var[VO,GO]=zb(t0,{onClose(){}}),qO=v.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:f,onSwipeEnd:p,...g}=e,h=e0(t0,r),[x,w]=v.useState(null),y=Mt(t,Z=>w(Z)),N=v.useRef(null),j=v.useRef(null),b=a||h.duration,_=v.useRef(0),S=v.useRef(b),C=v.useRef(0),{onToastAdd:A,onToastRemove:U}=h,k=Un(()=>{var se;(x==null?void 0:x.contains(document.activeElement))&&((se=h.viewport)==null||se.focus()),o()}),R=v.useCallback(Z=>{!Z||Z===1/0||(window.clearTimeout(C.current),_.current=new Date().getTime(),C.current=window.setTimeout(k,Z))},[k]);v.useEffect(()=>{const Z=h.viewport;if(Z){const se=()=>{R(S.current),d==null||d()},ae=()=>{const ne=new Date().getTime()-_.current;S.current=S.current-ne,window.clearTimeout(C.current),c==null||c()};return Z.addEventListener(Yp,ae),Z.addEventListener(Qp,se),()=>{Z.removeEventListener(Yp,ae),Z.removeEventListener(Qp,se)}}},[h.viewport,b,c,d,R]),v.useEffect(()=>{i&&!h.isClosePausedRef.current&&R(b)},[i,b,h.isClosePausedRef,R]),v.useEffect(()=>(A(),()=>U()),[A,U]);const te=v.useMemo(()=>x?tS(x):null,[x]);return h.viewport?s.jsxs(s.Fragment,{children:[te&&s.jsx(XO,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:te}),s.jsx(VO,{scope:r,onClose:k,children:Bo.createPortal(s.jsx(Dg.ItemSlot,{scope:r,children:s.jsx(xA,{asChild:!0,onEscapeKeyDown:at(l,()=>{h.isFocusedToastEscapeKeyDownRef.current||k(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ht.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":h.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:at(e.onKeyDown,Z=>{Z.key==="Escape"&&(l==null||l(Z.nativeEvent),Z.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:at(e.onPointerDown,Z=>{Z.button===0&&(N.current={x:Z.clientX,y:Z.clientY})}),onPointerMove:at(e.onPointerMove,Z=>{if(!N.current)return;const se=Z.clientX-N.current.x,ae=Z.clientY-N.current.y,ne=!!j.current,K=["left","right"].includes(h.swipeDirection),re=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,xe=K?re(0,se):0,J=K?0:re(0,ae),D=Z.pointerType==="touch"?10:2,X={x:xe,y:J},V={originalEvent:Z,delta:X};ne?(j.current=X,Xu(UO,m,V,{discrete:!1})):Iy(X,h.swipeDirection,D)?(j.current=X,Xu(WO,u,V,{discrete:!1}),Z.target.setPointerCapture(Z.pointerId)):(Math.abs(se)>D||Math.abs(ae)>D)&&(N.current=null)}),onPointerUp:at(e.onPointerUp,Z=>{const se=j.current,ae=Z.target;if(ae.hasPointerCapture(Z.pointerId)&&ae.releasePointerCapture(Z.pointerId),j.current=null,N.current=null,se){const ne=Z.currentTarget,K={originalEvent:Z,delta:se};Iy(se,h.swipeDirection,h.swipeThreshold)?Xu(HO,p,K,{discrete:!0}):Xu(zO,f,K,{discrete:!0}),ne.addEventListener("click",re=>re.preventDefault(),{once:!0})}})})})}),h.viewport)})]}):null}),XO=e=>{const{__scopeToast:t,children:r,...n}=e,a=e0(t0,t),[i,o]=v.useState(!1),[l,c]=v.useState(!1);return QO(()=>o(!0)),v.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Qh,{asChild:!0,children:s.jsx(cu,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},KO="ToastTitle",Kb=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ht.div,{...n,ref:t})});Kb.displayName=KO;var YO="ToastDescription",Yb=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(ht.div,{...n,ref:t})});Yb.displayName=YO;var Qb="ToastAction",Jb=v.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(eS,{altText:r,asChild:!0,children:s.jsx(Rg,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Qb}\`. Expected non-empty \`string\`.`),null)});Jb.displayName=Qb;var Zb="ToastClose",Rg=v.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=GO(Zb,r);return s.jsx(eS,{asChild:!0,children:s.jsx(ht.button,{type:"button",...n,ref:t,onClick:at(e.onClick,a.onClose)})})});Rg.displayName=Zb;var eS=v.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(ht.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function tS(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),JO(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...tS(n))}}),t}function Xu(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?nb(a,i):a.dispatchEvent(i)}var Iy=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function QO(e=()=>{}){const t=Un(e);pn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function JO(e){return e.nodeType===e.ELEMENT_NODE}function ZO(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function am(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var eD=Hb,rS=Gb,nS=Xb,sS=Kb,aS=Yb,iS=Jb,oS=Rg;const Ly=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,$y=Ib,du=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return $y(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],m=i==null?void 0:i[d];if(u===null)return null;const f=Ly(u)||Ly(m);return a[d][f]}),l=r&&Object.entries(r).reduce((d,u)=>{let[m,f]=u;return f===void 0||(d[m]=f),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:f,...p}=u;return Object.entries(p).every(g=>{let[h,x]=g;return Array.isArray(x)?x.includes({...i,...l}[h]):{...i,...l}[h]===x})?[...d,m,f]:d},[]);return $y(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lS=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>v.createElement("svg",{ref:c,...rD,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:lS("lucide",a),...l},[...o.map(([d,u])=>v.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(e,t)=>{const r=v.forwardRef(({className:n,...a},i)=>v.createElement(nD,{ref:i,iconNode:t,className:lS(`lucide-${tD(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=He("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=He("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=He("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=He("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=He("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=He("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=He("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=He("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=He("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=He("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=He("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=He("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=He("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=He("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=He("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=He("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=He("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=He("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=He("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=He("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=He("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=He("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=He("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=He("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=He("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=He("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=He("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=He("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=He("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=He("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=He("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=He("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=He("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=He("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=He("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=He("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=He("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=He("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=He("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=He("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=He("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=He("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=He("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=He("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=He("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=He("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=He("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=He("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=He("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=He("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=He("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=He("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=He("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=He("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=He("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=He("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=He("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=He("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=He("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=He("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=He("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=He("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=He("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=He("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=He("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=He("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=He("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=He("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=He("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=He("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),SD=eD,vS=v.forwardRef(({className:e,...t},r)=>s.jsx(rS,{ref:r,className:We("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));vS.displayName=rS.displayName;const ED=du("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),yS=v.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(nS,{ref:n,className:We(ED({variant:t}),e),...r}));yS.displayName=nS.displayName;const _D=v.forwardRef(({className:e,...t},r)=>s.jsx(iS,{ref:r,className:We("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));_D.displayName=iS.displayName;const wS=v.forwardRef(({className:e,...t},r)=>s.jsx(oS,{ref:r,className:We("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Rt,{className:"h-4 w-4"})}));wS.displayName=oS.displayName;const NS=v.forwardRef(({className:e,...t},r)=>s.jsx(sS,{ref:r,className:We("text-sm font-semibold",e),...t}));NS.displayName=sS.displayName;const jS=v.forwardRef(({className:e,...t},r)=>s.jsx(aS,{ref:r,className:We("text-sm opacity-90",e),...t}));jS.displayName=aS.displayName;function CD(){const{toasts:e}=Gt();return s.jsxs(SD,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(yS,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(NS,{children:r}),n&&s.jsx(jS,{children:n})]}),a,s.jsx(wS,{})]},t)}),s.jsx(vS,{})]})}const TD=()=>{const{user:e,loading:t,isAuthenticated:r}=Sr(),n=ha(),a=iu();return v.useEffect(()=>{if(!t&&r&&e&&(a.pathname==="/"||a.pathname==="/login"))switch(e.role){case"child":n("/child",{replace:!0});break;case"parent":n("/parent",{replace:!0});break;case"admin":n("/admin",{replace:!0});break;default:n("/login",{replace:!0})}},[r,e,t,n,a.pathname]),null},Td=du("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-gradient-primary text-primary-foreground shadow-playful hover:shadow-glow transform transition-all duration-300 hover:scale-105",playful:"bg-secondary text-secondary-foreground shadow-playful hover:bg-secondary/90 transform transition-all duration-300 hover:scale-105",rainbow:"bg-gradient-rainbow text-white shadow-glow hover:shadow-playful transform transition-all duration-300 hover:scale-105",workshop:"bg-accent text-accent-foreground shadow-card hover:bg-accent/90 transform transition-all duration-300 hover:scale-105"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-14 rounded-lg px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=v.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?To:"button";return s.jsx(o,{className:We(Td({variant:t,size:r,className:e})),ref:i,...a})});q.displayName="Button";const kD="/assets/hero-image-DBY6XPWR.jpg",AD=()=>s.jsxs("section",{className:"relative min-h-screen bg-gradient-hero flex items-center justify-center overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(20)].map((e,t)=>s.jsx("div",{className:"absolute animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`},children:s.jsx(ss,{className:"text-yellow-400/40 w-4 h-4",fill:"currentColor"})},t))}),s.jsx("div",{className:"absolute top-20 left-10 animate-bounce-gentle",children:s.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-yellow-400 rounded-full p-4 shadow-glow",children:s.jsx(Hr,{className:"w-8 h-8 text-white"})})}),s.jsx("div",{className:"absolute top-40 right-20 animate-float",children:s.jsx("div",{className:"bg-gradient-to-br from-purple-400 to-pink-400 rounded-full p-3 shadow-glow",children:s.jsx(Mi,{className:"w-6 h-6 text-white"})})}),s.jsx("div",{className:"absolute bottom-40 left-20 animate-bounce-gentle",style:{animationDelay:"1s"},children:s.jsx("div",{className:"bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full p-3 shadow-glow",children:s.jsx(or,{className:"w-6 h-6 text-white"})})}),s.jsx("div",{className:"container mx-auto px-4 py-16 relative z-10",children:s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{className:"text-center lg:text-left space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/90 backdrop-blur-sm rounded-full px-6 py-3 shadow-card border border-orange-200",children:[s.jsx(sn,{className:"w-6 h-6 text-orange-600 animate-spin-slow"}),s.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"🎨 Творческие мастер-классы для детей"})]}),s.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-bold leading-tight",children:[s.jsx("span",{className:"bg-gradient-to-r from-orange-600 via-purple-600 to-blue-600 bg-clip-text text-transparent animate-pulse",children:"Восковые"}),s.jsx("br",{}),s.jsx("span",{className:"text-gray-800",children:"Ручки"}),s.jsx("br",{}),s.jsx("span",{className:"text-3xl md:text-4xl text-gray-600 font-normal",children:"✨ Магия творчества ✨"})]}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-2xl leading-relaxed",children:"Создай свою уникальную 3D копию руки в восковом исполнении! Приезжаем в школы и детские сады. Незабываемые впечатления и уникальные сувениры за 5 минут! 🎉"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center lg:justify-start",children:[s.jsx(q,{variant:"hero",size:"xl",className:"group text-lg py-6 px-8 bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white shadow-glow transform hover:scale-105 transition-all duration-300",asChild:!0,children:s.jsxs("a",{href:"/register",children:[s.jsx(Hr,{className:"w-6 h-6 group-hover:animate-bounce-gentle mr-3"}),"Записаться на мастер-класс"]})}),s.jsx(q,{variant:"workshop",size:"xl",className:"text-lg py-6 px-8 bg-white/90 hover:bg-white text-gray-800 border-2 border-orange-300 hover:border-orange-400 shadow-card transform hover:scale-105 transition-all duration-300",asChild:!0,children:s.jsx("a",{href:"/login",children:"Войти в систему"})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 pt-8",children:[s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"text-3xl font-bold text-orange-600 group-hover:scale-110 transition-transform duration-200",children:"5 мин"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Время создания"})]}),s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600 group-hover:scale-110 transition-transform duration-200",children:"100+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Довольных детей"})]}),s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 group-hover:scale-110 transition-transform duration-200",children:"3+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Возраст детей"})]}),s.jsxs("div",{className:"text-center group",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600 group-hover:scale-110 transition-transform duration-200",children:"50+"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Школ и садов"})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative rounded-3xl overflow-hidden shadow-glow transform hover:scale-105 transition-transform duration-500",children:[s.jsx("img",{src:kD,alt:"Детские восковые ручки - творческий мастер-класс",className:"w-full h-[500px] md:h-[700px] object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-orange-500/20 via-purple-500/10 to-transparent"}),s.jsx("div",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-card",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xr,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"5 минут"})]})}),s.jsx("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-card",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tn,{className:"w-5 h-5 text-purple-600"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"В школе"})]})}),s.jsx("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-card",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Группа"})]})})]}),s.jsx("div",{className:"absolute -top-6 -right-6 animate-bounce-gentle",children:s.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-400 rounded-full p-4 shadow-glow",children:s.jsx(ss,{className:"w-8 h-8 text-white",fill:"currentColor"})})}),s.jsx("div",{className:"absolute -bottom-6 -left-6 animate-float",children:s.jsx("div",{className:"bg-gradient-to-br from-purple-400 to-pink-400 rounded-full p-4 shadow-glow",children:s.jsx(sn,{className:"w-8 h-8 text-white"})})}),s.jsx("div",{className:"absolute top-1/2 -right-8 animate-bounce-gentle",style:{animationDelay:"0.5s"},children:s.jsx("div",{className:"bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full p-3 shadow-glow",children:s.jsx(Mi,{className:"w-6 h-6 text-white"})})})]})]})}),s.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce",children:s.jsx("div",{className:"w-6 h-10 border-2 border-orange-400 rounded-full flex justify-center",children:s.jsx("div",{className:"w-1 h-3 bg-orange-400 rounded-full mt-2 animate-pulse"})})})]}),Ce=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:We("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ce.displayName="Card";const Je=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:We("flex flex-col space-y-1.5 p-6",e),...t}));Je.displayName="CardHeader";const Ja=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:We("flex flex-col space-y-1 p-4",e),...t}));Ja.displayName="CardHeaderCompact";const qe=v.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:We("text-2xl font-semibold leading-none tracking-tight",e),...t}));qe.displayName="CardTitle";const ft=v.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:We("text-sm text-muted-foreground",e),...t}));ft.displayName="CardDescription";const Ae=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:We("p-6 pt-0",e),...t}));Ae.displayName="CardContent";const Za=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:We("p-4 pt-0",e),...t}));Za.displayName="CardContentCompact";const OD=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:We("flex items-center p-6 pt-0",e),...t}));OD.displayName="CardFooter";const DD=()=>{const e=[{title:"Обычная рука",price:"400 руб.",description:"Классическая восковая копия руки",popular:!1},{title:"Световая рука",price:"550 руб.",description:"Светодиод, который мигает различными цветами",popular:!0},{title:"Двойные руки",price:"800 руб.",description:"Две руки в одном изделии",popular:!1},{title:"Двойные руки световые",price:"1000 руб.",description:"Два светодиода, которые мигают различными цветами",popular:!1}],t=[{title:"Коробочка под руку",price:"200 руб.",description:"Защитная коробка с 3 окнами и ручками"},{title:"Лакировка",price:"150 руб.",description:"Придает блеск и прочность"},{title:"Лакировка с блестками",price:"200 руб.",description:"Лак с блестками для особого эффекта"},{title:"Обычная надпись",price:"50 руб.",description:"Персональная надпись на изделии"},{title:"Светящаяся надпись",price:"100 руб.",description:"Надпись, светящаяся в темноте"},{title:"Наклейка на руку",price:"50 руб.",description:"Декоративная наклейка"},{title:"Наклейка объёмная",price:"100 руб.",description:"3D наклейка для особого эффекта"}];return s.jsx("section",{className:"py-20 bg-background",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-card shadow-card rounded-full px-4 py-2 mb-4",children:[s.jsx(ss,{className:"w-5 h-5 text-primary animate-spin-slow",fill:"currentColor"}),s.jsx("span",{className:"text-sm font-medium",children:"Наши цены"})]}),s.jsxs("h2",{className:"text-3xl md:text-5xl font-bold mb-6",children:[s.jsx("span",{className:"bg-gradient-primary bg-clip-text text-transparent",children:"Выберите"})," ",s.jsx("span",{className:"text-foreground",children:"свой стиль"})]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Создайте уникальный сувенир с различными эффектами и дополнениями"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:e.map((r,n)=>s.jsxs(Ce,{className:`relative transform transition-all duration-300 hover:scale-105 ${r.popular?"shadow-glow ring-2 ring-primary/50":"shadow-card hover:shadow-playful"}`,children:[r.popular&&s.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:s.jsxs("div",{className:"bg-gradient-primary text-primary-foreground px-4 py-1 rounded-full text-sm font-medium shadow-playful",children:[s.jsx(sn,{className:"w-4 h-4 inline mr-1"}),"Популярное"]})}),s.jsxs(Ae,{className:"p-6 text-center",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:r.title}),s.jsx("div",{className:"text-3xl font-bold text-primary mb-3",children:r.price}),s.jsx("p",{className:"text-muted-foreground text-sm mb-6",children:r.description}),s.jsx(q,{variant:r.popular?"hero":"workshop",size:"lg",className:"w-full",children:"Выбрать"})]})]},n))}),s.jsxs("div",{className:"bg-gradient-hero rounded-3xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Дополнительные опции"}),s.jsx("p",{className:"text-muted-foreground",children:"Сделайте ваш сувенир еще более особенным"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((r,n)=>s.jsx(Ce,{className:"shadow-card hover:shadow-playful transition-shadow duration-300",children:s.jsxs(Ae,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-sm",children:r.title}),s.jsx("span",{className:"text-primary font-bold text-sm",children:r.price})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]})},n))}),s.jsx("div",{className:"text-center mt-8",children:s.jsxs(q,{variant:"rainbow",size:"xl",children:[s.jsx(sn,{className:"w-5 h-5"}),"Записаться на мастер-класс"]})})]}),s.jsx("div",{className:"mt-12 text-center",children:s.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-card max-w-4xl mx-auto",children:[s.jsx("h4",{className:"font-bold text-primary mb-3",children:"Внимание!"}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Будьте аккуратны с сувениром, на морозе сувенир становится более хрупким. Избегайте попадания прямых солнечных лучей. Не ставьте возле нагревательных приборов или ламп накаливания."}),s.jsx("p",{className:"text-sm text-accent font-medium mt-3",children:"Записаться на мастер-класс можно в бланке у классного руководителя."})]})})]})})},RD=()=>{const e=[{icon:uu,title:"Телефон",details:["8-914-545-06-06","8-914-547-06-06"],action:"Позвонить",variant:"hero"},{icon:uD,title:"Instagram",details:["@voskovye.ruchki","@paveltyrin9522"],action:"Подписаться",variant:"playful"},{icon:Is,title:"VK",details:["voskouruchkikhab"],action:"Написать",variant:"workshop"}];return s.jsx("section",{className:"py-20 bg-gradient-hero",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsxs("h2",{className:"text-3xl md:text-5xl font-bold mb-6",children:[s.jsx("span",{className:"text-foreground",children:"Свяжитесь"})," ",s.jsx("span",{className:"bg-gradient-primary bg-clip-text text-transparent",children:"с нами"})]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Выезжаем на любое мероприятие! Организуем незабываемый мастер-класс для ваших детей"})]}),s.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{className:"space-y-6",children:[e.map((r,n)=>s.jsx(Ce,{className:"shadow-card hover:shadow-playful transition-all duration-300 transform hover:scale-105",children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-gradient-primary rounded-full p-3 shadow-playful",children:s.jsx(r.icon,{className:"w-6 h-6 text-primary-foreground"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-1",children:r.title}),s.jsx("div",{className:"space-y-1",children:r.details.map((a,i)=>s.jsx("p",{className:"text-muted-foreground",children:a},i))})]}),s.jsx(q,{variant:r.variant,size:"lg",children:r.action})]})})},n)),s.jsx(Ce,{className:"shadow-card bg-card/80 backdrop-blur-sm",children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Tn,{className:"w-5 h-5 text-primary"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"География"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"По всему городу"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xr,{className:"w-5 h-5 text-primary"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Время работы"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"По договоренности"})]})]})]})})})]}),s.jsxs("div",{className:"text-center space-y-8",children:[s.jsx(Ce,{className:"shadow-glow transform hover:scale-105 transition-transform duration-300 max-w-md mx-auto",children:s.jsxs(Ae,{className:"p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-3",children:"QR-код для быстрой связи"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Отсканируйте код и узнайте всю информацию"})]}),s.jsx("div",{className:"bg-background rounded-2xl p-4 mb-6",children:s.jsx("img",{src:"/lovable-uploads/47900363-9fb3-4fa4-9590-1c6dae708e32.png",alt:"QR код для связи",className:"w-full max-w-48 mx-auto rounded-lg"})}),s.jsxs(q,{variant:"rainbow",size:"xl",className:"w-full",children:[s.jsx(s0,{className:"w-5 h-5"}),"Связаться сейчас"]})]})}),s.jsxs("div",{className:"bg-card rounded-2xl p-6 shadow-card",children:[s.jsx("h3",{className:"text-xl font-bold mb-3",children:"Готовы к творчеству?"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Оставьте заявку, и мы организуем незабываемый мастер-класс в вашей школе или детском саду"}),s.jsx(q,{variant:"hero",size:"xl",className:"w-full",children:"Оставить заявку"})]})]})]})]})})},PD=()=>s.jsxs("div",{className:"min-h-screen",children:[s.jsx(AD,{}),s.jsx(DD,{}),s.jsx(RD,{})]}),st=v.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:We("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));st.displayName="Input";var FD="Label",bS=v.forwardRef((e,t)=>s.jsx(ht.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));bS.displayName=FD;var SS=bS;const MD=du("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Te=v.forwardRef(({className:e,...t},r)=>s.jsx(SS,{ref:r,className:We(MD(),e),...t}));Te.displayName=SS.displayName;const zy=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState("+7"),{toast:a}=Gt(),i=ha(),{login:o,loading:l,isAuthenticated:c,user:d}=Sr();if(l)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 via-purple-50 to-blue-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600 mx-auto mb-4"}),s.jsx("p",{className:"text-orange-600 text-lg",children:"Загрузка приложения..."})]})});if(c&&d)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 via-purple-50 to-blue-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600 mx-auto mb-4"}),s.jsx("p",{className:"text-orange-600 text-lg",children:"Перенаправление..."})]})});const u=f=>{const p=f.target.value;if(p.startsWith("+7")){const g=p.replace(/\D/g,"").slice(1);g.length<=10&&n("+7"+g)}},m=async f=>{f.preventDefault(),t(!0);try{const p=new FormData(f.target),g=p.get("surname"),h=p.get("phone");if(!g||!h){a({title:"Ошибка",description:"Заполните все поля",variant:"destructive"});return}if(h.length!==12||!h.startsWith("+7")){a({title:"Ошибка",description:"Неверный формат телефона. Используйте формат +7XXXXXXXXXX",variant:"destructive"});return}const x={surname:g,phone:h,role:"parent"};console.log("👨‍👩‍👧‍👦 Parent login data:",x),await o(x),a({title:"Вход выполнен",description:"Добро пожаловать в систему!"}),i("/parent")}catch{a({title:"Ошибка входа",description:"Пользователь не найден. Зарегистрируйтесь или проверьте данные.",variant:"destructive"})}finally{t(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 via-purple-50 to-blue-100 flex items-center justify-center p-4",children:s.jsxs(Ce,{className:"w-full max-w-md",children:[s.jsxs(Je,{className:"text-center",children:[s.jsx(qe,{className:"text-2xl font-bold text-gray-900",children:"Вход в систему"}),s.jsx(ft,{className:"text-gray-600",children:"Войдите в свой аккаунт"})]}),s.jsxs(Ae,{children:[s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"surname",children:"Фамилия"}),s.jsx(st,{id:"surname",name:"surname",type:"text",placeholder:"Введите фамилию",required:!0,disabled:e})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"phone",children:"Телефон"}),s.jsx(st,{id:"phone",name:"phone",type:"tel",placeholder:"+7XXXXXXXXXX",value:r,onChange:u,required:!0,disabled:e,maxLength:12}),s.jsx("p",{className:"text-xs text-gray-500",children:"Формат: +7XXXXXXXXXX (10 цифр после +7)"})]}),s.jsx(q,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-purple-600 hover:from-orange-600 hover:to-purple-700 text-white",disabled:e,children:e?"Вход...":"Войти"})]}),s.jsxs("div",{className:"mt-6 text-center space-y-3",children:[s.jsx(q,{variant:"ghost",onClick:()=>i("/register"),className:"text-sm text-gray-600 hover:text-gray-900",children:"Зарегистрироваться"}),s.jsx("div",{children:s.jsx(q,{variant:"ghost",onClick:()=>i("/admin/login"),className:"text-xs text-gray-500 hover:text-gray-700",children:"Вход для администратора"})})]})]})]})})},Ba=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!1),[a,i]=v.useState(null),[o,l]=v.useState(0),c=v.useCallback(async h=>{try{console.log("use-schools: Начинаем загрузку школ..."),n(!0),i(null);const x=await et.schools.getSchools(h);console.log("use-schools: Получены школы:",x),t(x.schools),l(x.total),console.log("use-schools: Загрузка завершена, школ:",x.schools.length)}catch(x){console.error("use-schools: Ошибка загрузки школ:",x),i(x instanceof Error?x.message:"Failed to fetch schools"),console.error("Error fetching schools:",x)}finally{n(!1)}},[]),d=async h=>{try{n(!0),i(null),await et.schools.createSchool(h),await c()}catch(x){throw i(x instanceof Error?x.message:"Failed to create school"),console.error("Error creating school:",x),x}finally{n(!1)}},u=async(h,x)=>{try{n(!0),i(null),await et.schools.updateSchool(h,x),await c()}catch(w){throw i(w instanceof Error?w.message:"Failed to update school"),console.error("Error updating school:",w),w}finally{n(!1)}},m=async h=>{try{n(!0),i(null),await et.schools.deleteSchool(h),await c()}catch(x){throw i(x instanceof Error?x.message:"Failed to delete school"),console.error("Error deleting school:",x),x}finally{n(!1)}},f=async h=>{try{return i(null),await et.schools.getSchoolById(h)}catch(x){const w=x instanceof Error?x.message:"Failed to get school";throw i(w),console.error("Error getting school:",x),x}},p=async h=>{try{return i(null),await et.schools.getSchoolClasses(h)}catch(x){const w=x instanceof Error?x.message:"Failed to get school classes";throw i(w),console.error("Error getting school classes:",x),x}},g=v.useCallback(async()=>{var h,x;n(!0),i(null);try{const w=await et.get("/schools/with-addresses");if(w.data&&typeof w.data=="object"){if("success"in w.data)return i(null),w.data;if(Array.isArray(w.data)){const y={success:!0,data:w.data,message:"Школы с адресами загружены успешно"};return i(null),y}}return i(null),null}catch(w){const N=((x=(h=w.response)==null?void 0:h.data)==null?void 0:x.error)||"Не удалось получить школы с адресами";return i(N),{success:!1,error:N}}finally{n(!1)}},[]);return v.useEffect(()=>{console.log("use-schools: Хук инициализирован, начинаем загрузку школ..."),c()},[]),{schools:e,loading:r,error:a,total:o,fetchSchools:c,createSchool:d,updateSchool:u,deleteSchool:m,getSchoolById:f,getSchoolClasses:p,getSchoolsWithAddresses:g}};function Hy(e,[t,r]){return Math.min(r,Math.max(t,e))}var ID=v.createContext(void 0);function Mg(e){const t=v.useContext(ID);return e||t||"ltr"}var om=0;function ES(){v.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Vy()),document.body.insertAdjacentElement("beforeend",e[1]??Vy()),om++,()=>{om===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),om--}},[])}function Vy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var lm="focusScope.autoFocusOnMount",cm="focusScope.autoFocusOnUnmount",Gy={bubbles:!1,cancelable:!0},LD="FocusScope",Ig=v.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=v.useState(null),d=Un(a),u=Un(i),m=v.useRef(null),f=Mt(t,h=>c(h)),p=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(n){let h=function(N){if(p.paused||!l)return;const j=N.target;l.contains(j)?m.current=j:ei(m.current,{select:!0})},x=function(N){if(p.paused||!l)return;const j=N.relatedTarget;j!==null&&(l.contains(j)||ei(m.current,{select:!0}))},w=function(N){if(document.activeElement===document.body)for(const b of N)b.removedNodes.length>0&&ei(l)};document.addEventListener("focusin",h),document.addEventListener("focusout",x);const y=new MutationObserver(w);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",x),y.disconnect()}}},[n,l,p.paused]),v.useEffect(()=>{if(l){Xy.add(p);const h=document.activeElement;if(!l.contains(h)){const w=new CustomEvent(lm,Gy);l.addEventListener(lm,d),l.dispatchEvent(w),w.defaultPrevented||($D(HD(_S(l)),{select:!0}),document.activeElement===h&&ei(l))}return()=>{l.removeEventListener(lm,d),setTimeout(()=>{const w=new CustomEvent(cm,Gy);l.addEventListener(cm,u),l.dispatchEvent(w),w.defaultPrevented||ei(h??document.body,{select:!0}),l.removeEventListener(cm,u),Xy.remove(p)},0)}}},[l,d,u,p]);const g=v.useCallback(h=>{if(!r&&!n||p.paused)return;const x=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,w=document.activeElement;if(x&&w){const y=h.currentTarget,[N,j]=BD(y);N&&j?!h.shiftKey&&w===j?(h.preventDefault(),r&&ei(N,{select:!0})):h.shiftKey&&w===N&&(h.preventDefault(),r&&ei(j,{select:!0})):w===y&&h.preventDefault()}},[r,n,p.paused]);return s.jsx(ht.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Ig.displayName=LD;function $D(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ei(n,{select:t}),document.activeElement!==r)return}function BD(e){const t=_S(e),r=qy(t,e),n=qy(t.reverse(),e);return[r,n]}function _S(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function qy(e,t){for(const r of e)if(!WD(r,{upTo:t}))return r}function WD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function UD(e){return e instanceof HTMLInputElement&&"select"in e}function ei(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&UD(e)&&t&&e.select()}}var Xy=zD();function zD(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Ky(e,t),e.unshift(t)},remove(t){var r;e=Ky(e,t),(r=e[0])==null||r.resume()}}}function Ky(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function HD(e){return e.filter(t=>t.tagName!=="A")}function Lg(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var VD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ko=new WeakMap,Ku=new WeakMap,Yu={},dm=0,CS=function(e){return e&&(e.host||CS(e.parentNode))},GD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=CS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},qD=function(e,t,r,n){var a=GD(t,Array.isArray(e)?e:[e]);Yu[r]||(Yu[r]=new WeakMap);var i=Yu[r],o=[],l=new Set,c=new Set(a),d=function(m){!m||l.has(m)||(l.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(f){if(l.has(f))u(f);else try{var p=f.getAttribute(n),g=p!==null&&p!=="false",h=(Ko.get(f)||0)+1,x=(i.get(f)||0)+1;Ko.set(f,h),i.set(f,x),o.push(f),h===1&&g&&Ku.set(f,!0),x===1&&f.setAttribute(r,"true"),g||f.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return u(t),l.clear(),dm++,function(){o.forEach(function(m){var f=Ko.get(m)-1,p=i.get(m)-1;Ko.set(m,f),i.set(m,p),f||(Ku.has(m)||m.removeAttribute(n),Ku.delete(m)),p||m.removeAttribute(r)}),dm--,dm||(Ko=new WeakMap,Ko=new WeakMap,Ku=new WeakMap,Yu={})}},TS=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=VD(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),qD(n,a,r,"aria-hidden")):function(){return null}},na=function(){return na=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},na.apply(this,arguments)};function kS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function XD(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var _f="right-scroll-bar-position",Cf="width-before-scroll-bar",KD="with-scroll-bars-hidden",YD="--removed-body-scroll-bar-size";function um(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function QD(e,t){var r=v.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var JD=typeof window<"u"?v.useLayoutEffect:v.useEffect,Yy=new WeakMap;function ZD(e,t){var r=QD(null,function(n){return e.forEach(function(a){return um(a,n)})});return JD(function(){var n=Yy.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||um(l,null)}),i.forEach(function(l){a.has(l)||um(l,o)})}Yy.set(r,e)},[e]),r}function eR(e){return e}function tR(e,t){t===void 0&&(t=eR);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function rR(e){e===void 0&&(e={});var t=tR(null);return t.options=na({async:!0,ssr:!1},e),t}var AS=function(e){var t=e.sideCar,r=kS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return v.createElement(n,na({},r))};AS.isSideCarExport=!0;function nR(e,t){return e.useMedium(t),AS}var OS=rR(),fm=function(){},a0=v.forwardRef(function(e,t){var r=v.useRef(null),n=v.useState({onScrollCapture:fm,onWheelCapture:fm,onTouchMoveCapture:fm}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,f=e.sideCar,p=e.noIsolation,g=e.inert,h=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,y=e.gapMode,N=kS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=f,b=ZD([r,t]),_=na(na({},N),a);return v.createElement(v.Fragment,null,u&&v.createElement(j,{sideCar:OS,removeScrollBar:d,shards:m,noIsolation:p,inert:g,setCallbacks:i,allowPinchZoom:!!h,lockRef:r,gapMode:y}),o?v.cloneElement(v.Children.only(l),na(na({},_),{ref:b})):v.createElement(w,na({},_,{className:c,ref:b}),l))});a0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};a0.classNames={fullWidth:Cf,zeroRight:_f};var sR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=sR();return t&&e.setAttribute("nonce",t),e}function iR(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function oR(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var lR=function(){var e=0,t=null;return{add:function(r){e==0&&(t=aR())&&(iR(t,r),oR(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},cR=function(){var e=lR();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},DS=function(){var e=cR(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},dR={left:0,top:0,right:0,gap:0},hm=function(e){return parseInt(e||"",10)||0},uR=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[hm(r),hm(n),hm(a)]},fR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return dR;var t=uR(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},hR=DS(),_l="data-scroll-locked",mR=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(KD,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(_l,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_f,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Cf,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(_f," .").concat(_f,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Cf," .").concat(Cf,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(_l,`] {
    `).concat(YD,": ").concat(l,`px;
  }
`)},Qy=function(){var e=parseInt(document.body.getAttribute(_l)||"0",10);return isFinite(e)?e:0},pR=function(){v.useEffect(function(){return document.body.setAttribute(_l,(Qy()+1).toString()),function(){var e=Qy()-1;e<=0?document.body.removeAttribute(_l):document.body.setAttribute(_l,e.toString())}},[])},xR=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;pR();var i=v.useMemo(function(){return fR(a)},[a]);return v.createElement(hR,{styles:mR(i,!t,a,r?"":"!important")})},rx=!1;if(typeof window<"u")try{var Qu=Object.defineProperty({},"passive",{get:function(){return rx=!0,!0}});window.addEventListener("test",Qu,Qu),window.removeEventListener("test",Qu,Qu)}catch{rx=!1}var Yo=rx?{passive:!1}:!1,gR=function(e){return e.tagName==="TEXTAREA"},RS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!gR(e)&&r[t]==="visible")},vR=function(e){return RS(e,"overflowY")},yR=function(e){return RS(e,"overflowX")},Jy=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=PS(e,n);if(a){var i=FS(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},wR=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},NR=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},PS=function(e,t){return e==="v"?vR(t):yR(t)},FS=function(e,t){return e==="v"?wR(t):NR(t)},jR=function(e,t){return e==="h"&&t==="rtl"?-1:1},bR=function(e,t,r,n,a){var i=jR(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,m=0,f=0;do{var p=FS(e,l),g=p[0],h=p[1],x=p[2],w=h-x-i*g;(g||w)&&PS(e,l)&&(m+=w,f+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(m)<1||!a)||!u&&(Math.abs(f)<1||!a))&&(d=!0),d},Ju=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Zy=function(e){return[e.deltaX,e.deltaY]},ew=function(e){return e&&"current"in e?e.current:e},SR=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ER=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},_R=0,Qo=[];function CR(e){var t=v.useRef([]),r=v.useRef([0,0]),n=v.useRef(),a=v.useState(_R++)[0],i=v.useState(DS)[0],o=v.useRef(e);v.useEffect(function(){o.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var h=XD([e.lockRef.current],(e.shards||[]).map(ew),!0).filter(Boolean);return h.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),h.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=v.useCallback(function(h,x){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!o.current.allowPinchZoom;var w=Ju(h),y=r.current,N="deltaX"in h?h.deltaX:y[0]-w[0],j="deltaY"in h?h.deltaY:y[1]-w[1],b,_=h.target,S=Math.abs(N)>Math.abs(j)?"h":"v";if("touches"in h&&S==="h"&&_.type==="range")return!1;var C=Jy(S,_);if(!C)return!0;if(C?b=S:(b=S==="v"?"h":"v",C=Jy(S,_)),!C)return!1;if(!n.current&&"changedTouches"in h&&(N||j)&&(n.current=b),!b)return!0;var A=n.current||b;return bR(A,x,h,A==="h"?N:j,!0)},[]),c=v.useCallback(function(h){var x=h;if(!(!Qo.length||Qo[Qo.length-1]!==i)){var w="deltaY"in x?Zy(x):Ju(x),y=t.current.filter(function(b){return b.name===x.type&&(b.target===x.target||x.target===b.shadowParent)&&SR(b.delta,w)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var N=(o.current.shards||[]).map(ew).filter(Boolean).filter(function(b){return b.contains(x.target)}),j=N.length>0?l(x,N[0]):!o.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),d=v.useCallback(function(h,x,w,y){var N={name:h,delta:x,target:w,should:y,shadowParent:TR(w)};t.current.push(N),setTimeout(function(){t.current=t.current.filter(function(j){return j!==N})},1)},[]),u=v.useCallback(function(h){r.current=Ju(h),n.current=void 0},[]),m=v.useCallback(function(h){d(h.type,Zy(h),h.target,l(h,e.lockRef.current))},[]),f=v.useCallback(function(h){d(h.type,Ju(h),h.target,l(h,e.lockRef.current))},[]);v.useEffect(function(){return Qo.push(i),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Yo),document.addEventListener("touchmove",c,Yo),document.addEventListener("touchstart",u,Yo),function(){Qo=Qo.filter(function(h){return h!==i}),document.removeEventListener("wheel",c,Yo),document.removeEventListener("touchmove",c,Yo),document.removeEventListener("touchstart",u,Yo)}},[]);var p=e.removeScrollBar,g=e.inert;return v.createElement(v.Fragment,null,g?v.createElement(i,{styles:ER(a)}):null,p?v.createElement(xR,{gapMode:e.gapMode}):null)}function TR(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const kR=nR(OS,CR);var $g=v.forwardRef(function(e,t){return v.createElement(a0,na({},e,{ref:t,sideCar:kR}))});$g.classNames=a0.classNames;var AR=[" ","Enter","ArrowUp","ArrowDown"],OR=[" ","Enter"],fu="Select",[i0,o0,DR]=Ag(fu),[fc,xH]=Hi(fu,[DR,Yh]),l0=Yh(),[RR,Gi]=fc(fu),[PR,FR]=fc(fu),MS=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:f,required:p,form:g}=e,h=l0(t),[x,w]=v.useState(null),[y,N]=v.useState(null),[j,b]=v.useState(!1),_=Mg(d),[S=!1,C]=Fi({prop:n,defaultProp:a,onChange:i}),[A,U]=Fi({prop:o,defaultProp:l,onChange:c}),k=v.useRef(null),R=x?g||!!x.closest("form"):!0,[te,Z]=v.useState(new Set),se=Array.from(te).map(ae=>ae.props.value).join(";");return s.jsx(C6,{...h,children:s.jsxs(RR,{required:p,scope:t,trigger:x,onTriggerChange:w,valueNode:y,onValueNodeChange:N,valueNodeHasChildren:j,onValueNodeHasChildrenChange:b,contentId:Ci(),value:A,onValueChange:U,open:S,onOpenChange:C,dir:_,triggerPointerDownPosRef:k,disabled:f,children:[s.jsx(i0.Provider,{scope:t,children:s.jsx(PR,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(ae=>{Z(ne=>new Set(ne).add(ae))},[]),onNativeOptionRemove:v.useCallback(ae=>{Z(ne=>{const K=new Set(ne);return K.delete(ae),K})},[]),children:r})}),R?s.jsxs(o4,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:m,value:A,onChange:ae=>U(ae.target.value),disabled:f,form:g,children:[A===void 0?s.jsx("option",{value:""}):null,Array.from(te)]},se):null]})})};MS.displayName=fu;var IS="SelectTrigger",LS=v.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=l0(r),o=Gi(IS,r),l=o.disabled||n,c=Mt(t,o.onTriggerChange),d=o0(r),u=v.useRef("touch"),[m,f,p]=l4(h=>{const x=d().filter(N=>!N.disabled),w=x.find(N=>N.value===o.value),y=c4(x,h,w);y!==void 0&&o.onValueChange(y.value)}),g=h=>{l||(o.onOpenChange(!0),p()),h&&(o.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return s.jsx(Eb,{asChild:!0,...i,children:s.jsx(ht.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":i4(o.value)?"":void 0,...a,ref:c,onClick:at(a.onClick,h=>{h.currentTarget.focus(),u.current!=="mouse"&&g(h)}),onPointerDown:at(a.onPointerDown,h=>{u.current=h.pointerType;const x=h.target;x.hasPointerCapture(h.pointerId)&&x.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(g(h),h.preventDefault())}),onKeyDown:at(a.onKeyDown,h=>{const x=m.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&f(h.key),!(x&&h.key===" ")&&AR.includes(h.key)&&(g(),h.preventDefault())})})})});LS.displayName=IS;var $S="SelectValue",BS=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=Gi($S,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=Mt(t,c.onValueNodeChange);return pn(()=>{d(u)},[d,u]),s.jsx(ht.span,{...l,ref:m,style:{pointerEvents:"none"},children:i4(c.value)?s.jsx(s.Fragment,{children:o}):i})});BS.displayName=$S;var MR="SelectIcon",WS=v.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(ht.span,{"aria-hidden":!0,...a,ref:t,children:n||"▼"})});WS.displayName=MR;var IR="SelectPortal",US=e=>s.jsx(Qh,{asChild:!0,...e});US.displayName=IR;var Do="SelectContent",zS=v.forwardRef((e,t)=>{const r=Gi(Do,e.__scopeSelect),[n,a]=v.useState();if(pn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Bo.createPortal(s.jsx(HS,{scope:e.__scopeSelect,children:s.jsx(i0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(VS,{...e,ref:t})});zS.displayName=Do;var As=10,[HS,qi]=fc(Do),LR="SelectContentImpl",VS=v.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:x,...w}=e,y=Gi(Do,r),[N,j]=v.useState(null),[b,_]=v.useState(null),S=Mt(t,G=>j(G)),[C,A]=v.useState(null),[U,k]=v.useState(null),R=o0(r),[te,Z]=v.useState(!1),se=v.useRef(!1);v.useEffect(()=>{if(N)return TS(N)},[N]),ES();const ae=v.useCallback(G=>{const[me,...he]=R().map(pe=>pe.ref.current),[B]=he.slice(-1),be=document.activeElement;for(const pe of G)if(pe===be||(pe==null||pe.scrollIntoView({block:"nearest"}),pe===me&&b&&(b.scrollTop=0),pe===B&&b&&(b.scrollTop=b.scrollHeight),pe==null||pe.focus(),document.activeElement!==be))return},[R,b]),ne=v.useCallback(()=>ae([C,N]),[ae,C,N]);v.useEffect(()=>{te&&ne()},[te,ne]);const{onOpenChange:K,triggerPointerDownPosRef:re}=y;v.useEffect(()=>{if(N){let G={x:0,y:0};const me=B=>{var be,pe;G={x:Math.abs(Math.round(B.pageX)-(((be=re.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(B.pageY)-(((pe=re.current)==null?void 0:pe.y)??0))}},he=B=>{G.x<=10&&G.y<=10?B.preventDefault():N.contains(B.target)||K(!1),document.removeEventListener("pointermove",me),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",he,{capture:!0})}}},[N,K,re]),v.useEffect(()=>{const G=()=>K(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[K]);const[xe,J]=l4(G=>{const me=R().filter(be=>!be.disabled),he=me.find(be=>be.ref.current===document.activeElement),B=c4(me,G,he);B&&setTimeout(()=>B.ref.current.focus())}),D=v.useCallback((G,me,he)=>{const B=!se.current&&!he;(y.value!==void 0&&y.value===me||B)&&(A(G),B&&(se.current=!0))},[y.value]),X=v.useCallback(()=>N==null?void 0:N.focus(),[N]),V=v.useCallback((G,me,he)=>{const B=!se.current&&!he;(y.value!==void 0&&y.value===me||B)&&k(G)},[y.value]),E=n==="popper"?nx:GS,I=E===nx?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:x}:{};return s.jsx(HS,{scope:r,content:N,viewport:b,onViewportChange:_,itemRefCallback:D,selectedItem:C,onItemLeave:X,itemTextRefCallback:V,focusSelectedItem:ne,selectedItemText:U,position:n,isPositioned:te,searchRef:xe,children:s.jsx($g,{as:To,allowPinchZoom:!0,children:s.jsx(Ig,{asChild:!0,trapped:y.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:at(a,G=>{var me;(me=y.trigger)==null||me.focus({preventScroll:!0}),G.preventDefault()}),children:s.jsx(ou,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(E,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:G=>G.preventDefault(),...w,...I,onPlaced:()=>Z(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:at(w.onKeyDown,G=>{const me=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!me&&G.key.length===1&&J(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let B=R().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(G.key)&&(B=B.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const be=G.target,pe=B.indexOf(be);B=B.slice(pe+1)}setTimeout(()=>ae(B)),G.preventDefault()}})})})})})})});VS.displayName=LR;var $R="SelectItemAlignedPosition",GS=v.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Gi(Do,r),o=qi(Do,r),[l,c]=v.useState(null),[d,u]=v.useState(null),m=Mt(t,S=>u(S)),f=o0(r),p=v.useRef(!1),g=v.useRef(!0),{viewport:h,selectedItem:x,selectedItemText:w,focusSelectedItem:y}=o,N=v.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&h&&x&&w){const S=i.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),U=w.getBoundingClientRect();if(i.dir!=="rtl"){const be=U.left-C.left,pe=A.left-be,Y=S.left-pe,P=S.width+Y,ce=Math.max(P,C.width),Se=window.innerWidth-As,ue=Hy(pe,[As,Math.max(As,Se-ce)]);l.style.minWidth=P+"px",l.style.left=ue+"px"}else{const be=C.right-U.right,pe=window.innerWidth-A.right-be,Y=window.innerWidth-S.right-pe,P=S.width+Y,ce=Math.max(P,C.width),Se=window.innerWidth-As,ue=Hy(pe,[As,Math.max(As,Se-ce)]);l.style.minWidth=P+"px",l.style.right=ue+"px"}const k=f(),R=window.innerHeight-As*2,te=h.scrollHeight,Z=window.getComputedStyle(d),se=parseInt(Z.borderTopWidth,10),ae=parseInt(Z.paddingTop,10),ne=parseInt(Z.borderBottomWidth,10),K=parseInt(Z.paddingBottom,10),re=se+ae+te+K+ne,xe=Math.min(x.offsetHeight*5,re),J=window.getComputedStyle(h),D=parseInt(J.paddingTop,10),X=parseInt(J.paddingBottom,10),V=S.top+S.height/2-As,E=R-V,I=x.offsetHeight/2,G=x.offsetTop+I,me=se+ae+G,he=re-me;if(me<=V){const be=k.length>0&&x===k[k.length-1].ref.current;l.style.bottom="0px";const pe=d.clientHeight-h.offsetTop-h.offsetHeight,Y=Math.max(E,I+(be?X:0)+pe+ne),P=me+Y;l.style.height=P+"px"}else{const be=k.length>0&&x===k[0].ref.current;l.style.top="0px";const Y=Math.max(V,se+h.offsetTop+(be?D:0)+I)+he;l.style.height=Y+"px",h.scrollTop=me-V+h.offsetTop}l.style.margin=`${As}px 0`,l.style.minHeight=xe+"px",l.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,l,d,h,x,w,i.dir,n]);pn(()=>N(),[N]);const[j,b]=v.useState();pn(()=>{d&&b(window.getComputedStyle(d).zIndex)},[d]);const _=v.useCallback(S=>{S&&g.current===!0&&(N(),y==null||y(),g.current=!1)},[N,y]);return s.jsx(WR,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:_,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:s.jsx(ht.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});GS.displayName=$R;var BR="SelectPopperPosition",nx=v.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=As,...i}=e,o=l0(r);return s.jsx(_b,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nx.displayName=BR;var[WR,Bg]=fc(Do,{}),sx="SelectViewport",qS=v.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=qi(sx,r),o=Bg(sx,r),l=Mt(t,i.onViewportChange),c=v.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(i0.Slot,{scope:r,children:s.jsx(ht.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:at(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&m){const p=Math.abs(c.current-u.scrollTop);if(p>0){const g=window.innerHeight-As*2,h=parseFloat(m.style.minHeight),x=parseFloat(m.style.height),w=Math.max(h,x);if(w<g){const y=w+p,N=Math.min(g,y),j=y-N;m.style.height=N+"px",m.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});qS.displayName=sx;var XS="SelectGroup",[UR,zR]=fc(XS),HR=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ci();return s.jsx(UR,{scope:r,id:a,children:s.jsx(ht.div,{role:"group","aria-labelledby":a,...n,ref:t})})});HR.displayName=XS;var KS="SelectLabel",YS=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=zR(KS,r);return s.jsx(ht.div,{id:a.id,...n,ref:t})});YS.displayName=KS;var ch="SelectItem",[VR,QS]=fc(ch),JS=v.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=Gi(ch,r),c=qi(ch,r),d=l.value===n,[u,m]=v.useState(i??""),[f,p]=v.useState(!1),g=Mt(t,y=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,y,n,a)}),h=Ci(),x=v.useRef("touch"),w=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(VR,{scope:r,value:n,disabled:a,textId:h,isSelected:d,onItemTextChange:v.useCallback(y=>{m(N=>N||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(i0.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:s.jsx(ht.div,{role:"option","aria-labelledby":h,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:at(o.onFocus,()=>p(!0)),onBlur:at(o.onBlur,()=>p(!1)),onClick:at(o.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:at(o.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:at(o.onPointerDown,y=>{x.current=y.pointerType}),onPointerMove:at(o.onPointerMove,y=>{var N;x.current=y.pointerType,a?(N=c.onItemLeave)==null||N.call(c):x.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:at(o.onPointerLeave,y=>{var N;y.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:at(o.onKeyDown,y=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&y.key===" "||(OR.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});JS.displayName=ch;var $c="SelectItemText",ZS=v.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Gi($c,r),l=qi($c,r),c=QS($c,r),d=FR($c,r),[u,m]=v.useState(null),f=Mt(t,w=>m(w),c.onItemTextChange,w=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,w,c.value,c.disabled)}),p=u==null?void 0:u.textContent,g=v.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:x}=d;return pn(()=>(h(g),()=>x(g)),[h,x,g]),s.jsxs(s.Fragment,{children:[s.jsx(ht.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Bo.createPortal(i.children,o.valueNode):null]})});ZS.displayName=$c;var e4="SelectItemIndicator",t4=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return QS(e4,r).isSelected?s.jsx(ht.span,{"aria-hidden":!0,...n,ref:t}):null});t4.displayName=e4;var ax="SelectScrollUpButton",r4=v.forwardRef((e,t)=>{const r=qi(ax,e.__scopeSelect),n=Bg(ax,e.__scopeSelect),[a,i]=v.useState(!1),o=Mt(t,n.onScrollButtonChange);return pn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(s4,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});r4.displayName=ax;var ix="SelectScrollDownButton",n4=v.forwardRef((e,t)=>{const r=qi(ix,e.__scopeSelect),n=Bg(ix,e.__scopeSelect),[a,i]=v.useState(!1),o=Mt(t,n.onScrollButtonChange);return pn(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(s4,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});n4.displayName=ix;var s4=v.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=qi("SelectScrollButton",r),o=v.useRef(null),l=o0(r),c=v.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),pn(()=>{var u;const d=l().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),s.jsx(ht.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:at(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:at(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:at(a.onPointerLeave,()=>{c()})})}),GR="SelectSeparator",a4=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(ht.div,{"aria-hidden":!0,...n,ref:t})});a4.displayName=GR;var ox="SelectArrow",qR=v.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=l0(r),i=Gi(ox,r),o=qi(ox,r);return i.open&&o.position==="popper"?s.jsx(Cb,{...a,...n,ref:t}):null});qR.displayName=ox;function i4(e){return e===""||e===void 0}var o4=v.forwardRef((e,t)=>{const{value:r,...n}=e,a=v.useRef(null),i=Mt(t,a),o=Lg(r);return v.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const m=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(m)}},[o,r]),s.jsx(cu,{asChild:!0,children:s.jsx("select",{...n,ref:i,defaultValue:r})})});o4.displayName="BubbleSelect";function l4(e){const t=Un(e),r=v.useRef(""),n=v.useRef(0),a=v.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=v.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function c4(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=XR(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function XR(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var KR=MS,d4=LS,YR=BS,QR=WS,JR=US,u4=zS,ZR=qS,f4=YS,h4=JS,eP=ZS,tP=t4,m4=r4,p4=n4,x4=a4;const kt=KR,At=YR,Et=v.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(d4,{ref:n,className:We("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(QR,{asChild:!0,children:s.jsx(uS,{className:"h-4 w-4 opacity-50"})})]}));Et.displayName=d4.displayName;const g4=v.forwardRef(({className:e,...t},r)=>s.jsx(m4,{ref:r,className:We("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(oD,{className:"h-4 w-4"})}));g4.displayName=m4.displayName;const v4=v.forwardRef(({className:e,...t},r)=>s.jsx(p4,{ref:r,className:We("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(uS,{className:"h-4 w-4"})}));v4.displayName=p4.displayName;const _t=v.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(JR,{children:s.jsxs(u4,{ref:a,className:We("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(g4,{}),s.jsx(ZR,{className:We("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(v4,{})]})}));_t.displayName=u4.displayName;const rP=v.forwardRef(({className:e,...t},r)=>s.jsx(f4,{ref:r,className:We("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));rP.displayName=f4.displayName;const Ze=v.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(h4,{ref:n,className:We("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(tP,{children:s.jsx(dS,{className:"h-4 w-4"})})}),s.jsx(eP,{children:t})]}));Ze.displayName=h4.displayName;const nP=v.forwardRef(({className:e,...t},r)=>s.jsx(x4,{ref:r,className:We("-mx-1 my-1 h-px bg-muted",e),...t}));nP.displayName=x4.displayName;const sP=({children:e,onChildrenChange:t,schools:r,selectedSchoolId:n,onSchoolChange:a,availableClasses:i})=>{const o=()=>{const u={name:"",surname:"",age:void 0,schoolId:n,class:""};t([...e,u])},l=u=>{const m=e.filter((f,p)=>p!==u);t(m)},c=(u,m,f)=>{const p=[...e];p[u]={...p[u],[m]:f},t(p)},d=u=>{a(u);const m=e.map(f=>({...f,schoolId:u,class:""}));t(m)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{className:"text-base font-medium",children:"Дети"}),s.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:o,className:"flex items-center gap-2",children:[s.jsx(ys,{className:"h-4 w-4"}),"Добавить ребенка"]})]}),e.length===0&&s.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:s.jsx("p",{children:'Нажмите "Добавить ребенка" чтобы начать'})}),e.map((u,m)=>s.jsxs(Ce,{className:"border-2 border-orange-100",children:[s.jsx(Je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(qe,{className:"text-lg",children:["Ребенок ",m+1]}),e.length>1&&s.jsx(q,{type:"button",variant:"ghost",size:"sm",onClick:()=>l(m),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:s.jsx(Rt,{className:"h-4 w-4"})})]})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:`child-${m}-surname`,children:"Фамилия"}),s.jsx(st,{id:`child-${m}-surname`,value:u.surname,onChange:f=>c(m,"surname",f.target.value),placeholder:"Введите фамилию",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:`child-${m}-name`,children:"Имя"}),s.jsx(st,{id:`child-${m}-name`,value:u.name,onChange:f=>c(m,"name",f.target.value),placeholder:"Введите имя",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:`child-${m}-age`,children:"Возраст"}),s.jsx(st,{id:`child-${m}-age`,type:"number",min:"1",max:"18",value:u.age||"",onChange:f=>c(m,"age",parseInt(f.target.value)||void 0),placeholder:"Введите возраст",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:`child-${m}-school`,children:"Школа/сад"}),s.jsxs(kt,{value:u.schoolId,onValueChange:f=>{c(m,"schoolId",f),d(f)},required:!0,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите школу или сад"})}),s.jsx(_t,{children:r.map(f=>s.jsx(Ze,{value:f.id,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:f.name}),s.jsx("div",{className:"text-sm text-gray-500",children:f.address})]})},f.id))})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:`child-${m}-class`,children:"Класс/группа"}),s.jsxs(kt,{value:u.class,onValueChange:f=>c(m,"class",f),required:!0,disabled:!u.schoolId,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите класс или группу"})}),s.jsx(_t,{children:i.map(f=>s.jsx(Ze,{value:f,children:f},f))})]}),!u.schoolId&&s.jsx("p",{className:"text-sm text-gray-500",children:"Сначала выберите школу"})]})})]})]},m))]})},aP=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(""),[a,i]=v.useState([]),[o,l]=v.useState([]),[c,d]=v.useState("+7"),{toast:u}=Gt(),m=ha(),{register:f}=Sr(),{schools:p,loading:g}=Ba(),h=y=>{n(y);const N=p.find(j=>j.id===y);i((N==null?void 0:N.classes)||[])},x=y=>{const N=y.target.value;if(N.startsWith("+7")){const j=N.replace(/\D/g,"").slice(1);j.length<=10&&d("+7"+j)}};v.useEffect(()=>{o.length===0&&l([{name:"",surname:"",age:void 0,role:"child",schoolId:"",class:""}])},[o.length]);const w=async y=>{y.preventDefault(),t(!0);try{if(o.length===0){u({title:"Ошибка",description:"Добавьте хотя бы одного ребенка",variant:"destructive"}),t(!1);return}if(o.filter(_=>!_.name||!_.surname||!_.schoolId||!_.class).length>0){u({title:"Ошибка",description:"Заполните все поля для всех детей",variant:"destructive"}),t(!1);return}const j=new FormData(y.target),b={name:j.get("parentName"),surname:j.get("parentSurname"),phone:j.get("parentPhone"),role:"parent",children:o};await f(b),u({title:"Регистрация успешна!",description:`Добро пожаловать в систему, ${b.name}!`}),m("/parent")}catch{u({title:"Ошибка регистрации",description:"Не удалось зарегистрироваться. Попробуйте еще раз.",variant:"destructive"})}finally{t(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 via-purple-50 to-blue-100 flex items-center justify-center p-4",children:s.jsxs(Ce,{className:"w-full max-w-2xl",children:[s.jsxs(Je,{className:"text-center",children:[s.jsx(qe,{className:"text-2xl font-bold text-gray-900",children:"Регистрация родителя"}),s.jsx(ft,{className:"text-gray-600",children:"Создайте аккаунт и добавьте своих детей"})]}),s.jsxs(Ae,{children:[s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Данные родителя"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"parentName",children:"Имя *"}),s.jsx(st,{id:"parentName",name:"parentName",type:"text",placeholder:"Введите имя",required:!0,disabled:e})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"parentSurname",children:"Фамилия *"}),s.jsx(st,{id:"parentSurname",name:"parentSurname",type:"text",placeholder:"Введите фамилию",required:!0,disabled:e})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"parentPhone",children:"Телефон *"}),s.jsx(st,{id:"parentPhone",name:"parentPhone",type:"tel",placeholder:"+7XXXXXXXXXX",value:c,onChange:x,required:!0,disabled:e,maxLength:12}),s.jsx("p",{className:"text-xs text-gray-500",children:"Формат: +7XXXXXXXXXX (10 цифр после +7)"})]})]}),s.jsx(sP,{children:o,onChildrenChange:l,schools:p,selectedSchoolId:r,onSchoolChange:h,availableClasses:a}),s.jsx(q,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-purple-600 hover:from-orange-600 hover:to-purple-700 text-white",disabled:e,children:e?"Регистрация...":"Зарегистрироваться"})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx(q,{variant:"ghost",onClick:()=>m("/login"),className:"text-sm text-gray-600 hover:text-gray-900",children:"Уже есть аккаунт? Войти"})})]})]})})};function iP(){const[e,t]=v.useState(!1),r=ha(),{login:n}=Sr(),{toast:a}=Gt(),i=async o=>{o.preventDefault(),t(!0);try{const l=new FormData(o.currentTarget),c=l.get("username"),d=l.get("password");if(!c||!d){a({title:"Ошибка",description:"Заполните все поля",variant:"destructive"});return}await n({name:c,password:d,role:"admin"})?(a({title:"Успешно",description:"Добро пожаловать в панель администратора"}),r("/admin")):a({title:"Ошибка",description:"Неверные учетные данные администратора",variant:"destructive"})}catch{a({title:"Ошибка",description:"Произошла ошибка при входе",variant:"destructive"})}finally{t(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 via-purple-50 to-blue-100 flex items-center justify-center p-4",children:s.jsxs(Ce,{className:"w-full max-w-md",children:[s.jsxs(Je,{className:"text-center",children:[s.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-orange-100",children:s.jsx(gS,{className:"h-6 w-6 text-orange-600"})}),s.jsx(qe,{className:"text-2xl font-bold text-gray-900",children:"Панель администратора"}),s.jsx(ft,{children:"Войдите в систему управления"})]}),s.jsxs(Ae,{children:[s.jsxs("form",{onSubmit:i,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"username",children:"Имя пользователя"}),s.jsx(st,{id:"username",name:"username",type:"text",placeholder:"Введите имя пользователя",required:!0,disabled:e})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"password",children:"Пароль"}),s.jsx(st,{id:"password",name:"password",type:"password",placeholder:"Введите пароль",required:!0,disabled:e})]}),s.jsx(q,{type:"submit",className:"w-full",disabled:e,children:e?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Вход..."]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pg,{className:"h-4 w-4"}),"Войти"]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx(q,{variant:"ghost",onClick:()=>r("/"),className:"text-sm text-gray-600 hover:text-gray-900",children:"← Вернуться к обычному входу"})})]})]})})}const oP=du("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function rt({className:e,variant:t,...r}){return s.jsx("div",{className:We(oP({variant:t}),e),...r})}var Wg="Dialog",[y4,w4]=Hi(Wg),[lP,qs]=y4(Wg),N4=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=v.useRef(null),c=v.useRef(null),[d=!1,u]=Fi({prop:n,defaultProp:a,onChange:i});return s.jsx(lP,{scope:t,triggerRef:l,contentRef:c,contentId:Ci(),titleId:Ci(),descriptionId:Ci(),open:d,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(m=>!m),[u]),modal:o,children:r})};N4.displayName=Wg;var j4="DialogTrigger",b4=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=qs(j4,r),i=Mt(t,a.triggerRef);return s.jsx(ht.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Hg(a.open),...n,ref:i,onClick:at(e.onClick,a.onOpenToggle)})});b4.displayName=j4;var Ug="DialogPortal",[cP,S4]=y4(Ug,{forceMount:void 0}),E4=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=qs(Ug,t);return s.jsx(cP,{scope:t,forceMount:r,children:v.Children.map(n,o=>s.jsx(Vi,{present:r||i.open,children:s.jsx(Qh,{asChild:!0,container:a,children:o})}))})};E4.displayName=Ug;var dh="DialogOverlay",_4=v.forwardRef((e,t)=>{const r=S4(dh,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=qs(dh,e.__scopeDialog);return i.modal?s.jsx(Vi,{present:n||i.open,children:s.jsx(dP,{...a,ref:t})}):null});_4.displayName=dh;var dP=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=qs(dh,r);return s.jsx($g,{as:To,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(ht.div,{"data-state":Hg(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ro="DialogContent",C4=v.forwardRef((e,t)=>{const r=S4(Ro,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=qs(Ro,e.__scopeDialog);return s.jsx(Vi,{present:n||i.open,children:i.modal?s.jsx(uP,{...a,ref:t}):s.jsx(fP,{...a,ref:t})})});C4.displayName=Ro;var uP=v.forwardRef((e,t)=>{const r=qs(Ro,e.__scopeDialog),n=v.useRef(null),a=Mt(t,r.contentRef,n);return v.useEffect(()=>{const i=n.current;if(i)return TS(i)},[]),s.jsx(T4,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:at(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:at(e.onFocusOutside,i=>i.preventDefault())})}),fP=v.forwardRef((e,t)=>{const r=qs(Ro,e.__scopeDialog),n=v.useRef(!1),a=v.useRef(!1);return s.jsx(T4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),T4=v.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=qs(Ro,r),c=v.useRef(null),d=Mt(t,c);return ES(),s.jsxs(s.Fragment,{children:[s.jsx(Ig,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(ou,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Hg(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(mP,{titleId:l.titleId}),s.jsx(xP,{contentRef:c,descriptionId:l.descriptionId})]})]})}),zg="DialogTitle",k4=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=qs(zg,r);return s.jsx(ht.h2,{id:a.titleId,...n,ref:t})});k4.displayName=zg;var A4="DialogDescription",O4=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=qs(A4,r);return s.jsx(ht.p,{id:a.descriptionId,...n,ref:t})});O4.displayName=A4;var D4="DialogClose",R4=v.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=qs(D4,r);return s.jsx(ht.button,{type:"button",...n,ref:t,onClick:at(e.onClick,()=>a.onOpenChange(!1))})});R4.displayName=D4;function Hg(e){return e?"open":"closed"}var P4="DialogTitleWarning",[hP,F4]=nA(P4,{contentName:Ro,titleName:zg,docsSlug:"dialog"}),mP=({titleId:e})=>{const t=F4(P4),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},pP="DialogDescriptionWarning",xP=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${F4(pP).contentName}}.`;return v.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Vg=N4,Gg=b4,qg=E4,hu=_4,mu=C4,pu=k4,xu=O4,c0=R4;const gr=Vg,Xg=Gg,gP=qg,M4=v.forwardRef(({className:e,...t},r)=>s.jsx(hu,{ref:r,className:We("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));M4.displayName=hu.displayName;const dr=v.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(gP,{children:[s.jsx(M4,{}),s.jsxs(mu,{ref:n,className:We("fixed left-4 right-4 top-[50%] z-50 grid w-auto max-w-lg translate-y-[-50%] gap-4 border bg-background p-4 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%] sm:left-[50%] sm:right-auto sm:w-full sm:max-w-lg sm:translate-x-[-50%] sm:rounded-lg sm:p-6",e),...r,children:[t,s.jsxs(c0,{className:"absolute right-3 top-3 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground sm:right-4 sm:top-4",children:[s.jsx(Rt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dr.displayName=mu.displayName;const jr=({className:e,...t})=>s.jsx("div",{className:We("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});jr.displayName="DialogHeader";const kd=({className:e,...t})=>s.jsx("div",{className:We("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});kd.displayName="DialogFooter";const ur=v.forwardRef(({className:e,...t},r)=>s.jsx(pu,{ref:r,className:We("text-lg font-semibold leading-none tracking-tight",e),...t}));ur.displayName=pu.displayName;const br=v.forwardRef(({className:e,...t},r)=>s.jsx(xu,{ref:r,className:We("text-sm text-muted-foreground",e),...t}));br.displayName=xu.displayName;const Kg=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!1),[a,i]=v.useState(null),[o,l]=v.useState(0),c=v.useRef(""),d=v.useRef(!1),u=v.useCallback(async h=>{const x=JSON.stringify(h||{});if(d.current&&c.current===x){console.log("fetchMasterClasses: Запрос уже выполняется, пропускаем");return}if(c.current===x){console.log("fetchMasterClasses: Запрос идентичен последнему, пропускаем");return}try{d.current=!0,c.current=x,n(!0),i(null),console.log("fetchMasterClasses вызван с параметрами:",h);const w=await et.masterClassEvents.getEvents({schoolId:h==null?void 0:h.schoolId,classGroup:h==null?void 0:h.classGroup,userId:h==null?void 0:h.userId});console.log("Получены мастер-классы:",w),t(w.masterClasses),l(w.total)}catch(w){i(w instanceof Error?w.message:"Failed to fetch master classes"),console.error("Error fetching master classes:",w)}finally{n(!1),d.current=!1}},[]),m=async h=>{try{n(!0),i(null),await et.masterClassEvents.createEvent(h),await u()}catch(x){throw i(x instanceof Error?x.message:"Failed to create master class"),console.error("Error creating master class:",x),x}finally{n(!1)}},f=async(h,x)=>{try{n(!0),i(null),await et.masterClassEvents.updateEvent(h,x),await u()}catch(w){throw i(w instanceof Error?w.message:"Failed to update master class"),console.error("Error updating master class:",w),w}finally{n(!1)}},p=async h=>{try{n(!0),i(null),await et.masterClassEvents.deleteEvent(h),await u()}catch(x){throw i(x instanceof Error?x.message:"Failed to delete master class"),console.error("Error deleting master class:",x),x}finally{n(!1)}},g=async h=>{try{return i(null),await et.masterClassEvents.getEventById(h)}catch(x){const w=x instanceof Error?x.message:"Failed to get master class";throw i(w),console.error("Error getting master class:",x),x}};return v.useEffect(()=>{u()},[u]),{masterClasses:e,loading:r,error:a,total:o,fetchMasterClasses:u,createMasterClass:m,updateMasterClass:f,deleteMasterClass:p,getMasterClassById:g}},vP=()=>{const e=$a();return Co({mutationFn:({masterClassId:t,participantId:r,isPaid:n})=>et.masterClassEvents.updateParticipantPaymentStatus(t,r,n),onSuccess:(t,{masterClassId:r})=>{e.invalidateQueries({queryKey:["master-classes"]}),e.invalidateQueries({queryKey:["workshop-stats",r]}),e.invalidateQueries({queryKey:["workshop-registrations"]})}})},Wa=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!1),[a,i]=v.useState(null),[o,l]=v.useState(0),c=v.useCallback(async j=>{try{n(!0),i(null);const b=await et.services.getServices(j);console.log("use-services: Полученные услуги из API:",b.services),t(b.services),l(b.total)}catch(b){i(b instanceof Error?b.message:"Failed to fetch services"),console.error("Error fetching services:",b)}finally{n(!1)}},[]),d=async j=>{try{n(!0),i(null),await et.services.createService(j),await c()}catch(b){throw i(b instanceof Error?b.message:"Failed to create service"),console.error("Error creating service:",b),b}finally{n(!1)}},u=async(j,b)=>{try{n(!0),i(null),await et.services.addStyleToService(j,b),await c()}catch(_){throw i(_ instanceof Error?_.message:"Failed to add style to service"),console.error("Error adding style:",_),_}finally{n(!1)}},m=async(j,b)=>{try{n(!0),i(null),await et.services.addOptionToService(j,b),await c()}catch(_){throw i(_ instanceof Error?_.message:"Failed to add option to service"),console.error("Error adding option:",_),_}finally{n(!1)}},f=async(j,b,_)=>{try{console.log("use-services: updateServiceStyle called:",{serviceId:j,styleId:b,style:_}),console.log("use-services: style price type:",typeof _.price,"value:",_.price),n(!0),i(null);const S=await et.services.updateServiceStyle(j,b,_);console.log("use-services: updateServiceStyle result:",S),await c()}catch(S){throw i(S instanceof Error?S.message:"Failed to update service style"),console.error("Error updating style:",S),S}finally{n(!1)}},p=async(j,b,_)=>{try{n(!0),i(null),await et.services.updateServiceOption(j,b,_),await c()}catch(S){throw i(S instanceof Error?S.message:"Failed to update service option"),console.error("Error updating option:",S),S}finally{n(!1)}},g=async(j,b)=>{try{if(n(!0),i(null),!Array.isArray(b)||b.length===0)throw new Error("Неверный массив порядка стилей");if(!j)throw new Error("ID услуги обязателен");const _=b.filter(S=>!S||typeof S!="string");if(_.length>0)throw new Error(`Неверные ID стилей: ${_.join(", ")}`);console.log("Reordering styles:",{serviceId:j,order:b}),await x("styles",j,b),await c()}catch(_){const S=_ instanceof Error?_.message:"Не удалось изменить порядок стилей";throw i(S),console.error("Error reordering styles:",_),_}finally{n(!1)}},h=async(j,b)=>{try{if(n(!0),i(null),!Array.isArray(b)||b.length===0)throw new Error("Неверный массив порядка опций");if(!j)throw new Error("ID услуги обязателен");const _=b.filter(S=>!S||typeof S!="string");if(_.length>0)throw new Error(`Неверные ID опций: ${_.join(", ")}`);console.log("Reordering options:",{serviceId:j,order:b}),await x("options",j,b),await c()}catch(_){const S=_ instanceof Error?_.message:"Не удалось изменить порядок опций";throw i(S),console.error("Error reordering options:",_),_}finally{n(!1)}},x=async(j,b,_)=>{try{console.log(`Отправка запроса на сортировку ${j}:`,{serviceId:b,order:_,orderLength:_.length,orderTypes:_.map(U=>typeof U),url:`https://waxhands.ru/api/services/${b}/${j}/reorder`});const S=e.find(U=>U.id===b);if(S){const U=j==="styles"?S.styles:S.options;console.log(`Текущие ${j} в услуге:`,U.map(k=>({id:k.id,name:k.name}))),console.log("Сравнение с отправляемым порядком:",{currentIds:U.map(k=>k.id),orderIds:_,missingInCurrent:_.filter(k=>!U.find(R=>R.id===k)),missingInOrder:U.filter(k=>!_.includes(k.id))})}const C=await fetch(`https://waxhands.ru/api/services/${b}/${j}/reorder`,{method:"PUT",headers:{"Content-Type":"application/json",...localStorage.getItem("authToken")?{Authorization:`Bearer ${localStorage.getItem("authToken")}`}:{}},body:JSON.stringify({order:_})}),A=await C.json().catch(()=>({success:!1,error:"Не удалось обработать ответ сервера"}));if(console.log(`Ответ сервера на сортировку ${j}:`,{status:C.status,data:A}),!C.ok){const U=A.error||`Ошибка ${C.status}: ${C.statusText}`;throw console.error(`Ошибка сортировки ${j}:`,U),new Error(U)}if(!A.success){const U=A.error||`Не удалось выполнить сортировку ${j}`;throw console.error(`Ошибка успешности операции ${j}:`,U),new Error(U)}return A}catch(S){throw console.error(`Критическая ошибка при сортировке ${j}:`,S),S}},w=async(j,b)=>{try{n(!0),i(null),await et.services.updateService(j,b),await c()}catch(_){throw i(_ instanceof Error?_.message:"Failed to update service"),console.error("Error updating service:",_),_}finally{n(!1)}},y=async j=>{try{n(!0),i(null),await et.services.deleteService(j),await c()}catch(b){throw i(b instanceof Error?b.message:"Failed to delete service"),console.error("Error deleting service:",b),b}finally{n(!1)}},N=async j=>{try{return i(null),await et.services.getServiceById(j)}catch(b){const _=b instanceof Error?b.message:"Failed to get service";throw i(_),console.error("Error getting service:",b),b}};return v.useEffect(()=>{c()},[c]),{services:e,loading:r,error:a,total:o,fetchServices:c,createService:d,updateService:w,deleteService:y,getServiceById:N,addStyleToService:u,addOptionToService:m,updateServiceStyle:f,updateServiceOption:p,reorderServiceStyles:g,reorderServiceOptions:h}},Tc="https://waxhands.ru/api",d0={getInvoices:async(e={})=>{var o;const t=new URLSearchParams;Object.entries(e).forEach(([l,c])=>{c!==void 0&&c!==""&&t.append(l,c.toString())});const r=`${Tc}/invoices?${t.toString()}`;console.log("🔍 API getInvoices - URL:",r),console.log("🔍 API getInvoices - filters:",e);const n=await fetch(r,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(console.log("🔍 API getInvoices - response status:",n.status),console.log("🔍 API getInvoices - response ok:",n.ok),!n.ok)throw new Error("Не удалось загрузить счета");const a=await n.json();if(console.log("🔍 API getInvoices - raw response data:",a),!a.success)throw new Error(a.error||"Не удалось загрузить счета");const i={invoices:a.data.invoices,total:((o=a.data.pagination)==null?void 0:o.total)||a.data.invoices.length};return console.log("🔍 API getInvoices - processed result:",i),i},getInvoiceById:async e=>{const t=await fetch(`${Tc}/invoices/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!t.ok)throw new Error("Не удалось загрузить счет");const r=await t.json();if(!r.success)throw new Error(r.error||"Не удалось загрузить счет");return r.data},createInvoice:async e=>{console.log("🔄 createInvoice: Отправляем данные:",e),console.log("🔄 createInvoice: Токен аутентификации:",localStorage.getItem("authToken")?"Есть":"Отсутствует");const t=await fetch(`${Tc}/invoices`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(e)});console.log("🔄 createInvoice: Статус ответа:",t.status),console.log("🔄 createInvoice: Статус ok:",t.ok);const r=await t.text();if(console.log("🔄 createInvoice: Текст ответа:",r),!t.ok){let a="Не удалось создать счет";try{const i=JSON.parse(r);a=i.error||a,console.log("❌ createInvoice: Данные об ошибке:",i)}catch(i){console.log("❌ createInvoice: Не удалось распарсить ответ об ошибке:",i)}throw new Error(`${a} (HTTP ${t.status})`)}let n;try{n=JSON.parse(r)}catch(a){throw console.error("❌ createInvoice: Ошибка парсинга успешного ответа:",a),new Error("Некорректный ответ сервера")}if(!n.success)throw new Error(n.error||"Не удалось создать счет");return console.log("✅ createInvoice: Счет успешно создан:",n.data),n.data},updateInvoiceStatus:async(e,t)=>{const r=await fetch(`${Tc}/invoices/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({status:t})});if(!r.ok)throw new Error("Не удалось обновить статус счета");const n=await r.json();if(!n.success)throw new Error(n.error||"Не удалось обновить статус счета");return n.data},getInvoicesByDate:async e=>{const t=await fetch(`${Tc}/invoices/date/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!t.ok)throw new Error("Не удалось загрузить счета по дате");const r=await t.json();if(!r.success)throw new Error(r.error||"Не удалось загрузить счета по дате");return r.data}},I4=(e={})=>vo({queryKey:["invoices",JSON.stringify(e)],queryFn:()=>d0.getInvoices(e),staleTime:5*60*1e3}),yP=()=>{const e=$a();return Co({mutationFn:d0.createInvoice,onSuccess:()=>{e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["masterClasses"]})}})},wP=()=>{const e=$a();return Co({mutationFn:({id:t,status:r})=>d0.updateInvoiceStatus(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:["invoices"]})}})},L4=e=>vo({queryKey:["invoices","participant",e],queryFn:()=>d0.getInvoices({participant_id:e}),enabled:!!e,staleTime:5*60*1e3}),$4=()=>{const e=v.useRef(""),t=v.useRef(!1),r=v.useRef(),n=v.useCallback(async x=>t.current&&e.current===x?(console.log("getUserRegistrations: Skipping call due to debounce"),[]):(r.current&&clearTimeout(r.current),new Promise(w=>{r.current=setTimeout(async()=>{try{t.current=!0,e.current=x,console.log("getUserRegistrations: Fetching registrations for user:",x);const y=await et.workshopRegistrations.getUserRegistrations(x);console.log("getUserRegistrations: Response:",y),w(y||[])}catch(y){console.error("getUserRegistrations: Error:",y),w([])}finally{t.current=!1}},300)})),[]),[a,i]=v.useState([]);v.useState([]);const[o,l]=v.useState(!1),[c,d]=v.useState(null);return v.useRef(0),{createRegistration:async x=>{l(!0),d(null);try{const w=await et.workshopRegistrations.createRegistration(x);i(y=>[...y,w]),Kp({title:"Успешно!",description:"Вы успешно записались на мастер-класс!"})}catch(w){const y=w instanceof Error?w.message:"Ошибка при создании регистрации";throw d(y),Kp({title:"Ошибка",description:y,variant:"destructive"}),w}finally{l(!1)}},getRegistrations:async x=>{l(!0),d(null);try{const w=await et.workshopRegistrations.getRegistrations(x);return i(w),w}catch(w){const y=w instanceof Error?w.message:"Ошибка при получении регистраций";return d(y),[]}finally{l(!1)}},getUserRegistrations:n,getWorkshopStats:async x=>{try{return await et.workshopRegistrations.getWorkshopStats(x)}catch(w){const y=w instanceof Error?w.message:"Ошибка при получении статистики";return d(y),null}},updateRegistrationStatus:async(x,w)=>{try{return await et.workshopRegistrations.updateRegistrationStatus(x,w),i(y=>y.map(N=>N.id===x?{...N,status:w,updatedAt:new Date().toISOString()}:N)),!0}catch(y){const N=y instanceof Error?y.message:"Ошибка при обновлении статуса";return d(N),!1}},deleteRegistration:async x=>{try{await et.workshopRegistrations.deleteRegistration(x),i(w=>w.filter(y=>y.id!==x))}catch(w){const y=w instanceof Error?w.message:"Ошибка при удалении регистрации";throw d(y),w}},clearError:()=>d(null)}},Yg=Vg,B4=Gg,NP=qg,W4=v.forwardRef(({className:e,...t},r)=>s.jsx(hu,{className:We("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));W4.displayName=hu.displayName;const jP=du("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),u0=v.forwardRef(({side:e="right",className:t,children:r,...n},a)=>s.jsxs(NP,{children:[s.jsx(W4,{}),s.jsxs(mu,{ref:a,className:We(jP({side:e}),t),...n,children:[r,s.jsxs(c0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(Rt,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));u0.displayName=mu.displayName;const Qg=({className:e,...t})=>s.jsx("div",{className:We("flex flex-col space-y-2 text-center sm:text-left",e),...t});Qg.displayName="SheetHeader";const U4=v.forwardRef(({className:e,...t},r)=>s.jsx(pu,{ref:r,className:We("text-lg font-semibold text-foreground",e),...t}));U4.displayName=pu.displayName;const bP=v.forwardRef(({className:e,...t},r)=>s.jsx(xu,{ref:r,className:We("text-sm text-muted-foreground",e),...t}));bP.displayName=xu.displayName;const Jg=({className:e=""})=>{const{user:t,logout:r}=Sr(),{toast:n}=Gt(),[a,i]=v.useState(!1),o=ha(),l=()=>{r(),n({title:"До свидания! 👋",description:"Ты успешно вышел из приложения"})},c=[{icon:s.jsx(dD,{className:"w-5 h-5"}),label:"Главная",action:()=>{o("/child"),i(!1)}},{icon:s.jsx(Oo,{className:"w-5 h-5"}),label:"Мой профиль",action:()=>{o("/child/profile"),i(!1)}},{icon:s.jsx(Hr,{className:"w-5 h-5"}),label:"О нас",action:()=>{o("/child/about"),i(!1)}},{icon:s.jsx(vD,{className:"w-5 h-5"}),label:"Настройки",action:()=>{n({title:"Настройки",description:"Здесь будут настройки"}),i(!1)}}];return s.jsx("header",{className:`bg-white/90 backdrop-blur-sm border-b border-orange-200 shadow-sm sticky top-0 z-40 ${e}`,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-yellow-400 rounded-full flex items-center justify-center shadow-glow",children:s.jsx(sn,{className:"w-6 h-6 text-white"})}),s.jsx("div",{className:"absolute -top-1 -right-1 animate-bounce-gentle",children:s.jsx(ss,{className:"w-4 h-4 text-yellow-400",fill:"currentColor"})})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-orange-600 to-purple-600 bg-clip-text text-transparent",children:"Восковые Ручки"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Творческие мастер-классы"})]})]}),s.jsxs(Yg,{open:a,onOpenChange:i,children:[s.jsx(B4,{asChild:!0,children:s.jsx(q,{variant:"ghost",size:"sm",className:"rounded-full p-2 hover:bg-orange-100",children:s.jsx(pD,{className:"w-6 h-6 text-orange-600"})})}),s.jsxs(u0,{side:"right",className:"w-80 bg-gradient-to-b from-orange-50 to-purple-50",children:[s.jsx(Qg,{children:s.jsx(U4,{className:"text-left",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-yellow-400 rounded-full flex items-center justify-center",children:s.jsx(sn,{className:"w-7 h-7 text-white"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-lg font-bold text-gray-800",children:["Привет, ",t==null?void 0:t.name,"! 👋"]}),s.jsx("div",{className:"text-sm text-gray-500",children:"Творческий мастер"})]})]})})}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsx("div",{className:"space-y-2",children:c.map((d,u)=>s.jsx(q,{variant:"ghost",className:"w-full justify-start text-left h-12 hover:bg-orange-100",onClick:d.action,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"text-orange-600",children:d.icon}),s.jsx("span",{className:"font-medium",children:d.label})]})},u))}),s.jsx("div",{className:"pt-4 border-t border-orange-200",children:s.jsx(q,{variant:"ghost",className:"w-full justify-start text-left h-12 hover:bg-red-100 text-red-600",onClick:l,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(hD,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Выйти"})]})})})]})]})]})]})})})},f0=({count:e=15,className:t=""})=>{const[r,n]=v.useState([]);return v.useEffect(()=>{(()=>{const i=[];for(let o=0;o<e;o++)i.push({id:o,x:Math.random()*100,y:Math.random()*100,size:Math.random()*.5+.5,delay:Math.random()*3,duration:Math.random()*2+2});n(i)})()},[e]),s.jsx("div",{className:`absolute inset-0 pointer-events-none overflow-hidden ${t}`,children:r.map(a=>s.jsx("div",{className:"absolute animate-float",style:{left:`${a.x}%`,top:`${a.y}%`,animationDelay:`${a.delay}s`,animationDuration:`${a.duration}s`,transform:`scale(${a.size})`},children:s.jsx(ss,{className:"text-yellow-400/60 w-4 h-4 drop-shadow-glow",fill:"currentColor"})},a.id))})};var Zg="Checkbox",[SP,gH]=Hi(Zg),[EP,_P]=SP(Zg),z4=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[f,p]=v.useState(null),g=Mt(t,j=>p(j)),h=v.useRef(!1),x=f?u||!!f.closest("form"):!0,[w=!1,y]=Fi({prop:a,defaultProp:i,onChange:d}),N=v.useRef(w);return v.useEffect(()=>{const j=f==null?void 0:f.form;if(j){const b=()=>y(N.current);return j.addEventListener("reset",b),()=>j.removeEventListener("reset",b)}},[f,y]),s.jsxs(EP,{scope:r,state:w,disabled:l,children:[s.jsx(ht.button,{type:"button",role:"checkbox","aria-checked":Ti(w)?"mixed":w,"aria-required":o,"data-state":G4(w),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onKeyDown:at(e.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:at(e.onClick,j=>{y(b=>Ti(b)?!0:!b),x&&(h.current=j.isPropagationStopped(),h.current||j.stopPropagation())})}),x&&s.jsx(CP,{control:f,bubbles:!h.current,name:n,value:c,checked:w,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Ti(i)?!1:i})]})});z4.displayName=Zg;var H4="CheckboxIndicator",V4=v.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=_P(H4,r);return s.jsx(Vi,{present:n||Ti(i.state)||i.state===!0,children:s.jsx(ht.span,{"data-state":G4(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});V4.displayName=H4;var CP=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:a,...i}=e,o=v.useRef(null),l=Lg(r),c=Eg(t);v.useEffect(()=>{const u=o.current,m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==r&&p){const g=new Event("click",{bubbles:n});u.indeterminate=Ti(r),p.call(u,Ti(r)?!1:r),u.dispatchEvent(g)}},[l,r,n]);const d=v.useRef(Ti(r)?!1:r);return s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ti(e){return e==="indeterminate"}function G4(e){return Ti(e)?"indeterminate":e?"checked":"unchecked"}var q4=z4,TP=V4;const Ad=v.forwardRef(({className:e,...t},r)=>s.jsx(q4,{ref:r,className:We("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(TP,{className:We("flex items-center justify-center text-current"),children:s.jsx(dS,{className:"h-4 w-4"})})}));Ad.displayName=q4.displayName;const X4=({isOpen:e,onOpenChange:t,images:r,title:n})=>{const[a,i]=v.useState(0),[o,l]=v.useState(new Set),[c,d]=v.useState("");v.useEffect(()=>{e&&(i(0),l(new Set),r.length>0&&(d(r[0]),console.log(`PhotoGalleryModal: Открываем галерею для "${n}" с ${r.length} изображениями:`,r)))},[e,r,n]);const u=()=>{const y=(a+1)%r.length;i(y),d(r[y])},m=()=>{const y=(a-1+r.length)%r.length;i(y),d(r[y])},f=y=>{y.key==="ArrowLeft"&&m(),y.key==="ArrowRight"&&u(),y.key==="Escape"&&t(!1)};v.useEffect(()=>{if(e)return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e,a]);const p=y=>{console.error(`PhotoGalleryModal: Ошибка загрузки изображения ${y}:`,r[y]),l(N=>new Set(N).add(y))},g=y=>{console.log(`PhotoGalleryModal: Изображение ${y} успешно загружено:`,r[y])},x=r.filter((y,N)=>!o.has(N)),w=x.length>0;return!e||r.length===0?null:s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-4xl max-h-[90vh] bg-black/95 border-0 p-0 overflow-hidden",children:[s.jsx(jr,{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ur,{className:"text-white text-lg font-semibold",children:[n," - Фото ",a+1," из ",r.length]}),s.jsx(br,{className:"sr-only",children:"Галерея фотографий для просмотра"}),s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>t(!1),className:"text-white hover:bg-white/20",children:s.jsx(Rt,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"relative h-full flex items-center justify-center",children:w?s.jsxs(s.Fragment,{children:[x.length>1&&s.jsxs(s.Fragment,{children:[s.jsx(q,{variant:"ghost",size:"sm",onClick:m,className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 text-white hover:bg-black/70 z-20",children:s.jsx(fS,{className:"w-6 h-6"})}),s.jsx(q,{variant:"ghost",size:"sm",onClick:u,className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 text-white hover:bg-black/70 z-20",children:s.jsx(hS,{className:"w-6 h-6"})})]}),c&&!o.has(a)&&s.jsx("img",{src:c,alt:`${n} - фото ${a+1}`,className:"max-w-full max-h-full object-contain",onError:()=>p(a),onLoad:()=>g(a),crossOrigin:"anonymous"}),o.has(a)&&s.jsxs("div",{className:"flex flex-col items-center justify-center text-white text-center p-8",children:[s.jsx(oh,{className:"w-16 h-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Изображение недоступно"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"Файл изображения поврежден или недоступен"}),x.length>1&&s.jsx(q,{onClick:u,className:"bg-orange-500 hover:bg-orange-600",children:"Следующее фото"})]}),x.length>1&&s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2 z-20",children:r.map((y,N)=>s.jsx("button",{onClick:()=>{i(N),d(r[N])},className:`w-3 h-3 rounded-full transition-all duration-300 ${N===a?"bg-white scale-125":o.has(N)?"bg-red-500/50":"bg-white/50 hover:bg-white/75"}`,title:o.has(N)?"Ошибка загрузки":`Фото ${N+1}`},N))})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center text-white text-center p-8",children:[s.jsx(ua,{className:"w-16 h-16 text-red-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Изображения недоступны"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"К сожалению, все изображения для этого элемента недоступны или повреждены."}),s.jsx(q,{onClick:()=>t(!1),className:"bg-orange-500 hover:bg-orange-600",children:"Закрыть"})]})})]})})},K4=({isOpen:e,onOpenChange:t,videoUrl:r,title:n})=>{const[a,i]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState(0),[u,m]=v.useState(0),[f,p]=v.useState(!1),[g,h]=v.useState(!0),[x,w]=v.useState(""),y=v.useRef(null);v.useEffect(()=>{if(e){if(i(!1),d(0),p(!1),h(!0),!r||typeof r!="string"){console.error("VideoPlayerModal: Некорректный URL видео:",r),p(!0),w("Некорректный URL видео"),h(!1);return}if(!r.startsWith("http://")&&!r.startsWith("https://")){console.error("VideoPlayerModal: Неподдерживаемый протокол URL:",r),p(!0),w("Неподдерживаемый протокол URL видео"),h(!1);return}y.current&&(y.current.currentTime=0),console.log(`VideoPlayerModal: Открываем видео для "${n}":`,r)}},[e,r,n]);const N=async()=>{if(y.current&&!f)try{a?(y.current.pause(),i(!1)):(await y.current.play(),i(!0))}catch(Z){console.error("Ошибка воспроизведения видео:",Z),p(!0),w("Ошибка воспроизведения видео")}},j=()=>{y.current&&(y.current.muted=!o,l(!o))},b=()=>{y.current&&(document.fullscreenElement?document.exitFullscreen():y.current.requestFullscreen())},_=()=>{y.current&&d(y.current.currentTime)},S=()=>{y.current&&(m(y.current.duration),console.log(`VideoPlayerModal: Метаданные видео загружены, длительность: ${y.current.duration}s`))},C=Z=>{const se=parseFloat(Z.target.value);y.current&&(y.current.currentTime=se,d(se))},A=Z=>{const se=Math.floor(Z/60),ae=Math.floor(Z%60);return`${se}:${ae.toString().padStart(2,"0")}`},U=Z=>{Z.key===" "&&(Z.preventDefault(),N()),(Z.key==="m"||Z.key==="M")&&j(),(Z.key==="f"||Z.key==="F")&&b(),Z.key==="Escape"&&t(!1)};v.useEffect(()=>{if(e)return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[e]);const k=Z=>{const se=Z.currentTarget,ae=se.error;console.error("VideoPlayerModal: Video error:",{event:Z,videoUrl:r,error:ae,errorCode:ae==null?void 0:ae.code,errorMessage:ae==null?void 0:ae.message,videoElement:se});let ne="Не удалось загрузить видео.";if(ae)switch(ae.code){case MediaError.MEDIA_ERR_ABORTED:ne="Загрузка видео была прервана.";break;case MediaError.MEDIA_ERR_NETWORK:ne="Ошибка сети при загрузке видео.";break;case MediaError.MEDIA_ERR_DECODE:ne="Видео имеет неподдерживаемый формат.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:ne="Формат видео не поддерживается браузером.";break;default:ne=`Произошла ошибка при загрузке видео (код: ${ae.code}).`}else{const K=Z.target;K.networkState===3?ne="Ошибка сети при загрузке видео.":K.readyState===0?ne="Видео не может быть загружено.":ne="Неизвестная ошибка при загрузке видео."}p(!0),h(!1),w(ne)},R=()=>{console.log("VideoPlayerModal: Видео успешно загружено:",r),h(!1),p(!1)},te=()=>{p(!1),w(""),h(!0),y.current&&y.current.load()};return e?s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-4xl max-h-[90vh] bg-black/95 border-0 p-0 overflow-hidden",children:[s.jsx(jr,{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ur,{className:"text-white text-lg font-semibold",children:[n," - Видео"]}),s.jsx(br,{className:"sr-only",children:"Модальное окно для просмотра видео"}),s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>t(!1),className:"text-white hover:bg-white/20",children:s.jsx(Rt,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"relative h-full flex items-center justify-center",children:f?s.jsxs("div",{className:"flex flex-col items-center justify-center text-white text-center p-8",children:[s.jsx(ua,{className:"w-16 h-16 text-red-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ошибка загрузки видео"}),s.jsx("p",{className:"text-gray-300 mb-4",children:x}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(q,{onClick:te,className:"bg-orange-500 hover:bg-orange-600",children:"Попробовать снова"}),s.jsx(q,{onClick:()=>t(!1),variant:"outline",className:"border-white/30 text-white hover:bg-white/20",children:"Закрыть"})]})]}):s.jsxs(s.Fragment,{children:[r&&s.jsx("video",{ref:y,src:r,className:"w-full h-full object-contain",onTimeUpdate:_,onLoadedMetadata:S,onLoadStart:()=>h(!0),onCanPlay:()=>h(!1),onPlay:()=>i(!0),onPause:()=>i(!1),onError:k,onLoadedData:R,onAbort:()=>{console.warn("VideoPlayerModal: Загрузка видео прервана"),h(!1)},onSuspend:()=>{console.log("VideoPlayerModal: Загрузка видео приостановлена")},preload:"metadata",controls:!1,crossOrigin:"anonymous",style:{maxWidth:"100%",maxHeight:"100%"}}),g&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"text-white text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-2"}),s.jsx("p",{children:"Загрузка видео..."})]})}),!g&&!f&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("input",{type:"range",min:"0",max:u||0,value:c,onChange:C,className:"w-full h-2 bg-white/30 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #f97316 0%, #f97316 ${c/(u||1)*100}%, rgba(255,255,255,0.3) ${c/(u||1)*100}%)`}}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:"ghost",size:"sm",onClick:N,className:"text-white hover:bg-white/20",disabled:f,children:a?s.jsx(xD,{className:"w-5 h-5"}):s.jsx(tx,{className:"w-5 h-5"})}),s.jsx(q,{variant:"ghost",size:"sm",onClick:j,className:"text-white hover:bg-white/20",disabled:f,children:o?s.jsx(bD,{className:"w-5 h-5"}):s.jsx(jD,{className:"w-5 h-5"})}),s.jsxs("span",{className:"text-white text-sm",children:[A(c)," / ",A(u)]})]}),s.jsx(q,{variant:"ghost",size:"sm",onClick:b,className:"text-white hover:bg-white/20",disabled:f,children:s.jsx(mD,{className:"w-5 h-5"})})]})]})})]})})]})}):null},tw=[["Обычная ручка","Световая ручка"],["Двойные ручки","Двойные световые ручки"]],kP=({workshop:e,isOpen:t,onOpenChange:r,participantName:n,participantId:a,onRegistrationSuccess:i})=>{const{toast:o}=Gt(),{user:l}=Sr(),c=yP(),[d,u]=v.useState([]),[m,f]=v.useState([]),[p,g]=v.useState(null),[h,x]=v.useState(!0),[w,y]=v.useState(!1),[N,j]=v.useState(!1),[b,_]=v.useState(!1),[S,C]=v.useState(null),[A,U]=v.useState("loading"),k=v.useCallback(async()=>{try{x(!0);const E=await Bp.getServices();if(E&&E.services){const I=E.services.find(G=>G.name.toLowerCase().includes("восковая ручка"));if(I){console.log('Найдена услуга "Восковая ручка":',I);try{const G=await Bp.getServiceMedia(I.id);if(console.log("Загружены медиафайлы из БД:",G),G.styles.some(he=>he.images&&he.images.length>0||he.videos&&he.videos.length>0)||G.options.some(he=>he.images&&he.images.length>0||he.videos&&he.videos.length>0)){console.log("В БД найдены медиафайлы, обновляем услугу");const he=G.styles.map(pe=>({...pe,images:Array.isArray(pe.images)?pe.images.filter(Y=>Y&&typeof Y=="string"):[],videos:Array.isArray(pe.videos)?pe.videos.filter(Y=>Y&&typeof Y=="string"):[]})),B=G.options.map(pe=>({...pe,images:Array.isArray(pe.images)?pe.images.filter(Y=>Y&&typeof Y=="string"):[],videos:Array.isArray(pe.videos)?pe.videos.filter(Y=>Y&&typeof Y=="string"):[]})),be={...I,styles:he.length>0?he:I.styles,options:B.length>0?B:I.options};console.log("Обогащенная услуга с медиафайлами:",be),g(be),U("database")}else console.log("В БД нет медиафайлов, используем базовые данные услуги"),g(I),U("fallback")}catch(G){console.warn("Не удалось загрузить медиафайлы, используем базовые данные:",G),g(I),U("fallback")}}else{console.warn('Услуга "Восковая ручка" не найдена в базе данных');const G={id:"wax-hand-service",name:"Восковая ручка",shortDescription:"Создание уникальных восковых ручек с персонализацией",fullDescription:"Мастер-класс по созданию восковых ручек с выбором стилей и дополнительных опций. Каждый ребенок создает свою уникальную ручку.",styles:[],options:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};g(G),U("fallback")}}else throw console.error("Ошибка получения услуг из API:",E),new Error("Не удалось загрузить услуги из базы данных")}catch(E){console.error("Ошибка загрузки данных услуги:",E),o({title:"Ошибка загрузки",description:"Не удалось загрузить данные услуги. Попробуйте обновить страницу.",variant:"destructive"});const I={id:"wax-hand-service",name:"Восковая ручка",shortDescription:"Создание уникальных восковых ручек с персонализацией",fullDescription:"Мастер-класс по созданию восковых ручек с выбором стилей и дополнительных опций. Каждый ребенок создает свою уникальную ручку.",styles:[],options:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};g(I),U("fallback")}finally{x(!1)}},[o]);v.useEffect(()=>{t&&k()},[t,k]);const R=(p==null?void 0:p.styles)||[],te=(p==null?void 0:p.options)||[],Z=E=>{if(E==="Двойные ручки"||E==="Двойные световые ручки"){const I=l==null?void 0:l.age;if(!I||I<5)return!0}if(d.length===0)return!1;for(const I of tw)if(I.includes(E)){const G=d.find(me=>{const he=R.find(B=>B.id===me);return he&&I.includes(he.name)});if(G){const me=R.find(he=>he.id===G);return me&&me.name!==E}}return!1},se=E=>{const I=R.find(G=>G.id===E);if(I){for(const G of tw)if(G.includes(I.name)){const me=R.filter(he=>G.includes(he.name)).map(he=>he.id);u(he=>he.filter(B=>!me.includes(B))),d.includes(E)||u(he=>[...he,E]);return}u(G=>G.includes(E)?G.filter(me=>me!==E):[...G,E])}},ae=E=>{f(I=>I.includes(E)?I.filter(G=>G!==E):[...I,E])},ne=async E=>{if(!E||typeof E!="string")return!1;try{let I=E;if(E.startsWith("/")&&(I=`http://localhost:3001${E}`,console.log(`Преобразуем относительный URL ${E} в абсолютный: ${I}`)),!new URL(I).protocol.startsWith("http"))return!1;console.log(`Проверяем файл: ${I}`);const me=await fetch(I,{method:"HEAD",mode:"cors",cache:"no-cache"}),he=me.ok;return console.log(`Файл ${I} доступен: ${he} (статус: ${me.status})`),he}catch(I){return console.error(`Ошибка при проверке файла ${E}:`,I),!1}},K=async E=>{if(!Array.isArray(E)||E.length===0)return[];const I=[],G=E.filter(me=>me&&typeof me=="string");console.log("Проверяем файлы:",G);for(const me of G){const he=await ne(me);if(console.log(`Файл ${me} существует: ${he}`),he){const B=me.startsWith("/")?`http://localhost:3001${me}`:me;I.push(B)}}return console.log("Найдены существующие файлы:",I),I},re=async(E,I)=>{if(console.log(`openPhotoGallery: Получены изображения для "${I}":`,E),!Array.isArray(E)||E.length===0){o({title:"Нет фотографий",description:"Для этого элемента фотографии не найдены",variant:"destructive"});return}try{const G=await K(E);if(G.length===0){o({title:"Фотографии недоступны",description:"Файлы изображений не найдены или недоступны",variant:"destructive"});return}console.log(`openPhotoGallery: Открываем галерею для "${I}" с существующими изображениями:`,G),C({type:"photo",title:I,urls:G}),j(!0)}catch(G){console.error("Ошибка при открытии галереи:",G),o({title:"Ошибка",description:"Не удалось открыть галерею фотографий",variant:"destructive"})}},xe=async(E,I)=>{if(console.log(`openVideoPlayer: Получены видео для "${I}":`,E),!Array.isArray(E)||E.length===0){o({title:"Нет видео",description:"Для этого элемента видео не найдены",variant:"destructive"});return}try{const G=await K(E);if(G.length===0){o({title:"Видео недоступно",description:"Файлы видео не найдены или недоступны",variant:"destructive"});return}console.log(`openVideoPlayer: Открываем видео для "${I}" с существующими видео:`,G),C({type:"video",title:I,urls:G}),_(!0)}catch(G){console.error("Ошибка при открытии видео:",G),o({title:"Ошибка",description:"Не удалось открыть видео плеер",variant:"destructive"})}},J=E=>{const I={images:E.images&&Array.isArray(E.images)?E.images:[],videos:E.videos&&Array.isArray(E.videos)?E.videos:[]};return console.log(`getStyleMedia для стиля "${E.name}":`,I),I},D=E=>{const I={images:E.images&&Array.isArray(E.images)?E.images:[],videos:E.videos&&Array.isArray(E.videos)?E.videos:[]};return console.log(`getOptionMedia для опции "${E.name}":`,I),I},X=async()=>{if(d.length===0){o({title:"Выберите стиль",description:"Пожалуйста, выберите хотя бы один стиль для вашей восковой ручки",variant:"destructive"});return}if(!a){o({title:"Ошибка",description:"Не удалось определить участника. Пожалуйста, войдите в систему.",variant:"destructive"});return}y(!0);try{console.log("Создание регистрации на мастер-класс...");const E={workshopId:e.id,userId:a,style:d.map(pe=>{const Y=R.find(P=>P.id===pe);return(Y==null?void 0:Y.name)||"Неизвестный стиль"}).join(", "),options:m.map(pe=>{const Y=te.find(P=>P.id===pe);return(Y==null?void 0:Y.name)||"Неизвестная опция"}),totalPrice:V};console.log("Данные для регистрации:",E);let I;try{I=await eb.createRegistration(E),console.log("Регистрация создана:",I)}catch(pe){console.error("Ошибка при создании регистрации:",pe);const Y=pe instanceof Error?pe.message:String(pe);if(Y.includes("already registered")||Y.includes("User already registered")){o({title:"Уже зарегистрирован! 🎯",description:"Ты уже записан на этот мастер-класс. Проверь свои записи.",variant:"default"}),r(!1);return}o({title:"Ошибка регистрации",description:"Не удалось записаться на мастер-класс. Попробуй еще раз.",variant:"destructive"});return}const G=new Date(e.date),me=new Date(G.getTime()-G.getTimezoneOffset()*6e4),he=me.toISOString().split("T")[0];console.log("Исходная дата:",e.date),console.log("Workshop объект даты:",G),console.log("Локальная дата:",me),console.log("Нормализованная дата:",he);const B={master_class_id:e.id,workshop_date:he,city:e.city||"Не указан",school_name:e.schoolName||"Не указано",class_group:e.classGroup,participant_name:n||"Не указано",participant_id:a,amount:V,selected_styles:d.map(pe=>{const Y=R.find(P=>P.id===pe);return{id:pe,name:(Y==null?void 0:Y.name)||"Неизвестный стиль",price:(Y==null?void 0:Y.price)||0}}),selected_options:m.map(pe=>{const Y=te.find(P=>P.id===pe);return{id:pe,name:(Y==null?void 0:Y.name)||"Неизвестная опция",price:(Y==null?void 0:Y.price)||0}})};console.log("🔄 StyleSelectionModal: Создание счета - данные:",B),console.log("🔄 StyleSelectionModal: Workshop данные:",e);let be;try{be=await c.mutateAsync(B),console.log("✅ StyleSelectionModal: Счет создан успешно:",be)}catch(pe){throw console.error("❌ StyleSelectionModal: Ошибка создания счета:",pe),console.error("❌ StyleSelectionModal: Стек ошибки:",pe instanceof Error?pe.stack:"Неизвестно"),console.error("❌ StyleSelectionModal: Данные которые не удалось обработать:",B),pe}console.log("Участник будет добавлен автоматически при создании счета"),o({title:"Заявка отправлена! 🎉",description:`Счет №${be.id} создан на сумму ${V} Р. Мы свяжемся с твоими родителями для подтверждения.`}),i&&i(),r(!1),u([]),f([])}catch(E){console.error("Ошибка при создании счета:",E),o({title:"Ошибка",description:"Не удалось отправить заявку. Попробуйте еще раз или обратитесь к администратору.",variant:"destructive"})}finally{y(!1)}},V=d.reduce((E,I)=>{const G=R.find(me=>me.id===I);return E+((G==null?void 0:G.price)||0)},0)+m.reduce((E,I)=>{const G=te.find(me=>me.id===I);return E+((G==null?void 0:G.price)||0)},0);return h?s.jsx(gr,{open:t,onOpenChange:r,children:s.jsxs(dr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-yellow-50 via-pink-50 to-blue-50 border-0 shadow-2xl p-6",children:[s.jsxs(jr,{children:[s.jsx(ur,{className:"sr-only",children:"Загрузка данных"}),s.jsx(br,{className:"sr-only",children:"Загрузка данных для участия в мастер-классе"})]}),s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"}),s.jsx("span",{className:"ml-3 text-lg text-orange-600",children:"Загрузка данных..."})]})]})}):s.jsxs(s.Fragment,{children:[s.jsx(gr,{open:t,onOpenChange:r,children:s.jsxs(dr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-yellow-50 via-pink-50 to-blue-50 border-0 shadow-2xl p-4 sm:p-6",children:[s.jsx(f0,{count:15,className:"opacity-40"}),s.jsx("div",{className:"absolute top-8 left-4 sm:left-8 animate-bounce-gentle",children:s.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-yellow-400 rounded-full p-2 sm:p-3 shadow-glow",children:s.jsx(Hr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})}),s.jsx("div",{className:"absolute top-16 right-4 sm:right-12 animate-float",children:s.jsx("div",{className:"bg-gradient-to-br from-purple-400 to-pink-400 rounded-full p-2 shadow-glow",children:s.jsx(Mi,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})}),s.jsxs(jr,{className:"flex items-center space-x-2 sm:space-x-3 pb-4 sm:pb-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-purple-500 rounded-full p-1.5 sm:p-2",children:s.jsx(sn,{className:"w-5 h-5 sm:w-6 sm:w-6 text-white"})}),s.jsx(ur,{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-orange-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Участие в мастер-классе"}),s.jsx(br,{className:"sr-only",children:"Модальное окно для выбора стиля и опций участия в мастер-классе"})]}),s.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${A==="database"?"bg-green-500":A==="fallback"?"bg-yellow-500":"bg-blue-500"}`}),s.jsx("span",{className:"text-sm text-gray-600",children:A==="database"?"Данные загружены из базы данных":A==="fallback"?"Используются базовые данные":"Загрузка данных..."})]}),s.jsx(q,{onClick:k,size:"sm",variant:"outline",className:"text-xs px-2 py-1 h-7",children:"Обновить"})]}),s.jsxs(Ce,{className:"bg-white/90 backdrop-blur-sm border-orange-200 shadow-card mb-4 sm:mb-6",children:[s.jsxs(Je,{className:"pb-3 sm:pb-4",children:[s.jsxs(qe,{className:"text-xl sm:text-2xl font-bold text-orange-500 flex items-center space-x-2",children:[s.jsx(ss,{className:"w-5 h-5 sm:w-6 sm:h-6 text-yellow-500"}),s.jsx("span",{children:e.title})]}),s.jsx(ft,{className:"text-gray-600 text-base sm:text-lg",children:"Информация о мастер-классе"})]}),s.jsx(Ae,{className:"space-y-3 sm:space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border border-orange-200",children:[s.jsx(Tn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700 font-medium text-sm sm:text-base truncate",children:e.schoolName})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[s.jsx(or,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700 font-medium text-sm sm:text-base",children:["Класс: ",e.classGroup]})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[s.jsx(Cn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700 font-medium text-sm sm:text-base",children:new Date(e.date).toLocaleDateString("ru-RU")})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[s.jsx(Xr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700 font-medium text-sm sm:text-base",children:e.time})]})]})})]}),s.jsxs(Ce,{className:"bg-white/90 backdrop-blur-sm border-purple-200 shadow-card mb-4 sm:mb-6",children:[s.jsxs(Je,{className:"pb-3 sm:pb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-full p-1.5 sm:p-2",children:s.jsx(cS,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsx(qe,{className:"text-lg sm:text-xl font-bold text-gray-800",children:"Выберите свой стиль"})]}),s.jsx(ft,{className:"text-gray-600 text-base sm:text-lg",children:"Выберите свой стиль для вашей восковой ручки"})]}),s.jsxs(Ae,{className:"space-y-3 sm:space-y-4",children:[(l==null?void 0:l.age)&&l.age<5&&s.jsx("div",{className:"p-3 border rounded-lg bg-orange-50 border-orange-200 mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-orange-700",children:[s.jsx(ua,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:'Стили "Двойные ручки" и "Двойные световые ручки" доступны только с 5 лет'})]})}),s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:R.map(E=>{const I=Z(E.name),G=J(E),me=G.images.length>0,he=G.videos.length>0;return s.jsxs("div",{className:`flex items-start space-x-2 sm:space-x-3 p-3 sm:p-4 border-2 rounded-xl transition-all duration-300 ${I?"border-gray-300 bg-gray-100 cursor-not-allowed opacity-60":d.includes(E.id)?"border-purple-400 bg-gradient-to-r from-purple-50 to-pink-50 shadow-lg cursor-pointer hover:scale-105":"border-gray-200 bg-white hover:border-orange-300 cursor-pointer hover:scale-105"}`,onClick:()=>!I&&se(E.id),children:[s.jsx(Ad,{id:E.id,checked:d.includes(E.id),onCheckedChange:()=>!I&&se(E.id),disabled:I,className:"mt-1 flex-shrink-0 data-[state=checked]:bg-purple-500 data-[state=checked]:border-purple-500 disabled:opacity-50"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("label",{htmlFor:E.id,className:"text-base sm:text-lg font-semibold text-gray-800 cursor-pointer flex items-center space-x-2 min-w-0",children:[s.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:"✋"}),s.jsx("span",{className:"truncate",children:E.name}),I&&s.jsx(Pg,{className:"w-4 h-4 text-gray-500 ml-2"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[me&&s.jsx(q,{variant:"ghost",size:"sm",onClick:async B=>{B.stopPropagation(),await re(G.images,E.name)},className:"p-1 h-auto text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Посмотреть фото",children:s.jsx(By,{className:"w-4 h-4"})}),he&&s.jsx(q,{variant:"ghost",size:"sm",onClick:async B=>{B.stopPropagation(),await xe(G.videos,E.name)},className:"p-1 h-auto text-red-600 hover:text-red-700 hover:bg-red-50",title:"Смотреть видео",children:s.jsx(lh,{className:"w-4 h-4"})}),s.jsxs(rt,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0 px-2 sm:px-3 py-1 text-xs sm:text-sm font-semibold flex-shrink-0 ml-2",children:[E.price," Р"]})]})]}),s.jsxs("p",{className:"text-gray-600 leading-relaxed text-sm sm:text-base",children:[E.shortDescription||E.fullDescription,I&&(E.name==="Двойные ручки"||E.name==="Двойные световые ручки")&&s.jsx("span",{className:"block text-orange-600 text-sm mt-1",children:"🔒 Доступно только с 5 лет"})]})]})]},E.id)})})]})]}),s.jsxs(Ce,{className:"bg-white/90 backdrop-blur-sm border-blue-200 shadow-card mb-4 sm:mb-6",children:[s.jsxs(Je,{className:"pb-3 sm:pb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full p-1.5 sm:p-2",children:s.jsx(Mi,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),s.jsx(qe,{className:"text-lg sm:text-xl font-bold text-gray-800",children:"Выберите опции"})]}),s.jsx(ft,{className:"text-gray-600 text-base sm:text-lg",children:"Выберите дополнительные опции для вашей восковой ручки"})]}),s.jsx(Ae,{className:"space-y-3 sm:space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:te.map(E=>{const I=D(E),G=I.images.length>0,me=I.videos.length>0;return s.jsxs("div",{className:`flex items-start space-x-2 sm:space-x-3 p-3 sm:p-4 border-2 rounded-xl transition-all duration-300 cursor-pointer hover:scale-105 ${m.includes(E.id)?"border-blue-400 bg-gradient-to-r from-blue-50 to-cyan-50 shadow-lg":"border-gray-200 bg-white hover:border-blue-300"}`,onClick:()=>ae(E.id),children:[s.jsx(Ad,{id:`option-${E.id}`,checked:m.includes(E.id),onCheckedChange:()=>ae(E.id),className:"mt-1 flex-shrink-0 data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("label",{htmlFor:`option-${E.id}`,className:"text-base sm:text-lg font-semibold text-gray-800 cursor-pointer flex items-center space-x-2 min-w-0",children:[s.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:"✨"}),s.jsx("span",{className:"truncate",children:E.name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[G&&s.jsx(q,{variant:"ghost",size:"sm",onClick:async he=>{he.stopPropagation(),await re(I.images,E.name)},className:"p-1 h-auto text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Посмотреть фото",children:s.jsx(By,{className:"w-4 h-4"})}),me&&s.jsx(q,{variant:"ghost",size:"sm",onClick:async he=>{he.stopPropagation(),await xe(I.videos,E.name)},className:"p-1 h-auto text-red-600 hover:text-red-700 hover:bg-red-50",title:"Смотреть видео",children:s.jsx(lh,{className:"w-4 h-4"})}),s.jsxs(rt,{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0 px-2 sm:px-3 py-1 text-xs sm:text-sm font-semibold flex-shrink-0 ml-2",children:[E.price," Р"]})]})]}),s.jsx("p",{className:"text-gray-600 leading-relaxed text-sm sm:text-base",children:E.shortDescription||E.fullDescription})]})]},E.id)})})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 sm:gap-6 pt-4 sm:pt-6 border-t-2 border-gradient-to-r from-orange-200 via-purple-200 to-blue-200",children:[s.jsxs("div",{className:"text-center sm:text-left",children:[s.jsx("p",{className:"text-base sm:text-lg text-gray-600 mb-2",children:"Общая стоимость:"}),s.jsxs("p",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-orange-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:[V," Р"]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 w-full sm:w-auto",children:[s.jsx(q,{variant:"outline",onClick:()=>r(!1),className:"w-full sm:w-auto min-w-[140px] py-2.5 sm:py-3 px-4 sm:px-6 text-base sm:text-lg border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-all duration-300",children:"Отмена"}),s.jsx(q,{onClick:X,disabled:d.length===0||w,className:"w-full sm:w-auto min-w-[180px] py-2.5 sm:py-3 px-4 sm:px-6 text-base sm:text-lg bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white shadow-glow transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2"}),"Создание счета..."]}):s.jsxs(s.Fragment,{children:[s.jsx(sn,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Отправить заявку"]})})]})]})]})}),S&&s.jsxs(s.Fragment,{children:[s.jsx(X4,{isOpen:N&&S.type==="photo",onOpenChange:j,images:S.urls,title:S.title}),s.jsx(K4,{isOpen:b&&S.type==="video",onOpenChange:_,videoUrl:S.urls[0],title:S.title})]})]})},AP=({onRequestWorkshop:e})=>s.jsxs("div",{className:"text-center py-12",children:[s.jsxs("div",{className:"relative mb-8",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-orange-200 to-purple-200 rounded-full opacity-20 animate-pulse"})}),s.jsx("div",{className:"relative z-10",children:s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-400 to-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4 shadow-glow",children:s.jsx(sn,{className:"w-12 h-12 text-white"})})}),s.jsx("div",{className:"absolute top-0 left-1/4 animate-bounce-gentle",children:s.jsx(ss,{className:"w-6 h-6 text-yellow-400",fill:"currentColor"})}),s.jsx("div",{className:"absolute top-4 right-1/4 animate-float",children:s.jsx(ss,{className:"w-4 h-4 text-orange-400",fill:"currentColor"})}),s.jsx("div",{className:"absolute bottom-0 left-1/3 animate-bounce-gentle",style:{animationDelay:"1s"},children:s.jsx(ss,{className:"w-5 h-5 text-purple-400",fill:"currentColor"})})]}),s.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Пока нет мастер-классов 😊"}),s.jsx("p",{className:"text-lg text-gray-600 mb-8 max-w-md mx-auto",children:"Но ты можешь оставить заявку, и мы приедем в твою школу или детский сад!"}),s.jsx(Ce,{className:"max-w-md mx-auto bg-gradient-to-br from-orange-50 to-purple-50 border-orange-200 mb-8",children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx(Hr,{className:"w-5 h-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-800",children:"Творческие мастер-классы"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Создаем уникальные сувениры"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(or,{className:"w-5 h-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-800",children:"Приезжаем в школы"}),s.jsx("div",{className:"text-sm text-gray-600",children:"И детские сады"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx(Mi,{className:"w-5 h-5 text-yellow-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-800",children:"Уникальные подарки"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Восковые ручки за 5 минут"})]})]})]})})}),s.jsxs(q,{onClick:e,className:"bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white text-lg py-4 px-8 rounded-full shadow-glow transform hover:scale-105 transition-all duration-200",children:[s.jsx(sn,{className:"w-6 h-6 mr-2"}),"Подать заявку на мастер-класс"]}),s.jsxs("div",{className:"mt-8 text-sm text-gray-500",children:[s.jsx("p",{children:"Мы свяжемся с твоими родителями для подтверждения"}),s.jsx("p",{className:"mt-1",children:"✨ Создай свою уникальную восковую ручку! ✨"})]})]}),OP=({invoice:e,isOpen:t,onOpenChange:r,onPaymentClick:n})=>{if(!e)return null;const i=(o=>{switch(o){case"paid":return{label:"Оплачено",color:"bg-green-500",icon:s.jsx(zr,{className:"w-4 h-4"})};case"pending":return{label:"Ожидает оплаты",color:"bg-yellow-500",icon:s.jsx(Xr,{className:"w-4 h-4"})};case"cancelled":return{label:"Отменено",color:"bg-red-500",icon:s.jsx(Xr,{className:"w-4 h-4"})};default:return{label:"Неизвестно",color:"bg-gray-500",icon:s.jsx(Xr,{className:"w-4 h-4"})}}})(e.status);return s.jsx(gr,{open:t,onOpenChange:r,children:s.jsxs(dr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-yellow-50 via-pink-50 to-blue-50 border-0 shadow-2xl p-6",children:[s.jsx(jr,{children:s.jsx(ur,{className:"text-2xl font-bold bg-gradient-to-r from-orange-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Детали участия"})}),s.jsxs(Ce,{className:"bg-white/90 backdrop-blur-sm border-orange-200 shadow-card mb-6",children:[s.jsx(Je,{className:"pb-3",children:s.jsx(qe,{className:"text-xl font-bold text-orange-500",children:"Мастер-класс"})}),s.jsx(Ae,{className:"space-y-3",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border border-orange-200",children:[s.jsx(Tn,{className:"w-4 h-4 text-orange-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700 font-medium",children:e.city})]}),s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[s.jsx(or,{className:"w-4 h-4 text-purple-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700 font-medium",children:e.school_name})]}),s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),s.jsxs("span",{className:"text-gray-700 font-medium",children:["Класс: ",e.class_group]})]}),s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[s.jsx(Cn,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),s.jsx("span",{className:"text-gray-700 font-medium",children:new Date(e.workshop_date).toLocaleDateString("ru-RU")})]})]})})]}),s.jsxs(Ce,{className:"bg-white/90 backdrop-blur-sm border-purple-200 shadow-card mb-6",children:[s.jsxs(Je,{className:"pb-3",children:[s.jsx(qe,{className:"text-lg font-bold text-gray-800",children:"Выбранные стили"}),s.jsx(ft,{children:"Стили для вашей восковой ручки"})]}),s.jsx(Ae,{className:"space-y-3",children:e.selected_styles.map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-2xl",children:"✋"}),s.jsx("span",{className:"font-medium text-gray-800",children:o.name})]}),s.jsxs(rt,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0 px-3 py-1",children:[o.price," Р"]})]},l))})]}),e.selected_options.length>0&&s.jsxs(Ce,{className:"bg-white/90 backdrop-blur-sm border-blue-200 shadow-card mb-6",children:[s.jsxs(Je,{className:"pb-3",children:[s.jsx(qe,{className:"text-lg font-bold text-gray-800",children:"Дополнительные опции"}),s.jsx(ft,{children:"Дополнительные опции для вашей восковой ручки"})]}),s.jsx(Ae,{className:"space-y-3",children:e.selected_options.map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-2xl",children:"✨"}),s.jsx("span",{className:"font-medium text-gray-800",children:o.name})]}),s.jsxs(rt,{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0 px-3 py-1",children:[o.price," Р"]})]},l))})]}),s.jsx(Ce,{className:"bg-white/90 backdrop-blur-sm border-green-200 shadow-card mb-6",children:s.jsx(Ae,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"text-center sm:text-left",children:[s.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Статус:"}),s.jsxs(rt,{className:`${i.color} text-white border-0 px-3 py-2 text-sm font-semibold flex items-center space-x-2`,children:[i.icon,s.jsx("span",{children:i.label})]})]}),s.jsxs("div",{className:"text-center sm:text-right",children:[s.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"Общая стоимость:"}),s.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-orange-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:[e.amount," Р"]})]})]})})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t-2 border-gradient-to-r from-orange-200 via-purple-200 to-blue-200",children:[s.jsx(q,{variant:"outline",onClick:()=>r(!1),className:"w-full sm:w-auto min-w-[140px] py-3 px-6 text-lg border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-all duration-300",children:"Закрыть"}),e.status==="pending"&&n&&s.jsxs(q,{onClick:()=>n(e.id),className:"w-full sm:w-auto min-w-[180px] py-3 px-6 text-lg bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white shadow-glow transform hover:scale-105 transition-all duration-300",children:[s.jsx(r0,{className:"w-5 h-5 mr-2"}),"Оплатить"]})]})]})})},DP=()=>{const{user:e}=Sr(),{toast:t}=Gt(),r=$a(),{masterClasses:n,fetchMasterClasses:a}=Kg(),{schools:i}=Ba(),{services:o}=Wa(),{data:l}=L4((e==null?void 0:e.id)||""),{getUserRegistrations:c}=$4(),[d,u]=v.useState(null),[m,f]=v.useState(!1),[p,g]=v.useState(!1),[h,x]=v.useState(!1),[w,y]=v.useState(null),[N,j]=v.useState(()=>!localStorage.getItem("child-onboarding-completed")),[b,_]=v.useState(0),[S,C]=v.useState(null),[A,U]=v.useState([]),k=ha(),R=J=>J===0?"записались":J===1?"записался":J>=2&&J<=4?"записались":"записалось";v.useEffect(()=>{e!=null&&e.id&&(console.log("Dashboard: Loading master classes for user:",e.id),a({userId:e.id}))},[e==null?void 0:e.id,a]),v.useEffect(()=>{e!=null&&e.id&&(console.log("Dashboard: Loading user registrations for user:",e.id),c(e.id).then(U).catch(console.error))},[e==null?void 0:e.id,c]);const te=v.useMemo(()=>Object.values(Object.assign({})).map(D=>D.default),[]),Z=v.useMemo(()=>Object.entries(Object.assign({})).map(([X,V])=>({src:V.default,order:(()=>{const E=X.match(/onboarding-(\d+)/i);return E?parseInt(E[1],10):999})()})).sort((X,V)=>X.order-V.order).map(X=>X.src),[]),se=v.useMemo(()=>{const J=new Date().toISOString().slice(0,10);console.log("Dashboard: Processing master classes for user:",{userId:e==null?void 0:e.id,totalMasterClasses:n.length,today:J,masterClasses:n.map(X=>({id:X.id,date:X.date,schoolName:X.schoolName,classGroup:X.classGroup,isAfterToday:X.date>=J}))});const D=n.filter(X=>{const V=X.date>=J;return console.log("Date filter check:",{event:X.id,date:X.date,today:J,isAfterToday:V,stringComparison:`"${X.date}" >= "${J}"`}),V});return console.log("After date filtering:",{originalCount:n.length,filteredCount:D.length}),D.sort((X,V)=>X.date!==V.date?X.date.localeCompare(V.date):X.time.localeCompare(V.time))},[n,e==null?void 0:e.id]),ae=v.useMemo(()=>(console.log("Dashboard: Creating workshops from availableEvents:",{availableEventsCount:se.length,availableEvents:se.map(J=>({id:J.id,schoolName:J.schoolName,classGroup:J.classGroup,date:J.date}))}),se.map(J=>{var I,G,me,he;const D=(I=l==null?void 0:l.invoices)==null?void 0:I.find(B=>B.master_class_id===J.id),X=D?D.status:"none",V=A.find(B=>B.workshopId===J.id),E=J.participants?J.participants.length:0;return{id:J.id,title:((G=o.find(B=>B.id===J.serviceId))==null?void 0:G.name)||"Мастер‑класс",date:J.date,time:J.time,classGroup:J.classGroup,schoolName:((me=i.find(B=>B.id===J.schoolId))==null?void 0:me.name)||J.schoolName||(e==null?void 0:e.schoolName),city:J.city||((he=i.find(B=>B.id===J.schoolId))==null?void 0:he.address.split(",")[0].trim())||"Не указан",participationStatus:X,invoiceId:D==null?void 0:D.id,registration:V,invoice:D,participantsCount:E}})),[se,o,i,e==null?void 0:e.schoolName,l,A]),ne=J=>{u(J),f(!0)},K=async()=>{if(e!=null&&e.id)try{console.log("Обновление данных после регистрации..."),await r.invalidateQueries({queryKey:["masterClasses"]}),await r.invalidateQueries({queryKey:["invoices"]}),await r.invalidateQueries({queryKey:["workshop-registrations"]}),await r.invalidateQueries({queryKey:["invoices","participant",e.id]});const J=await c(e.id);U(J),await a({userId:e.id}),console.log("Данные обновлены после записи")}catch(J){console.error("Ошибка при обновлении данных:",J)}},re=()=>{g(!0)},xe=J=>{const D=J.participationStatus==="paid"?"оплачен":J.participationStatus==="pending"?"ожидает оплаты":"отменен";t({title:"Детали заказа",description:`Твой заказ на мастер-класс "${J.title}" - ${D}`}),console.log("Детали заказа ребенка:",{workshop:J.title,status:J.participationStatus,registration:J.registration,invoice:J.invoice})};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-100 via-pink-100 to-blue-100 relative overflow-hidden",children:[s.jsx(f0,{count:20,className:"opacity-60"}),s.jsx(Jg,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6",children:[s.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-800 mb-3 sm:mb-4",children:["Привет, ",e==null?void 0:e.name,"! 👋"]}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto px-2",children:"Выбери мастер-класс и создай свою уникальную восковую ручку!"})]}),s.jsx(Ce,{className:"bg-white/80 backdrop-blur-sm border-orange-200 mb-6 sm:mb-8 mx-2 sm:mx-0",children:s.jsxs(Je,{className:"p-4 sm:p-6",children:[s.jsxs(qe,{className:"flex items-center space-x-2 text-gray-800 text-lg sm:text-xl",children:[s.jsx(sn,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{children:"Твои мастер-классы"})]}),s.jsx(ft,{className:"text-sm sm:text-base",children:"Мастер-классы отсортированы специально для тебя: сначала в твоем классе, потом в твоей школе"})]})}),ae.length>0?s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 flex items-center space-x-2",children:[s.jsx(Hr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600"}),s.jsx("span",{children:"Мастер‑классы в твоем классе"})]}),s.jsxs(rt,{variant:"secondary",className:"text-sm self-start sm:self-auto",children:[ae.length," найдено"]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:ae.map(J=>{var D,X;return s.jsxs(Ce,{className:"cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-xl bg-gradient-to-br from-orange-50 to-purple-50 border-orange-300 mx-2 sm:mx-0",onClick:()=>ne(J),children:[s.jsxs(Je,{className:"relative p-4 sm:p-6",children:[s.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[s.jsx(rt,{className:"bg-orange-500 text-white text-xs",children:"⭐ Твой класс"}),s.jsxs(rt,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:["🎯 ",J.participantsCount||0," ",R(J.participantsCount||0)]}),J.participationStatus!=="none"&&s.jsx(rt,{variant:J.participationStatus==="paid"?"default":J.participationStatus==="pending"?"secondary":"destructive",className:"text-xs",children:J.participationStatus==="paid"?"✅ Оплачено":J.participationStatus==="pending"?"⏳ Ожидает оплаты":"❌ Отменено"})]}),s.jsxs(qe,{className:"text-lg sm:text-xl text-orange-600 flex items-center space-x-2",children:[s.jsx(Hr,{className:"w-5 h-5"}),s.jsx("span",{children:J.title})]}),s.jsx(ft,{className:"text-sm",children:"Студия: МК Восковые ручки"})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tn,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:J.schoolName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{children:["Класс: ",J.classGroup]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Cn,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:new Date(J.date).toLocaleDateString("ru-RU")})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xr,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:J.time})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 text-gray-500 flex items-center justify-center",children:s.jsx("span",{className:"text-lg",children:"🎯"})}),s.jsxs("span",{children:["Записались: ",J.participantsCount||0," ",R(J.participantsCount||0)]})]})]}),J.participationStatus!=="none"&&s.jsxs("div",{className:"space-y-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Твой статус участия:"}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Статус:"}),s.jsx(rt,{variant:J.participationStatus==="paid"?"default":J.participationStatus==="pending"?"secondary":"destructive",className:"text-xs",children:J.participationStatus==="paid"?"✅ Оплачено":J.participationStatus==="pending"?"⏳ Ожидает оплаты":"❌ Отменено"})]}),J.registration&&s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Регистрация:"}),s.jsxs("span",{className:"text-blue-600",children:["#",(D=J.registration.id)==null?void 0:D.slice(0,8)]})]}),J.invoice&&s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Счет:"}),s.jsxs("span",{className:"text-green-600",children:["#",(X=J.invoice.id)==null?void 0:X.slice(0,8)]})]})]}),J.participationStatus==="none"?s.jsx(q,{onClick:V=>{V.stopPropagation(),ne(J)},className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"🎨 Хочу участвовать"}):J.participationStatus==="pending"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{onClick:V=>{var I;V.stopPropagation();const E=(I=l==null?void 0:l.invoices)==null?void 0:I.find(G=>G.id===J.invoiceId);E&&(y(E),x(!0))},className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"📋 Посмотреть счет"}),s.jsx(q,{onClick:V=>{V.stopPropagation(),xe(J)},variant:"outline",className:"w-full",children:"🔍 Детали заказа"}),s.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Ожидаем оплату"})]}):J.participationStatus==="paid"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{onClick:V=>{V.stopPropagation(),xe(J)},className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"✅ Посмотреть детали"}),s.jsx("p",{className:"text-xs text-green-600 text-center",children:"Ждем тебя на мастер-классе!"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{onClick:V=>{V.stopPropagation(),xe(J)},variant:"outline",className:"w-full",children:"🔍 Детали отмены"}),s.jsx("p",{className:"text-xs text-gray-600 text-center",children:"Счет был отменен"})]})]})]},J.id)})}),s.jsxs(Ce,{className:"bg-white/80 backdrop-blur-sm border-purple-200 mx-2 sm:mx-0",children:[s.jsxs(Je,{className:"p-4 sm:p-6",children:[s.jsx(qe,{className:"text-lg sm:text-xl",children:"О студии «МК Восковые ручки»"}),s.jsx(ft,{className:"text-sm sm:text-base",children:"Захватывающий процесс, море эмоций и безопасно!"})]}),s.jsx(Ae,{className:"p-4 sm:p-6 pt-0",children:s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[te.map(J=>s.jsxs("div",{className:"relative group rounded-lg overflow-hidden border",children:[s.jsx("video",{src:J,className:"w-full h-44 object-cover",muted:!0,preload:"metadata"}),s.jsx("button",{className:"absolute inset-0 flex items-center justify-center bg-black/30 opacity-0 group-hover:opacity-100 transition",onClick:()=>C(J),"aria-label":"Смотреть видео",children:s.jsx(mS,{className:"w-12 h-12 text-white"})})]},J)),te.length===0&&s.jsx("div",{className:"text-sm text-gray-600 text-center py-4",children:"Добавьте видео в папку `src/assets/video` — они появятся здесь автоматически."})]})})]})]}):s.jsx(AP,{onRequestWorkshop:re})]}),d&&s.jsx(kP,{workshop:d,isOpen:m,onOpenChange:J=>{J||(f(!1),u(null))},participantId:e==null?void 0:e.id,participantName:e!=null&&e.name?`${e.name} ${e.surname||""}`.trim():void 0,onRegistrationSuccess:K}),s.jsx(gr,{open:!!S,onOpenChange:J=>!J&&C(null),children:s.jsxs(dr,{className:"max-w-3xl",children:[s.jsx(jr,{className:"text-center",children:s.jsx(ur,{className:"text-lg sm:text-xl",children:"Видео о мастер‑классе"})}),S&&s.jsx("video",{src:S,className:"w-full rounded-lg",controls:!0,autoPlay:!0})]})}),s.jsx(gr,{open:N,onOpenChange:j,children:s.jsxs(dr,{className:"max-w-2xl",children:[s.jsxs(jr,{className:"text-center",children:[s.jsx(ur,{className:"text-2xl sm:text-xl",children:"Давай познакомимся! ✨"}),s.jsx(br,{className:"text-base sm:text-sm",children:"Как проходит мастер‑класс «Восковые ручки»"})]}),(()=>{const J=[{title:"Придумай жест",text:"Выбери любую форму руки — покажи любимый жест!",image:Z[0]},{title:"Тёплый безопасный воск",text:"Быстро окунаем руку в тёплый воск — это приятно и безопасно.",media:te[0],image:Z[1]},{title:"Украшаем",text:"Выбирай стиль и опции: световые ручки, блёстки, лакировка и надпись.",image:Z[2]},{title:"Готово за 5 минут!",text:"Забирай готовый сувенир и делись с друзьями!",image:Z[3]}],D=J[Math.min(b,J.length-1)];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3 text-center",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800",children:D.title}),s.jsx("p",{className:"text-gray-600 text-sm sm:text-base leading-relaxed",children:D.text})]}),s.jsx("div",{className:"w-full overflow-hidden rounded-xl bg-white/50 shadow-lg",children:D.media&&b>=1?s.jsx("video",{src:D.media,className:"w-full aspect-video object-cover",muted:!0,autoPlay:!0,loop:!0,playsInline:!0}):D.image?s.jsx("img",{src:D.image,className:"w-full aspect-video object-cover",alt:D.title}):s.jsx("div",{className:"w-full aspect-video bg-gradient-to-r from-orange-100 to-purple-100 flex items-center justify-center",children:s.jsx("div",{className:"text-gray-500 text-sm",children:"Изображение"})})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center gap-2",children:J.map((X,V)=>s.jsx("div",{className:`h-3 w-3 rounded-full transition-all duration-200 ${V===b?"bg-orange-500 scale-110":"bg-orange-200"}`},V))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[b>0&&s.jsx(q,{variant:"outline",onClick:()=>_(X=>Math.max(0,X-1)),className:"flex-1 sm:flex-none min-w-[120px]",children:"Назад"}),b<J.length-1?s.jsx(q,{className:"bg-gradient-to-r from-orange-500 to-purple-500 text-white hover:from-orange-600 hover:to-purple-600 flex-1 sm:flex-none min-w-[120px]",onClick:()=>_(X=>Math.min(J.length-1,X+1)),children:"Далее"}):s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[s.jsx(q,{variant:"secondary",onClick:()=>{j(!1),localStorage.setItem("child-onboarding-completed","true"),k("/child/about")},className:"flex-1 sm:flex-none min-w-[120px]",children:"Больше видео"}),s.jsx(q,{className:"bg-gradient-to-r from-orange-500 to-purple-500 text-white hover:from-orange-600 hover:to-purple-600 flex-1 sm:flex-none min-w-[120px]",onClick:()=>{j(!1),localStorage.setItem("child-onboarding-completed","true")},children:"Погнали!"})]})]})]})]})})()]})}),w&&s.jsx(OP,{invoice:w,isOpen:h,onOpenChange:J=>{J||(x(!1),y(null))}})]})},RP=({isOpen:e,onClose:t})=>{const{user:r,updateProfile:n}=Sr(),{schools:a}=Ba(),{toast:i}=Gt(),[o,l]=v.useState({name:"",surname:"",age:void 0,schoolId:"",class:""}),[c,d]=v.useState(!1),[u,m]=v.useState([]);v.useEffect(()=>{if(r&&e&&(l({name:r.name||"",surname:r.surname||"",age:r.age||void 0,schoolId:r.schoolId||"",class:r.class||""}),!r.schoolId&&r.schoolName)){const x=a.find(w=>w.name===r.schoolName);x&&l(w=>({...w,schoolId:x.id}))}},[r,e,a]),v.useEffect(()=>{if(o.schoolId){const x=a.find(w=>w.id===o.schoolId);m((x==null?void 0:x.classes)||[])}},[o.schoolId,a]);const f=(x,w)=>{l(y=>({...y,[x]:w}))},p=x=>{l(w=>({...w,schoolId:x,class:""}))},g=async x=>{if(x.preventDefault(),!!(r!=null&&r.id))try{if(d(!0),!o.name||!o.age||!o.schoolId||!o.class){i({title:"Ошибка",description:"Заполните все обязательные поля",variant:"destructive"});return}if(o.age&&(o.age<3||o.age>18)){i({title:"Ошибка",description:"Возраст должен быть от 3 до 18 лет",variant:"destructive"});return}console.log("📝 Submitting profile update with data:",o),await n(o),i({title:"Успешно! 🎉",description:"Профиль обновлен"}),t()}catch(w){console.error("Error updating profile:",w),i({title:"Ошибка",description:"Не удалось обновить профиль",variant:"destructive"})}finally{d(!1)}},h=()=>{r&&l({name:r.name||"",surname:r.surname||"",age:r.age||void 0,schoolId:r.schoolId||"",class:r.class||""}),t()};return s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-md",children:[s.jsxs(jr,{children:[s.jsxs(ur,{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-5 h-5 text-orange-600"}),"Редактировать профиль"]}),s.jsx(br,{children:"Измените свои данные"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"name",children:"Имя *"}),s.jsx(st,{id:"name",value:o.name||"",onChange:x=>f("name",x.target.value),placeholder:"Введите имя",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"surname",children:"Фамилия"}),s.jsx(st,{id:"surname",value:o.surname||"",onChange:x=>f("surname",x.target.value),placeholder:"Введите фамилию"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"age",children:"Возраст *"}),s.jsx(st,{id:"age",type:"number",min:"3",max:"18",value:o.age||"",onChange:x=>f("age",x.target.value?parseInt(x.target.value):void 0),placeholder:"Введите возраст",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"school",children:"Школа/садик *"}),s.jsxs(kt,{value:o.schoolId||"",onValueChange:p,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите школу/садик"})}),s.jsx(_t,{children:a.map(x=>s.jsx(Ze,{value:x.id,children:x.name},x.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"class",children:"Класс/группа *"}),s.jsxs(kt,{value:o.class||"",onValueChange:x=>f("class",x),disabled:!o.schoolId,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите класс/группу"})}),s.jsx(_t,{children:u.map(x=>s.jsx(Ze,{value:x,children:x},x))})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(q,{type:"button",variant:"outline",onClick:h,disabled:c,className:"flex-1",children:[s.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Отмена"]}),s.jsxs(q,{type:"submit",disabled:c,className:"flex-1 bg-gradient-to-r from-orange-500 to-purple-500",children:[s.jsx(Kr,{className:"w-4 h-4 mr-2"}),c?"Сохранение...":"Сохранить"]})]})]})]})})},PP=()=>{const{user:e,logout:t}=Sr(),{schools:r}=Ba(),[n,a]=v.useState(!1),i=v.useMemo(()=>{var c;return(c=((e==null?void 0:e.name)||"?")[0])==null?void 0:c.toUpperCase()},[e==null?void 0:e.name]),o=v.useMemo(()=>{if(e!=null&&e.schoolId){const c=r.find(d=>d.id===e.schoolId);if(c)return c.name}if(e!=null&&e.schoolName)return e.schoolName;if(e!=null&&e.class){const c=r.find(d=>d.classes.includes(e.class));if(c)return c.name}return"—"},[r,e==null?void 0:e.schoolId,e==null?void 0:e.schoolName,e==null?void 0:e.class]),l=c=>c===1?"год":c>=2&&c<=4?"года":"лет";return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-100 via-pink-100 to-blue-100",children:[s.jsx(Jg,{}),s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6 space-y-6",children:[s.jsxs(Ce,{className:"bg-white/90 border-orange-200",children:[s.jsxs(Je,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-orange-400 to-purple-500 flex items-center justify-center text-white text-xl font-bold",children:i}),s.jsxs("div",{children:[s.jsx(qe,{className:"text-2xl",children:e==null?void 0:e.name}),s.jsx(ft,{children:"Мой профиль"})]})]}),s.jsxs(q,{onClick:()=>a(!0),variant:"outline",size:"sm",className:"border-orange-300 hover:bg-orange-50",children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),"Редактировать"]})]}),s.jsxs(Ae,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(e==null?void 0:e.age)&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(gs,{className:"w-5 h-5 text-pink-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Возраст"}),s.jsxs("div",{className:"font-medium",children:[e.age," ",l(e.age)]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pS,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Школа"}),s.jsx("div",{className:"font-medium",children:o})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(or,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Класс/группа"}),s.jsx("div",{className:"font-medium",children:(e==null?void 0:e.class)||"—"})]})]})]})]}),s.jsxs(Ce,{className:"bg-white/90 border-purple-200",children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"w-5 h-5 text-orange-600"})," Быстрые действия"]}),s.jsx(ft,{children:"Что хочешь сделать?"})]}),s.jsxs(Ae,{className:"flex flex-wrap gap-3",children:[s.jsx(q,{onClick:t,variant:"outline",className:"border-orange-300",children:"Выйти"}),s.jsx(q,{onClick:()=>window.location.href="/child",className:"bg-gradient-to-r from-orange-500 to-purple-500 text-white",children:"На главную"})]})]})]}),s.jsx(RP,{isOpen:n,onClose:()=>a(!1)})]})},FP=()=>{const[e,t]=v.useState(null),{services:r}=Wa(),n=v.useMemo(()=>Object.values(Object.assign({})).map(l=>l.default),[]),a=v.useMemo(()=>Object.values(Object.assign({})).map(l=>l.default),[]),i=v.useMemo(()=>r.find(o=>{var l,c;return((l=o.name)==null?void 0:l.toLowerCase().includes("восков"))||((c=o.name)==null?void 0:c.toLowerCase().includes("ручк"))}),[r]);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-100 via-pink-100 to-blue-100",children:[s.jsx(Jg,{}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6",children:[s.jsxs(Ce,{className:"bg-white/90 border-orange-200",children:[s.jsxs(Je,{children:[s.jsx(qe,{children:"О студии «МК Восковые ручки»"}),s.jsx(ft,{children:"Творческие мастер‑классы для детей"})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-700",children:"Мы работаем с 2015 года в Хабаровске и далеко за его пределами. Выезжаем в сады/школы/лагеря . А так же можем приехать к вам на праздник. За все время  мы создали  более 120000 тысяч ручек. Более 120000 улыбок. Восковые ручки – это интерактивный захватывающий процесс создания 3d копии руки за 5-7 минут, которую как сувенир вы забираете с собой   на долгую память. Каждый участник может выбрать свою форму и цвет ручки, создавая уникальную композицию. Вы  полностью задействованы в процессе. Весь интерактив сопровождается бурей эмоций и улыбками! Абсолютно безопасное и полезное развлечение для любого возраста (+3). Парафин  смягчает кожу рук. Педиатры даже рекомендуют его для профилактики . Приятные ощущения для кожи рук, в сочетании со СПА-эффектом."}),a.length>0&&s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(o=>s.jsx("img",{src:o,className:"w-full rounded-md border object-cover"},o))})]})]}),s.jsxs(Ce,{className:"bg-white/90 border-purple-200",children:[s.jsxs(Je,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(qe,{children:"Видео"}),s.jsx(rt,{variant:"secondary",children:n.length})]}),s.jsx(ft,{children:"Как проходит мастер-класс"})]}),s.jsx(Ae,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.map(o=>s.jsxs("div",{className:"relative group rounded-lg overflow-hidden border",children:[s.jsx("video",{src:o,className:"w-full h-48 object-cover",muted:!0,preload:"metadata"}),s.jsx("button",{className:"absolute inset-0 flex items-center justify-center bg-black/30 opacity-0 group-hover:opacity-100 transition",onClick:()=>t(o),"aria-label":"Смотреть видео",children:s.jsx(mS,{className:"w-12 h-12 text-white"})})]},o)),n.length===0&&s.jsx("div",{className:"text-sm text-gray-600",children:"Добавьте .mp4 в папку `src/assets/video`"})]})})]}),i&&s.jsxs(Ce,{className:"bg-white/90 border-orange-200",children:[s.jsxs(Je,{children:[s.jsx(qe,{children:"Наши стили и опции"}),s.jsx(ft,{children:"Актуальные позиции и цены"})]}),s.jsxs(Ae,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Стили"}),s.jsx("ul",{className:"space-y-2 text-sm",children:i.styles.map(o=>s.jsxs("li",{className:"flex justify-between border-b py-1",children:[s.jsx("span",{children:o.name}),s.jsxs("span",{className:"font-medium",children:[o.price," ₽"]})]},o.id))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Опции"}),s.jsx("ul",{className:"space-y-2 text-sm",children:i.options.map(o=>s.jsxs("li",{className:"flex justify-between border-b py-1",children:[s.jsx("span",{children:o.name}),s.jsxs("span",{className:"font-medium",children:[o.price," ₽"]})]},o.id))})]})]})]})]}),s.jsx(gr,{open:!!e,onOpenChange:o=>!o&&t(null),children:s.jsxs(dr,{className:"max-w-3xl",children:[s.jsxs(jr,{children:[s.jsx(ur,{children:"Видео о мастер‑классе"}),s.jsx(br,{className:"sr-only",children:"Модальное окно для просмотра видео о мастер-классе"})]}),e&&s.jsx("video",{src:e,className:"w-full",controls:!0,autoPlay:!0})]})})]})};function MP(e,t=[]){let r=[];function n(i,o){const l=v.createContext(o),c=r.length;r=[...r,o];function d(m){const{scope:f,children:p,...g}=m,h=(f==null?void 0:f[e][c])||l,x=v.useMemo(()=>g,Object.values(g));return s.jsx(h.Provider,{value:x,children:p})}function u(m,f){const p=(f==null?void 0:f[e][c])||l,g=v.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=r.map(o=>v.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,IP(a,...t)]}function IP(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...l,...m}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}var mm="rovingFocusGroup.onEntryFocus",LP={bubbles:!1,cancelable:!0},h0="RovingFocusGroup",[lx,Y4,$P]=Ag(h0),[BP,Q4]=MP(h0,[$P]),[WP,UP]=BP(h0),J4=v.forwardRef((e,t)=>s.jsx(lx.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(lx.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(zP,{...e,ref:t})})}));J4.displayName=h0;var zP=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,f=v.useRef(null),p=Mt(t,f),g=Mg(i),[h=null,x]=Fi({prop:o,defaultProp:l,onChange:c}),[w,y]=v.useState(!1),N=Un(d),j=Y4(r),b=v.useRef(!1),[_,S]=v.useState(0);return v.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(mm,N),()=>C.removeEventListener(mm,N)},[N]),s.jsx(WP,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:h,onItemFocus:v.useCallback(C=>x(C),[x]),onItemShiftTab:v.useCallback(()=>y(!0),[]),onFocusableItemAdd:v.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:v.useCallback(()=>S(C=>C-1),[]),children:s.jsx(ht.div,{tabIndex:w||_===0?-1:0,"data-orientation":n,...m,ref:p,style:{outline:"none",...e.style},onMouseDown:at(e.onMouseDown,()=>{b.current=!0}),onFocus:at(e.onFocus,C=>{const A=!b.current;if(C.target===C.currentTarget&&A&&!w){const U=new CustomEvent(mm,LP);if(C.currentTarget.dispatchEvent(U),!U.defaultPrevented){const k=j().filter(ae=>ae.focusable),R=k.find(ae=>ae.active),te=k.find(ae=>ae.id===h),se=[R,te,...k].filter(Boolean).map(ae=>ae.ref.current);tE(se,u)}}b.current=!1}),onBlur:at(e.onBlur,()=>y(!1))})})}),Z4="RovingFocusGroupItem",eE=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,...o}=e,l=Ci(),c=i||l,d=UP(Z4,r),u=d.currentTabStopId===c,m=Y4(r),{onFocusableItemAdd:f,onFocusableItemRemove:p}=d;return v.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),s.jsx(lx.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:s.jsx(ht.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:at(e.onMouseDown,g=>{n?d.onItemFocus(c):g.preventDefault()}),onFocus:at(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:at(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const h=GP(g,d.orientation,d.dir);if(h!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=m().filter(y=>y.focusable).map(y=>y.ref.current);if(h==="last")w.reverse();else if(h==="prev"||h==="next"){h==="prev"&&w.reverse();const y=w.indexOf(g.currentTarget);w=d.loop?qP(w,y+1):w.slice(y+1)}setTimeout(()=>tE(w))}})})})});eE.displayName=Z4;var HP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VP(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function GP(e,t,r){const n=VP(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return HP[n]}function tE(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function qP(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var XP=J4,KP=eE,ev="Tabs",[YP,vH]=Hi(ev,[Q4]),rE=Q4(),[QP,tv]=YP(ev),nE=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Mg(l),[m,f]=Fi({prop:n,onChange:a,defaultProp:i});return s.jsx(QP,{scope:r,baseId:Ci(),value:m,onValueChange:f,orientation:o,dir:u,activationMode:c,children:s.jsx(ht.div,{dir:u,"data-orientation":o,...d,ref:t})})});nE.displayName=ev;var sE="TabsList",aE=v.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=tv(sE,r),o=rE(r);return s.jsx(XP,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(ht.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});aE.displayName=sE;var iE="TabsTrigger",oE=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=tv(iE,r),l=rE(r),c=dE(o.baseId,n),d=uE(o.baseId,n),u=n===o.value;return s.jsx(KP,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(ht.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:at(e.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(n):m.preventDefault()}),onKeyDown:at(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(n)}),onFocus:at(e.onFocus,()=>{const m=o.activationMode!=="manual";!u&&!a&&m&&o.onValueChange(n)})})})});oE.displayName=iE;var lE="TabsContent",cE=v.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=tv(lE,r),c=dE(l.baseId,n),d=uE(l.baseId,n),u=n===l.value,m=v.useRef(u);return v.useEffect(()=>{const f=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(Vi,{present:a||u,children:({present:f})=>s.jsx(ht.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:f&&i})})});cE.displayName=lE;function dE(e,t){return`${e}-trigger-${t}`}function uE(e,t){return`${e}-content-${t}`}var JP=nE,fE=aE,hE=oE,mE=cE;const pE=JP,rv=v.forwardRef(({className:e,...t},r)=>s.jsx(fE,{ref:r,className:We("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));rv.displayName=fE.displayName;const Gn=v.forwardRef(({className:e,...t},r)=>s.jsx(hE,{ref:r,className:We("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Gn.displayName=hE.displayName;const qn=v.forwardRef(({className:e,...t},r)=>s.jsx(mE,{ref:r,className:We("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));qn.displayName=mE.displayName;const nv=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!1),[a,i]=v.useState(null),[o,l]=v.useState(0),[c,d]=v.useState(null);v.useEffect(()=>{console.log("🚀 useUsers hook mounted, fetching users..."),u()},[]);const u=async w=>{try{n(!0),i(null),console.log("🔍 fetchUsers called with params:",w);const y=await et.users.getUsers(w);console.log("📡 API response:",y),t(y.users),l(y.total),d(new Date),console.log("✅ Users set to state:",y.users.length)}catch(y){i(y instanceof Error?y.message:"Failed to fetch users"),console.error("❌ Error fetching users:",y)}finally{n(!1)}};return{users:e,loading:r,error:a,total:o,lastFetch:c,fetchUsers:u,refreshUsers:async()=>{console.log("🔄 Force refreshing users..."),await u()},createUser:async w=>{try{n(!0),i(null),await et.users.createUser(w),await u()}catch(y){throw i(y instanceof Error?y.message:"Failed to create user"),console.error("Error creating user:",y),y}finally{n(!1)}},updateUser:async(w,y)=>{try{n(!0),i(null),await et.users.updateUser(w,y),await u()}catch(N){throw i(N instanceof Error?N.message:"Failed to update user"),console.error("Error updating user:",N),N}finally{n(!1)}},deleteUser:async w=>{try{n(!0),i(null),await et.users.deleteUser(w),await u()}catch(y){throw i(y instanceof Error?y.message:"Failed to delete user"),console.error("Error deleting user:",y),y}finally{n(!1)}},getUserById:async w=>{try{return i(null),await et.users.getUserById(w)}catch(y){const N=y instanceof Error?y.message:"Failed to get user";throw i(N),console.error("Error getting user:",y),y}},getChildrenByParentId:async w=>{try{return await et.users.getChildrenByParentId(w)}catch(y){return console.error("Error fetching children:",y),[]}}}},rw="https://waxhands.ru/api",uh="wss://waxhands.ru/api/chat/ws",kc=e=>e?e.startsWith("http")?e:e.startsWith("/uploads")?`${rw}${e}`:e.startsWith("blob:")||e.startsWith("data:")?e:`${rw}${e.startsWith("/")?"":"/"}${e}`:"",sv=(e,t=!1,r)=>{const n=v.useRef(null),a=v.useRef(null),i=v.useRef(null),o=v.useRef(0),l=v.useRef(r);v.useEffect(()=>{l.current=r},[r]);const[c,d]=v.useState({isConnected:!1,isConnecting:!1,connectionAttempts:0}),u=3,m=2e3,f=v.useCallback(()=>{var h,x;if(((h=n.current)==null?void 0:h.readyState)===WebSocket.OPEN||((x=n.current)==null?void 0:x.readyState)===WebSocket.CONNECTING){console.log("🔌 WorkshopRequests: WebSocket уже подключен или подключается, пропускаем");return}if(c.isConnecting){console.log("🔌 WorkshopRequests: Уже идет подключение, пропускаем");return}d(w=>({...w,isConnecting:!0}));try{const w=window.location.protocol==="https:"?"wss:":"ws:",y=window.location.host,N=w==="wss:"?`wss://${y}/api/chat/ws?userId=${e}&isAdmin=${t}`:`${uh}?userId=${e}&isAdmin=${t}`;console.log("🔌 WorkshopRequests: Подключение к WebSocket:",N),n.current=new WebSocket(N),n.current.onopen=()=>{console.log("🔌 WorkshopRequests: WebSocket соединение установлено"),d({isConnected:!0,isConnecting:!1,connectionAttempts:0}),o.current=0,i.current=setInterval(()=>{var j;((j=n.current)==null?void 0:j.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"ping"}))},6e4),e&&n.current.send(JSON.stringify({type:"subscribe",channels:[`user:${e}`,"workshop_requests:all"]}))},n.current.onmessage=j=>{try{const b=JSON.parse(j.data);if(console.log("🔌 WorkshopRequests: Получено сообщение:",b),b.type==="pong")return;l.current&&typeof l.current=="function"&&l.current(b)}catch(b){console.error("❌ WorkshopRequests: Ошибка парсинга сообщения:",b)}},n.current.onclose=j=>{console.log("🔌 WorkshopRequests: WebSocket соединение закрыто:",j.code,j.reason),d(b=>({...b,isConnected:!1,isConnecting:!1})),i.current&&(clearInterval(i.current),i.current=null),o.current<u?(o.current+=1,console.log(`🔄 WorkshopRequests: Попытка переподключения ${o.current}/${u}`),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{d(b=>({...b,connectionAttempts:o.current})),f()},m)):(console.log("❌ WorkshopRequests: Превышен лимит попыток переподключения"),d(b=>({...b,lastError:"Connection failed after multiple attempts"})))},n.current.onerror=j=>{console.error("❌ WorkshopRequests: WebSocket ошибка:",j),d(b=>({...b,lastError:"Connection error"}))}}catch(w){console.error("❌ WorkshopRequests: Ошибка создания WebSocket:",w),d(y=>({...y,isConnecting:!1,lastError:"Failed to create connection"}))}},[e,t]),p=v.useCallback(()=>{console.log("🔌 WorkshopRequests: Отключение WebSocket"),a.current&&(clearTimeout(a.current),a.current=null),i.current&&(clearInterval(i.current),i.current=null),n.current&&(n.current.close(1e3,"Manual disconnect"),n.current=null),d({isConnected:!1,isConnecting:!1,connectionAttempts:0}),o.current=0},[]),g=v.useCallback(h=>{var x,w;return((x=n.current)==null?void 0:x.readyState)===WebSocket.OPEN?(n.current.send(JSON.stringify(h)),!0):(console.warn("⚠️ WorkshopRequests: WebSocket не открыт, состояние:",(w=n.current)==null?void 0:w.readyState),!1)},[]);return v.useEffect(()=>(e&&(console.log("🔌 WorkshopRequests: useEffect: Подключаемся к WebSocket"),f()),()=>{console.log("🔌 WorkshopRequests: useEffect cleanup: Отключаем WebSocket"),p()}),[e,f,p]),{...c,connect:f,disconnect:p,sendMessage:g}},pm=520;function ZP(){const[e,t]=v.useState(void 0);return v.useEffect(()=>{const r=window.matchMedia(`(max-width: ${pm-1}px)`),n=()=>{t(window.innerWidth<pm)};return r.addEventListener("change",n),t(window.innerWidth<pm),()=>r.removeEventListener("change",n)},[]),!!e}const av=({invoiceId:e,amount:t,description:r,children:n,masterClassName:a="Мастер-класс",eventDate:i,eventTime:o,onPaymentSuccess:l,onPaymentError:c,className:d="",variant:u="default",size:m="default",disabled:f=!1})=>{const{toast:p}=Gt(),{user:g}=Sr(),[h,x]=v.useState({status:"idle"}),w=async()=>{if(!g){p({title:"Ошибка",description:"Необходимо войти в систему для оплаты.",variant:"destructive"});return}x({status:"loading"});try{const b={invoice_id:e,amount:t,description:r,master_class_name:a,event_date:i||"Не указана",event_time:o||"Не указано",customer_name:g.name||"",customer_phone:g.phone||"",children_count:n.length,children_names:n.map(C=>C.name).join(", "),children_details:n.map(C=>({name:C.name,age:C.age||"Не указан",services:C.selectedServices.join(", "),amount:C.totalAmount})),services_summary:n.map(C=>`${C.name}: ${C.selectedServices.join(", ")} - ${C.totalAmount} ₽`).join(`
`),timestamp:Date.now()},_=new URL("https://forms.yandex.ru/68a6c71c068ff02ecdba16a5");if(Object.entries(b).forEach(([C,A])=>{typeof A=="object"?_.searchParams.append(C,JSON.stringify(A)):_.searchParams.append(C,A.toString())}),!window.open(_.toString(),"yandex_payment","width=900,height=700,scrollbars=yes,resizable=yes"))throw new Error("Не удалось открыть окно оплаты. Проверьте блокировщик рекламы.");y(e)}catch(b){console.error("Ошибка открытия формы оплаты:",b),x({status:"error",message:"Не удалось открыть форму оплаты"}),c==null||c("Не удалось открыть форму оплаты")}},y=async b=>{let S=0;const C=setInterval(async()=>{S++;try{const A=await fetch(`/api/invoices/${b}/status`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(A.ok&&(await A.json()).data.status==="paid"){clearInterval(C),x({status:"success",message:"Оплата прошла успешно"}),p({title:"Оплата успешна! 🎉",description:"Статус счета обновлен. Спасибо за оплату!"}),l==null||l();return}}catch(A){console.error("Ошибка проверки статуса:",A)}S>=60&&(clearInterval(C),x({status:"idle"}),p({title:"Время ожидания истекло",description:"Проверьте статус оплаты в личном кабинете или обратитесь к администратору.",variant:"destructive"}))},5e3)},N=()=>{switch(h.status){case"loading":return s.jsxs(s.Fragment,{children:[s.jsx(fD,{className:"w-4 h-4 mr-2 animate-spin"}),"Открываем форму..."]});case"success":return s.jsxs(s.Fragment,{children:[s.jsx(zr,{className:"w-4 h-4 mr-2 text-green-500"}),"Оплачено"]});case"error":return s.jsxs(s.Fragment,{children:[s.jsx(Qc,{className:"w-4 h-4 mr-2 text-red-500"}),"Ошибка"]});default:return s.jsxs(s.Fragment,{children:[s.jsx(r0,{className:"w-4 h-4 mr-2"}),"Оплатить ",t," ₽",n.length>1&&s.jsx(or,{className:"w-3 h-3 ml-1"}),s.jsx(lD,{className:"w-3 h-3 ml-1"})]})}},j=f||h.status==="loading"||h.status==="success";return s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{onClick:w,disabled:j,variant:u,size:m,className:`${d} ${h.status==="success"?"bg-green-500 hover:bg-green-600 text-white":h.status==="error"?"bg-red-500 hover:bg-red-600 text-white":""}`,children:N()}),h.message&&s.jsx("p",{className:`text-sm ${h.status==="success"?"text-green-600":h.status==="error"?"text-red-600":"text-gray-600"}`,children:h.message}),h.status==="idle"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"После нажатия откроется Яндекс.Форма для проверки данных, затем переход в ЮMoney"}),n.length>1&&s.jsxs("p",{className:"text-xs text-blue-600",children:["💡 Записано детей: ",n.length," • Общая сумма: ",t," ₽"]})]})]})},xm=[["Обычная ручка","Световая ручка"],["Двойные ручки","Двойные световые ручки"]],gm=[["Лакировка","Лакировка с блестками"],["Надпись","Надпись световая"],["Наклейка","Наклейка объемная"]],eF={"Двойные ручки":{min:5,max:18},"Двойные световые ручки":{min:5,max:18}};function tF({isOpen:e,onOpenChange:t,workshop:r,children:n,onRegistrationSuccess:a,masterClasses:i=[]}){var gt,dt,qt,Ot,Kt,H,fe,we;console.log("🔄 MODAL: MultiChildWorkshopModal рендерится, onRegistrationSuccess:",!!a);const{user:o}=Sr(),{services:l}=Wa(),{toast:c}=Gt(),d=ZP(),[u,m]=v.useState(!1),[f,p]=v.useState(!1),[g,h]=v.useState(null),[x,w]=v.useState([]),[y,N]=v.useState(0),[j,b]=v.useState(null),[_,S]=v.useState(!1);v.useState(!1);const[C,A]=v.useState(0),[U,k]=v.useState(""),[R,te]=v.useState(!1),[Z,se]=v.useState([]),[ae,ne]=v.useState(!1),K=v.useRef(!1),re=(r==null?void 0:r.participationStatus)&&r.participationStatus!=="none";v.useEffect(()=>{if(n&&n.length>0){const M=n.map(ge=>({childId:ge.id,childName:ge.name,childAge:ge.age,selectedStyles:[],selectedOptions:[],totalAmount:0,isCompleted:!1}));w(M)}},[n]),v.useEffect(()=>{if(r&&l){const M=l.find(ge=>ge.id===r.serviceId);b(M||null)}},[r,l]);const xe=()=>x[y],J=()=>{var M;return((M=xe())==null?void 0:M.totalAmount)||0},D=(M,ge)=>{const Ne=xm.find(Le=>Le.includes(M));return Ne?Ne.some(Le=>Le!==M&&ge.includes(Le)):!1},X=(M,ge)=>{const Ne=eF[M];return Ne?ge>=Ne.min&&ge<=Ne.max:!0},V=(M,ge,Ne)=>D(M,Ne)||!X(M,ge),E=M=>({"Обычная ручка":"Интерактивная раскраска руки с выбором жестов и подставок","Световая ручка":"Во внутрь руки помещается светодиод, который мигает различными цветами","Двойные ручки":"Двойные обычные ручки для детей от 5 лет: запястья вместе, выбор формы (сердечко, замок и др.) и раскраска в любые цвета","Двойные световые ручки":"Во внутрь рук помещается 2 светодиода, которые мигают различными цветами"})[M]||M,I=M=>({Лакировка:"Покрытие специальным лаком для блеска и защиты","Лакировка с блестками":"Лакировка с добавлением блесток для особого эффекта",Надпись:"Персонализированная надпись на ручке","Надпись световая":"Светящаяся надпись с LED подсветкой",Наклейка:"Декоративная наклейка на ручку","Наклейка объемная":"Объемная 3D наклейка для особого эффекта"})[M]||M,G=async M=>{if(!M||typeof M!="string")return!1;try{let ge=M;if(M.startsWith("/")&&(ge=`http://localhost:3001${M}`,console.log(`Преобразуем относительный URL ${M} в абсолютный: ${ge}`)),!new URL(ge).protocol.startsWith("http"))return!1;console.log(`Проверяем файл: ${ge}`);const Le=await fetch(ge,{method:"HEAD",mode:"cors",cache:"no-cache"}),ze=Le.ok;return console.log(`Файл ${ge} доступен: ${ze} (статус: ${Le.status})`),ze}catch(ge){return console.error(`Ошибка при проверке файла ${M}:`,ge),!1}},me=async M=>{if(!Array.isArray(M)||M.length===0)return[];const ge=[],Ne=M.filter(Le=>Le&&typeof Le=="string");console.log("Проверяем файлы:",Ne);for(const Le of Ne){const ze=await G(Le);if(console.log(`Файл ${Le} существует: ${ze}`),ze){const nt=Le.startsWith("/")?`http://localhost:3001${Le}`:Le;ge.push(nt)}}return console.log("Найдены существующие файлы:",ge),ge},he=async(M,ge)=>{if(console.log(`openPhotoCarousel: Получены изображения для "${ge}":`,M),!Array.isArray(M)||M.length===0){c({title:"Нет фотографий",description:"Для этого элемента фотографии не найдены",variant:"destructive"});return}try{const Ne=await me(M);if(Ne.length===0){c({title:"Фотографии недоступны",description:"Файлы изображений не найдены или недоступны",variant:"destructive"});return}console.log(`openPhotoCarousel: Открываем галерею для "${ge}" с существующими изображениями:`,Ne),h({type:"photo",urls:Ne,currentIndex:0,title:ge}),setTimeout(()=>{m(!0)},100)}catch(Ne){console.error("Ошибка при открытии галереи:",Ne),c({title:"Ошибка",description:"Не удалось открыть галерею фотографий",variant:"destructive"})}},B=(M,ge)=>{const Ne=xe();Ne&&w(Le=>Le.map(ze=>{if(ze.childId===Ne.childId){let nt=[...ze.selectedStyles];if(ge){const Qe=j==null?void 0:j.styles.find(Me=>Me.id===M);if(Qe){const Me=xm.find(Ye=>Ye.includes(Qe.name));Me&&(nt=nt.filter(Ye=>{const it=j==null?void 0:j.styles.find(Ht=>Ht.id===Ye);return!it||!Me.includes(it.name)}))}nt.push(M)}else nt=nt.filter(Qe=>Qe!==M);const _e=nt.reduce((Qe,Me)=>{const Ye=j==null?void 0:j.styles.find(it=>it.id===Me);return Qe+((Ye==null?void 0:Ye.price)||0)},0),$e=ze.selectedOptions.reduce((Qe,Me)=>{const Ye=j==null?void 0:j.options.find(it=>it.id===Me);return Qe+((Ye==null?void 0:Ye.price)||0)},0);return{...ze,selectedStyles:nt,totalAmount:_e+$e}}return ze}))},be=(M,ge)=>{const Ne=xe();if(!Ne)return;const Le=j==null?void 0:j.options.find(ze=>ze.id===M);Le&&w(ze=>ze.map(nt=>{if(nt.childId===Ne.childId){let _e=[...nt.selectedOptions];for(const Me of gm)if(Me.includes(Le.name)){const Ye=(j==null?void 0:j.options.filter(Yt=>Me.includes(Yt.name)).map(Yt=>Yt.id))||[];_e=_e.filter(Yt=>!Ye.includes(Yt)),ge&&_e.push(M);const it=nt.selectedStyles.reduce((Yt,xn)=>{const rr=j==null?void 0:j.styles.find(bt=>bt.id===xn);return Yt+((rr==null?void 0:rr.price)||0)},0),Ht=_e.reduce((Yt,xn)=>{const rr=j==null?void 0:j.options.find(bt=>bt.id===xn);return Yt+((rr==null?void 0:rr.price)||0)},0);return{...nt,selectedOptions:_e,totalAmount:it+Ht}}ge?_e.push(M):_e=_e.filter(Me=>Me!==M);const $e=nt.selectedStyles.reduce((Me,Ye)=>{const it=j==null?void 0:j.styles.find(Ht=>Ht.id===Ye);return Me+((it==null?void 0:it.price)||0)},0),Qe=_e.reduce((Me,Ye)=>{const it=j==null?void 0:j.options.find(Ht=>Ht.id===Ye);return Me+((it==null?void 0:it.price)||0)},0);return{...nt,selectedOptions:_e,totalAmount:$e+Qe}}return nt}))},pe=()=>{const M=xe();if(M){if(M.selectedStyles.length===0){c({title:"Ошибка",description:`Выберите хотя бы один стиль для ${M.childName}`,variant:"destructive"});return}w(ge=>ge.map(Ne=>Ne.childId===M.childId?{...Ne,isCompleted:!0}:Ne)),y<n.length-1,N(y+1)}},Y=()=>{y>0&&N(y-1)},P=()=>{const M=[];if(!j)return M.push("Сервис не найден"),{isValid:!1,errors:M};for(const ge of x){if(ge.selectedStyles.length===0){M.push(`${ge.childName}: не выбран ни один стиль`);continue}for(const $e of ge.selectedStyles)j.styles.find(Me=>Me.id===$e)||M.push(`${ge.childName}: недопустимый стиль (ID: ${$e})`);for(const $e of ge.selectedOptions)j.options.find(Me=>Me.id===$e)||M.push(`${ge.childName}: недопустимая опция (ID: ${$e})`);const Ne=ge.selectedStyles.map($e=>{const Qe=j.styles.find(Me=>Me.id===$e);return Qe==null?void 0:Qe.name}).filter(Boolean),Le=ge.selectedOptions.map($e=>{const Qe=j.options.find(Me=>Me.id===$e);return Qe==null?void 0:Qe.name}).filter(Boolean);for(const $e of xm){const Qe=Ne.filter(Me=>$e.includes(Me));Qe.length>1&&M.push(`${ge.childName}: выбраны взаимоисключающие стили: ${Qe.join(", ")}`)}for(const $e of gm){const Qe=Le.filter(Me=>$e.includes(Me));Qe.length>1&&M.push(`${ge.childName}: выбраны взаимоисключающие опции: ${Qe.join(", ")}`)}for(const $e of Ne)$e&&!X($e,ge.childAge)&&M.push(`${ge.childName}: стиль "${$e}" недоступен для возраста ${ge.childAge} лет`);const ze=ge.selectedStyles.reduce(($e,Qe)=>{const Me=j.styles.find(Ye=>Ye.id===Qe);return $e+((Me==null?void 0:Me.price)||0)},0),nt=ge.selectedOptions.reduce(($e,Qe)=>{const Me=j.options.find(Ye=>Ye.id===Qe);return $e+((Me==null?void 0:Me.price)||0)},0),_e=ze+nt;Math.abs(_e-ge.totalAmount)>.01&&M.push(`${ge.childName}: несоответствие стоимости (ожидается: ${_e}₽, указано: ${ge.totalAmount}₽)`)}return{isValid:M.length===0,errors:M}},ce=()=>{console.log("⏹️ Пользователь отменил отправку заявок"),K.current=!0,S(!1),A(0),k(""),c({title:"Отменено",description:"Отправка заявок была отменена",variant:"default"})},Se=async()=>{if(console.log("🔄 MODAL: handleSubmit: Начинаем отправку заявок"),!r||!o)return;console.log("🚀 Начинаем отправку заявок для мастер-класса:",{workshopId:r.id,workshopTitle:r.title,childrenCount:x.length,userId:o.id,timestamp:new Date().toISOString()});const M=P();if(!M.isValid){console.warn("⚠️ Ошибки валидации:",M.errors),c({title:"Ошибка валидации",description:M.errors.join(`
`),variant:"destructive",duration:1e4});return}console.log("✅ Валидация пройдена успешно"),console.log("🔍 Проверяем существующие регистрации...");try{const Ne=(await et.workshopRegistrations.getRegistrations(r.id)).map(ze=>ze.userId),Le=x.filter(ze=>Ne.includes(ze.childId));if(Le.length>0){const ze=Le.map(nt=>nt.childName).join(", ");throw new Error(`Следующие дети уже записаны на этот мастер-класс: ${ze}`)}console.log("✅ Проверка существующих регистраций пройдена")}catch(ge){console.warn("⚠️ Не удалось проверить существующие регистрации:",ge)}console.log("🔄 Устанавливаем состояние отправки..."),S(!0),K.current=!1,A(0),k(""),console.log("✅ Состояние установлено:",{isSubmitting:!0,isCancelled:!1,submitProgress:0,currentSubmittingChild:""});try{const ge=x.length;console.log(`📝 Создаем групповую регистрацию для ${ge} детей...`);const Ne={workshopId:r.id,parentId:o.id,children:x.map(ze=>({childId:ze.childId,childName:ze.childName,style:ze.selectedStyles.join(", "),options:ze.selectedOptions,totalPrice:ze.totalAmount}))};console.log("📤 Отправляем данные групповой регистрации:",Ne),console.log("🔄 MODAL: Отправляем запрос на групповую регистрацию...");const Le=await et.workshopRegistrations.createGroupRegistration(Ne);console.log("✅ MODAL: Групповой API успешно отработал, ответ:",Le),A(100),k(""),console.log("🎉 MODAL: Групповая регистрация успешно создана:",{invoiceId:Le.invoice.id,totalRegistrations:Le.registrations.length,participantsCount:Le.participants,registrations:Le.registrations.map((ze,nt)=>{var _e;return{childName:((_e=x[nt])==null?void 0:_e.childName)||"Неизвестно",registrationId:ze.id,totalPrice:ze.totalPrice}})}),console.log("🔄 MODAL: Устанавливаем isSuccess = true"),te(!0),Le.invoice&&(se([Le.invoice]),ne(!0)),console.log("🔄 MODAL: Вызываем callback onRegistrationSuccess"),a?(console.log("✅ MODAL: Callback найден, вызываем..."),a(),console.log("✅ MODAL: Callback вызван успешно")):console.warn("⚠️ MODAL: Callback onRegistrationSuccess не найден!"),c({title:"Успешно!",description:`Все ${x.length} детей записаны на мастер-класс. Создан один счет за ${Le.participants} участников. Теперь вы можете оплатить участие.`,variant:"default"})}catch(ge){console.error("❌ Критическая ошибка при записи на мастер-класс:",{error:ge.message,stack:ge.stack,workshopId:r.id,userId:o.id,childrenCount:x.length,timestamp:new Date().toISOString()});const Ne=ge.message||"Неизвестная ошибка";c({title:"Ошибка записи",description:`Не удалось записать детей на мастер-класс: ${Ne}`,variant:"destructive",duration:8e3})}finally{console.log("🏁 MODAL: Завершение процесса отправки заявок"),S(!1),K.current=!1,A(0),k(""),console.log("🔍 MODAL: Финальное состояние:",{isSubmitting:!1,canCancel:!1,submitProgress:0,currentSubmittingChild:""})}},ue=()=>x.reduce((M,ge)=>M+ge.totalAmount,0),Pe=x.every(M=>M.isCompleted);if(!r||!j)return null;const je=r.schoolName,ke=r.classGroup;return R?(console.log("🎉 MODAL: Рендерим успешное состояние"),s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-2xl p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(zr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),s.jsx(ur,{className:"text-xl font-bold text-green-600 mb-2",children:"Запись завершена!"}),s.jsxs(br,{className:"text-gray-600",children:['Все дети успешно записаны на мастер-класс "',r.title,'"']})]}),ae&&Z.length>0&&s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 mb-6 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(r0,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Оплата участия"})]}),s.jsx("div",{className:"space-y-4",children:Z.map(M=>s.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:["Счет №",M.id.slice(-8)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[M.participant_name," - ",new Date(M.workshop_date||"").toLocaleDateString("ru-RU")]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-bold text-green-600",children:[M.amount," ₽"]}),s.jsx("p",{className:"text-xs text-gray-500",children:M.status==="pending"?"Ожидает оплаты":M.status})]})]}),M.status==="pending"&&s.jsx(av,{invoiceId:M.id,amount:M.amount,description:`Участие в мастер-классе "${r.title}" для ${M.participant_name}`,children:[{id:M.participant_id||"",name:M.participant_name||"",selectedServices:["Мастер-класс"],totalAmount:M.amount}],masterClassName:r.title,eventDate:r.date,eventTime:r.time,onPaymentSuccess:()=>{c({title:"Оплата успешна! 🎉",description:"Статус счета обновлен. Спасибо за оплату!"}),se(ge=>ge.map(Ne=>Ne.id===M.id?{...Ne,status:"paid"}:Ne))},onPaymentError:ge=>{console.error("Ошибка оплаты:",ge)},className:"w-full",variant:"default",size:"lg"}),M.status==="paid"&&s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600 bg-green-50 rounded-lg p-3",children:[s.jsx(zr,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Оплачено"})]})]},M.id))})]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx(q,{onClick:()=>t(!1),variant:"outline",className:"px-6",children:"Закрыть"}),ae&&s.jsx(q,{onClick:()=>{ne(!1),se([]),te(!1),N(0),w([])},className:"px-6 bg-blue-600 hover:bg-blue-700",children:"Записать еще детей"})]})]})})):(console.log("🔄 MODAL: Рендерим основную форму"),s.jsxs(s.Fragment,{children:[s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:`w-[98vw] max-w-[98vw] sm:w-[95vw] sm:max-w-[95vw] md:max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto bg-gradient-to-br from-yellow-50 via-pink-50 to-blue-50 border-0 shadow-2xl ${d?"p-1 px-4 scrollbar-hide":"p-2 sm:p-4 md:p-6"} animate-in fade-in-0 zoom-in-95 duration-300`,children:[s.jsx(f0,{count:15,className:"opacity-40"}),s.jsxs("div",{className:`text-center ${d?"mt-2 mb-2":"mt-8 mb-6 sm:mt-12 sm:mb-8"} animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-100`,children:[s.jsxs("div",{className:`flex items-center justify-center space-x-2 sm:space-x-4 ${d?"mb-2":"mb-4 sm:mb-6"}`,children:[s.jsx("div",{className:`bg-gradient-to-r from-orange-500 to-purple-500 rounded-full ${d?"p-1.5":"p-3 sm:p-4"} shadow-lg`,children:s.jsx(sn,{className:`${d?"w-5 h-5":"w-8 h-8 sm:w-10 sm:h-10"} text-white`})}),s.jsx(ur,{className:`${d?"text-lg sm:text-xl":"text-3xl sm:text-4xl md:text-5xl"} font-bold bg-gradient-to-r from-orange-600 via-purple-600 to-blue-600 bg-clip-text text-transparent leading-tight`,children:re?d?"Детали заказа":"Детали заказа на мастер-класс":d?"Запись на мастер-класс":"Запись детей на мастер-класс"})]}),s.jsx(br,{className:`${d?"text-xs":"text-base sm:text-lg"} text-gray-600 max-w-2xl mx-auto`,children:re?d?"Просмотр выбранных стилей и опций":"Просмотр выбранных стилей, опций и общей стоимости заказа":d?"Заполните форму для каждого ребенка":"Пошагово заполните форму для каждого ребенка. Сначала выберите стили и опции для первого ребенка, затем переходите к следующему."})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-4",children:[s.jsxs(Ce,{className:`bg-white/90 backdrop-blur-sm border-orange-200 shadow-card ${d?"mb-3":"mb-4 sm:mb-6"} animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-200`,children:[s.jsxs(Je,{className:`${d?"pb-2":"pb-3 sm:pb-4"}`,children:[s.jsxs(qe,{className:`${d?"text-base sm:text-lg":"text-xl sm:text-2xl"} font-bold text-orange-500 flex items-center space-x-2`,children:[s.jsx(ss,{className:`${d?"w-4 h-4":"w-5 h-5 sm:w-6 sm:h-6"} text-yellow-500`}),s.jsx("span",{children:r.title})]}),s.jsx(ft,{className:`text-gray-600 ${d?"text-sm":"text-base sm:text-lg"}`,children:"Информация о мастер-классе"})]}),s.jsx(Ae,{className:`${d?"space-y-2":"space-y-3 sm:space-y-4"}`,children:s.jsxs("div",{className:`grid ${d?"grid-cols-2":"grid-cols-1 sm:grid-cols-2"} gap-2 sm:gap-3 sm:gap-4`,children:[s.jsxs("div",{className:`flex items-center space-x-2 sm:space-x-3 ${d?"p-2":"p-2 sm:p-3"} bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border border-orange-200`,children:[s.jsx(Tn,{className:`${d?"w-4 h-4":"w-4 h-4 sm:w-5 sm:h-5"} text-orange-600 flex-shrink-0`}),s.jsxs("span",{className:`text-gray-700 font-medium ${d?"text-sm":"text-sm sm:text-base"} truncate`,children:[je,", класс ",ke]})]}),s.jsxs("div",{className:`flex items-center space-x-2 sm:space-x-3 ${d?"p-2":"p-2 sm:p-3"} bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200`,children:[s.jsx(Cn,{className:`${d?"w-4 h-4":"w-4 h-4 sm:w-5 sm:h-5"} text-purple-600 flex-shrink-0`}),s.jsx("span",{className:`text-gray-700 font-medium ${d?"text-sm":"text-sm sm:text-base"}`,children:new Date(r.date).toLocaleDateString("ru-RU")})]}),s.jsxs("div",{className:`flex items-center space-x-2 sm:space-x-3 ${d?"p-2":"p-2 sm:p-3"} bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200`,children:[s.jsx(Xr,{className:`${d?"w-4 h-4":"w-4 h-4 sm:w-5 sm:h-5"} text-blue-600 flex-shrink-0`}),s.jsx("span",{className:`text-gray-700 font-medium ${d?"text-sm":"text-sm sm:text-base"}`,children:r.time})]}),s.jsxs("div",{className:`flex items-center space-x-2 sm:space-x-3 ${d?"p-2":"p-2 sm:p-3"} bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200`,children:[s.jsx("div",{className:`${d?"w-4 h-4":"w-4 h-4 sm:w-5 sm:h-5"} text-green-600 flex-shrink-0`,children:s.jsx(or,{className:"w-full h-full"})}),s.jsxs("span",{className:`text-gray-700 font-medium ${d?"text-sm":"text-sm sm:text-base"}`,children:[r.eligibleChildren.length," детей"]})]})]})})]}),re&&r.childrenWithStatus&&s.jsxs(Ce,{className:`bg-white/90 backdrop-blur-sm border-green-200 shadow-card ${d?"mb-3":"mb-4 sm:mb-6"} animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-300`,children:[s.jsx(Je,{className:`${d?"pb-2":"pb-3 sm:pb-4"}`,children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:`bg-gradient-to-r from-green-500 to-emerald-500 rounded-full ${d?"p-1.5":"p-1.5 sm:p-2"}`,children:s.jsx(zr,{className:`${d?"w-4 h-4":"w-5 h-5 sm:w-6 sm:h-6"} text-white`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(qe,{className:`${d?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold text-green-700`,children:"Детали заказа"}),s.jsx(ft,{className:`text-green-600 ${d?"text-sm":"text-base sm:text-lg"}`,children:"Выбранные стили, опции и стоимость для каждого ребенка"})]})]})}),s.jsxs(Ae,{className:`${d?"space-y-2":"space-y-3 sm:gap-4"}`,children:[r.childrenWithStatus.map((M,ge)=>{const Ne=n.find(Me=>Me.id===M.childId);if(!Ne)return null;const Le=i.find(Me=>Me.id===r.id);let ze=[],nt=[],_e=0;if(Le&&Le.participants){const Me=Le.participants.find(Ye=>Ye.childId===Ne.id);Me&&(ze=Me.selectedStyles||[],nt=Me.selectedOptions||[],_e=Me.totalAmount||0)}const $e=ze.map(Me=>{const Ye=j==null?void 0:j.styles.find(it=>it.id===Me);return(Ye==null?void 0:Ye.name)||Me}),Qe=nt.map(Me=>{const Ye=j==null?void 0:j.options.find(it=>it.id===Me);return(Ye==null?void 0:Ye.name)||Me});return ze.length===0&&nt.length===0&&_e===0?console.log(`🔍 Данные для ребенка ${Ne.name} не найдены в API, используем заглушки`):console.log(`✅ Найдены данные для ребенка ${Ne.name}:`,{styleIds:ze,styleNames:$e,optionIds:nt,optionNames:Qe,amount:_e}),s.jsxs("div",{className:`p-3 ${d?"p-2":"p-4"} bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200 animate-in fade-in-0 slide-in-from-left-4 duration-300 delay-${400+ge*100}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:ge+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-800",children:Ne.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[Ne.age," лет"]})]})]}),s.jsx(rt,{variant:M.status==="paid"?"default":M.status==="pending"?"secondary":"destructive",className:"text-xs",children:M.status==="paid"?"✅ Оплачено":M.status==="pending"?"⏳ Ожидает оплаты":"❌ Отменено"})]}),$e.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Выбранные стили:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:$e.map((Me,Ye)=>s.jsxs(rt,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:["🎨 ",Me]},Ye))})]}),Qe.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Дополнительные опции:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Qe.map((Me,Ye)=>s.jsxs(rt,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:["🎁 ",Me]},Ye))})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-green-200",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Стоимость:"}),s.jsxs("span",{className:"text-lg font-bold text-green-600",children:[_e," ₽"]})]})]},M.childId)}),s.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200 animate-in fade-in-0 slide-in-from-bottom-4 duration-300 delay-500",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:"Общая информация:"}),s.jsx(rt,{variant:r.invoiceStatus==="paid"?"default":r.invoiceStatus==="pending"?"secondary":"destructive",className:"text-xs",children:r.invoiceStatus==="paid"?"💰 Счет оплачен":r.invoiceStatus==="pending"?"📋 Счет ожидает оплаты":"❌ Счет отменен"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("div",{children:["Дата: ",new Date(r.date).toLocaleDateString("ru-RU")]}),s.jsxs("div",{children:["Время: ",r.time]}),s.jsxs("div",{children:["Место: ",r.schoolName,", класс ",r.classGroup]})]})]})]})]}),!re&&y<n.length&&s.jsx(Ce,{className:`bg-white/90 backdrop-blur-sm border-orange-300 border-2 shadow-card ${d?"mb-3":"mb-4 sm:mb-6"}`,children:s.jsx(Je,{className:`${d?"pb-2":"pb-3 sm:pb-4"}`,children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:`bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full ${d?"p-1.5":"p-1.5 sm:p-2"}`,children:s.jsx(Hr,{className:`${d?"w-4 h-4":"w-5 h-5 sm:w-6 sm:h-6"} text-white`})}),s.jsxs("div",{children:[s.jsxs(qe,{className:`${d?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold text-orange-700`,children:["Заполняем форму для: ",(gt=xe())==null?void 0:gt.childName]}),s.jsxs(ft,{className:`text-orange-600 ${d?"text-sm":"text-base sm:text-lg"}`,children:["Возраст: ",(dt=xe())==null?void 0:dt.childAge," лет"]})]})]})})}),!re&&y<n.length&&s.jsxs(Ce,{className:`bg-white/90 backdrop-blur-sm border-purple-200 shadow-card ${d?"mb-3":"mb-4 sm:mb-6"}`,children:[s.jsx(Je,{className:`${d?"pb-2":"pb-3 sm:pb-4"}`,children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:`bg-gradient-to-r from-purple-500 to-pink-500 rounded-full ${d?"p-1.5":"p-1.5 sm:p-2"}`,children:s.jsx(cS,{className:`${d?"w-4 h-4":"w-5 h-5 sm:w-6 sm:h-6"} text-white`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(qe,{className:`${d?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold text-gray-800`,children:"Выберите вариант руки"}),s.jsxs(ft,{className:`text-gray-600 ${d?"text-sm":"text-base sm:text-lg"}`,children:["Выберите вариант руки для ",(qt=xe())==null?void 0:qt.childName]})]})]})}),s.jsxs(Ae,{className:`${d?"space-y-2":"space-y-3 sm:space-y-4"}`,children:[((Ot=xe())==null?void 0:Ot.childAge)&&((Kt=xe())==null?void 0:Kt.childAge)<5&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2 sm:p-3 mb-3 sm:mb-4",children:s.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3",children:[s.jsx(ua,{className:`${d?"w-4 h-4":"w-5 h-5"} text-yellow-600 flex-shrink-0 mt-0.5`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`font-medium text-yellow-800 ${d?"text-sm":"text-base"}`,children:"Возрастные ограничения"}),s.jsx("div",{className:`text-yellow-700 ${d?"text-xs":"text-sm"} mt-1`,children:s.jsx("span",{children:'"Двойные ручки" доступны только с 5 лет'})})]})]})}),s.jsx("div",{className:`grid ${d?"grid-cols-1":"grid-cols-1 sm:grid-cols-2"} gap-2 sm:gap-4`,children:j==null?void 0:j.styles.map(M=>{var nt,_e,$e,Qe,Me;const ge=(nt=xe())==null?void 0:nt.selectedStyles.includes(M.id),Ne=V(M.name,((_e=xe())==null?void 0:_e.childAge)||0,(($e=xe())==null?void 0:$e.selectedStyles)||[]),Le=!X(M.name,((Qe=xe())==null?void 0:Qe.childAge)||0),ze=(Me=M.avatar)!=null&&Me.startsWith("/")?`http://localhost:3001${M.avatar}`:M.avatar;return console.log(`Стиль "${M.name}":`,{id:M.id,avatar:M.avatar,avatarUrl:ze,hasAvatar:!!M.avatar}),s.jsxs("div",{className:`relative border-2 rounded-xl ${d?"p-2":"p-4 sm:p-5"} transition-all duration-300 cursor-pointer transform hover:scale-[1.02] ${ge?"border-purple-500 bg-gradient-to-br from-purple-50 to-purple-100 shadow-lg shadow-purple-200":Ne?"border-gray-300 bg-gradient-to-br from-gray-50 to-gray-100 cursor-not-allowed opacity-60":"border-gray-200 bg-gradient-to-br from-white to-gray-50 hover:border-purple-300 hover:shadow-md hover:shadow-purple-100"}`,onClick:()=>!Ne&&B(M.id,!ge),children:[Le&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsxs(rt,{variant:"secondary",className:`${d?"text-xs px-2 py-1":"text-sm px-3 py-1.5"} bg-red-100 text-red-700 border-red-200 shadow-sm`,children:[s.jsx(Pg,{className:`${d?"w-3 h-3":"w-4 h-4"} mr-1.5`}),d?"5+":"5+ лет"]})}),s.jsxs("div",{className:`${d?"space-y-2":"space-y-3"}`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3 flex-1 min-w-0",children:[s.jsxs("div",{className:`flex-shrink-0 ${d?"w-10 h-12":"w-14 h-18"} rounded-xl overflow-hidden shadow-md`,children:[M.avatar?s.jsx("img",{src:M.avatar.startsWith("/")?`http://localhost:3001${M.avatar}`:M.avatar,alt:M.name,className:"w-full h-full object-cover",onError:Ye=>{var Ht;const it=Ye.target;it.style.display="none",(Ht=it.nextElementSibling)==null||Ht.classList.remove("hidden")}}):null,s.jsx("div",{className:`${d?"w-10 h-12":"w-14 h-18"} bg-gradient-to-br from-purple-400 to-pink-400 rounded-xl flex items-center justify-center ${M.avatar?"hidden":""}`,children:s.jsx(Hr,{className:`${d?"w-5 h-5":"w-7 h-7"} text-white`})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:`font-bold text-gray-900 ${d?"text-base":"text-lg"} mb-2`,children:M.name}),s.jsx("div",{className:`text-gray-600 ${d?"text-sm":"text-base"} leading-relaxed`,children:E(M.name)})]})]}),s.jsx(Ad,{checked:ge,disabled:Ne,className:`mt-1 ${d?"scale-110":"scale-125"}`})]}),s.jsxs("div",{className:`font-bold text-purple-600 ${d?"text-lg":"text-xl"} bg-purple-50 px-3 py-2 rounded-lg inline-block`,children:[M.price," ₽"]}),s.jsxs("div",{className:`flex items-center ${d?"space-x-2":"space-x-3"} pt-2`,children:[M.images&&M.images.length>0&&s.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:Ye=>{Ye.stopPropagation(),he(M.images||[],M.name)},className:`${d?"h-8 px-2 text-xs":"h-10 px-4 text-base"} bg-white hover:bg-purple-50 border-purple-200 hover:border-purple-300 transition-all duration-200 hover:shadow-md`,children:[s.jsx(oh,{className:`${d?"w-3 h-3":"w-5 h-5"} mr-1 sm:mr-2 text-purple-600`}),d?"Фото":"Фотографии"]}),M.videos&&M.videos.length>0&&s.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:Ye=>{var Ht;Ye.stopPropagation();const it=((Ht=M.videos)==null?void 0:Ht.map(Yt=>Yt.startsWith("/")?`http://localhost:3001${Yt}`:Yt))||[];h({type:"video",urls:it,currentIndex:0,title:M.name}),p(!0)},className:`${d?"h-8 px-2 text-xs":"h-10 px-4 text-base"} bg-white hover:bg-purple-50 border-purple-200 hover:border-purple-300 transition-all duration-200 hover:shadow-md`,children:[s.jsx(lh,{className:`${d?"w-3 h-3":"w-5 h-5"} mr-1 sm:mr-2 text-purple-600`}),"Видео"]})]})]})]},M.id)})})]})]}),!re&&y<n.length&&s.jsxs(Ce,{className:`bg-white/90 backdrop-blur-sm border-blue-200 shadow-card ${d?"mb-3":"mb-4 sm:mb-6"}`,children:[s.jsx(Je,{className:`${d?"pb-2":"pb-3 sm:pb-4"}`,children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:`bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full ${d?"p-1.5":"p-1.5 sm:p-2"}`,children:s.jsx(Mi,{className:`${d?"w-4 h-4":"w-5 h-5 sm:w-6 sm:h-6"} text-white`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(qe,{className:`${d?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold text-gray-800`,children:"Дополнительные услуги"}),s.jsxs(ft,{className:`text-gray-600 ${d?"text-sm":"text-base sm:text-lg"}`,children:["Выберите дополнительные услуги для ",(H=xe())==null?void 0:H.childName]})]})]})}),s.jsxs(Ae,{className:`${d?"space-y-2":"space-y-3 sm:space-y-4"}`,children:[s.jsx("div",{className:`grid ${d?"grid-cols-1":"grid-cols-1 sm:grid-cols-2"} gap-2 sm:gap-4`,children:j==null?void 0:j.options.map(M=>{var Le,ze;const ge=(Le=xe())==null?void 0:Le.selectedOptions.includes(M.id);gm.some(nt=>nt.includes(M.name));const Ne=(ze=M.avatar)!=null&&ze.startsWith("/")?`http://localhost:3001${M.avatar}`:M.avatar;return console.log(`Опция "${M.name}":`,{id:M.id,avatar:M.avatar,avatarUrl:Ne,hasAvatar:!!M.avatar}),s.jsx("div",{className:`relative border-2 rounded-xl ${d?"p-2":"p-4 sm:p-5"} transition-all duration-300 cursor-pointer transform hover:scale-[1.02] ${ge?"border-blue-500 bg-gradient-to-br from-blue-50 to-blue-100 shadow-lg shadow-blue-200":"border-gray-200 bg-gradient-to-br from-white to-gray-50 hover:border-blue-300 hover:shadow-md hover:shadow-blue-100"}`,onClick:()=>be(M.id,!ge),children:s.jsxs("div",{className:`${d?"space-y-2":"space-y-3"}`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3 flex-1 min-w-0",children:[s.jsxs("div",{className:`flex-shrink-0 ${d?"w-10 h-12":"w-14 h-18"} rounded-xl overflow-hidden shadow-md`,children:[M.avatar?s.jsx("img",{src:M.avatar.startsWith("/")?`http://localhost:3001${M.avatar}`:M.avatar,alt:M.name,className:"w-full h-full object-cover",onError:nt=>{var $e;const _e=nt.target;_e.style.display="none",($e=_e.nextElementSibling)==null||$e.classList.remove("hidden")}}):null,s.jsx("div",{className:`${d?"w-10 h-12":"w-14 h-18"} bg-gradient-to-br from-blue-400 to-cyan-400 rounded-xl flex items-center justify-center ${M.avatar?"hidden":""}`,children:s.jsx(Mi,{className:`${d?"w-5 h-5":"w-7 h-7"} text-white`})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:`font-bold text-gray-900 ${d?"text-base":"text-lg"} mb-2`,children:M.name}),s.jsx("div",{className:`text-gray-600 ${d?"text-sm":"text-base"} leading-relaxed`,children:I(M.name)})]})]}),s.jsx(Ad,{checked:ge,className:`mt-1 ${d?"scale-110":"scale-125"}`})]}),s.jsxs("div",{className:`font-bold text-blue-600 ${d?"text-lg":"text-xl"} bg-blue-50 px-3 py-2 rounded-lg inline-block`,children:[M.price," ₽"]}),s.jsxs("div",{className:`flex items-center ${d?"space-x-2":"space-x-3"} pt-2`,children:[M.images&&M.images.length>0&&s.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:nt=>{nt.stopPropagation(),he(M.images||[],M.name)},className:`${d?"h-8 px-2 text-xs":"h-10 px-4 text-base"} bg-white hover:bg-blue-50 border-blue-200 hover:border-blue-300 transition-all duration-200 hover:shadow-md`,children:[s.jsx(oh,{className:`${d?"w-3 h-3":"w-5 h-5"} mr-1 sm:mr-2 text-blue-600`}),d?"Фото":"Фотографии"]}),M.videos&&M.videos.length>0&&s.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:nt=>{var $e;nt.stopPropagation();const _e=(($e=M.videos)==null?void 0:$e.map(Qe=>Qe.startsWith("/")?`http://localhost:3001${Qe}`:Qe))||[];h({type:"video",urls:_e,currentIndex:0,title:M.name}),p(!0)},className:`${d?"h-8 px-2 text-xs":"h-10 px-4 text-base"} bg-white hover:bg-blue-50 border-blue-200 hover:border-blue-300 transition-all duration-200 hover:shadow-md`,children:[s.jsx(lh,{className:`${d?"w-3 h-3":"w-5 h-5"} mr-1 sm:mr-2 text-blue-600`}),"Видео"]})]})]})},M.id)})}),s.jsx("div",{className:"border-t pt-2 sm:pt-4",children:s.jsxs("div",{className:`${d?"text-sm sm:text-base":"text-base sm:text-lg"} font-bold text-green-700`,children:["Стоимость для ",(fe=xe())==null?void 0:fe.childName,": ",J()," ₽"]})})]})]}),!re&&y===n.length&&s.jsxs(Ce,{className:`bg-white/90 backdrop-blur-sm border-green-200 shadow-card ${d?"mb-3":"mb-4 sm:mb-6"}`,children:[s.jsx(Je,{className:`${d?"pb-2":"pb-3 sm:pb-4"}`,children:s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[s.jsx("div",{className:`bg-gradient-to-r from-green-500 to-emerald-500 rounded-full ${d?"p-1":"p-1.5 sm:p-2"}`,children:s.jsx(zr,{className:`${d?"w-4 h-4":"w-5 h-5 sm:w-6 sm:h-6"} text-white`})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(qe,{className:`${d?"text-base sm:text-lg":"text-lg sm:text-xl"} font-bold text-gray-800`,children:"Итоговая информация"}),s.jsx(ft,{className:`text-gray-600 ${d?"text-sm sm:text-base":"text-base sm:text-lg"}`,children:"Проверьте данные перед отправкой"})]})]})}),s.jsxs(Ae,{className:`${d?"space-y-2":"space-y-3 sm:space-y-4"}`,children:[x.map(M=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 sm:p-3",children:[s.jsxs("div",{className:`font-medium text-gray-900 ${d?"text-sm":"text-base"} mb-2`,children:[M.childName," (",M.childAge," лет)"]}),s.jsxs("div",{className:`space-y-1 ${d?"text-xs":"text-sm"} text-gray-600`,children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Стили:"})," ",M.selectedStyles.length>0?M.selectedStyles.map(ge=>{const Ne=j==null?void 0:j.styles.find(Le=>Le.id===ge);return Ne==null?void 0:Ne.name}).join(", "):"Не выбрано"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Опции:"})," ",M.selectedOptions.length>0?M.selectedOptions.map(ge=>{const Ne=j==null?void 0:j.options.find(Le=>Le.id===ge);return Ne==null?void 0:Ne.name}).join(", "):"Не выбрано"]}),s.jsxs("div",{className:"font-medium text-green-600",children:["Стоимость: ",M.totalAmount," ₽"]})]})]},M.childId)),s.jsx("div",{className:"border-t pt-2 sm:pt-4",children:s.jsxs("div",{className:"text-base sm:text-lg font-bold text-green-700",children:["Общая стоимость: ",ue()," ₽"]})})]})]}),!re&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2 sm:pt-4",children:[s.jsx(q,{variant:"outline",onClick:()=>t(!1),className:`${d?"flex-1 text-sm h-10":"flex-1 sm:flex-none"}`,children:"Отмена"}),y>0&&s.jsx(q,{variant:"outline",onClick:Y,className:`${d?"flex-1 text-sm h-10":"flex-1 sm:flex-none"}`,children:d?"Назад":"Предыдущий ребенок"}),y<n.length&&s.jsx(q,{onClick:pe,disabled:!((we=xe())!=null&&we.selectedStyles.length),className:`${d?"flex-1 text-sm h-10":"flex-1 sm:flex-none"} bg-orange-600 hover:bg-orange-700`,children:y===n.length-1?d?"Завершить":"Завершить запись":d?"Далее":"Следующий ребенок"}),y===n.length&&s.jsxs("div",{className:`${d?"flex-1":"flex-1 sm:flex-none"} space-y-2`,children:[_&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:`flex items-center justify-between ${d?"text-xs":"text-sm"} text-gray-600`,children:[s.jsx("span",{children:"Прогресс отправки"}),s.jsxs("span",{children:[Math.round(C),"%"]})]}),U&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Обрабатываем: ",U]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(q,{onClick:Se,disabled:_||!Pe,className:"flex-1 bg-green-600 hover:bg-green-700",children:_?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"hidden sm:inline",children:"Отправляем заявки..."}),s.jsx("span",{className:"sm:hidden",children:"Отправка..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(sn,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"hidden sm:inline",children:"Отправить заявки"}),s.jsx("span",{className:"sm:hidden",children:"Отправить"})]})}),_&&s.jsx(q,{variant:"outline",onClick:ce,className:`${d?"px-2":"px-4"}`,children:"Отмена"})]})]})]}),re&&s.jsx("div",{className:"flex justify-center pt-8 pb-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-600",children:s.jsx(q,{onClick:()=>t(!1),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Закрыть"})})]})]})}),g&&s.jsxs(s.Fragment,{children:[s.jsx(X4,{isOpen:u&&g.type==="photo",onOpenChange:m,images:g.urls,title:g.title}),s.jsx(K4,{isOpen:f&&g.type==="video",onOpenChange:p,videoUrl:g.urls[0],title:g.title})]})]}))}function rF({isOpen:e,onOpenChange:t,workshop:r}){Sr();const{services:n}=Wa(),{toast:a}=Gt(),[i,o]=v.useState(null);if(v.useEffect(()=>{if(r&&n){const p=n.find(g=>g.id===r.serviceId);o(p||null)}},[r,n]),!r||!i)return null;const l=p=>new Date(p).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}),c=p=>p.slice(0,5),d=p=>({"Обычная ручка":"Классическая восковая ручка в одном цвете","Двойная ручка":"Две ручки в разных цветах, соединенные вместе","Светящаяся ручка":"Ручка со встроенным светодиодом","Двойная светящаяся ручка":"Две светящиеся ручки в разных цветах"})[p]||"Описание стиля",u=p=>({"Дополнительные материалы":"Дополнительные восковые палочки и инструменты","Подарочная упаковка":"Красивая подарочная коробка для ручки","Инструкция по уходу":"Подробная инструкция по уходу за восковой ручкой","Сертификат участника":"Персональный сертификат об участии в мастер-классе"})[p]||"Описание опции",f=r.childrenWithStatus.filter(p=>p.invoice&&p.invoice.status==="pending").map(p=>p.invoice).filter(Boolean);return s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(jr,{children:[s.jsxs(ur,{className:"text-2xl font-bold text-orange-600 flex items-center space-x-3",children:[s.jsx(Hr,{className:"w-8 h-8"}),s.jsx("span",{children:"Детали заказа"})]}),s.jsxs(br,{className:"text-lg text-gray-600",children:['Мастер-класс "',r.title,'"']})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Ce,{className:"bg-gradient-to-br from-orange-50 to-purple-50 border-orange-200",children:[s.jsx(Je,{children:s.jsxs(qe,{className:"text-xl text-orange-700 flex items-center space-x-2",children:[s.jsx(Hr,{className:"w-6 h-6"}),s.jsx("span",{children:r.title})]})}),s.jsx(Ae,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Tn,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{className:"text-gray-700",children:r.schoolName})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(or,{className:"w-5 h-5 text-gray-500"}),s.jsxs("span",{className:"text-gray-700",children:["Класс: ",r.classGroup]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Cn,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{className:"text-gray-700",children:l(r.date)})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Xr,{className:"w-5 h-5 text-gray-500"}),s.jsx("span",{className:"text-gray-700",children:c(r.time)})]})]})]})})]}),s.jsxs(Ce,{className:"bg-white border-blue-200",children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"text-xl text-blue-700 flex items-center space-x-2",children:[s.jsx(gs,{className:"w-6 h-6"}),s.jsx("span",{children:"Участники мастер-класса"})]}),s.jsx(ft,{children:"Дети и их выборы стилей и опций"})]}),r.childrenWithStatus.some(p=>!p.invoice)&&s.jsx("div",{className:"mx-6 mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[s.jsx(ua,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"⚠️ Внимание: Данные о выбранных стилях и опциях не загружены для некоторых участников. Возможно, требуется обновить страницу или проверить подключение к серверу."})]})}),s.jsx(Ae,{className:"space-y-4",children:r.childrenWithStatus.map(p=>{var x,w;const g=p.invoice,h=(g==null?void 0:g.status)==="paid";return console.log("🔍 OrderDetailsModal: Данные ребенка:",{childName:p.childName,childInvoice:g,selectedStyles:g==null?void 0:g.selected_styles,selectedOptions:g==null?void 0:g.selected_options,currentService:i,workshop:{id:r.id,title:r.title,serviceId:r.serviceId}}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:p.childName}),s.jsx(rt,{variant:h?"default":"secondary",className:h?"bg-green-500 text-white":"bg-yellow-100 text-yellow-800",children:h?"Оплачено":"Ожидает оплаты"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("h5",{className:"font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(Hr,{className:"w-4 h-4 text-purple-500"}),s.jsx("span",{children:"Выбранные стили:"})]}),s.jsx("div",{className:"space-y-2",children:g!=null&&g.selected_styles&&g.selected_styles.length>0?g.selected_styles.map((y,N)=>{let j;if(typeof y=="string"){const b=i.styles.find(_=>_.id===y);j={id:y,name:(b==null?void 0:b.name)||y,price:(b==null?void 0:b.price)||0}}else j=y;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center",children:s.jsx(Hr,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800",children:j.name}),s.jsx("div",{className:"text-sm text-gray-600",children:d(j.name)})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-bold text-purple-600",children:[j.price," ₽"]})})]},j.id||N)}):g?s.jsx("div",{className:"text-gray-500 text-sm italic p-2",children:"Стили не выбраны"}):s.jsx("div",{className:"text-yellow-600 text-sm italic p-2",children:"⚠️ Данные о стилях не загружены"})})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("h5",{className:"font-medium text-gray-700 mb-2 flex items-center space-x-2",children:[s.jsx(sn,{className:"w-4 h-4 text-blue-500"}),s.jsx("span",{children:"Дополнительные опции:"})]}),s.jsx("div",{className:"space-y-2",children:g!=null&&g.selected_options&&g.selected_options.length>0?g.selected_options.map((y,N)=>{let j;if(typeof y=="string"){const b=i.options.find(_=>_.id===y);j={id:y,name:(b==null?void 0:b.name)||y,price:(b==null?void 0:b.price)||0}}else j=y;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full flex items-center justify-center",children:s.jsx(sn,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800",children:j.name}),s.jsx("div",{className:"text-sm text-gray-600",children:u(j.name)})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-bold text-blue-600",children:[j.price," ₽"]})})]},j.id||N)}):g?s.jsx("div",{className:"text-gray-500 text-sm italic p-2",children:"Опции не выбраны"}):s.jsx("div",{className:"text-yellow-600 text-sm italic p-2",children:"⚠️ Данные об опциях не загружены"})})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-medium text-gray-700",children:["Итого за ",p.childName,":"]}),s.jsxs("span",{className:"text-xl font-bold text-green-600",children:[g?(((x=g.selected_styles)==null?void 0:x.reduce((y,N)=>{let j=0;if(typeof N=="string"){const b=i.styles.find(_=>_.id===N);j=(b==null?void 0:b.price)||0}else j=N.price||0;return y+j},0))||0)+(((w=g.selected_options)==null?void 0:w.reduce((y,N)=>{let j=0;if(typeof N=="string"){const b=i.options.find(_=>_.id===N);j=(b==null?void 0:b.price)||0}else j=N.price||0;return y+j},0))||0):g?"0":"⚠️ Не загружено"," ₽"]})]})})]},p.childId)})})]}),f.length>0&&s.jsxs(Ce,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"text-xl text-blue-700 flex items-center space-x-2",children:[s.jsx(r0,{className:"w-6 h-6"}),s.jsx("span",{children:"Оплата участия"})]}),s.jsx(ft,{children:"Оплатите счета для завершения записи на мастер-класс"})]}),s.jsx(Ae,{className:"space-y-4",children:f.map(p=>s.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:["Счет №",p.id.slice(-8)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[p.participant_name," - ",l(p.workshop_date||"")]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-bold text-green-600",children:[p.amount," ₽"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ожидает оплаты"})]})]}),s.jsx(av,{invoiceId:p.id,amount:p.amount,description:`Участие в мастер-классе "${r.title}" для ${p.participant_name}`,children:[{id:p.participant_id||"",name:p.participant_name||"",selectedServices:["Мастер-класс"],totalAmount:p.amount}],masterClassName:r.title,eventDate:r.date,eventTime:r.time,onPaymentSuccess:()=>{a({title:"Оплата успешна! 🎉",description:"Статус счета обновлен. Спасибо за оплату!"}),t(!1)},onPaymentError:g=>{console.error("Ошибка оплаты:",g),a({title:"Ошибка оплаты",description:"Не удалось обработать оплату. Попробуйте еще раз.",variant:"destructive"})},className:"w-full",variant:"default",size:"lg"})]},p.id))})]}),s.jsx("div",{className:"flex justify-center space-x-4 pt-4",children:s.jsx(q,{onClick:()=>t(!1),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"Закрыть"})})]})]})})}const cx="/assets/logo-CF6eAk1f.png",xs={createChat:async e=>(await et.post("/chat/create",e)).data,getUserChats:async e=>{console.log("🔍 chat-api: getUserChats вызван с параметрами:",{userId:e});try{const t=await et.get(`/chat/user/${e}`);console.log("✅ chat-api: getUserChats успешно выполнен");const r=t.data||t;if(r&&"chats"in r&&"total"in r)return r;throw new Error("Invalid response format from backend")}catch(t){throw console.error("❌ chat-api: getUserChats ошибка:",t),t}},getAllChats:async e=>{console.log("🔍 chat-api: getAllChats вызван с параметрами:",{status:e});try{const t=new URLSearchParams;e&&t.append("status",e);const r=await et.get(`/chat/admin/all?${t.toString()}`);console.log("✅ chat-api: getAllChats успешно выполнен");const n=r.data||r;if(n&&"chats"in n&&"total"in n)return n;throw new Error("Invalid response format from backend")}catch(t){throw console.error("❌ chat-api: getAllChats ошибка:",t),t}},getChatMessages:async e=>{console.log("🔍 chat-api: getChatMessages вызван с параметрами:",{chatId:e});try{const t=await et.get(`/chat/${e}/messages`);console.log("✅ chat-api: getChatMessages успешно выполнен");const r=t.data||t;if(r&&"messages"in r&&"total"in r)return r;throw new Error("Invalid response format from backend")}catch(t){throw console.error("❌ chat-api: getChatMessages ошибка:",t),t}},sendMessage:async e=>{console.log("📤 chat-api: Отправляю сообщение:",e);const t=await et.post("/chat/send",{chatId:e.chatId,message:e.message,messageType:e.messageType||"text",fileUrl:e.fileUrl});return console.log("📡 chat-api: Ответ от сервера:",t),t.data},markAsRead:async e=>(await et.post("/chat/mark-read",e)).data,markMessageAsRead:async e=>(await et.post("/chat/message/read",e)).data,updateChatStatus:async e=>(await et.put("/chat/status",e)).data,getUnreadCount:async e=>{try{return(await et.get(`/chat/user/${e}/unread`)).data}catch(t){throw console.error("❌ chat-api: getUnreadCount ошибка:",t),t}}},iv=()=>{const e=v.useRef(null),t=v.useCallback(()=>{try{if(!e.current){e.current=new Audio;const a=new(window.AudioContext||window.webkitAudioContext),i=a.createOscillator(),o=a.createGain();i.connect(o),o.connect(a.destination),i.frequency.setValueAtTime(800,a.currentTime),i.frequency.setValueAtTime(600,a.currentTime+.1),i.frequency.setValueAtTime(800,a.currentTime+.2),o.gain.setValueAtTime(.3,a.currentTime),o.gain.exponentialRampToValueAtTime(.01,a.currentTime+.3),i.start(a.currentTime),i.stop(a.currentTime+.3)}"vibrate"in navigator&&navigator.vibrate([100,50,100])}catch(a){console.warn("Не удалось воспроизвести звук уведомления:",a)}},[]),r=v.useCallback(()=>{t()},[t]),n=v.useCallback(()=>{t()},[t]);return{playNotificationSound:t,playMessageSound:r,playChatSound:n}},nF=e=>{const{user:t}=Sr(),{toast:r}=Gt();$a();const{playMessageSound:n}=iv(),[a,i]=v.useState(null),[o,l]=v.useState(""),c=v.useRef(null),{data:d,isLoading:u,error:m,refetch:f}=vo({queryKey:["chats",e],queryFn:async()=>{if(!e)throw new Error("User ID required");console.log("🔍 Запрашиваю чаты для пользователя:",e);const A=await xs.getUserChats(e);if(console.log("📡 Получен ответ от API:",A),!A||!A.chats)throw console.error("❌ Неверный формат ответа:",A),new Error("Invalid response format");return console.log("✅ Данные валидны, возвращаю:",A),A},enabled:!!e,refetchInterval:!1,retry:1,retryDelay:5e3,retryOnMount:!1,staleTime:5*60*1e3});v.useEffect(()=>{if(d!=null&&d.chats&&d.chats.length>0&&!a){const A=d.chats[0];console.log("🎯 Автоматически выбираю первый чат:",A),i(A)}},[d,a]);const{data:p,isLoading:g,error:h,refetch:x}=vo({queryKey:["chat-messages",a==null?void 0:a.id],queryFn:async()=>{if(!(a!=null&&a.id))throw new Error("Chat ID required");console.log("🔍 Запрашиваю сообщения для чата:",a.id);const A=await xs.getChatMessages(a.id);return console.log("📡 Получены сообщения:",A),A},enabled:!!(a!=null&&a.id),refetchInterval:!1,retry:1,retryDelay:5e3,retryOnMount:!1,staleTime:2*60*1e3,gcTime:5*60*1e3}),{data:w,refetch:y}=vo({queryKey:["chatUnread",e],queryFn:async()=>{if(!e)throw new Error("User ID required");const A=await xs.getUnreadCount(e);if(!A||typeof A.unreadTotal!="number")throw new Error("Invalid response format");return A},enabled:!!e,refetchInterval:!1,retry:1,retryDelay:1e4});v.useEffect(()=>{a!=null&&a.id&&(p!=null&&p.messages)&&p.messages.length>0&&(console.log("🔍 Автоматически сбрасываем непрочитанные для чата пользователя:",a.id),xs.markAsRead({chatId:a.id,userId:e||""}).then(()=>{console.log("✅ Сообщения отмечены как прочитанные для чата:",a.id),y()}).catch(A=>{console.warn("⚠️ Не удалось отметить сообщения как прочитанные:",A)}))},[a==null?void 0:a.id,p==null?void 0:p.messages,e,y]);const N=Co({mutationFn:xs.createChat,onSuccess:A=>{if(console.log("✅ Чат создан успешно:",A),r({title:"Чат создан! 💬",description:"Ваше сообщение отправлено в поддержку"}),console.log("🔄 Обновляю список чатов..."),f(),A&&A.chatId){console.log("🎯 Создаю временный объект чата...");const U={id:A.chatId,userId:e||"",adminId:void 0,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),lastMessageAt:new Date().toISOString(),user:{id:e||"",name:`${(t==null?void 0:t.name)??""} ${(t==null?void 0:t.surname)??""}`.trim(),email:"",role:"parent"},admin:{id:"",name:"Администратор",email:"",role:"admin"},unreadCount:0};console.log("💾 Устанавливаю выбранный чат:",U),i(U)}},onError:A=>{r({title:"Ошибка",description:"Не удалось создать чат. Попробуйте позже.",variant:"destructive"})}}),j=Co({mutationFn:xs.sendMessage,onSuccess:()=>{l(""),x(),f(),y(),S()},onError:A=>{console.error("❌ Ошибка отправки сообщения:",A),r({title:"Ошибка",description:"Не удалось отправить сообщение. Попробуйте позже.",variant:"destructive"})}}),b=v.useCallback(async A=>{!e||!A.trim()||await N.mutateAsync({userId:e,message:A.trim()})},[e,N]),_=v.useCallback(async A=>{if(!(a!=null&&a.id)||!A.trim()){console.error("❌ Не могу отправить сообщение:",{selectedChatId:a==null?void 0:a.id,message:A.trim()});return}try{console.log("📤 Отправляю сообщение:",{chatId:a.id,message:A.trim()}),await j.mutateAsync({chatId:a.id,message:A.trim()})}catch(U){console.error("❌ Ошибка при отправке сообщения:",U)}},[a==null?void 0:a.id,j]),S=v.useCallback(()=>{var A;(A=c.current)==null||A.scrollIntoView({behavior:"smooth"})},[]);v.useEffect(()=>{S(),p!=null&&p.messages&&p.messages.length>0&&p.messages[p.messages.length-1].senderType!=="user"&&a&&n()},[p==null?void 0:p.messages,S,n,a]),v.useEffect(()=>{a!=null&&a.id&&(console.log("🔌 WebSocket: инициализация real-time обновлений сообщений..."),console.log("⏸️ Polling сообщений отключен - переход на WebSocket режим"))},[a==null?void 0:a.id]),v.useEffect(()=>{console.log("🔌 WebSocket: инициализация real-time обновлений списка чатов..."),console.log("⏸️ Polling списка чатов отключен - переход на WebSocket режим")},[f,w==null?void 0:w.unreadTotal]),v.useEffect(()=>{e&&(console.log("🔌 WebSocket: инициализация real-time обновлений непрочитанных..."),console.log("⏸️ Polling непрочитанных отключен - переход на WebSocket режим"))},[e,y]);const C=v.useMemo(()=>a,[a]);return v.useEffect(()=>{C!==a&&(console.log("🎯 selectedChat изменился:",a),i(C))},[C,a]),v.useEffect(()=>{console.log("📊 chatsData изменился:",d)},[d]),v.useEffect(()=>{var A;if(console.log("🔍 useEffect - обработка ошибок чатов:",{chatsError:m,chatsData:d?`${((A=d.chats)==null?void 0:A.length)||0} чатов`:"нет данных",isLoadingChats:u,userId:e}),m&&!d&&!u){const U=`chat-error-${e}`;localStorage.getItem(U)||(console.log("🚨 Показываю ошибку загрузки чатов"),r({title:"Ошибка загрузки чатов",description:"Не удалось загрузить список чатов. Попробуйте позже.",variant:"destructive"}),localStorage.setItem(U,"true"),setTimeout(()=>localStorage.removeItem(U),3e4))}},[m,d,u,e,r]),v.useEffect(()=>{if(h&&!g){const A=`messages-error-${a==null?void 0:a.id}`;localStorage.getItem(A)||(r({title:"Ошибка загрузки сообщений",description:"Не удалось загрузить сообщения чата. Попробуйте позже.",variant:"destructive"}),localStorage.setItem(A,"true"),setTimeout(()=>localStorage.removeItem(A),3e4))}},[h,g,a==null?void 0:a.id,r]),{chats:(d==null?void 0:d.chats)||[],messages:(p==null?void 0:p.messages)||[],selectedChat:a,unreadCount:(w==null?void 0:w.unreadTotal)||0,isLoadingChats:u,isLoadingMessages:g,message:o,setSelectedChat:i,setMessage:l,createChat:b,sendMessage:_,refetchChats:f,refetchMessages:x,refetchUnread:y,messagesEndRef:c,scrollToBottom:S,isCreatingChat:N.isPending,isSendingMessage:j.isPending}},sF=e=>{const{toast:t}=Gt(),{user:r}=Sr(),{playMessageSound:n}=iv(),[a,i]=v.useState(null),[o,l]=v.useState("all"),c=e||a,{data:d,isLoading:u,error:m,refetch:f}=vo({queryKey:["adminChats",o],queryFn:async()=>{var S;console.log("🔍 useAdminChat: queryFn вызван с statusFilter:",o);const _=await xs.getAllChats(o);if(console.log("🔍 useAdminChat: API результат:",_),!_)throw console.error("❌ useAdminChat: Пустой ответ от API"),new Error("Empty response from API");if(!_.chats)throw console.error("❌ useAdminChat: Неверный формат ответа:",_),new Error("Invalid response format");return console.log("✅ useAdminChat: Данные чатов получены:",{total:_.total,chatsCount:(S=_.chats)==null?void 0:S.length,unreadTotal:_.unreadTotal}),_},refetchInterval:!1,retry:1,retryDelay:5e3,staleTime:2*60*1e3});v.useEffect(()=>{console.log("🚀 useAdminChat hook mounted, fetching chats..."),f()},[f]),v.useEffect(()=>{console.log("📊 useAdminChat: Состояние чатов изменилось:",{chatsData:d,isLoadingChats:u,chatsError:m,statusFilter:o})},[d,u,m,o]);const{data:p,isLoading:g,error:h,refetch:x}=vo({queryKey:["adminChatMessages",c==null?void 0:c.id],queryFn:async()=>{if(!(c!=null&&c.id))throw new Error("Chat ID required");const _=await xs.getChatMessages(c.id);if(!_||!_.messages)throw console.error("❌ useAdminChat: Неверный формат ответа для сообщений:",_),new Error("Invalid response format for messages");return _},enabled:!!(c!=null&&c.id),refetchInterval:!1,retry:1,retryDelay:3e3}),w=Co({mutationFn:xs.sendMessage,onSuccess:()=>{x(),f()},onError:_=>{t({title:"Ошибка",description:"Не удалось отправить сообщение. Попробуйте позже.",variant:"destructive"})}}),y=Co({mutationFn:xs.updateChatStatus,onSuccess:()=>{t({title:"Статус обновлен! ✅",description:"Статус чата успешно изменен"}),f()},onError:_=>{t({title:"Ошибка",description:"Не удалось обновить статус чата",variant:"destructive"})}}),N=v.useCallback(async _=>{if(!(!(c!=null&&c.id)||!_.trim()))try{console.log("Отправка сообщения админом:",{chatId:c.id,message:_.trim()}),await w.mutateAsync({chatId:c.id,message:_.trim()})}catch(S){console.error("❌ Ошибка при отправке сообщения админом:",S)}},[c==null?void 0:c.id,w]),j=v.useCallback(async(_,S)=>{r!=null&&r.id&&await y.mutateAsync({chatId:_,status:S,adminId:r.id})},[y,r==null?void 0:r.id]);v.useEffect(()=>{if(m&&!u){const _=`admin-chats-error-${o}`;localStorage.getItem(_)||(t({title:"Ошибка загрузки чатов",description:"Не удалось загрузить список чатов. Попробуйте позже.",variant:"destructive"}),localStorage.setItem(_,"true"),setTimeout(()=>localStorage.removeItem(_),3e4))}},[m,u,o,t]),v.useEffect(()=>{if(h&&!g){const _=`admin-messages-error-${c==null?void 0:c.id}`;localStorage.getItem(_)||(t({title:"Ошибка загрузки сообщений",description:"Не удалось загрузить сообщения чата. Попробуйте позже.",variant:"destructive"}),localStorage.setItem(_,"true"),setTimeout(()=>localStorage.removeItem(_),3e4))}},[h,g,c==null?void 0:c.id,t]),v.useEffect(()=>{if(!(c!=null&&c.id)||!(r!=null&&r.id))return;console.log("🔌 WebSocket: инициализация real-time обновлений для администратора...");const _=`${uh}/api/chat/ws?userId=${r.id}&isAdmin=true`;console.log("🔌 Подключаемся к WebSocket URL:",_);const S=new WebSocket(_);return S.onopen=()=>{console.log("🔌 WebSocket соединение установлено для администратора"),S.send(JSON.stringify({type:"subscribe",channels:[`chat:${c.id}`]}))},S.onmessage=C=>{try{const A=JSON.parse(C.data);A.type==="chat_message"&&A.data.chatId===c.id&&(console.log("📨 Получено новое сообщение через WebSocket, обновляем данные..."),x(),f())}catch(A){console.warn("⚠️ Ошибка обработки WebSocket сообщения:",A)}},S.onerror=C=>{console.warn("⚠️ WebSocket ошибка для администратора:",C)},S.onclose=C=>{console.log("🔌 WebSocket соединение закрыто для администратора:",C.code,C.reason)},()=>{console.log("🔌 Закрываем WebSocket соединение для администратора"),(S.readyState===WebSocket.OPEN||S.readyState===WebSocket.CONNECTING)&&S.close()}},[c==null?void 0:c.id,r==null?void 0:r.id,x,f]),v.useEffect(()=>{if(!(r!=null&&r.id))return;console.log("🔌 WebSocket: инициализация real-time обновлений списка чатов для администратора...");const _=`${uh}/api/chat/ws?userId=${r.id}&isAdmin=true`;console.log("🔌 Подключаемся к WebSocket URL для списка чатов:",_);const S=new WebSocket(_);return S.onopen=()=>{console.log("🔌 WebSocket соединение установлено для списка чатов администратора"),S.send(JSON.stringify({type:"subscribe",channels:["admin_chats"]}))},S.onmessage=C=>{try{const A=JSON.parse(C.data);(A.type==="chat_message"||A.type==="chat_status_change")&&(console.log("📨 Получено обновление чата через WebSocket, обновляем список..."),f())}catch(A){console.warn("⚠️ Ошибка обработки WebSocket сообщения для списка чатов:",A)}},S.onerror=C=>{console.warn("⚠️ WebSocket ошибка для списка чатов администратора:",C)},S.onclose=C=>{console.log("🔌 WebSocket соединение закрыто для списка чатов администратора:",C.code,C.reason)},()=>{console.log("🔌 Закрываем WebSocket соединение для списка чатов администратора"),(S.readyState===WebSocket.OPEN||S.readyState===WebSocket.CONNECTING)&&S.close()}},[r==null?void 0:r.id,f]),v.useEffect(()=>{p!=null&&p.messages&&p.messages.length>0&&p.messages[p.messages.length-1].senderType==="user"&&c&&n()},[p==null?void 0:p.messages,n,c]);const b=_=>_.senderType==="user"?_.isRead?"read":"delivered":"sent";return v.useEffect(()=>{if(c!=null&&c.id&&(p!=null&&p.messages)&&p.messages.length>0){console.log("🔍 Автоматически сбрасываем непрочитанные для чата администратора:",c.id);const _=p.messages.filter(S=>S.senderType==="user"&&!S.isRead);_.length>0&&(console.log(`📖 Отмечаем ${_.length} сообщений как прочитанные`),Promise.all(_.map(S=>xs.markMessageAsRead({messageId:S.id,chatId:c.id,readerId:(r==null?void 0:r.id)||"",readerRole:"admin"}))).then(()=>{console.log("✅ Все сообщения отмечены как прочитанные администратором"),x()}).catch(S=>{console.warn("⚠️ Не удалось отметить сообщения как прочитанные администратором:",S)})),xs.markAsRead({chatId:c.id,userId:c.userId}).then(()=>{console.log("✅ Чат отмечен как прочитанный администратором"),f()}).catch(S=>{console.warn("⚠️ Не удалось отметить чат как прочитанный администратором:",S)})}},[c==null?void 0:c.id,c==null?void 0:c.userId,p==null?void 0:p.messages,f,x,r==null?void 0:r.id]),{chats:(d==null?void 0:d.chats)||[],messages:(p==null?void 0:p.messages)||[],selectedChat:c,statusFilter:o,isLoadingChats:u,isLoadingMessages:g,setSelectedChat:i,setStatusFilter:l,sendMessage:N,updateChatStatus:j,refetchChats:f,refetchMessages:x,getMessageReadStatus:b,isSendingMessage:w.isPending,isUpdatingStatus:y.isPending,_debug:{chatsData:d,messagesData:p,chatsError:m,messagesError:h,statusFilter:o,currentSelectedChat:c}}},aF=({isOpen:e,onOpenChange:t})=>{const{user:r}=Sr(),{chats:n,messages:a,selectedChat:i,unreadCount:o,isLoadingChats:l,isLoadingMessages:c,message:d,setMessage:u,setSelectedChat:m,createChat:f,sendMessage:p,messagesEndRef:g,isCreatingChat:h,isSendingMessage:x}=nF(r==null?void 0:r.id),[w,y]=v.useState(!1),[N,j]=v.useState(""),b=v.useRef(null);v.useEffect(()=>{if(n&&n.length>0&&!i){const k=n.find(R=>R.status==="active")||n[0];k&&m(k)}},[n,i,m]);const _=async k=>{if(k&&(k.preventDefault(),k.stopPropagation()),!!N.trim())try{await f(N),y(!1),j("")}catch(R){console.error("Ошибка создания чата:",R)}},S=async k=>{if(k&&(k.preventDefault(),k.stopPropagation()),!!d.trim())try{await p(d)}catch(R){console.error("Ошибка отправки сообщения:",R)}},C=k=>{const R=new Date(k);if(Number.isNaN(R.getTime()))return"";const te=new Date,Z=new Date(te.getFullYear(),te.getMonth(),te.getDate());return new Date(R.getFullYear(),R.getMonth(),R.getDate()).getTime()!==Z.getTime()?R.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):R.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})},A=k=>{switch(k){case"active":return"bg-green-500";case"pending":return"bg-yellow-500";case"closed":return"bg-gray-500";default:return"bg-gray-500"}},U=k=>{switch(k){case"active":return"Активен";case"pending":return"Ожидает";case"closed":return"Закрыт";default:return"Неизвестно"}};return v.useEffect(()=>{g.current&&b.current&&b.current.scrollTo({top:b.current.scrollHeight,behavior:"smooth"})},[a==null?void 0:a.length,e,g,b]),e?s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl h-[85vh] md:h-[80vh] max-h-[calc(100vh-2rem)] flex flex-col overflow-hidden pb-[env(safe-area-inset-bottom)]",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Is,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Чат с поддержкой"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Получите помощь по любым вопросам"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[o>0&&s.jsxs(rt,{variant:"destructive",className:"text-xs",children:[o," непрочитанных"]}),s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>t(!1),children:s.jsx(Rt,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex flex-col flex-1 min-h-0",children:w?s.jsxs("div",{className:"flex flex-col p-4 flex-1",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(Is,{className:"w-16 h-16 text-blue-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Создать новый чат"}),s.jsx("p",{className:"text-gray-600",children:"Опишите ваш вопрос, и мы поможем вам решить его"})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("textarea",{value:N,onChange:k=>j(k.target.value),placeholder:"Опишите ваш вопрос или проблему...",className:"flex-1 p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:8}),s.jsxs("div",{className:"flex space-x-3 mt-4",children:[s.jsx(q,{variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Отмена"}),s.jsx(q,{type:"button",onClick:_,disabled:!N.trim()||h,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:h?"Создание...":"Отправить"})]})]})]}):n&&n.length>0||i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:We("w-2 h-2 rounded-full",A((i==null?void 0:i.status)||(n&&n.length>0?n[0].status:"pending")))}),s.jsx("span",{className:"text-sm text-gray-600",children:U((i==null?void 0:i.status)||(n&&n.length>0?n[0].status:"pending"))})]})}),s.jsxs("div",{ref:b,className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 overscroll-contain scroll-smooth",children:[c?s.jsx("div",{className:"text-center text-gray-500",children:"Загрузка сообщений..."}):a&&a.length>0?a.map(k=>s.jsx("div",{className:We("flex",k.senderType==="user"?"justify-end":"justify-start"),children:s.jsxs("div",{className:We("max-w-[70%] px-4 py-2 rounded-2xl break-words overflow-hidden",k.senderType==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[s.jsx("p",{className:"text-sm mb-2 break-words whitespace-pre-wrap",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:k.message}),s.jsxs("div",{className:"flex items-center justify-end",children:[s.jsx(Xr,{className:"w-3 h-3 opacity-50 mr-1"}),s.jsx("span",{className:"text-sm text-gray-500",children:C(k.createdAt)})]})]})},k.id)):s.jsx("div",{className:"text-center text-gray-500",children:"Нет сообщений"}),s.jsx("div",{ref:g})]}),s.jsx("div",{className:"p-3 md:p-4 border-t border-gray-100 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/70 shadow-inner flex-shrink-0",children:s.jsxs("form",{onSubmit:S,className:"flex items-center gap-2",children:[s.jsx(st,{value:d,onChange:k=>u(k.target.value),placeholder:"Введите сообщение...",className:"flex-1 h-11 rounded-full px-5",disabled:x}),s.jsx(q,{type:"submit",disabled:!d.trim()||x,className:"bg-blue-600 hover:bg-blue-700 h-11 w-11 rounded-full p-0 flex items-center justify-center","aria-label":"Отправить сообщение",children:s.jsx(xS,{className:"w-5 h-5"})})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(Is,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"mb-4",children:"У вас пока нет активного чата"}),s.jsx(q,{type:"button",onClick:()=>y(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Написать в поддержку"})]})})})]})}):null},Zc=({showBackButton:e=!1})=>{const[t,r]=v.useState(!1),[n,a]=v.useState(!1),{logout:i}=Sr(),{toast:o}=Gt(),l=ha(),c=[{label:"Главная",href:"/parent",icon:"🏠"},{label:"Мой профиль",href:"/parent/profile",icon:"👤"},{label:"Написать в поддержку",href:"#support",icon:"💬"},{label:"О нас",href:"/about",icon:"ℹ️"},{label:"Поделиться",href:"#share",icon:"📤"},{label:"Выйти",href:"#logout",icon:"🚪"}],d=()=>{const f="https://waxhands.ru",g=`Отличные творческие мастер-классы для детей! 🎨✨

${f}`;navigator.share?navigator.share({title:"Студия МК Восковые ручки",text:g,url:f}).catch(()=>{u(f,g)}):u(f,g)},u=(f,p)=>{const g=`https://wa.me/?text=${encodeURIComponent(p)}`,h=`https://t.me/share/url?url=${encodeURIComponent(f)}&text=${encodeURIComponent(p)}`;window.confirm(`Выберите способ поделиться:

OK - WhatsApp
Отмена - Telegram`)?window.open(g,"_blank"):window.open(h,"_blank")},m=f=>{f.startsWith("/")?(l(f),r(!1)):f==="#logout"?(i(),o({title:"Выход выполнен",description:"Вы успешно вышли из системы"}),r(!1)):f==="#support"?(a(!0),r(!1)):(f==="#share"&&d(),r(!1))};return s.jsxs(s.Fragment,{children:[s.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-br from-yellow-100 via-pink-100 to-blue-100 shadow-lg border-b border-orange-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[e&&s.jsx(q,{variant:"ghost",size:"icon",onClick:()=>l(-1),className:"text-gray-700 hover:bg-orange-100 hover:text-orange-700 mr-2",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("div",{className:"w-12 h-12",children:s.jsx("img",{src:cx,alt:"Логотип студии",className:"w-full h-full object-contain"})}),s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-orange-500 via-purple-500 to-blue-500 bg-clip-text text-transparent",children:"Студия «МК Восковые ручки»"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Творческие мастер-классы"})]}),s.jsx("div",{className:"sm:hidden",children:s.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-orange-500 via-purple-500 to-blue-500 bg-clip-text text-transparent",children:"МК Восковые ручки"})})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(q,{variant:"ghost",size:"icon",onClick:d,className:"text-gray-700 hover:bg-orange-100 hover:text-orange-700",title:"Поделиться",children:s.jsx(yD,{className:"w-5 h-5"})}),s.jsxs(Yg,{open:t,onOpenChange:r,children:[s.jsx(B4,{asChild:!0,children:s.jsx(q,{variant:"ghost",size:"icon",className:"text-gray-700 hover:bg-orange-100 hover:text-orange-700",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("div",{className:"w-6 h-0.5 bg-current rounded-full"}),s.jsx("div",{className:"w-4 h-0.5 bg-current rounded-full ml-auto"})]})})}),s.jsxs(u0,{side:"right",className:"w-80 bg-gradient-to-b from-orange-50 to-purple-50",children:[s.jsx(Qg,{className:"border-b border-orange-200 pb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12",children:s.jsx("img",{src:cx,alt:"Логотип студии",className:"w-full h-full object-contain"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-orange-500 via-purple-500 to-blue-500 bg-clip-text text-transparent",children:"Студия «МК Восковые ручки»"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Творческие мастер-классы"})]})]})}),s.jsx("nav",{className:"mt-6 space-y-4",children:c.map(f=>s.jsxs("button",{onClick:()=>m(f.href),className:"w-full text-left px-4 py-3 rounded-lg hover:bg-orange-100 hover:text-orange-700 transition-colors duration-200 text-gray-700 font-medium",children:[s.jsx("span",{className:"mr-3",children:f.icon}),f.label]},f.href))})]})]})]})]})})}),s.jsx(aF,{isOpen:n,onOpenChange:a})]})},iF=({isOpen:e,onOpenChange:t})=>{const[r,n]=v.useState(0),a=ha(),i=v.useMemo(()=>{const p=Object.assign({});console.log("🔍 Загруженные изображения онбординга:",p);const h=Object.entries(p).map(([w,y])=>({src:y.default,order:(()=>{const N=w.match(/(\d+)/i);return N?parseInt(N[1],10):999})()})).sort((w,y)=>w.order-y.order);console.log("📋 Отсортированные изображения онбординга:",h);const x=new Map(h.map(w=>[w.order,w.src]));return console.log("🗺️ Карта изображений по номерам:",x),x},[]),o=v.useMemo(()=>{const p=Object.assign({});console.log("🎥 Загруженные видео онбординга:",p);const h=Object.entries(p).map(([w,y])=>({src:y.default,order:(()=>{const N=w.match(/(\d+)/i);return N?parseInt(N[1],10):999})()})).sort((w,y)=>w.order-y.order);console.log("📋 Отсортированные видео онбординга:",h);const x=new Map(h.map(w=>[w.order,w.src]));return console.log("🗺️ Карта видео по номерам:",x),x},[]),l=[{title:"Добро пожаловать в студию! 🎨",text:"Мы создаем уникальные восковые ручки для детей. Каждый ребенок может проявить свою индивидуальность!",icon:s.jsx(ss,{className:"w-12 h-12 text-orange-500"}),slideNumber:1},{title:"Простой процесс регистрации 👨‍👩‍👧‍👦",text:"Выберите школу и класс вашего ребенка, мы покажем доступные мастер-классы. Запись займет 2 минуты!",icon:s.jsx(or,{className:"w-12 h-12 text-purple-500"}),slideNumber:2},{title:"Для детей: Придумай свой жест! ✋",text:"Ребенок выбирает любую форму руки — показывает любимый жест, который станет основой ручки",icon:s.jsx(gs,{className:"w-12 h-12 text-blue-500"}),slideNumber:3},{title:"Безопасность превыше всего 🛡️",text:"Используем только теплый безопасный воск. Процесс контролируется опытными мастерами",icon:s.jsx(zr,{className:"w-12 h-12 text-green-500"}),slideNumber:4},{title:"Украшаем, персонализируем и создаем! ✨🎉",text:"Выбираем стиль: световые ручки, блестки, лакировка, надписи. Каждая ручка уникальна! Быстрое создание за 5 минут, яркие эмоции и уникальный сувенир на память. Дети в восторге!",icon:s.jsx(Hr,{className:"w-12 h-12 text-pink-500"}),slideNumber:6}];console.log("🎯 Слайды онбординга:",l.map((p,g)=>({index:g,title:p.title,slideNumber:p.slideNumber,hasImage:!!i.get(p.slideNumber),hasVideo:!!o.get(p.slideNumber)})));const c=l[Math.min(r,l.length-1)],d=()=>{r<l.length-1&&n(r+1)},u=()=>{r>0&&n(r-1)},m=()=>{t(!1),n(0)},f=()=>{t(!1),n(0)};return s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(jr,{className:"text-center",children:[s.jsx(ur,{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:c.title}),s.jsx(br,{className:"text-base sm:text-lg text-gray-600 leading-relaxed",children:c.text})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"w-full overflow-hidden rounded-xl bg-white/50 shadow-lg",children:(()=>{const p=c.slideNumber,g=i.get(p),h=o.get(p);return console.log(`🎯 Слайд ${p}:`,{image:g,video:h}),g?s.jsx("img",{src:g,className:"w-full aspect-video object-cover",alt:c.title,onError:x=>{console.error("❌ Ошибка загрузки изображения:",g),x.currentTarget.style.display="none"},onLoad:()=>{console.log("✅ Изображение загружено:",g)}}):h?s.jsx("video",{src:h,className:"w-full aspect-video object-cover",muted:!0,autoPlay:!0,loop:!0,playsInline:!0}):s.jsx("div",{className:"w-full aspect-video bg-gradient-to-r from-orange-100 to-purple-100 flex items-center justify-center",children:c.icon})})()}),s.jsx("div",{className:"flex justify-center gap-2",children:l.map((p,g)=>s.jsx("div",{className:`h-3 w-3 rounded-full transition-all duration-200 ${g===r?"bg-orange-500 scale-110":"bg-orange-200"}`},g))}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r>0&&s.jsx(q,{variant:"outline",onClick:u,className:"flex-1 sm:flex-none min-w-[120px]",children:"← Назад"}),r<l.length-1?s.jsx(q,{className:"bg-gradient-to-r from-orange-500 to-purple-500 text-white hover:from-orange-600 hover:to-purple-600 flex-1 sm:flex-none min-w-[120px]",onClick:d,children:"Далее →"}):s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full",children:[s.jsx(q,{variant:"secondary",onClick:()=>a("/about"),className:"flex-1 sm:flex-none min-w-[120px]",children:"Наши работы и мастер-классы"}),s.jsx(q,{className:"bg-gradient-to-r from-orange-500 to-purple-500 text-white hover:from-orange-600 hover:to-purple-600 flex-1 sm:flex-none min-w-[120px]",onClick:m,children:"Начать! 🚀"})]})]}),s.jsx("div",{className:"text-center",children:s.jsx(q,{variant:"ghost",onClick:f,className:"text-sm text-gray-500 hover:text-gray-700",children:"Пропустить онбординг"})})]})]})})},Fr=v.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:We("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Fr.displayName="Textarea";const xE=()=>{const[e,t]=v.useState(!1),[r,n]=v.useState(null),a=v.useCallback(async f=>{var p,g,h,x;t(!0),n(null);try{console.log("🔍 useWorkshopRequests.createRequest: Отправляем заявку:",f);const w=await et.post("/workshop-requests",f);if(console.log("✅ useWorkshopRequests.createRequest: Получен ответ:",w.data),w.data&&typeof w.data=="object"){if("success"in w.data)return n(null),w.data;{const y={success:!0,data:w.data,message:"Заявка создана успешно"};return n(null),y}}return n(null),null}catch(w){console.error("❌ useWorkshopRequests.createRequest: Ошибка:",w);const y=w;console.log("📋 useWorkshopRequests.createRequest: Детали ошибки:",{status:(g=(p=y.response)==null?void 0:p.data)==null?void 0:g.error,message:y.message});const N=((x=(h=y.response)==null?void 0:h.data)==null?void 0:x.error)||"Не удалось создать заявку";return n(N),{success:!1,error:N}}finally{t(!1)}},[]),i=v.useCallback(async()=>{t(!0),n(null);try{console.log("🔍 useWorkshopRequests.getAllRequests: Запрашиваем все заявки..."),console.log("🔍 useWorkshopRequests.getAllRequests: API URL:","https://waxhands.ru/api/workshop-requests"),console.log("🔍 useWorkshopRequests.getAllRequests: Токен авторизации:",!!localStorage.getItem("authToken"));const f=await et.get("/workshop-requests");if(console.log("✅ useWorkshopRequests.getAllRequests: Получен ответ:",f.data),console.log("✅ useWorkshopRequests.getAllRequests: Тип response.data:",typeof f.data),console.log("✅ useWorkshopRequests.getAllRequests: Структура response.data:",Object.keys(f.data||{})),f.data&&typeof f.data=="object"){if("success"in f.data&&"data"in f.data)return console.log("✅ useWorkshopRequests.getAllRequests: Ответ в правильном формате"),t(!1),f.data;if(Array.isArray(f.data)){console.log("✅ useWorkshopRequests.getAllRequests: Ответ - массив, оборачиваем в структуру");const p={success:!0,data:f.data,message:"Заявки загружены успешно"};return t(!1),p}if("data"in f.data&&Array.isArray(f.data.data)){console.log("✅ useWorkshopRequests.getAllRequests: Ответ содержит data массив, добавляем success");const p={success:!0,data:f.data.data,message:"Заявки загружены успешно"};return t(!1),p}}return console.log("⚠️ useWorkshopRequests.getAllRequests: Неожиданная структура ответа, возвращаем null"),t(!1),null}catch(f){return console.error("❌ useWorkshopRequests.getAllRequests: Ошибка при загрузке заявок:",f),n(f instanceof Error?f.message:"Неизвестная ошибка"),t(!1),null}},[]),o=v.useCallback(async()=>{var f,p;t(!0),n(null);try{const g=await et.get("/workshop-requests/my");if(g.data&&typeof g.data=="object"){if("success"in g.data)return n(null),g.data;if(Array.isArray(g.data)){const h={success:!0,data:g.data,message:"Заявки загружены успешно"};return n(null),h}}return n(null),null}catch(g){const x=((p=(f=g.response)==null?void 0:f.data)==null?void 0:p.error)||"Не удалось получить заявки";return n(x),{success:!1,error:x}}finally{t(!1)}},[]),l=v.useCallback(async f=>{var p,g;t(!0),n(null);try{const h=await et.get(`/workshop-requests/${f}`);if(h.data&&typeof h.data=="object"){if("success"in h.data)return n(null),h.data;{const x={success:!0,data:h.data,message:"Заявка загружена успешно"};return n(null),x}}return n(null),null}catch(h){const w=((g=(p=h.response)==null?void 0:p.data)==null?void 0:g.error)||"Не удалось получить заявку";return n(w),{success:!1,error:w}}finally{t(!1)}},[]),c=v.useCallback(async(f,p)=>{var g,h;t(!0),n(null);try{const x=await et.patch(`/workshop-requests/${f}/status`,p);if(x.data&&typeof x.data=="object"){if("success"in x.data)return n(null),x.data;{const w={success:!0,data:x.data,message:"Статус заявки обновлен успешно"};return n(null),w}}return n(null),null}catch(x){const y=((h=(g=x.response)==null?void 0:g.data)==null?void 0:h.error)||"Не удалось обновить заявку";return n(y),{success:!1,error:y}}finally{t(!1)}},[]),d=v.useCallback(async f=>{var p,g;t(!0),n(null);try{const h=await et.delete(`/workshop-requests/${f}`);if(h.data&&typeof h.data=="object"){if("success"in h.data)return n(null),h.data;{const x={success:!0,data:!!h.data,message:"Заявка удалена успешно"};return n(null),x}}return n(null),null}catch(h){const w=((g=(p=h.response)==null?void 0:p.data)==null?void 0:g.error)||"Не удалось удалить заявку";return n(w),{success:!1,error:w}}finally{t(!1)}},[]),u=v.useCallback(async()=>{var f,p;t(!0),n(null);try{const g=await et.get("/workshop-requests/stats/overview");if(g.data&&typeof g.data=="object"){if("success"in g.data)return n(null),g.data;if("total"in g.data&&"pending"in g.data&&"approved"in g.data&&"rejected"in g.data){const h={success:!0,data:g.data,message:"Статистика загружена успешно"};return n(null),h}}return n(null),null}catch(g){const x=((p=(f=g.response)==null?void 0:f.data)==null?void 0:p.error)||"Не удалось получить статистику";return n(x),{success:!1,error:x}}finally{t(!1)}},[]),m=v.useCallback(()=>{n(null)},[]);return{loading:e,error:r,createRequest:a,getAllRequests:i,getMyRequests:o,getRequestById:l,updateRequestStatus:c,deleteRequest:d,getRequestsStats:u,clearError:m}};function oF({isOpen:e,onOpenChange:t}){const{user:r}=Sr(),{schools:n}=Ba(),{createRequest:a,loading:i}=xE(),{toast:o}=Gt(),[l,c]=v.useState({school_name:"",class_group:"",desired_date:"",notes:""}),[d,u]=v.useState(""),[m,f]=v.useState([]),p=w=>{u(w),c(N=>({...N,school_name:"",class_group:""}));const y=n.find(N=>N.id===w);y&&(f(y.classes),c(N=>({...N,school_name:y.name})))},g=w=>{c(y=>({...y,class_group:w}))},h=async w=>{if(w.preventDefault(),!(r!=null&&r.id)){o({title:"Ошибка",description:"Необходимо войти в систему",variant:"destructive"});return}if(!l.school_name||!l.class_group||!l.desired_date){o({title:"Ошибка",description:"Заполните все обязательные поля",variant:"destructive"});return}try{console.log("🔍 WorkshopRequestModal.handleSubmit: Отправляем заявку:",{parent_id:r.id,school_name:l.school_name,class_group:l.class_group,desired_date:l.desired_date,notes:l.notes||void 0});const y=await a({parent_id:r.id,school_name:l.school_name,class_group:l.class_group,desired_date:l.desired_date,notes:l.notes||void 0});console.log("📋 WorkshopRequestModal.handleSubmit: Результат создания заявки:",y),console.log("🔍 WorkshopRequestModal.handleSubmit: Проверяем result?.success:",y==null?void 0:y.success),console.log("🔍 WorkshopRequestModal.handleSubmit: Тип result:",typeof y),console.log("🔍 WorkshopRequestModal.handleSubmit: result === null:",y===null),console.log("🔍 WorkshopRequestModal.handleSubmit: result === undefined:",y===void 0),y&&y.success?(o({title:"Заявка отправлена! 🎉",description:"Мы рассмотрим вашу заявку и свяжемся с вами в ближайшее время"}),c({school_name:"",class_group:"",desired_date:"",notes:""}),u(""),f([]),t(!1)):y&&y.id?(console.log("✅ WorkshopRequestModal.handleSubmit: Fallback - заявка создана (есть ID):",y),o({title:"Заявка отправлена! 🎉",description:"Мы рассмотрим вашу заявку и свяжемся с вами в ближайшее время"}),c({school_name:"",class_group:"",desired_date:"",notes:""}),u(""),f([]),t(!1)):(console.warn("⚠️ WorkshopRequestModal.handleSubmit: Неожиданный формат ответа:",y),o({title:"Ошибка",description:(y==null?void 0:y.error)||"Не удалось отправить заявку",variant:"destructive"}))}catch(y){console.error("Ошибка при отправке заявки:",y),o({title:"Ошибка",description:"Произошла ошибка при отправке заявки",variant:"destructive"})}},x=new Date().toISOString().split("T")[0];return s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(jr,{children:[s.jsxs(ur,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(El,{className:"w-5 h-5 text-orange-500"}),"Подать заявку на проведение мастер-класса"]}),s.jsx(br,{className:"text-sm text-gray-600 mt-1",children:"Заполните форму, и мы рассмотрим возможность проведения мастер-класса в вашем классе"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-5 py-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"school",className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[s.jsx(Tn,{className:"w-4 h-4"}),"Школа/сад *"]}),s.jsxs(kt,{onValueChange:p,value:d,children:[s.jsx(Et,{className:"h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20",children:s.jsx(At,{placeholder:"Выберите школу или сад"})}),s.jsx(_t,{children:n.map(w=>s.jsx(Ze,{value:w.id,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:w.name}),s.jsx("div",{className:"text-sm text-gray-500",children:w.address})]})},w.id))})]}),!d&&s.jsx("p",{className:"text-sm text-gray-500",children:"Если не нашли свою школу, напишите в поддержку"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"class",className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[s.jsx(tc,{className:"w-4 h-4"}),"Класс/группа *"]}),s.jsxs(kt,{onValueChange:g,value:l.class_group,disabled:!d,children:[s.jsx(Et,{className:"h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20 disabled:opacity-50",children:s.jsx(At,{placeholder:"Выберите класс или группу"})}),s.jsx(_t,{children:m.map(w=>s.jsx(Ze,{value:w,children:w},w))})]}),!d&&s.jsx("p",{className:"text-sm text-gray-500",children:"Сначала выберите школу"}),d&&m.length===0&&s.jsx("p",{className:"text-sm text-gray-500",children:"Если не нашли свой класс, напишите в поддержку"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"date",className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),"Желаемая дата *"]}),s.jsx(st,{id:"date",type:"date",min:x,value:l.desired_date,onChange:w=>c(y=>({...y,desired_date:w.target.value})),className:"h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20",required:!0}),s.jsx("p",{className:"text-xs text-gray-500",children:"Выберите дату не ранее сегодняшнего дня"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"notes",className:"text-sm font-semibold text-gray-700",children:"Дополнительная информация"}),s.jsx(Fr,{id:"notes",placeholder:"Укажите любые дополнительные пожелания или требования...",value:l.notes,onChange:w=>c(y=>({...y,notes:w.target.value})),className:"min-h-[80px] text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20",rows:3}),s.jsx("p",{className:"text-xs text-gray-500",children:"Например: предпочтительное время, количество детей, особые пожелания"})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ua,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Важно знать:"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• Мы рассмотрим вашу заявку в течение 2-3 рабочих дней"}),s.jsx("li",{children:"• Свяжемся с вами для уточнения деталей"}),s.jsx("li",{children:"• Если не нашли свою школу или класс, напишите в поддержку"})]})]})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[s.jsx(q,{type:"button",variant:"outline",onClick:()=>t(!1),className:"h-10 px-6 text-sm border-gray-300 text-gray-700 hover:bg-gray-50",children:"Отмена"}),s.jsx(q,{type:"submit",disabled:i||!l.school_name||!l.class_group||!l.desired_date,className:"h-10 px-6 text-sm bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white font-medium disabled:opacity-50",children:i?"Отправляем...":"Отправить заявку"})]})]})]})})}const lF=()=>{console.log("🔄 ParentDashboard: Компонент рендерится");const{user:e}=Sr(),{toast:t}=Gt(),r=$a(),{masterClasses:n,fetchMasterClasses:a}=Kg(),{schools:i}=Ba(),{services:o}=Wa(),{getUserRegistrations:l}=$4(),{data:c}=L4((e==null?void 0:e.id)||"");v.useState({});const{getChildrenByParentId:d,createUser:u,updateUser:m}=nv(),[f,p]=v.useState("children"),[g,h]=v.useState([]),[x,w]=v.useState([]),[y,N]=v.useState(!1),[j,b]=v.useState({name:"",surname:"",age:void 0,schoolId:"",class:"",shift:""}),[_,S]=v.useState(""),[C,A]=v.useState([]),[U,k]=v.useState(!1),[R,te]=v.useState(!1),[Z,se]=v.useState(null),[ae,ne]=v.useState(0),[K,re]=v.useState(()=>!localStorage.getItem("parent-onboarding-completed")),[xe,J]=v.useState(!1),[D,X]=v.useState(null),[V,E]=v.useState(!1),[I,G]=v.useState([]),[me,he]=v.useState({total:0,pending:0,approved:0,rejected:0}),{isConnected:B,sendMessage:be}=sv(e==null?void 0:e.id,!1,H=>{console.log("🔌 ParentDashboard: Получено WebSocket сообщение:",H),H.type==="workshop_request_status_change"||H.type==="workshop_request_update"?(console.log("📋 ParentDashboard: Обновление заявки через WebSocket, перезагружаем данные..."),Y()):H.type==="workshop_request_created"?(console.log("📋 ParentDashboard: Новая заявка через WebSocket, перезагружаем данные..."),Y()):console.log("🔌 ParentDashboard: Неизвестный тип сообщения:",H.type)}),pe=H=>H===0?"записались":H===1?"записался":H>=2&&H<=4?"записались":"записалось";v.useEffect(()=>{console.log("🔄 useEffect: Загружаем мастер-классы, refreshTrigger:",ae),e!=null&&e.id&&!n.length&&(console.log("🔄 useEffect: Запрашиваем мастер-классы для пользователя:",e.id),a())},[e==null?void 0:e.id,a,ae,n.length]),v.useEffect(()=>{console.log("🔄 useEffect: Загружаем регистрации пользователя, refreshTrigger:",ae),e!=null&&e.id&&x.length===0&&l(e.id).then(H=>{console.log("✅ useEffect: Получены регистрации:",H),console.log("🔍 useEffect: Детали регистраций:",{count:H.length,registrations:H.map(fe=>({id:fe.id,workshopId:fe.workshopId,userId:fe.userId,status:fe.status,totalPrice:fe.totalPrice}))}),w(H)}).catch(H=>{console.error("❌ useEffect: Ошибка загрузки регистраций:",H)})},[e==null?void 0:e.id,l,ae,x.length]),v.useEffect(()=>{console.log("🔄 useEffect: Загружаем детей родителя, refreshTrigger:",ae),e!=null&&e.id&&g.length===0&&(async()=>{try{console.log("🔄 useEffect: Запрашиваем детей для родителя:",e.id);const we=(await d(e.id)).map(M=>{var Ne;let ge=M.age||7;return!M.age&&M.class&&(ge=parseInt(((Ne=M.class.match(/\d+/))==null?void 0:Ne[0])||"0")+6),{id:M.id,name:`${M.name} ${M.surname||""}`.trim(),age:ge,schoolId:M.schoolId,schoolName:M.schoolName,classGroup:M.class}});console.log("✅ useEffect: Дети успешно загружены:",we),h(we)}catch(fe){console.error("❌ useEffect: Ошибка при загрузке детей:",fe),h([])}})()},[e==null?void 0:e.id,d,g.length]),v.useEffect(()=>{console.log("🔄 useEffect: Загружаем заявки, user?.id:",e==null?void 0:e.id),e!=null&&e.id?Y():console.log("⚠️ useEffect: user?.id отсутствует, заявки не загружаются")},[e==null?void 0:e.id]);const Y=async()=>{if(console.log("🔄 loadWorkshopRequests: Начинаем загрузку заявок, user?.id:",e==null?void 0:e.id),!(e!=null&&e.id)){console.log("⚠️ loadWorkshopRequests: user?.id отсутствует, выход из функции");return}try{console.log("🔄 ParentDashboard: Загружаем заявки на проведение мастер-классов...");const H=await fetch(`https://waxhands.ru/api/workshop-requests/parent/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});if(H.ok){const we=await H.json();we.success&&we.data?(G(we.data),console.log("✅ ParentDashboard: Заявки загружены:",we.data)):Array.isArray(we)&&(G(we),console.log("✅ ParentDashboard: Заявки загружены (массив):",we))}else H.status===403?(console.warn("⚠️ ParentDashboard: Нет доступа к заявкам (403), возможно нужны права администратора"),G([])):console.error("❌ ParentDashboard: Ошибка загрузки заявок:",H.status,H.statusText);const fe=await fetch(`https://waxhands.ru/api/workshop-requests/stats/parent/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`,"Content-Type":"application/json"}});if(fe.ok){const we=await fe.json();we.success&&we.data&&(he(we.data),console.log("✅ ParentDashboard: Статистика заявок загружена:",we.data))}else fe.status===403?(console.warn("⚠️ ParentDashboard: Нет доступа к статистике заявок (403), устанавливаем нулевые значения"),he({total:0,pending:0,approved:0,rejected:0})):console.error("❌ ParentDashboard: Ошибка загрузки статистики заявок:",fe.status,fe.statusText)}catch(H){console.error("❌ ParentDashboard: Ошибка при загрузке заявок:",H)}console.log("✅ loadWorkshopRequests: Загрузка завершена, workshopRequests:",I.length,"workshopRequestsStats:",me)},P=H=>{S(H),b(we=>({...we,schoolId:H,class:""}));const fe=i.find(we=>we.id===H);A((fe==null?void 0:fe.classes)||[])},ce=async()=>{if(e!=null&&e.id)try{if(!j.name||!j.surname||!j.age||!j.schoolId||!j.class||!j.shift){t({title:"Ошибка",description:"Заполните все поля",variant:"destructive"});return}const H={name:j.name,surname:j.surname,age:j.age,role:"child",schoolId:j.schoolId,class:j.class,shift:j.shift,parentId:e.id};await u(H);const we=(await d(e.id)).map(M=>{var Ne;let ge=M.age||7;return!M.age&&M.class&&(ge=parseInt(((Ne=M.class.match(/\d+/))==null?void 0:Ne[0])||"0")+6),{id:M.id,name:`${M.name} ${M.surname||""}`.trim(),age:ge,schoolId:M.schoolId,schoolName:M.schoolName,classGroup:M.class}});h(we),b({name:"",surname:"",age:void 0,schoolId:"",class:"",shift:""}),S(""),A([]),N(!1),t({title:"Ребенок добавлен! 🎉",description:`${j.name} успешно добавлен в систему`})}catch(H){console.error("Ошибка при добавлении ребенка:",H),t({title:"Ошибка",description:"Не удалось добавить ребенка. Попробуйте позже.",variant:"destructive"})}},Se=H=>{X(H),J(!0)},ue=async()=>{if(!(!D||!(e!=null&&e.id)))try{if(!D.name||!D.age||!D.schoolId||!D.classGroup){t({title:"Ошибка",description:"Заполните все обязательные поля",variant:"destructive"});return}const H=D.name.split(" "),fe=H[0]||"",we=H.slice(1).join(" ")||"",M={name:fe,surname:we,age:D.age,schoolId:D.schoolId,class:D.classGroup};await m(D.id,M);const Ne=(await d(e.id)).map(Le=>{var nt;let ze=Le.age||7;return!Le.age&&Le.class&&(ze=parseInt(((nt=Le.class.match(/\d+/))==null?void 0:nt[0])||"0")+6),{id:Le.id,name:`${Le.name} ${Le.surname||""}`.trim(),age:ze,schoolId:Le.schoolId,schoolName:Le.schoolName,classGroup:Le.class}});h(Ne),J(!1),X(null),t({title:"Данные обновлены! ✅",description:"Информация о ребенке успешно обновлена"})}catch(H){console.error("Ошибка при обновлении ребенка:",H),t({title:"Ошибка",description:"Не удалось обновить данные ребенка. Попробуйте позже.",variant:"destructive"})}},Pe=v.useMemo(()=>{if(console.log("🔄 groupedWorkshops: Пересчитываем мастер-классы, refreshTrigger:",ae),!n.length||!g.length)return console.log("✅ groupedWorkshops: Нет данных для расчета"),{total:0,workshops:[]};const H=new Date().toISOString().slice(0,10),fe=n.filter(_e=>_e.date>=H);console.log("🔍 Фильтрация мастер-классов:",{total:n.length,availableToday:fe.length,today:H,events:fe.map(_e=>({id:_e.id,date:_e.date,schoolId:_e.schoolId,classGroup:_e.classGroup}))});const we=new Map,M=_e=>{if(!_e)return-1;switch(_e){case"paid":return 2;case"pending":return 1;default:return 0}},ge=(_e,$e)=>M($e)>M(_e)?$e:_e,Ne=(_e,$e)=>{const Qe=new Map;return _e.forEach(Me=>Qe.set(Me.childId,Me)),$e.forEach(Me=>{const Ye=Qe.get(Me.childId);if(!Ye)Qe.set(Me.childId,Me);else{const it={paid:3,pending:2,cancelled:1,none:0},Ht=it[Me.status]>it[Ye.status]?Me:Ye;Qe.set(Me.childId,Ht)}}),Array.from(Qe.values())},Le=(_e,$e)=>{const Qe=new Map;return[..._e,...$e].forEach(Me=>Qe.set(Me.id,Me)),Array.from(Qe.values())};fe.forEach(_e=>{var Ht,Yt,xn,rr;const $e=i.find(bt=>bt.id===_e.schoolId),Qe=o.find(bt=>bt.id===_e.serviceId),Me=bt=>bt.replace(/[А-Я]/g,_r=>_r.charCodeAt(0)===1040?"A":_r).replace(/[а-я]/g,_r=>_r.charCodeAt(0)===1072?"a":_r).toUpperCase().trim(),Ye=Me(_e.classGroup),it=g.filter(bt=>{const _r=Me(bt.classGroup);return(bt.schoolId===_e.schoolId||bt.schoolName&&($e==null?void 0:$e.name)&&bt.schoolName.toLowerCase()===$e.name.toLowerCase())&&Ye===_r});if(it.length>0){const bt=`${_e.schoolId}-${_e.classGroup}`,_r=it.map(Xe=>{var gn,qo,T,L;const Dt=x.find(O=>O.workshopId===_e.id&&O.userId===Xe.id),on=((gn=c==null?void 0:c.invoices)==null?void 0:gn.filter(O=>O.master_class_id===_e.id&&(O.participant_id===(e==null?void 0:e.id)||O.participant_id===Xe.id)))||[];console.log(`🔍 Доступные счета для ребенка ${Xe.name} в мастер-классе ${_e.id}:`,{childId:Xe.id,parentId:e==null?void 0:e.id,availableInvoices:on.map(O=>({id:O.id,master_class_id:O.master_class_id,participant_id:O.participant_id,status:O.status,selected_styles:O.selected_styles,selected_options:O.selected_options})),allInvoices:((qo=c==null?void 0:c.invoices)==null?void 0:qo.map(O=>({id:O.id,master_class_id:O.master_class_id,participant_id:O.participant_id,status:O.status})))||[]});let It=on.find(O=>O.participant_id===(e==null?void 0:e.id));It||(It=on.find(O=>O.participant_id===Xe.id)),It&&It.participant_id===(e==null?void 0:e.id)&&console.log(`🔍 Групповой счет для ребенка ${Xe.name}:`,{invoiceId:It.id,participant_id:It.participant_id,status:It.status});let $r="none";return Dt?$r=Dt.status==="confirmed"?"paid":Dt.status==="pending"?"pending":"cancelled":It&&(It.participant_id,e==null||e.id,$r=It.status),console.log(`🔍 Статус для ребенка ${Xe.name} в мастер-классе ${_e.id}:`,{childId:Xe.id,registration:Dt?{id:Dt.id,status:Dt.status}:null,invoice:It?{id:It.id,status:It.status,participant_id:It.participant_id}:null,finalStatus:$r,masterClassParticipants:((L=(T=n.find(O=>O.id===_e.id))==null?void 0:T.participants)==null?void 0:L.length)||0}),{childId:Xe.id,childName:Xe.name,status:$r,invoiceId:It==null?void 0:It.id,registrationId:Dt==null?void 0:Dt.id,registration:Dt,invoice:It}});let Xt;const fr=_r.filter(Xe=>Xe.invoice);if(fr.length>0){const Xe=(Ht=c==null?void 0:c.invoices)==null?void 0:Ht.find(Dt=>Dt.master_class_id===_e.id&&Dt.participant_id===(e==null?void 0:e.id));if(Xe)Xt=Xe.status,console.log(`🔍 Групповой счет для мастер-класса ${_e.id}:`,{invoiceId:Xe.id,status:Xe.status,participant_id:Xe.participant_id});else{const Dt=fr.some($r=>{var gn;return((gn=$r.invoice)==null?void 0:gn.status)==="paid"}),on=fr.some($r=>{var gn;return((gn=$r.invoice)==null?void 0:gn.status)==="pending"}),It=fr.some($r=>{var gn;return((gn=$r.invoice)==null?void 0:gn.status)==="cancelled"});Dt?Xt="paid":on?Xt="pending":It&&(Xt="cancelled")}console.log(`🔍 Статус счета для мастер-класса ${_e.id}:`,{childInvoices:fr.length,groupInvoice:Xe?{id:Xe.id,status:Xe.status}:null,invoiceStatus:Xt})}if(console.log(`✅ Мастер-класс ${_e.id} подходит для класса ${_e.classGroup}:`,{eligibleChildren:it.map(Xe=>Xe.name),childrenWithStatus:_r,invoiceStatus:Xt,userRegistrations:x.filter(Xe=>Xe.workshopId===_e.id),participantInvoices:(Yt=c==null?void 0:c.invoices)==null?void 0:Yt.filter(Xe=>Xe.master_class_id===_e.id)}),console.log(`🔍 OrderDetailsModal Debug - Мастер-класс ${_e.id}:`,{childrenWithStatus:_r.map(Xe=>({childId:Xe.childId,childName:Xe.childName,status:Xe.status,invoice:Xe.invoice?{id:Xe.invoice.id,status:Xe.invoice.status,selected_styles:Xe.invoice.selected_styles,selected_options:Xe.invoice.selected_options}:null}))}),we.has(bt)){const Xe=we.get(bt),Dt=Xe.invoiceStatus;Xe.children=[...new Set([...Xe.children,...it.map(on=>on.id)])],Xe.invoiceStatus=ge(Xe.invoiceStatus,Xt),Xe.eligibleChildren=Le(Xe.eligibleChildren,it),Xe.childrenWithStatus=Ne(Xe.childrenWithStatus,_r),console.log(`🔄 Обновлена существующая карточка для класса ${_e.classGroup}:`,{oldInvoiceStatus:Dt,newInvoiceStatus:Xe.invoiceStatus,childrenCount:Xe.children.length})}else{const Xe={id:_e.id,title:(Qe==null?void 0:Qe.name)||"Мастер-класс",date:_e.date,time:_e.time,classGroup:_e.classGroup,schoolName:_e.schoolName||($e==null?void 0:$e.name)||"Не указано",city:_e.city||((rr=(xn=$e==null?void 0:$e.address)==null?void 0:xn.split(",")[0])==null?void 0:rr.trim())||"Не указан",children:it.map(Dt=>Dt.id),invoiceId:void 0,schoolId:_e.schoolId,serviceId:_e.serviceId,eligibleChildren:it,childrenWithStatus:_r,participantsCount:_e.participants?_e.participants.length:0,invoiceStatus:Xt};we.set(bt,Xe),console.log(`🆕 Создана новая карточка для класса ${_e.classGroup}:`,{invoiceStatus:Xt,childrenCount:Xe.children.length})}}else console.log(`❌ Мастер-класс ${_e.id} не подходит ни для одного ребенка`)});const ze=Array.from(we.values());console.log("📋 Итоговый список мастер-классов по классам:",{total:ze.length,workshops:ze.map(_e=>({id:_e.id,childrenCount:_e.children.length,date:_e.date,schoolName:_e.schoolName,classGroup:_e.classGroup,invoiceStatus:_e.invoiceStatus,childrenWithStatus:_e.childrenWithStatus.map($e=>({name:$e.childName,status:$e.status,hasInvoice:!!$e.invoice,hasRegistration:!!$e.registration}))}))});const nt=ze.sort((_e,$e)=>_e.date!==$e.date?_e.date.localeCompare($e.date):_e.time!==$e.time?_e.time.localeCompare($e.time):_e.schoolName.localeCompare($e.schoolName));return console.log("✅ groupedWorkshops: Мастер-классы рассчитаны:",{total:nt.length,refreshTrigger:ae}),{total:nt.length,workshops:nt}},[n,i,o,g,x,c,ae]),je=v.useMemo(()=>{if(console.log("🔄 pastWorkshops: Пересчитываем прошедшие мастер-классы, refreshTrigger:",ae),!n.length||!g.length)return console.log("✅ pastWorkshops: Нет данных для расчета"),{total:0,workshops:[]};const H=new Date().toISOString().slice(0,10),fe=n.filter(Ne=>Ne.date<H);console.log("🔍 Фильтрация прошедших мастер-классов:",{total:n.length,pastEvents:fe.length,today:H,events:fe.map(Ne=>({id:Ne.id,date:Ne.date,schoolId:Ne.schoolId,classGroup:Ne.classGroup}))});const we=new Map;fe.forEach(Ne=>{var Qe,Me;const Le=i.find(Ye=>Ye.id===Ne.schoolId),ze=o.find(Ye=>Ye.id===Ne.serviceId),nt=Ye=>Ye.replace(/[А-Я]/g,it=>it.charCodeAt(0)===1040?"A":it).replace(/[а-я]/g,it=>it.charCodeAt(0)===1072?"a":it).toUpperCase().trim(),_e=nt(Ne.classGroup),$e=g.filter(Ye=>{const it=nt(Ye.classGroup);return(Ye.schoolId===Ne.schoolId||Ye.schoolName&&(Le==null?void 0:Le.name)&&Ye.schoolName.toLowerCase()===Le.name.toLowerCase())&&_e===it});if($e.length>0){const Ye=`${Ne.schoolId}-${Ne.classGroup}`,it=$e.map(rr=>{var Xe;const bt=x.find(Dt=>Dt.workshopId===Ne.id&&Dt.userId===rr.id),Xt=(((Xe=c==null?void 0:c.invoices)==null?void 0:Xe.filter(Dt=>Dt.master_class_id===Ne.id))||[]).find(Dt=>{const on=n.find(It=>It.id===Ne.id);return on&&on.participants?on.participants.some($r=>$r.childId===rr.id):!0});let fr="none";return bt?fr=bt.status==="confirmed"?"paid":bt.status==="pending"?"pending":"cancelled":Xt&&(fr=Xt.status),{childId:rr.id,childName:rr.name,status:fr,invoiceId:Xt==null?void 0:Xt.id,registrationId:bt==null?void 0:bt.id,registration:bt,invoice:Xt}});let Ht;const Yt=it.filter(rr=>rr.invoice);if(Yt.length>0){const rr=Yt.some(Xt=>{var fr;return((fr=Xt.invoice)==null?void 0:fr.status)==="paid"}),bt=Yt.some(Xt=>{var fr;return((fr=Xt.invoice)==null?void 0:fr.status)==="pending"}),_r=Yt.some(Xt=>{var fr;return((fr=Xt.invoice)==null?void 0:fr.status)==="cancelled"});rr?Ht="paid":bt?Ht="pending":_r&&(Ht="cancelled")}const xn={id:Ne.id,title:(ze==null?void 0:ze.name)||"Мастер-класс",date:Ne.date,time:Ne.time,classGroup:Ne.classGroup,schoolName:Ne.schoolName||(Le==null?void 0:Le.name)||"Не указано",city:Ne.city||((Me=(Qe=Le==null?void 0:Le.address)==null?void 0:Qe.split(",")[0])==null?void 0:Me.trim())||"Не указан",children:$e.map(rr=>rr.id),invoiceId:void 0,schoolId:Ne.schoolId,serviceId:Ne.serviceId,eligibleChildren:$e,childrenWithStatus:it,participantsCount:Ne.participants?Ne.participants.length:0,invoiceStatus:Ht};we.set(Ye,xn)}});const ge=Array.from(we.values()).sort((Ne,Le)=>Le.date.localeCompare(Ne.date));return console.log("✅ pastWorkshops: Прошедшие мастер-классы рассчитаны:",{total:ge.length,refreshTrigger:ae}),{total:ge.length,workshops:ge}},[n,i,o,g,x,c,ae]),ke=H=>{console.log("🔄 Dashboard: Открываем модальное окно регистрации для мастер-класса:",H.title),se(H),k(!0)},gt=async()=>{console.log("🎯 Dashboard: handleWorkshopRegistrationSuccess ВЫЗВАН!"),console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Начинаем обновление данных после успешной регистрации..."),console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Текущие данные:",{userRegistrations:x.length,children:g.length,masterClasses:n.length,refreshTrigger:ae});try{if(e!=null&&e.id){console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Перезагружаем регистрации пользователя...");const H=await l(e.id);console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Получены регистрации:",H),w(H),console.log("✅ ОБНОВЛЕНИЕ DASHBOARD: Регистрации обновлены:",H.length),console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Перезагружаем детей...");const we=(await d(e.id)).map(M=>{var Ne;let ge=M.age||7;return!M.age&&M.class&&(ge=parseInt(((Ne=M.class.match(/\d+/))==null?void 0:Ne[0])||"0")+6),{id:M.id,name:`${M.name} ${M.surname||""}`.trim(),age:ge,schoolId:M.schoolId,schoolName:M.schoolName,classGroup:M.class,pendingOrders:0,completedOrders:0}});h(we),console.log("✅ Дети обновлены:",we.length)}console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Перезагружаем мастер-классы..."),await a(),console.log("✅ ОБНОВЛЕНИЕ DASHBOARD: Мастер-классы обновлены"),e!=null&&e.id&&(console.log("🔄 Инвалидируем кэш счетов участника"),r.invalidateQueries({queryKey:["invoices","participant",e.id]}),r.invalidateQueries({queryKey:["masterClasses"]})),t({title:"Успешно! 🎉",description:"Дети записаны на мастер-класс. Ожидаем оплату счета."}),ne(H=>{const fe=H+1;return console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Триггер обновления UI изменен с",H,"на",fe),fe}),setTimeout(()=>{console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Принудительное обновление UI завершено"),console.log("🔄 ОБНОВЛЕНИЕ DASHBOARD: Финальные данные:",{userRegistrations:x.length,children:g.length,masterClasses:n.length,refreshTrigger:ae})},100)}catch(H){console.error("❌ ОБНОВЛЕНИЕ DASHBOARD: Ошибка при обновлении данных:",H),t({title:"Внимание",description:"Запись прошла успешно, но не удалось обновить данные. Обновите страницу.",variant:"destructive"})}},dt=H=>{H.childrenWithStatus.map(fe=>fe.childName).join(", "),H.invoiceStatus==="paid"||H.invoiceStatus,se(H),te(!0),console.log("Детали заказа:",{workshop:H.title,children:H.childrenWithStatus,status:H.invoiceStatus,invoiceStatus:H.invoiceStatus})},qt=H=>{se(H),te(!0),t({title:"Оплата заказа",description:`Открываем детали заказа для оплаты мастер-класса "${H.title}"`})},Ot=v.useMemo(()=>{var M;if(console.log("🔄 getChildrenStats: Пересчитываем статистику:",{children:g.length,userRegistrations:x.length,participantInvoices:((M=c==null?void 0:c.invoices)==null?void 0:M.length)||0,refreshTrigger:ae}),!g.length)return console.log("✅ getChildrenStats: Нет детей для расчета статистики"),{pending:0,completed:0};let H=x.filter(ge=>ge.status==="pending").length,fe=x.filter(ge=>ge.status==="confirmed").length;c!=null&&c.invoices&&c.invoices.forEach(ge=>{ge.status==="pending"?H++:ge.status==="paid"&&fe++});const we={pending:H,completed:fe};return console.log("✅ getChildrenStats: Статистика рассчитана:",we),we},[g,x,c==null?void 0:c.invoices,ae]),Kt=v.useMemo(()=>{if(!g.length)return new Map;const H=new Map;return g.forEach(fe=>{H.set(fe.id,{pending:0,completed:0})}),x.forEach(fe=>{const we=fe.userId,M=H.get(we);M&&(fe.status==="pending"?M.pending++:fe.status==="confirmed"&&M.completed++)}),c!=null&&c.invoices&&c.invoices.forEach(fe=>{const we=g.find(M=>M.id===fe.participant_id);if(we){const M=H.get(we.id);M&&(fe.status==="pending"?M.pending++:fe.status==="paid"&&M.completed++)}}),console.log("✅ getChildOrderStats: Статистика по детям рассчитана:",Array.from(H.entries()).map(([fe,we])=>{var M;return{childId:fe,childName:(M=g.find(ge=>ge.id===fe))==null?void 0:M.name,...we}})),H},[g,x,c==null?void 0:c.invoices]);return v.useEffect(()=>{var H;console.log("📊 ОТЛАДКА: Загружены данные, refreshTrigger:",ae,{masterClasses:n.length,schools:i.length,services:o.length,children:g.length,userRegistrations:x.length,participantInvoices:((H=c==null?void 0:c.invoices)==null?void 0:H.length)||0}),n.length>0&&console.log("🎨 ОТЛАДКА: Доступные мастер-классы:",n.map(fe=>({id:fe.id,date:fe.date,schoolId:fe.schoolId,classGroup:fe.classGroup,schoolName:fe.schoolName,city:fe.city}))),g.length>0&&console.log("👶 ОТЛАДКА: Дети родителя:",g.map(fe=>({id:fe.id,name:fe.name,schoolId:fe.schoolId,classGroup:fe.classGroup,schoolName:fe.schoolName}))),i.length>0&&console.log("🏫 ОТЛАДКА: Доступные школы:",i.map(fe=>({id:fe.id,name:fe.name,address:fe.address,classes:fe.classes}))),x.length>0&&console.log("📝 ОТЛАДКА: Регистрации пользователя:",x.map(fe=>({id:fe.id,workshopId:fe.workshopId,userId:fe.userId,status:fe.status,totalPrice:fe.totalPrice}))),g.length>0&&console.log("📊 ОТЛАДКА: Статистика заказов по детям:",Array.from(Kt.entries()).map(([fe,we])=>{var M;return{childId:fe,childName:(M=g.find(ge=>ge.id===fe))==null?void 0:M.name,...we}})),c!=null&&c.invoices&&c.invoices.length>0&&console.log("💰 ОТЛАДКА: Счета участника:",c.invoices.map(fe=>({id:fe.id,master_class_id:fe.master_class_id,participant_id:fe.participant_id,status:fe.status,amount:fe.amount}))),g.length>0&&(c!=null&&c.invoices)&&console.log("🔗 ОТЛАДКА: Сопоставление детей и счетов:",g.map(fe=>{const we=c.invoices.filter(M=>M.participant_id===fe.id);return{childId:fe.id,childName:fe.name,invoices:we.map(M=>({id:M.id,master_class_id:M.master_class_id,status:M.status}))}}))},[n.length,i.length,o.length,g.length,n,g,ae]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-100 via-pink-100 to-blue-100 relative overflow-hidden",children:[s.jsx(f0,{count:15,className:"opacity-40"}),s.jsx(Zc,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6 mt-20",children:[s.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-800 mb-3 sm:mb-4",children:["Добро пожаловать, ",e==null?void 0:e.name,"! 👋"]}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-600 max-w-2xl mx-auto px-2",children:"Управляйте записями детей на мастер-классы"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6 sm:mb-8",children:[s.jsx(Ce,{className:"bg-orange-50/80 backdrop-blur-sm border-orange-200 hover:shadow-lg transition-all duration-300",children:s.jsxs(Ae,{className:"p-3 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-1",children:[s.jsx(gs,{className:"w-5 h-5 text-orange-600 mr-2"}),s.jsx("div",{className:"text-xl font-bold text-orange-600",children:g.length})]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Детей"})]})}),s.jsx(Ce,{className:"bg-purple-50/80 backdrop-blur-sm border-purple-200 hover:shadow-lg transition-all duration-300",children:s.jsxs(Ae,{className:"p-3 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-1",children:[s.jsx(ua,{className:"w-5 h-5 text-purple-600 mr-2"}),s.jsx("div",{className:"text-xl font-bold text-purple-600",children:Ot.pending})]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Ожидают подтверждения"})]})}),s.jsx(Ce,{className:"bg-blue-50/80 backdrop-blur-sm border-blue-200 hover:shadow-lg transition-all duration-300",children:s.jsxs(Ae,{className:"p-3 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-1",children:[s.jsx(zr,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("div",{className:"text-xl font-bold text-blue-600",children:Ot.completed})]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Завершенных заказов"})]})}),s.jsx(Ce,{className:"bg-green-50/80 backdrop-blur-sm border-green-200 hover:shadow-lg transition-all duration-300",children:s.jsxs(Ae,{className:"p-3 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-1",children:[s.jsx(ss,{className:"w-5 h-5 text-green-600 mr-2"}),s.jsx("div",{className:"text-xl font-bold text-green-600",children:Pe.total})]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Доступных мастер-классов"})]})})]}),s.jsxs(pE,{value:f,onValueChange:p,className:"space-y-6",children:[s.jsxs(rv,{className:"grid w-full grid-cols-3 bg-white/80 backdrop-blur-sm",children:[s.jsxs(Gn,{value:"children",className:"data-[state=active]:bg-orange-500 data-[state=active]:text-white",children:[s.jsx(gs,{className:"w-4 h-4 mr-2"}),"Мои дети"]}),s.jsxs(Gn,{value:"workshops",className:"data-[state=active]:bg-purple-500 data-[state=active]:text-white",children:[s.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Мастер-классы"]}),s.jsxs(Gn,{value:"history",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white",children:[s.jsx(zr,{className:"w-4 h-4 mr-2"}),"История"]})]}),s.jsx(qn,{value:"children",className:"space-y-4",children:g.length===0?s.jsx(Ce,{className:"text-center py-12 bg-gradient-to-br from-orange-50 to-purple-50 border-orange-300",children:s.jsxs(Ae,{className:"space-y-4",children:[s.jsx("div",{className:"text-6xl mb-4",children:"👶"}),s.jsx("div",{className:"text-xl font-semibold text-gray-800 mb-2",children:"У вас пока нет привязанных детей"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Дети автоматически привязываются к вашему аккаунту при регистрации"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Если у вас возникли проблемы, обратитесь к администратору"})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map(H=>s.jsxs(Ce,{className:"hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-orange-50 to-purple-50 border-orange-300",children:[s.jsxs(Je,{className:"p-4 sm:p-6",children:[s.jsxs(qe,{className:"text-xl sm:text-2xl text-orange-600 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gs,{className:"w-5 h-5"}),s.jsx("span",{children:H.name})]}),s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>Se(H),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-100",children:s.jsx(hr,{className:"w-4 h-4"})})]}),s.jsxs(ft,{className:"text-sm sm:text-base flex items-center space-x-2",children:[s.jsx(tc,{className:"w-4 h-4"}),s.jsxs("span",{children:[H.age," лет • ",H.schoolName," • ",H.classGroup]})]})]}),s.jsx(Ae,{className:"space-y-4"})]},H.id))}),s.jsx("div",{className:"text-center mt-6",children:s.jsxs(gr,{open:y,onOpenChange:N,children:[s.jsx(Xg,{asChild:!0,children:s.jsxs(q,{className:"bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white",children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),"Добавить ребенка"]})}),s.jsxs(dr,{className:"sm:max-w-[425px]",children:[s.jsxs(jr,{children:[s.jsx(ur,{children:"Добавить нового ребенка"}),s.jsx(br,{children:"Заполните информацию о ребенке для записи на мастер-классы"})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"childName",children:"Имя"}),s.jsx(st,{id:"childName",value:j.name,onChange:H=>b(fe=>({...fe,name:H.target.value})),placeholder:"Введите имя"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"childSurname",children:"Фамилия"}),s.jsx(st,{id:"childSurname",value:j.surname,onChange:H=>b(fe=>({...fe,surname:H.target.value})),placeholder:"Введите фамилию"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"childAge",children:"Возраст"}),s.jsx(st,{id:"childAge",type:"number",min:"1",max:"18",value:j.age||"",onChange:H=>b(fe=>({...fe,age:parseInt(H.target.value)||void 0})),placeholder:"Введите возраст"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"childSchool",children:"Школа/сад"}),s.jsxs(kt,{onValueChange:P,value:_,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите школу или сад"})}),s.jsx(_t,{children:i.map(H=>s.jsx(Ze,{value:H.id,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:H.name}),s.jsx("div",{className:"text-sm text-gray-500",children:H.address})]})},H.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"childClass",children:"Класс/группа"}),s.jsxs(kt,{onValueChange:H=>b(fe=>({...fe,class:H})),value:j.class,disabled:!_,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите класс или группу"})}),s.jsx(_t,{children:C.map(H=>s.jsx(Ze,{value:H,children:H},H))})]}),!_&&s.jsx("p",{className:"text-sm text-gray-500",children:"Сначала выберите школу"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"childShift",children:"Смена"}),s.jsxs(kt,{onValueChange:H=>b(fe=>({...fe,shift:H})),value:j.shift,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите смену"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"1",children:"Первая смена"}),s.jsx(Ze,{value:"2",children:"Вторая смена"})]})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(q,{variant:"outline",onClick:()=>N(!1),children:"Отмена"}),s.jsx(q,{onClick:ce,children:"Добавить ребенка"})]})]})]})})]})}),s.jsxs(qn,{value:"workshops",className:"space-y-4",children:[Pe.total===0?s.jsx(Ce,{className:"bg-white/80 backdrop-blur-sm",children:s.jsxs(Ae,{className:"p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🎨"}),s.jsx("div",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Нет мастер-классов в вашем классе"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"К сожалению, в данный момент нет доступных мастер-классов для классов ваших детей. Но вы можете подать заявку на проведение мастер-класса!"}),s.jsx(q,{onClick:()=>E(!0),className:"bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200",children:"📝 Подать заявку на проведение"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Мы рассмотрим вашу заявку и свяжемся с вами"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Доступные мастер-классы"}),s.jsxs(rt,{variant:"secondary",className:"text-sm",children:[Pe.total," найдено"]})]}),Pe.workshops.map(H=>{const fe=g.filter(M=>H.children.includes(M.id)),we=fe.map(M=>M.name).join(", ");return s.jsxs(Ce,{className:"hover:shadow-xl transition-all duration-300 bg-gradient-to-br from-orange-50 to-purple-50 border-orange-300",children:[s.jsxs(Je,{className:"relative p-4 sm:p-6",children:[s.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[s.jsxs(rt,{className:"bg-orange-500 text-white text-xs",children:["👥 ",fe.length," ",fe.length===1?"ребенок":fe.length<5?"ребенка":"детей"]}),s.jsxs(rt,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:["🎯 ",H.participantsCount||0," ",pe(H.participantsCount||0)]}),H.invoiceStatus&&s.jsx(rt,{variant:H.invoiceStatus==="paid"?"default":H.invoiceStatus==="pending"?"secondary":"destructive",className:"text-xs",children:H.invoiceStatus==="paid"?"💰 Счет оплачен":H.invoiceStatus==="pending"?"📋 Счет ожидает оплаты":"❌ Счет отменен"})]}),s.jsxs(qe,{className:"text-lg sm:text-xl text-orange-600 flex items-center space-x-2",children:[s.jsx(Hr,{className:"w-5 h-5"}),s.jsx("span",{children:H.title})]}),s.jsxs(ft,{className:"text-sm",children:["Студия: МК Восковые ручки • Класс: ",H.classGroup]})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tn,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:H.schoolName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{children:["Класс: ",H.classGroup]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Cn,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:new Date(H.date).toLocaleDateString("ru-RU")})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xr,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:H.time})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gs,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:H.invoiceStatus&&H.invoiceStatus!=="cancelled"?`На мастер-класс записан(а): ${we}`:`Дети: ${we}`})]})]}),!H.invoiceStatus||H.invoiceStatus==="cancelled"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{onClick:()=>ke(H),className:"w-full bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"🎨 Записать детей"}),s.jsxs("p",{className:"text-xs text-gray-600 text-center",children:["Доступно для: ",we," (",H.classGroup,")"]})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(q,{onClick:()=>dt(H),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"🔍 Детали заказа"}),H.invoiceStatus==="pending"&&s.jsx(q,{onClick:()=>qt(H),className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"💳 Оплатить заказ"}),s.jsx("p",{className:"text-xs text-gray-600 text-center",children:H.invoiceStatus==="paid"?`${we} записаны на мастер-класс!`:H.invoiceStatus==="pending"?`Ожидаем оплату для: ${we}`:`Счета для ${we} были отменены`})]})]})]},H.id)})]}),s.jsxs(Ce,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",children:[s.jsx(Je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Заявки на проведение мастер-классов"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${B?"bg-green-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm text-blue-600",children:B?"Автообновление":"Ручное обновление"})]})]})}),s.jsx(Ae,{className:"space-y-4",children:I.length>0?s.jsxs(s.Fragment,{children:[I.map(H=>s.jsxs("div",{className:"bg-white/60 rounded-lg p-4 border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tn,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-blue-800",children:H.school_name})]}),s.jsx(rt,{className:`${H.status==="pending"?"bg-yellow-100 text-yellow-800 border-yellow-200":H.status==="approved"?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"} border`,children:H.status==="pending"?"⏳ Ожидает рассмотрения":H.status==="approved"?"✅ Одобрено":"❌ Отклонено"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tc,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-gray-700",children:["Класс: ",H.class_group]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-gray-700",children:["Желаемая дата: ",new Date(H.desired_date).toLocaleDateString("ru-RU")]})]})]}),H.notes&&s.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Ваши примечания:"}),s.jsx("div",{className:"text-sm text-gray-600",children:H.notes})]}),H.admin_notes&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Ответ администратора:"}),s.jsx("div",{className:"text-sm text-blue-600",children:H.admin_notes})]}),s.jsxs("div",{className:"mt-3 text-xs text-gray-500 border-t pt-2",children:["Создано: ",new Date(H.created_at).toLocaleString("ru-RU"),H.updated_at!==H.created_at&&` • Обновлено: ${new Date(H.updated_at).toLocaleString("ru-RU")}`]})]},H.id)),s.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-blue-600",children:me.total}),s.jsx("div",{className:"text-xs text-blue-600",children:"Всего заявок"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-yellow-600",children:me.pending}),s.jsx("div",{className:"text-xs text-yellow-600",children:"Ожидают"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-green-600",children:me.approved}),s.jsx("div",{className:"text-xs text-green-600",children:"Одобрено"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-red-600",children:me.rejected}),s.jsx("div",{className:"text-xs text-red-600",children:"Отклонено"})]})]})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-4xl mb-4",children:"📝"}),s.jsx("div",{className:"text-lg font-semibold text-gray-600 mb-2",children:"У вас пока нет заявок"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"Хотите провести мастер-класс в классе вашего ребенка? Подайте заявку!"}),s.jsx(q,{onClick:()=>E(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200",children:"📝 Подать заявку на проведение"})]})})]})]}),s.jsx(qn,{value:"history",className:"space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 flex items-center space-x-2",children:[s.jsx(zr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600"}),s.jsx("span",{children:"История мастер-классов"})]}),je.total===0?s.jsx(Ce,{className:"bg-white/80 backdrop-blur-sm",children:s.jsxs(Ae,{className:"p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:"📚"}),s.jsx("div",{className:"text-lg font-semibold text-gray-600 mb-2",children:"История мастер-классов пуста"}),s.jsx("p",{className:"text-gray-500",children:"У вас пока нет прошедших мастер-классов"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Прошедшие мастер-классы"}),s.jsxs(rt,{variant:"secondary",className:"text-sm",children:[je.total," найдено"]})]}),je.workshops.map(H=>{const fe=g.filter(M=>H.children.includes(M.id)),we=fe.map(M=>M.name).join(", ");return s.jsxs(Ce,{className:"hover:shadow-lg transition-all duration-300 bg-gradient-to-br from-gray-50 to-blue-50 border-gray-300",children:[s.jsxs(Je,{className:"relative p-4 sm:p-6",children:[s.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[s.jsx(rt,{className:"bg-gray-500 text-white text-xs",children:"📅 Прошедший"}),s.jsxs(rt,{className:"bg-blue-500 text-white text-xs",children:["👥 ",fe.length," ",fe.length===1?"ребенок":fe.length<5?"ребенка":"детей"]}),H.invoiceStatus&&s.jsx(rt,{variant:H.invoiceStatus==="paid"?"default":H.invoiceStatus==="pending"?"secondary":"destructive",className:"text-xs",children:H.invoiceStatus==="paid"?"✅ Оплачен":H.invoiceStatus==="pending"?"⏳ Ожидает оплаты":"❌ Отменен"})]}),s.jsxs(qe,{className:"text-lg sm:text-xl text-gray-700 flex items-center space-x-2",children:[s.jsx(Hr,{className:"w-5 h-5"}),s.jsx("span",{children:H.title})]}),s.jsxs(ft,{className:"text-sm",children:["Студия: МК Восковые ручки • Класс: ",H.classGroup]})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Tn,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:H.schoolName})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{children:["Класс: ",H.classGroup]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Cn,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{children:["Дата: ",new Date(H.date).toLocaleDateString("ru-RU")]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xr,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{children:["Время: ",H.time]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gs,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:H.invoiceStatus&&H.invoiceStatus!=="cancelled"?`Участвовали: ${we}`:`Были доступны для: ${we}`})]})]}),H.childrenWithStatus.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Статус участия детей:"}),s.jsx("div",{className:"space-y-1",children:H.childrenWithStatus.map(M=>s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:M.childName}),s.jsx(rt,{variant:M.status==="paid"?"default":M.status==="pending"?"secondary":M.status==="cancelled"?"destructive":"outline",className:"text-xs",children:M.status==="paid"?"✅ Участвовал":M.status==="pending"?"⏳ Ожидал":M.status==="cancelled"?"❌ Отменен":"➖ Не участвовал"})]},M.childId))})]}),H.invoiceStatus==="pending"&&H.childrenWithStatus.some(M=>M.status==="pending"&&M.invoiceId)&&s.jsxs("div",{className:"mt-4 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[s.jsx(ua,{className:"w-5 h-5 text-orange-600"}),s.jsx("span",{className:"font-medium text-orange-800",children:"Требуется оплата"})]}),s.jsx("p",{className:"text-sm text-orange-700 mb-4",children:"У вас есть неоплаченные заявки на участие в этом мастер-классе"}),H.childrenWithStatus.filter(M=>M.status==="pending"&&M.invoiceId).map(M=>{const ge=M.invoice;return ge?s.jsxs("div",{className:"bg-white rounded-lg p-3 border border-orange-200 mb-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:M.childName}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Счет №",ge.id.slice(-8)]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"text-lg font-bold text-green-600",children:[ge.amount," ₽"]})})]}),s.jsx(av,{invoiceId:ge.id,amount:ge.amount,description:`Участие в мастер-классе "${H.title}" для ${M.childName}`,children:[{id:M.childId,name:M.childName,selectedServices:["Мастер-класс"],totalAmount:ge.amount}],masterClassName:H.title,eventDate:H.date,eventTime:H.time,onPaymentSuccess:()=>{t({title:"Оплата успешна! 🎉",description:"Статус счета обновлен. Спасибо за оплату!"}),r.invalidateQueries({queryKey:["workshopParticipation"]}),r.invalidateQueries({queryKey:["participantInvoices"]})},onPaymentError:Ne=>{console.error("Ошибка оплаты:",Ne)},className:"w-full",variant:"default",size:"default"})]},M.childId):null})]})]})]},H.id)})]}),x.length>0&&s.jsxs("div",{className:"space-y-4 mt-8",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-700 flex items-center space-x-2",children:[s.jsx(zr,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{children:"История регистраций"})]}),s.jsx("div",{className:"space-y-4",children:x.sort((H,fe)=>new Date(fe.createdAt||0).getTime()-new Date(H.createdAt||0).getTime()).map(H=>{const fe=g.find(M=>M.id===H.userId),we=n.find(M=>M.id===H.workshopId);return s.jsxs(Ce,{className:"bg-white/80 backdrop-blur-sm hover:shadow-lg transition-all duration-300",children:[s.jsxs(Je,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(qe,{className:"text-lg text-gray-800",children:(we==null?void 0:we.serviceName)||"Мастер-класс"}),s.jsx(rt,{variant:H.status==="confirmed"?"default":H.status==="pending"?"secondary":"destructive",className:"text-sm",children:H.status==="confirmed"?"✅ Подтверждено":H.status==="pending"?"⏳ Ожидает подтверждения":"❌ Отменено"})]}),s.jsxs(ft,{className:"text-gray-600",children:[fe==null?void 0:fe.name," • ",we==null?void 0:we.schoolName," • ",we==null?void 0:we.classGroup]})]}),s.jsxs(Ae,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Дата:"}),s.jsx("div",{className:"text-gray-600",children:we!=null&&we.date?new Date(we.date).toLocaleDateString("ru-RU"):"Не указана"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Время:"}),s.jsx("div",{className:"text-gray-600",children:(we==null?void 0:we.time)||"Не указано"})]})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Стоимость:"}),s.jsxs("div",{className:"text-green-600 font-semibold",children:[H.totalPrice||0," ₽"]})]}),H.createdAt&&s.jsxs("div",{className:"text-xs text-gray-500 border-t pt-2",children:["Дата записи: ",new Date(H.createdAt).toLocaleString("ru-RU")]})]})]},H.id)})})]})]})})]})]}),Z&&s.jsx(tF,{workshop:Z,children:g.filter(H=>Z.children.includes(H.id)),isOpen:U,onOpenChange:k,onRegistrationSuccess:gt,masterClasses:n}),Z&&s.jsx(rF,{workshop:Z,isOpen:R,onOpenChange:te}),(console.log("🔄 Dashboard: Рендерим MultiChildWorkshopModal с onRegistrationSuccess:",!!gt),null),s.jsx(iF,{isOpen:K,onOpenChange:H=>{re(H),H||localStorage.setItem("parent-onboarding-completed","true")}}),s.jsx(oF,{isOpen:V,onOpenChange:E}),s.jsx(gr,{open:xe,onOpenChange:J,children:s.jsxs(dr,{className:"edit-child-modal sm:max-w-[380px] max-h-[85vh] overflow-y-auto border-0 shadow-2xl bg-white/95 backdrop-blur-sm",children:[s.jsxs(jr,{className:"pb-4 border-b border-gray-100",children:[s.jsxs(ur,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(hr,{className:"w-5 h-5 text-orange-500"}),"Редактировать ребенка"]}),s.jsx(br,{className:"text-sm text-gray-600 mt-1",children:"Обновите информацию о ребенке"})]}),D&&s.jsxs("div",{className:"space-y-5 py-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"editChildName",className:"text-sm font-semibold text-gray-700",children:"Имя"}),s.jsx(st,{id:"editChildName",value:D.name.split(" ")[0]||"",onChange:H=>{const fe=D.name.split(" ").slice(1).join(" ")||"";X(we=>we?{...we,name:`${H.target.value} ${fe}`.trim()}:null)},placeholder:"Введите имя",className:"edit-child-input h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"editChildSurname",className:"text-sm font-semibold text-gray-700",children:"Фамилия"}),s.jsx(st,{id:"editChildSurname",value:D.name.split(" ").slice(1).join(" ")||"",onChange:H=>{const fe=D.name.split(" ")[0]||"";X(we=>we?{...we,name:`${fe} ${H.target.value}`.trim()}:null)},placeholder:"Введите фамилию",className:"edit-child-input h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"editChildAge",className:"text-sm font-semibold text-gray-700",children:"Возраст"}),s.jsx(st,{id:"editChildAge",type:"number",min:"1",max:"18",value:D.age||"",onChange:H=>X(fe=>fe?{...fe,age:parseInt(H.target.value)||void 0}:null),placeholder:"Введите возраст",className:"edit-child-input h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"editChildSchool",className:"text-sm font-semibold text-gray-700",children:"Школа/сад"}),s.jsxs(kt,{onValueChange:H=>{X(fe=>fe?{...fe,schoolId:H,classGroup:""}:null)},value:D.schoolId,children:[s.jsx(Et,{className:"edit-child-input h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20",children:s.jsx(At,{placeholder:"Выберите школу или сад"})}),s.jsx(_t,{children:i.map(H=>s.jsx(Ze,{value:H.id,children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:H.name}),s.jsx("div",{className:"text-sm text-gray-500",children:H.address})]})},H.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"editChildClass",className:"text-sm font-semibold text-gray-700",children:"Класс/группа"}),s.jsxs(kt,{onValueChange:H=>X(fe=>fe?{...fe,classGroup:H}:null),value:D.classGroup,disabled:!D.schoolId,children:[s.jsx(Et,{className:"edit-child-input h-10 text-sm border-gray-200 focus:border-orange-400 focus:ring-orange-400/20 disabled:opacity-50",children:s.jsx(At,{placeholder:"Выберите класс или группу"})}),s.jsx(_t,{children:(()=>{const H=i.find(fe=>fe.id===D.schoolId);return(H==null?void 0:H.classes.map(fe=>s.jsx(Ze,{value:fe,children:fe},fe)))||[]})()})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-100",children:[s.jsx(q,{variant:"outline",onClick:()=>{J(!1),X(null)},className:"edit-child-button h-10 px-6 text-sm border-gray-300 text-gray-700 hover:bg-gray-50",children:"Отмена"}),s.jsx(q,{onClick:ue,className:"edit-child-button h-10 px-6 text-sm bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white font-medium",children:"Сохранить изменения"})]})]})]})})]})},cF=({isOpen:e,onClose:t})=>{const{user:r,updateProfile:n}=Sr(),{toast:a}=Gt(),[i,o]=v.useState({name:"",surname:"",email:"",phone:""}),[l,c]=v.useState(!1);v.useEffect(()=>{r&&o({name:r.name||"",surname:r.surname||"",email:r.email||"",phone:r.phone||""})},[r]);const d=(f,p)=>{o(g=>({...g,[f]:p}))},u=async f=>{if(f.preventDefault(),!!(r!=null&&r.id))try{if(c(!0),!i.name){a({title:"Ошибка",description:"Имя обязательно для заполнения",variant:"destructive"});return}if(i.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)){a({title:"Ошибка",description:"Введите корректный email адрес",variant:"destructive"});return}if(i.phone&&!/^\+?[\d\s\-\(\)]+$/.test(i.phone)){a({title:"Ошибка",description:"Введите корректный номер телефона",variant:"destructive"});return}await n(i),a({title:"Успешно! 🎉",description:"Профиль обновлен"}),t()}catch(p){console.error("Error updating profile:",p),a({title:"Ошибка",description:"Не удалось обновить профиль",variant:"destructive"})}finally{c(!1)}},m=()=>{r&&o({name:r.name||"",surname:r.surname||"",email:r.email||"",phone:r.phone||""}),t()};return s.jsx(gr,{open:e,onOpenChange:t,children:s.jsxs(dr,{className:"max-w-md",children:[s.jsxs(jr,{children:[s.jsxs(ur,{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-5 h-5 text-orange-600"}),"Редактировать профиль"]}),s.jsx(br,{children:"Измените свои данные"})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"name",className:"flex items-center gap-2",children:[s.jsx(Oo,{className:"w-4 h-4"}),"Имя *"]}),s.jsx(st,{id:"name",value:i.name||"",onChange:f=>d("name",f.target.value),placeholder:"Введите имя",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"surname",className:"flex items-center gap-2",children:[s.jsx(Oo,{className:"w-4 h-4"}),"Фамилия"]}),s.jsx(st,{id:"surname",value:i.surname||"",onChange:f=>d("surname",f.target.value),placeholder:"Введите фамилию"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"email",className:"flex items-center gap-2",children:[s.jsx(s0,{className:"w-4 h-4"}),"Email"]}),s.jsx(st,{id:"email",type:"email",value:i.email||"",onChange:f=>d("email",f.target.value),placeholder:"example@email.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"phone",className:"flex items-center gap-2",children:[s.jsx(uu,{className:"w-4 h-4"}),"Телефон"]}),s.jsx(st,{id:"phone",type:"tel",value:i.phone||"",onChange:f=>d("phone",f.target.value),placeholder:"+7 (999) 123-45-67"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(q,{type:"button",variant:"outline",onClick:m,disabled:l,className:"flex-1",children:[s.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Отмена"]}),s.jsxs(q,{type:"submit",disabled:l,className:"flex-1 bg-gradient-to-r from-orange-500 to-purple-500",children:[s.jsx(Kr,{className:"w-4 h-4 mr-2"}),l?"Сохранение...":"Сохранить"]})]})]})]})})},dF=()=>{const{user:e,logout:t}=Sr(),{getChildrenByParentId:r}=nv(),{schools:n}=Ba(),{toast:a}=Gt(),[i,o]=v.useState(!1),[l,c]=v.useState([]),[d,u]=v.useState(!1),m=v.useMemo(()=>{const h=(e==null?void 0:e.name)||"",x=(e==null?void 0:e.surname)||"";return(h[0]+x[0]).toUpperCase()},[e==null?void 0:e.name,e==null?void 0:e.surname]),f=async()=>{if(e!=null&&e.id)try{u(!0);const h=await r(e.id);c(h)}catch(h){console.error("Error loading children:",h),a({title:"Ошибка",description:"Не удалось загрузить данные о детях",variant:"destructive"})}finally{u(!1)}};v.useMemo(()=>{f()},[e==null?void 0:e.id]);const p=h=>{if(!h)return"—";const x=n.find(w=>w.id===h);return(x==null?void 0:x.name)||"—"},g=h=>h===1?"год":h>=2&&h<=4?"года":"лет";return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-100 via-pink-100 to-blue-100",children:[s.jsx(Zc,{showBackButton:!0}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 pt-28 pb-6 space-y-6",children:[s.jsxs(Ce,{className:"bg-white/90 border-orange-200",children:[s.jsxs(Je,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-orange-400 to-purple-500 flex items-center justify-center text-white text-2xl font-bold",children:m}),s.jsxs("div",{children:[s.jsxs(qe,{className:"text-3xl",children:[e==null?void 0:e.name," ",e==null?void 0:e.surname]}),s.jsx(ft,{children:"Профиль родителя"})]})]}),s.jsxs(q,{onClick:()=>o(!0),variant:"outline",size:"sm",className:"border-orange-300 hover:bg-orange-50",children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),"Редактировать"]})]}),s.jsxs(Ae,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(e==null?void 0:e.email)&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(s0,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Email"}),s.jsx("div",{className:"font-medium",children:e.email})]})]}),(e==null?void 0:e.phone)&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(uu,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Телефон"}),s.jsx("div",{className:"font-medium",children:e.phone})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(gs,{className:"w-5 h-5 text-pink-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"Количество детей"}),s.jsx("div",{className:"font-medium",children:l.length})]})]})]})]}),s.jsxs(Ce,{className:"bg-white/90 border-purple-200",children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(gs,{className:"w-5 h-5 text-pink-600"}),"Мои дети"]}),s.jsx(ft,{children:"Управление профилями детей"})]}),s.jsx(Ae,{children:d?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Загрузка данных о детях..."}):l.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(gs,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"У вас пока нет добавленных детей"}),s.jsxs(q,{onClick:()=>window.location.href="/parent",className:"mt-4 bg-gradient-to-r from-orange-500 to-purple-500",children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),"Добавить ребенка"]})]}):s.jsx("div",{className:"space-y-4",children:l.map(h=>{var x,w;return s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-pink-400 to-blue-500 flex items-center justify-center text-white font-bold",children:(w=(x=h.name)==null?void 0:x[0])==null?void 0:w.toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[h.name," ",h.surname]}),s.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-4",children:[h.age&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gs,{className:"w-3 h-3"}),h.age," ",g(h.age)]}),h.class&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(or,{className:"w-3 h-3"}),h.class]}),h.schoolId&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(pS,{className:"w-3 h-3"}),p(h.schoolId)]})]})]})]}),s.jsx(rt,{variant:"secondary",className:"capitalize",children:h.role})]},h.id)})})})]})]}),s.jsx(cF,{isOpen:i,onClose:()=>o(!1)})]})},uF=(e,t,r=!1)=>{const n=v.useRef(null),a=v.useRef(null),i=v.useRef(null),o=v.useRef(0),{playMessageSound:l}=iv(),[c,d]=v.useState({isConnected:!1,isConnecting:!1,connectionAttempts:0}),u=3,m=2e3,f=v.useCallback(()=>{var h,x;if(((h=n.current)==null?void 0:h.readyState)===WebSocket.OPEN||((x=n.current)==null?void 0:x.readyState)===WebSocket.CONNECTING){console.log("🔌 WebSocket: Уже подключен или подключается, пропускаем");return}if(c.isConnecting){console.log("🔌 WebSocket: Уже идет подключение, пропускаем");return}d(w=>({...w,isConnecting:!0}));try{const w=window.location.protocol==="https:"?"wss:":"ws:",y=window.location.host,N=w==="wss:"?`wss://${y}/api/chat/ws?userId=${t}&isAdmin=${r}`:`${uh}?userId=${t}&isAdmin=${r}`;console.log("🔌 Подключение к WebSocket:",N),n.current=new WebSocket(N),n.current.onopen=()=>{if(console.log("🔌 WebSocket соединение установлено"),d({isConnected:!0,isConnecting:!1,connectionAttempts:0}),o.current=0,i.current=setInterval(()=>{var j;((j=n.current)==null?void 0:j.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"ping"}))},6e4),r)n.current.send(JSON.stringify({type:"subscribe",channels:["admin:all","chat:all"]}));else{const j=[`user:${t}`];e&&j.push(`chat:${e}`),n.current.send(JSON.stringify({type:"subscribe",channels:j}))}},n.current.onmessage=j=>{try{const b=JSON.parse(j.data);switch(b.type){case"connection_established":console.log("🔌 WebSocket соединение подтверждено:",b.data);break;case"chat_message":(r||b.data.chatId===e)&&(b.data.senderId!==t&&l(),console.log("📨 Получено новое сообщение через WebSocket:",b.data),!r&&b.data.senderType==="admin"&&console.log("📨 Родитель получил сообщение от админа, обновляем UI"));break;case"chat_list_update":r&&console.log("📋 Обновление списка чатов через WebSocket:",b.data);break;case"new_chat":r&&console.log("🆕 Новый чат через WebSocket:",b.data);break;case"unread_count_update":console.log("🔢 Обновление непрочитанных через WebSocket:",b.data);break;case"chat_status_change":b.data.chatId===e&&console.log("📊 Изменение статуса чата через WebSocket:",b.data.status);break;case"invoice_update":b.data.userId===t&&console.log("💰 Обновление счета через WebSocket:",b.data);break;case"master_class_update":console.log("🎨 Обновление мастер-класса через WebSocket:",b.data);break;case"user_registration":r&&console.log("👤 Новая регистрация пользователя через WebSocket:",b.data);break;case"system_notification":console.log("🔔 Системное уведомление через WebSocket:",b.data);break;case"pong":break;default:console.log("📨 Неизвестный тип WebSocket сообщения:",b.type)}}catch(b){console.error("❌ Ошибка парсинга WebSocket сообщения:",b)}},n.current.onclose=j=>{console.log("🔌 WebSocket соединение закрыто:",j.code,j.reason),d(b=>({...b,isConnected:!1,isConnecting:!1})),i.current&&(clearInterval(i.current),i.current=null),j.code!==1e3&&o.current<u?(o.current+=1,console.log(`🔄 Попытка переподключения ${o.current}/${u}`),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{d(b=>({...b,connectionAttempts:o.current})),f()},m)):o.current>=u&&(console.log("❌ Превышен лимит попыток переподключения"),d(b=>({...b,lastError:"Connection failed after multiple attempts"})))},n.current.onerror=j=>{console.error("❌ WebSocket ошибка:",j),d(b=>({...b,lastError:"Connection error"}))}}catch(w){console.error("❌ Ошибка создания WebSocket:",w),d(y=>({...y,isConnecting:!1,lastError:"Failed to create connection"}))}},[e,t,r]),p=v.useCallback(h=>{var x;((x=n.current)==null?void 0:x.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"new_message",data:{message:h,chatId:e}}))},[e]),g=v.useCallback(()=>{console.log("🔌 WebSocket: Отключение соединения"),a.current&&(clearTimeout(a.current),a.current=null),i.current&&(clearInterval(i.current),i.current=null),n.current&&(n.current.close(1e3,"Manual disconnect"),n.current=null),d({isConnected:!1,isConnecting:!1,connectionAttempts:0}),o.current=0},[]);return v.useEffect(()=>(t&&(console.log("🔌 WebSocket: useEffect: Подключаемся к WebSocket"),f()),()=>{console.log("🔌 WebSocket: useEffect cleanup: Отключаем WebSocket"),g()}),[t,f,g]),v.useEffect(()=>{var h;!r&&e&&c.isConnected&&((h=n.current)==null?void 0:h.readyState)===WebSocket.OPEN&&(n.current.send(JSON.stringify({type:"unsubscribe",channels:[`chat:${e}`]})),n.current.send(JSON.stringify({type:"subscribe",channels:[`chat:${e}`,`user:${t}`]})))},[e,c.isConnected,r,t]),{...c,sendMessage:p,disconnect:g,connect:f,subscribe:v.useCallback(h=>{var x;((x=n.current)==null?void 0:x.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"subscribe",channels:h}))},[]),unsubscribe:v.useCallback(h=>{var x;((x=n.current)==null?void 0:x.readyState)===WebSocket.OPEN&&n.current.send(JSON.stringify({type:"unsubscribe",channels:h}))},[])}},fF=({school:e,isOpen:t,onOpenChange:r,onSubmit:n,trigger:a})=>{const{toast:i}=Gt(),[o,l]=v.useState(!1),[c,d]=v.useState({name:"",address:"",teacher:"",teacherPhone:"",notes:"",classes:[]}),[u,m]=v.useState("");v.useEffect(()=>{var h;e?(d({name:e.name,address:e.address,teacher:e.teacher||"",teacherPhone:e.teacherPhone||"",notes:e.notes||"",classes:e.classes||[]}),m(((h=e.classes)==null?void 0:h.join(", "))||"")):(d({name:"",address:"",teacher:"",notes:"",classes:[]}),m(""))},[e,t]);const f=async h=>{if(h.preventDefault(),!c.name.trim()||!c.address.trim()){i({title:"Ошибка валидации",description:"Название и адрес школы обязательны для заполнения",variant:"destructive"});return}try{l(!0),await n(c),i({title:e?"Школа обновлена":"Школа добавлена",description:e?"Школа успешно обновлена в системе":"Школа успешно добавлена в систему"}),r(!1)}catch{i({title:"Ошибка",description:"Не удалось сохранить школу",variant:"destructive"})}finally{l(!1)}},p=(h,x)=>{d(w=>({...w,[h]:x}))},g=h=>{m(h);const x=h.split(",").map(w=>w.trim()).filter(w=>w);d(w=>({...w,classes:x}))};return s.jsxs(gr,{open:t,onOpenChange:r,children:[s.jsx(Xg,{asChild:!0,children:a||s.jsxs(q,{children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),e?"Редактировать школу":"Добавить школу"]})}),s.jsxs(dr,{className:"sm:max-w-[500px]",children:[s.jsxs(jr,{children:[s.jsx(ur,{children:e?"Редактировать школу":"Добавить школу"}),s.jsx(br,{children:e?"Внесите изменения в информацию о школе":"Заполните информацию о новой школе"})]}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"name",children:"Название школы *"}),s.jsx(st,{id:"name",value:c.name,onChange:h=>p("name",h.target.value),placeholder:"Введите название школы",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"address",children:"Адрес *"}),s.jsx(Fr,{id:"address",value:c.address,onChange:h=>p("address",h.target.value),placeholder:"Введите адрес школы",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"teacher",children:"Контактное лицо"}),s.jsx(st,{id:"teacher",value:c.teacher,onChange:h=>p("teacher",h.target.value),placeholder:"ФИО контактного лица"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"teacherPhone",children:"Телефон"}),s.jsx(st,{id:"teacherPhone",value:c.teacherPhone,onChange:h=>p("teacherPhone",h.target.value),placeholder:"+7 (999) 123-45-67"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"classes",children:"Классы/группы"}),s.jsx(st,{id:"classes",value:u,onChange:h=>g(h.target.value),placeholder:"1А, 2Б, 3В (через запятую)"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Введите классы через запятую (например: 1А, 2Б, 3В)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"notes",children:"Примечания"}),s.jsx(Fr,{id:"notes",value:c.notes,onChange:h=>p("notes",h.target.value),placeholder:"Дополнительная информация о школе"})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(q,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:o,children:"Отмена"}),s.jsx(q,{type:"submit",disabled:o,children:o?"Сохранение...":e?"Обновить":"Добавить"})]})]})]})]})},hF=({schools:e,onFiltersChange:t})=>{const[r,n]=v.useState(""),[a,i]=v.useState(""),[o,l]=v.useState(""),c=Array.from(new Set(e.map(w=>w.address.split(",")[0].trim()))).sort(),d=e.filter(w=>{const y=w.address.split(",")[0].trim();return r===""||y===r}),u=Array.from(new Set(d.map(w=>w.name))).sort(),m=e.find(w=>w.name===a),f=(m==null?void 0:m.classes)||[],p=w=>{const y=w==="all"?"":w;n(y),i(""),l(""),t({city:y,school:"",class:""})},g=w=>{const y=w==="all"?"":w;i(y),l(""),t({city:r,school:y,class:""})},h=w=>{const y=w==="all"?"":w;l(y),t({city:r,school:a,class:y})},x=()=>{n(""),i(""),l(""),t({city:"",school:"",class:""})};return e.length===0?s.jsxs(Ce,{className:"mb-4",children:[s.jsx(Je,{children:s.jsx(qe,{children:"Фильтры школ"})}),s.jsx(Ae,{children:s.jsx("p",{className:"text-muted-foreground",children:"Нет данных школ для фильтрации"})})]}):s.jsxs(Ce,{className:"mb-4",children:[s.jsx(Je,{children:s.jsxs(qe,{className:"flex items-center justify-between",children:["Фильтры школ (",e.length," школ)",(r||a||o)&&s.jsxs(q,{variant:"outline",size:"sm",onClick:x,className:"h-8 px-2",children:[s.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Очистить"]})]})}),s.jsx(Ae,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"city-filter",children:["Город (",c.length," городов)"]}),s.jsxs(kt,{value:r||"all",onValueChange:p,children:[s.jsx(Et,{id:"city-filter",children:s.jsx(At,{placeholder:"Выберите город"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все города"}),c.map(w=>s.jsx(Ze,{value:w,children:w},w))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"school-filter",children:["Школа/Детский сад (",u.length," школ)"]}),s.jsxs(kt,{value:a||"all",onValueChange:g,disabled:!r,children:[s.jsx(Et,{id:"school-filter",children:s.jsx(At,{placeholder:"Выберите школу"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все школы"}),u.map(w=>s.jsx(Ze,{value:w,children:w},w))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"class-filter",children:["Класс/Группа (",f.length," классов/групп)"]}),s.jsxs(kt,{value:o||"all",onValueChange:h,disabled:!a,children:[s.jsx(Et,{id:"class-filter",children:s.jsx(At,{placeholder:"Выберите класс/группу"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все классы/группы"}),f.map(w=>s.jsx(Ze,{value:w,children:w},w))]})]})]})]})})]})},mF=({open:e,onClose:t,onSubmit:r,loading:n=!1})=>{const[a,i]=v.useState({name:"",shortDescription:"",fullDescription:"",styles:[],options:[]}),[o,l]=v.useState({}),c=(f,p)=>{i(g=>({...g,[f]:p})),o[f]&&l(g=>({...g,[f]:""}))},d=()=>{const f={};return a.name.trim()||(f.name="Название услуги обязательно"),a.shortDescription.trim()||(f.shortDescription="Краткое описание обязательно"),l(f),Object.keys(f).length===0},u=async f=>{if(f.preventDefault(),!!d())try{await r(a),i({name:"",shortDescription:"",fullDescription:"",styles:[],options:[]}),l({}),t()}catch(p){console.error("Error creating service:",p)}},m=()=>{i({name:"",shortDescription:"",fullDescription:"",styles:[],options:[]}),l({}),t()};return s.jsx(gr,{open:e,onOpenChange:m,children:s.jsxs(dr,{className:"sm:max-w-[425px]",children:[s.jsxs(jr,{children:[s.jsx(ur,{children:"Добавить новую услугу"}),s.jsx(br,{children:"Создайте новую услугу для мастер-классов. Заполните все необходимые поля."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"name",children:["Название услуги ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(st,{id:"name",value:a.name,onChange:f=>c("name",f.target.value),placeholder:"Введите название услуги",className:o.name?"border-red-500":""}),o.name&&s.jsx("p",{className:"text-sm text-red-500",children:o.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"shortDescription",children:["Краткое описание ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Fr,{id:"shortDescription",value:a.shortDescription,onChange:f=>c("shortDescription",f.target.value),placeholder:"Краткое описание услуги",rows:2,className:o.shortDescription?"border-red-500":""}),o.shortDescription&&s.jsx("p",{className:"text-sm text-red-500",children:o.shortDescription})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"fullDescription",children:"Полное описание"}),s.jsx(Fr,{id:"fullDescription",value:a.fullDescription,onChange:f=>c("fullDescription",f.target.value),placeholder:"Подробное описание услуги",rows:3})]}),s.jsxs(kd,{children:[s.jsx(q,{type:"button",variant:"outline",onClick:m,disabled:n,children:"Отмена"}),s.jsx(q,{type:"submit",disabled:n,className:"bg-primary hover:bg-primary/90",children:n?"Создание...":"Создать услугу"})]})]})]})})},gE=({service:e,onEdit:t,onAddStyle:r,onAddOption:n,onViewStyle:a,onViewOption:i,onReorderStyles:o,onReorderOptions:l,onDelete:c})=>(console.log("ServiceCard: отображение услуги:",e),s.jsxs(Ce,{className:"h-full flex flex-col",children:[s.jsx(Je,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx(qe,{className:"text-lg",children:e.name}),s.jsx(ft,{className:"mt-1",children:e.shortDescription})]}),t&&s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>t(e),children:s.jsx(hr,{className:"h-4 w-4"})}),c&&s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{window.confirm(`Вы уверены, что хотите удалить услугу "${e.name}"? Это действие нельзя отменить.`)&&c(e.id)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Удалить услугу",children:s.jsx(Ao,{className:"h-4 w-4"})})]})}),s.jsxs(Ae,{className:"flex-1 space-y-4",children:[e.fullDescription&&s.jsx("p",{className:"text-sm text-muted-foreground",children:e.fullDescription}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Варианты ручек"}),r&&s.jsxs(q,{variant:"outline",size:"sm",onClick:()=>r(e.id),children:[s.jsx(ys,{className:"h-3 w-3 mr-1"}),"Добавить"]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.styles.length===0?s.jsx("p",{className:"text-xs text-muted-foreground",children:"Варианты ручек не добавлены"}):e.styles.map((d,u)=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(rt,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",onClick:()=>a==null?void 0:a(d,e.id),children:[d.name,d.price>0&&s.jsxs("span",{className:"ml-1 text-xs",children:["+",d.price,"₽"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(q,{variant:"ghost",size:"sm",className:"p-0 h-5 w-5",onClick:m=>{var y;if(m.stopPropagation(),!((y=e.styles[u-1])==null?void 0:y.id))return;const p=[...e.styles],g=p[u-1];p[u-1]=p[u],p[u]=g;const h=p.map(N=>N.id).filter(Boolean),x=e.styles.map(N=>N.id),w=h.every(N=>x.includes(N));h.length>0&&h.length===e.styles.length&&w&&o?(console.log("Reordering styles left:",{fromIndex:u,toIndex:u-1,orderIds:h,originalStyles:e.styles.map(N=>({id:N.id,name:N.name})),newOrder:p.map(N=>({id:N.id,name:N.name})),allIdsValid:w}),o(e.id,h)):console.error("Некорректные данные для сортировки стилей:",{orderIds:h,originalLength:e.styles.length,newLength:h.length,allIdsValid:w,originalIds:x})},"aria-label":"Переместить влево",title:"Переместить влево",children:"◀"}),s.jsx(q,{variant:"ghost",size:"sm",className:"p-0 h-5 w-5",onClick:m=>{var y;if(m.stopPropagation(),!((y=e.styles[u+1])==null?void 0:y.id))return;const p=[...e.styles],g=p[u+1];p[u+1]=p[u],p[u]=g;const h=p.map(N=>N.id).filter(Boolean),x=e.styles.map(N=>N.id),w=h.every(N=>x.includes(N));h.length>0&&h.length===e.styles.length&&w&&o?(console.log("Reordering styles right:",{fromIndex:u,toIndex:u+1,orderIds:h,originalStyles:e.styles.map(N=>({id:N.id,name:N.name})),newOrder:p.map(N=>({id:N.id,name:N.name})),allIdsValid:w}),o(e.id,h)):console.error("Некорректные данные для сортировки стилей:",{orderIds:h,originalLength:e.styles.length,newLength:h.length,allIdsValid:w,originalIds:x})},"aria-label":"Переместить вправо",title:"Переместить вправо",children:"▶"})]}),a&&s.jsx(q,{variant:"ghost",size:"sm",className:"p-0 h-auto w-auto",onClick:()=>a(d,e.id),children:s.jsx(Zp,{className:"h-3 w-3"})})]},d.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Дополнительные услуги"}),n&&s.jsxs(q,{variant:"outline",size:"sm",onClick:()=>n(e.id),children:[s.jsx(ys,{className:"h-3 w-3 mr-1"}),"Добавить"]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.options.length===0?s.jsx("p",{className:"text-xs text-muted-foreground",children:"Дополнительные услуги не добавлены"}):e.options.map((d,u)=>s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(rt,{variant:"outline",className:"cursor-pointer hover:bg-accent",onClick:()=>i==null?void 0:i(d,e.id),children:[d.name,d.price>0&&s.jsxs("span",{className:"ml-1 text-xs",children:["+",d.price,"₽"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(q,{variant:"ghost",size:"sm",className:"p-0 h-5 w-5",onClick:m=>{var y;if(m.stopPropagation(),!((y=e.options[u-1])==null?void 0:y.id))return;const p=[...e.options],g=p[u-1];p[u-1]=p[u],p[u]=g;const h=p.map(N=>N.id).filter(Boolean),x=e.options.map(N=>N.id),w=h.every(N=>x.includes(N));h.length>0&&h.length===e.options.length&&w&&l?(console.log("Reordering options left:",{fromIndex:u,toIndex:u-1,orderIds:h,originalOptions:e.options.map(N=>({id:N.id,name:N.name})),newOrder:p.map(N=>({id:N.id,name:N.name})),allIdsValid:w}),l(e.id,h)):console.error("Некорректные данные для сортировки опций:",{orderIds:h,originalLength:e.options.length,newLength:h.length,allIdsValid:w,originalIds:x})},"aria-label":"Переместить влево",title:"Переместить влево",children:"◀"}),s.jsx(q,{variant:"ghost",size:"sm",className:"p-0 h-5 w-5",onClick:m=>{var y;if(m.stopPropagation(),!((y=e.options[u+1])==null?void 0:y.id))return;const p=[...e.options],g=p[u+1];p[u+1]=p[u],p[u]=g;const h=p.map(N=>N.id).filter(Boolean),x=e.options.map(N=>N.id),w=h.every(N=>x.includes(N));h.length>0&&h.length===e.options.length&&w&&l?(console.log("Reordering options right:",{fromIndex:u,toIndex:u+1,orderIds:h,originalOptions:e.options.map(N=>({id:N.id,name:N.name})),newOrder:p.map(N=>({id:N.id,name:N.name})),allIdsValid:w}),l(e.id,h)):console.error("Некорректные данные для сортировки опций:",{orderIds:h,originalLength:e.options.length,newLength:h.length,allIdsValid:w,originalIds:x})},"aria-label":"Переместить вправо",title:"Переместить вправо",children:"▶"})]}),i&&s.jsx(q,{variant:"ghost",size:"sm",className:"p-0 h-auto w-auto",onClick:()=>i(d,e.id),children:s.jsx(Zp,{className:"h-3 w-3"})})]},d.id))})]})]})]})),pF=({open:e,onClose:t,type:r,data:n,onSubmit:a,loading:i=!1})=>{var A,U;const[o,l]=v.useState({name:(n==null?void 0:n.name)||"",shortDescription:(n==null?void 0:n.shortDescription)||"",fullDescription:(n==null?void 0:n.fullDescription)||"",price:(n==null?void 0:n.price)||0,avatar:(n==null?void 0:n.avatar)||void 0,images:(n==null?void 0:n.images)||[],videos:(n==null?void 0:n.videos)||[]}),[c,d]=v.useState({}),[u,m]=v.useState(!1),{toast:f}=Gt();v.useEffect(()=>{if(console.log("StyleOptionModal: useEffect triggered with data:",n),n){console.log("StyleOptionModal: updating form data with:",n);const k={name:n.name||"",shortDescription:n.shortDescription||"",fullDescription:n.fullDescription||"",price:n.price||0,avatar:n.avatar||void 0,images:n.images||[],videos:n.videos||[]};console.log("StyleOptionModal: new form data:",k),l(k)}else{const k={name:"",shortDescription:"",fullDescription:"",price:0,avatar:void 0,images:[],videos:[]};console.log("StyleOptionModal: clearing form with:",k),l(k)}},[n]);const p=v.useRef(null),g=v.useRef(null),h=v.useRef(null),x=r==="style",w=n?`Редактировать ${x?"стиль":"опцию"}`:`Добавить ${x?"стиль":"опцию"}`,y=(k,R)=>{console.log("StyleOptionModal: изменение поля",k,"на значение",R),l(te=>{const Z={...te,[k]:R};return console.log("StyleOptionModal: новые данные формы",Z),Z}),c[k]&&d(te=>({...te,[k]:""}))},N=()=>{const k={};return o.name.trim()||(k.name="Название обязательно"),o.shortDescription.trim()||(k.shortDescription="Краткое описание обязательно"),o.price<0&&(k.price="Цена не может быть отрицательной"),d(k),Object.keys(k).length===0},j=async(k,R)=>{var te,Z,se,ae,ne,K;m(!0);try{const re=Array.from(k);if(R==="images"){const D=((te=o.images)==null?void 0:te.length)||0,X=re.length;if(D+X>10){f({title:"Превышен лимит изображений",description:`Максимум 10 изображений. Сейчас: ${D}, пытаетесь добавить: ${X}`,variant:"destructive"}),m(!1);return}}else if(R==="videos"){const D=((Z=o.videos)==null?void 0:Z.length)||0,X=re.length;if(D+X>5){f({title:"Превышен лимит видео",description:`Максимум 5 видео. Сейчас: ${D}, пытаетесь добавить: ${X}`,variant:"destructive"}),m(!1);return}}const xe={};R==="avatar"?xe.avatar=re[0]:R==="images"?xe.images=re:R==="videos"&&(xe.videos=re),console.log("StyleOptionModal: загружаем файлы на сервер:",xe),console.log("StyleOptionModal: количество файлов по типам:",{avatar:xe.avatar?1:0,images:((se=xe.images)==null?void 0:se.length)||0,videos:((ae=xe.videos)==null?void 0:ae.length)||0});const J=await Q5.uploadServiceFiles(xe);console.log("StyleOptionModal: файлы загружены:",J),console.log("StyleOptionModal: количество загруженных файлов:",{avatar:J.avatar?1:0,images:((ne=J.images)==null?void 0:ne.length)||0,videos:((K=J.videos)==null?void 0:K.length)||0}),R==="avatar"&&J.avatar?l(D=>({...D,avatar:J.avatar})):R==="images"&&J.images?l(D=>({...D,images:[...D.images||[],...J.images]})):R==="videos"&&J.videos&&l(D=>({...D,videos:[...D.videos||[],...J.videos]}))}catch(re){console.error("Error uploading files:",re),f({title:"Ошибка загрузки файлов",description:re instanceof Error?re.message:"Неизвестная ошибка при загрузке файлов",variant:"destructive"})}finally{m(!1)}},b=(k,R)=>{console.log("StyleOptionModal: удаление файла",k,"индекс",R),l(te=>{const Z=te[k]||[],se=Z[R];se&&se.startsWith("blob:")&&URL.revokeObjectURL(se);const ae=Z.filter((ne,K)=>K!==R);return console.log("StyleOptionModal: новый массив файлов",k,ae),{...te,[k]:ae}})},_=()=>{console.log("StyleOptionModal: удаление аватара"),l(k=>(k.avatar&&k.avatar.startsWith("blob:")&&URL.revokeObjectURL(k.avatar),{...k,avatar:void 0}))},S=async k=>{var R,te;if(k.preventDefault(),console.log("StyleOptionModal: отправка формы с данными:",o),!!N())try{const Z={...o,price:typeof o.price=="string"?parseFloat(o.price)||0:o.price};n&&(Z.avatar||delete Z.avatar,(!Z.images||Z.images.length===0)&&delete Z.images,(!Z.videos||Z.videos.length===0)&&delete Z.videos),console.log("StyleOptionModal: данные для отправки с обработанной ценой:",Z),console.log("StyleOptionModal: проверка медиафайлов в submitData:",{avatar:Z.avatar,images:((R=Z.images)==null?void 0:R.length)||0,videos:((te=Z.videos)==null?void 0:te.length)||0}),await a(Z),C()}catch(Z){console.error(`Error ${n?"updating":"creating"} ${r}:`,Z)}},C=()=>{l({name:"",shortDescription:"",fullDescription:"",price:0,avatar:void 0,images:[],videos:[]}),d({}),t()};return s.jsx(gr,{open:e,onOpenChange:C,children:s.jsxs(dr,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(jr,{children:[s.jsx(ur,{children:w}),s.jsx(br,{children:"Заполните информацию и добавьте медиафайлы"})]}),s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"name",children:["Название ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(st,{id:"name",value:o.name,onChange:k=>y("name",k.target.value),placeholder:`Название ${x?"стиля":"опции"}`,className:c.name?"border-red-500":""}),c.name&&s.jsx("p",{className:"text-sm text-red-500",children:c.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"price",children:"Цена (₽)"}),s.jsx(st,{id:"price",type:"number",min:"0",step:"0.01",value:o.price,onChange:k=>{const R=k.target.value;console.log("StyleOptionModal: изменение цены, новое значение:",R),y("price",R===""?0:parseFloat(R)||0)},placeholder:"0",className:c.price?"border-red-500":""}),c.price&&s.jsx("p",{className:"text-sm text-red-500",children:c.price})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Te,{htmlFor:"shortDescription",children:["Краткое описание ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Fr,{id:"shortDescription",value:o.shortDescription,onChange:k=>y("shortDescription",k.target.value),placeholder:"Краткое описание",rows:2,className:c.shortDescription?"border-red-500":""}),c.shortDescription&&s.jsx("p",{className:"text-sm text-red-500",children:c.shortDescription})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"fullDescription",children:"Полное описание"}),s.jsx(Fr,{id:"fullDescription",value:o.fullDescription,onChange:k=>y("fullDescription",k.target.value),placeholder:"Подробное описание",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{children:"Аватар"}),s.jsxs("div",{className:"flex items-center gap-4",children:[o.avatar?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:kc(o.avatar||""),alt:"Avatar",className:"w-20 h-20 object-cover rounded-lg border cursor-pointer",onClick:()=>window.open(kc(o.avatar||""),"_blank"),title:"Кликните для просмотра в полном размере"}),s.jsx(q,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 w-6 h-6 p-0",onClick:_,children:s.jsx(Rt,{className:"w-3 h-3"})})]}):s.jsx("div",{className:"w-20 h-20 border border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:s.jsx(oh,{className:"w-6 h-6 text-gray-400"})}),s.jsxs(q,{type:"button",variant:"outline",onClick:()=>{var k;return(k=p.current)==null?void 0:k.click()},disabled:u,children:[s.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Загрузить аватар"]}),s.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:k=>k.target.files&&j(k.target.files,"avatar"),className:"hidden"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{children:"Изображения"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(q,{type:"button",variant:"outline",onClick:()=>{var k;return(k=g.current)==null?void 0:k.click()},disabled:u,children:[s.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Добавить изображения"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Максимум 10 изображений. Текущее количество: ",((A=o.images)==null?void 0:A.length)||0]}),s.jsx("input",{ref:g,type:"file",accept:"image/*",multiple:!0,onChange:k=>k.target.files&&j(k.target.files,"images"),className:"hidden"}),o.images&&o.images.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:o.images.map((k,R)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:kc(k),alt:`Image ${R+1}`,className:"w-20 h-20 object-cover rounded border cursor-pointer",onClick:()=>window.open(kc(k),"_blank"),title:"Кликните для просмотра в полном размере"}),s.jsx(q,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 w-6 h-6 p-0",onClick:()=>b("images",R),children:s.jsx(Rt,{className:"w-3 h-3"})})]},R))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{children:"Видео"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(q,{type:"button",variant:"outline",onClick:()=>{var k;return(k=h.current)==null?void 0:k.click()},disabled:u,children:[s.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Добавить видео"]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Максимум 5 видео. Текущее количество: ",((U=o.videos)==null?void 0:U.length)||0]}),s.jsx("input",{ref:h,type:"file",accept:"video/*",multiple:!0,onChange:k=>k.target.files&&j(k.target.files,"videos"),className:"hidden"}),o.videos&&o.videos.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:o.videos.map((k,R)=>s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"w-32 h-24 relative",children:[s.jsx("video",{src:kc(k),className:"w-full h-full object-cover rounded border",controls:!0,preload:"metadata"}),s.jsx(q,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 w-6 h-6 p-0",onClick:()=>b("videos",R),children:s.jsx(Rt,{className:"w-3 h-3"})})]}),s.jsxs("p",{className:"text-xs text-center mt-1 truncate w-32",children:["Видео ",R+1]})]},R))})]})]}),u&&s.jsx("div",{className:"text-center",children:s.jsx(rt,{variant:"secondary",children:"Загрузка файлов..."})}),s.jsxs(kd,{children:[s.jsx(q,{type:"button",variant:"outline",onClick:C,disabled:i||u,children:"Отмена"}),s.jsx(q,{type:"submit",disabled:i||u,className:"bg-primary hover:bg-primary/90",children:i?n?"Сохранение...":"Создание...":n?"Сохранить":"Создать"})]})]})]})})};function jt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function is(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function bn(e,t){const r=jt(e);return isNaN(t)?is(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Vs(e,t){const r=jt(e);if(isNaN(t))return is(e,NaN);if(!t)return r;const n=r.getDate(),a=is(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const ov=6048e5,xF=864e5;let gF={};function gu(){return gF}function bs(e,t){var l,c,d,u;const r=gu(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=jt(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Po(e){return bs(e,{weekStartsOn:1})}function vE(e){const t=jt(e),r=t.getFullYear(),n=is(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Po(n),i=is(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Po(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function rc(e){const t=jt(e);return t.setHours(0,0,0,0),t}function fh(e){const t=jt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ia(e,t){const r=rc(e),n=rc(t),a=+r-fh(r),i=+n-fh(n);return Math.round((a-i)/xF)}function vF(e){const t=vE(e),r=is(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Po(r)}function dx(e,t){const r=t*7;return bn(e,r)}function yF(e,t){return Vs(e,t*12)}function wF(e){let t;return e.forEach(function(r){const n=jt(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function NF(e){let t;return e.forEach(r=>{const n=jt(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Mn(e,t){const r=rc(e),n=rc(t);return+r==+n}function lv(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function jF(e){if(!lv(e)&&typeof e!="number")return!1;const t=jt(e);return!isNaN(Number(t))}function Od(e,t){const r=jt(e),n=jt(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function bF(e,t,r){const n=bs(e,r),a=bs(t,r),i=+n-fh(n),o=+a-fh(a);return Math.round((i-o)/ov)}function cv(e){const t=jt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Bn(e){const t=jt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function yE(e){const t=jt(e),r=is(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function dv(e,t){var l,c,d,u;const r=gu(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=jt(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function wE(e){return dv(e,{weekStartsOn:1})}const SF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},EF=(e,t,r)=>{let n;const a=SF[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Cl(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const _F={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},CF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},TF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kF={date:Cl({formats:_F,defaultWidth:"full"}),time:Cl({formats:CF,defaultWidth:"full"}),dateTime:Cl({formats:TF,defaultWidth:"full"})},AF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},OF=(e,t,r,n)=>AF[e];function sa(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const DF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},RF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},PF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},MF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},IF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},LF=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},$F={ordinalNumber:LF,era:sa({values:DF,defaultWidth:"wide"}),quarter:sa({values:RF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:sa({values:PF,defaultWidth:"wide"}),day:sa({values:FF,defaultWidth:"wide"}),dayPeriod:sa({values:MF,defaultWidth:"wide",formattingValues:IF,defaultFormattingWidth:"wide"})};function aa(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?WF(l,m=>m.test(o)):BF(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function BF(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function WF(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function NE(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const UF=/^(\d+)(th|st|nd|rd)?/i,zF=/\d+/i,HF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VF={any:[/^b/i,/^(a|c)/i]},GF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qF={any:[/1/i,/2/i,/3/i,/4/i]},XF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},KF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},QF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},JF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ZF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eM={ordinalNumber:NE({matchPattern:UF,parsePattern:zF,valueCallback:e=>parseInt(e,10)}),era:aa({matchPatterns:HF,defaultMatchWidth:"wide",parsePatterns:VF,defaultParseWidth:"any"}),quarter:aa({matchPatterns:GF,defaultMatchWidth:"wide",parsePatterns:qF,defaultParseWidth:"any",valueCallback:e=>e+1}),month:aa({matchPatterns:XF,defaultMatchWidth:"wide",parsePatterns:KF,defaultParseWidth:"any"}),day:aa({matchPatterns:YF,defaultMatchWidth:"wide",parsePatterns:QF,defaultParseWidth:"any"}),dayPeriod:aa({matchPatterns:JF,defaultMatchWidth:"any",parsePatterns:ZF,defaultParseWidth:"any"})},jE={code:"en-US",formatDistance:EF,formatLong:kF,formatRelative:OF,localize:$F,match:eM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tM(e){const t=jt(e);return ia(t,yE(t))+1}function bE(e){const t=jt(e),r=+Po(t)-+vF(t);return Math.round(r/ov)+1}function SE(e,t){var u,m,f,p;const r=jt(e),n=r.getFullYear(),a=gu(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=is(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=bs(o,t),c=is(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=bs(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function rM(e,t){var l,c,d,u;const r=gu(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=SE(e,t),i=is(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),bs(i,t)}function EE(e,t){const r=jt(e),n=+bs(r,t)-+rM(r,t);return Math.round(n/ov)+1}function $t(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Xa={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return $t(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):$t(r+1,2)},d(e,t){return $t(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return $t(e.getHours()%12||12,t.length)},H(e,t){return $t(e.getHours(),t.length)},m(e,t){return $t(e.getMinutes(),t.length)},s(e,t){return $t(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return $t(a,t.length)}},Jo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nw={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Xa.y(e,t)},Y:function(e,t,r,n){const a=SE(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return $t(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):$t(i,t.length)},R:function(e,t){const r=vE(e);return $t(r,t.length)},u:function(e,t){const r=e.getFullYear();return $t(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return $t(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return $t(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Xa.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return $t(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=EE(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):$t(a,t.length)},I:function(e,t,r){const n=bE(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):$t(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Xa.d(e,t)},D:function(e,t,r){const n=tM(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):$t(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return $t(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return $t(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return $t(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Jo.noon:n===0?a=Jo.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Jo.evening:n>=12?a=Jo.afternoon:n>=4?a=Jo.morning:a=Jo.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Xa.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Xa.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):$t(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):$t(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Xa.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Xa.s(e,t)},S:function(e,t){return Xa.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return aw(n);case"XXXX":case"XX":return Zi(n);case"XXXXX":case"XXX":default:return Zi(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return aw(n);case"xxxx":case"xx":return Zi(n);case"xxxxx":case"xxx":default:return Zi(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sw(n,":");case"OOOO":default:return"GMT"+Zi(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sw(n,":");case"zzzz":default:return"GMT"+Zi(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return $t(n,t.length)},T:function(e,t,r){const n=e.getTime();return $t(n,t.length)}};function sw(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+$t(i,2)}function aw(e,t){return e%60===0?(e>0?"-":"+")+$t(Math.abs(e)/60,2):Zi(e,t)}function Zi(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=$t(Math.trunc(n/60),2),i=$t(n%60,2);return r+a+t+i}const iw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_E=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},nM=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return iw(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",iw(n,t)).replace("{{time}}",_E(a,t))},sM={p:_E,P:nM},aM=/^D+$/,iM=/^Y+$/,oM=["D","DD","YY","YYYY"];function lM(e){return aM.test(e)}function cM(e){return iM.test(e)}function dM(e,t,r){const n=uM(e,t,r);if(console.warn(n),oM.includes(e))throw new RangeError(n)}function uM(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const fM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mM=/^'([^]*?)'?$/,pM=/''/g,xM=/[a-zA-Z]/;function Wo(e,t,r){var u,m,f,p,g,h,x,w;const n=gu(),a=(r==null?void 0:r.locale)??n.locale??jE,i=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((h=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((w=(x=n.locale)==null?void 0:x.options)==null?void 0:w.weekStartsOn)??0,l=jt(e);if(!jF(l))throw new RangeError("Invalid time value");let c=t.match(hM).map(y=>{const N=y[0];if(N==="p"||N==="P"){const j=sM[N];return j(y,a.formatLong)}return y}).join("").match(fM).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const N=y[0];if(N==="'")return{isToken:!1,value:gM(y)};if(nw[N])return{isToken:!0,value:y};if(N.match(xM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const N=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&cM(N)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&lM(N))&&dM(N,t,String(e));const j=nw[N[0]];return j(l,N,a.localize,d)}).join("")}function gM(e){const t=e.match(mM);return t?t[1].replace(pM,"'"):e}function vM(e){const t=jt(e),r=t.getFullYear(),n=t.getMonth(),a=is(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function yM(e){return Math.trunc(+jt(e)/1e3)}function wM(e){const t=jt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function NM(e,t){return bF(wM(e),Bn(e),t)+1}function ux(e,t){const r=jt(e),n=jt(t);return r.getTime()>n.getTime()}function CE(e,t){const r=jt(e),n=jt(t);return+r<+n}function ow(e,t,r){const n=bs(e,r),a=bs(t,r);return+n==+a}function uv(e,t){const r=jt(e),n=jt(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function jM(e,t){const r=jt(e),n=jt(t);return r.getFullYear()===n.getFullYear()}function vm(e,t){return bn(e,-t)}function ym(e,t){const r=jt(e),n=r.getFullYear(),a=r.getDate(),i=is(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=vM(i);return r.setMonth(t,Math.min(a,o)),r}function lw(e,t){const r=jt(e);return isNaN(+r)?is(e,NaN):(r.setFullYear(t),r)}function Ac(e,t){if(e.one!==void 0&&t===1)return e.one;const r=t%10,n=t%100;return r===1&&n!==11?e.singularNominative.replace("{{count}}",String(t)):r>=2&&r<=4&&(n<10||n>20)?e.singularGenitive.replace("{{count}}",String(t)):e.pluralGenitive.replace("{{count}}",String(t))}function vn(e){return(t,r)=>r!=null&&r.addSuffix?r.comparison&&r.comparison>0?e.future?Ac(e.future,t):"через "+Ac(e.regular,t):e.past?Ac(e.past,t):Ac(e.regular,t)+" назад":Ac(e.regular,t)}const bM={lessThanXSeconds:vn({regular:{one:"меньше секунды",singularNominative:"меньше {{count}} секунды",singularGenitive:"меньше {{count}} секунд",pluralGenitive:"меньше {{count}} секунд"},future:{one:"меньше, чем через секунду",singularNominative:"меньше, чем через {{count}} секунду",singularGenitive:"меньше, чем через {{count}} секунды",pluralGenitive:"меньше, чем через {{count}} секунд"}}),xSeconds:vn({regular:{singularNominative:"{{count}} секунда",singularGenitive:"{{count}} секунды",pluralGenitive:"{{count}} секунд"},past:{singularNominative:"{{count}} секунду назад",singularGenitive:"{{count}} секунды назад",pluralGenitive:"{{count}} секунд назад"},future:{singularNominative:"через {{count}} секунду",singularGenitive:"через {{count}} секунды",pluralGenitive:"через {{count}} секунд"}}),halfAMinute:(e,t)=>t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"через полминуты":"полминуты назад":"полминуты",lessThanXMinutes:vn({regular:{one:"меньше минуты",singularNominative:"меньше {{count}} минуты",singularGenitive:"меньше {{count}} минут",pluralGenitive:"меньше {{count}} минут"},future:{one:"меньше, чем через минуту",singularNominative:"меньше, чем через {{count}} минуту",singularGenitive:"меньше, чем через {{count}} минуты",pluralGenitive:"меньше, чем через {{count}} минут"}}),xMinutes:vn({regular:{singularNominative:"{{count}} минута",singularGenitive:"{{count}} минуты",pluralGenitive:"{{count}} минут"},past:{singularNominative:"{{count}} минуту назад",singularGenitive:"{{count}} минуты назад",pluralGenitive:"{{count}} минут назад"},future:{singularNominative:"через {{count}} минуту",singularGenitive:"через {{count}} минуты",pluralGenitive:"через {{count}} минут"}}),aboutXHours:vn({regular:{singularNominative:"около {{count}} часа",singularGenitive:"около {{count}} часов",pluralGenitive:"около {{count}} часов"},future:{singularNominative:"приблизительно через {{count}} час",singularGenitive:"приблизительно через {{count}} часа",pluralGenitive:"приблизительно через {{count}} часов"}}),xHours:vn({regular:{singularNominative:"{{count}} час",singularGenitive:"{{count}} часа",pluralGenitive:"{{count}} часов"}}),xDays:vn({regular:{singularNominative:"{{count}} день",singularGenitive:"{{count}} дня",pluralGenitive:"{{count}} дней"}}),aboutXWeeks:vn({regular:{singularNominative:"около {{count}} недели",singularGenitive:"около {{count}} недель",pluralGenitive:"около {{count}} недель"},future:{singularNominative:"приблизительно через {{count}} неделю",singularGenitive:"приблизительно через {{count}} недели",pluralGenitive:"приблизительно через {{count}} недель"}}),xWeeks:vn({regular:{singularNominative:"{{count}} неделя",singularGenitive:"{{count}} недели",pluralGenitive:"{{count}} недель"}}),aboutXMonths:vn({regular:{singularNominative:"около {{count}} месяца",singularGenitive:"около {{count}} месяцев",pluralGenitive:"около {{count}} месяцев"},future:{singularNominative:"приблизительно через {{count}} месяц",singularGenitive:"приблизительно через {{count}} месяца",pluralGenitive:"приблизительно через {{count}} месяцев"}}),xMonths:vn({regular:{singularNominative:"{{count}} месяц",singularGenitive:"{{count}} месяца",pluralGenitive:"{{count}} месяцев"}}),aboutXYears:vn({regular:{singularNominative:"около {{count}} года",singularGenitive:"около {{count}} лет",pluralGenitive:"около {{count}} лет"},future:{singularNominative:"приблизительно через {{count}} год",singularGenitive:"приблизительно через {{count}} года",pluralGenitive:"приблизительно через {{count}} лет"}}),xYears:vn({regular:{singularNominative:"{{count}} год",singularGenitive:"{{count}} года",pluralGenitive:"{{count}} лет"}}),overXYears:vn({regular:{singularNominative:"больше {{count}} года",singularGenitive:"больше {{count}} лет",pluralGenitive:"больше {{count}} лет"},future:{singularNominative:"больше, чем через {{count}} год",singularGenitive:"больше, чем через {{count}} года",pluralGenitive:"больше, чем через {{count}} лет"}}),almostXYears:vn({regular:{singularNominative:"почти {{count}} год",singularGenitive:"почти {{count}} года",pluralGenitive:"почти {{count}} лет"},future:{singularNominative:"почти через {{count}} год",singularGenitive:"почти через {{count}} года",pluralGenitive:"почти через {{count}} лет"}})},SM=(e,t,r)=>bM[e](t,r),EM={full:"EEEE, d MMMM y 'г.'",long:"d MMMM y 'г.'",medium:"d MMM y 'г.'",short:"dd.MM.y"},_M={full:"H:mm:ss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},CM={any:"{{date}}, {{time}}"},TM={date:Cl({formats:EM,defaultWidth:"full"}),time:Cl({formats:_M,defaultWidth:"full"}),dateTime:Cl({formats:CM,defaultWidth:"any"})},fv=["воскресенье","понедельник","вторник","среду","четверг","пятницу","субботу"];function kM(e){const t=fv[e];switch(e){case 0:return"'в прошлое "+t+" в' p";case 1:case 2:case 4:return"'в прошлый "+t+" в' p";case 3:case 5:case 6:return"'в прошлую "+t+" в' p"}}function cw(e){const t=fv[e];return e===2?"'во "+t+" в' p":"'в "+t+" в' p"}function AM(e){const t=fv[e];switch(e){case 0:return"'в следующее "+t+" в' p";case 1:case 2:case 4:return"'в следующий "+t+" в' p";case 3:case 5:case 6:return"'в следующую "+t+" в' p"}}const OM={lastWeek:(e,t,r)=>{const n=e.getDay();return ow(e,t,r)?cw(n):kM(n)},yesterday:"'вчера в' p",today:"'сегодня в' p",tomorrow:"'завтра в' p",nextWeek:(e,t,r)=>{const n=e.getDay();return ow(e,t,r)?cw(n):AM(n)},other:"P"},DM=(e,t,r,n)=>{const a=OM[e];return typeof a=="function"?a(t,r,n):a},RM={narrow:["до н.э.","н.э."],abbreviated:["до н. э.","н. э."],wide:["до нашей эры","нашей эры"]},PM={narrow:["1","2","3","4"],abbreviated:["1-й кв.","2-й кв.","3-й кв.","4-й кв."],wide:["1-й квартал","2-й квартал","3-й квартал","4-й квартал"]},FM={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","март","апр.","май","июнь","июль","авг.","сент.","окт.","нояб.","дек."],wide:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"]},MM={narrow:["Я","Ф","М","А","М","И","И","А","С","О","Н","Д"],abbreviated:["янв.","фев.","мар.","апр.","мая","июн.","июл.","авг.","сент.","окт.","нояб.","дек."],wide:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"]},IM={narrow:["В","П","В","С","Ч","П","С"],short:["вс","пн","вт","ср","чт","пт","сб"],abbreviated:["вск","пнд","втр","срд","чтв","птн","суб"],wide:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"]},LM={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утро",afternoon:"день",evening:"веч.",night:"ночь"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утро",afternoon:"день",evening:"вечер",night:"ночь"}},$M={narrow:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},abbreviated:{am:"ДП",pm:"ПП",midnight:"полн.",noon:"полд.",morning:"утра",afternoon:"дня",evening:"веч.",night:"ночи"},wide:{am:"ДП",pm:"ПП",midnight:"полночь",noon:"полдень",morning:"утра",afternoon:"дня",evening:"вечера",night:"ночи"}},BM=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;let a;return n==="date"?a="-е":n==="week"||n==="minute"||n==="second"?a="-я":a="-й",r+a},WM={ordinalNumber:BM,era:sa({values:RM,defaultWidth:"wide"}),quarter:sa({values:PM,defaultWidth:"wide",argumentCallback:e=>e-1}),month:sa({values:FM,defaultWidth:"wide",formattingValues:MM,defaultFormattingWidth:"wide"}),day:sa({values:IM,defaultWidth:"wide"}),dayPeriod:sa({values:LM,defaultWidth:"any",formattingValues:$M,defaultFormattingWidth:"wide"})},UM=/^(\d+)(-?(е|я|й|ое|ье|ая|ья|ый|ой|ий|ый))?/i,zM=/\d+/i,HM={narrow:/^((до )?н\.?\s?э\.?)/i,abbreviated:/^((до )?н\.?\s?э\.?)/i,wide:/^(до нашей эры|нашей эры|наша эра)/i},VM={any:[/^д/i,/^н/i]},GM={narrow:/^[1234]/i,abbreviated:/^[1234](-?[ыои]?й?)? кв.?/i,wide:/^[1234](-?[ыои]?й?)? квартал/i},qM={any:[/1/i,/2/i,/3/i,/4/i]},XM={narrow:/^[яфмаисонд]/i,abbreviated:/^(янв|фев|март?|апр|ма[йя]|июн[ья]?|июл[ья]?|авг|сент?|окт|нояб?|дек)\.?/i,wide:/^(январ[ья]|феврал[ья]|марта?|апрел[ья]|ма[йя]|июн[ья]|июл[ья]|августа?|сентябр[ья]|октябр[ья]|октябр[ья]|ноябр[ья]|декабр[ья])/i},KM={narrow:[/^я/i,/^ф/i,/^м/i,/^а/i,/^м/i,/^и/i,/^и/i,/^а/i,/^с/i,/^о/i,/^н/i,/^я/i],any:[/^я/i,/^ф/i,/^мар/i,/^ап/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^ав/i,/^с/i,/^о/i,/^н/i,/^д/i]},YM={narrow:/^[впсч]/i,short:/^(вс|во|пн|по|вт|ср|чт|че|пт|пя|сб|су)\.?/i,abbreviated:/^(вск|вос|пнд|пон|втр|вто|срд|сре|чтв|чет|птн|пят|суб).?/i,wide:/^(воскресень[ея]|понедельника?|вторника?|сред[аы]|четверга?|пятниц[аы]|суббот[аы])/i},QM={narrow:[/^в/i,/^п/i,/^в/i,/^с/i,/^ч/i,/^п/i,/^с/i],any:[/^в[ос]/i,/^п[он]/i,/^в/i,/^ср/i,/^ч/i,/^п[ят]/i,/^с[уб]/i]},JM={narrow:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,abbreviated:/^([дп]п|полн\.?|полд\.?|утр[оа]|день|дня|веч\.?|ноч[ьи])/i,wide:/^([дп]п|полночь|полдень|утр[оа]|день|дня|вечера?|ноч[ьи])/i},ZM={any:{am:/^дп/i,pm:/^пп/i,midnight:/^полн/i,noon:/^полд/i,morning:/^у/i,afternoon:/^д[ен]/i,evening:/^в/i,night:/^н/i}},eI={ordinalNumber:NE({matchPattern:UM,parsePattern:zM,valueCallback:e=>parseInt(e,10)}),era:aa({matchPatterns:HM,defaultMatchWidth:"wide",parsePatterns:VM,defaultParseWidth:"any"}),quarter:aa({matchPatterns:GM,defaultMatchWidth:"wide",parsePatterns:qM,defaultParseWidth:"any",valueCallback:e=>e+1}),month:aa({matchPatterns:XM,defaultMatchWidth:"wide",parsePatterns:KM,defaultParseWidth:"any"}),day:aa({matchPatterns:YM,defaultMatchWidth:"wide",parsePatterns:QM,defaultParseWidth:"any"}),dayPeriod:aa({matchPatterns:JM,defaultMatchWidth:"wide",parsePatterns:ZM,defaultParseWidth:"any"})},TE={code:"ru",formatDistance:SM,formatLong:TM,formatRelative:DM,localize:WM,match:eI,options:{weekStartsOn:1,firstWeekContainsDate:1}};var ct=function(){return ct=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ct.apply(this,arguments)};function tI(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function kE(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function vu(e){return e.mode==="multiple"}function yu(e){return e.mode==="range"}function m0(e){return e.mode==="single"}var rI={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function nI(e,t){return Wo(e,"LLLL y",t)}function sI(e,t){return Wo(e,"d",t)}function aI(e,t){return Wo(e,"LLLL",t)}function iI(e){return"".concat(e)}function oI(e,t){return Wo(e,"cccccc",t)}function lI(e,t){return Wo(e,"yyyy",t)}var cI=Object.freeze({__proto__:null,formatCaption:nI,formatDay:sI,formatMonthCaption:aI,formatWeekNumber:iI,formatWeekdayName:oI,formatYearCaption:lI}),dI=function(e,t,r){return Wo(e,"do MMMM (EEEE)",r)},uI=function(){return"Month: "},fI=function(){return"Go to next month"},hI=function(){return"Go to previous month"},mI=function(e,t){return Wo(e,"cccc",t)},pI=function(e){return"Week n. ".concat(e)},xI=function(){return"Year: "},gI=Object.freeze({__proto__:null,labelDay:dI,labelMonthDropdown:uI,labelNext:fI,labelPrevious:hI,labelWeekNumber:pI,labelWeekday:mI,labelYearDropdown:xI});function vI(){var e="buttons",t=rI,r=jE,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:cI,labels:gI,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function yI(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=Bn(n):t&&(i=new Date(t,0,1)),a?o=cv(a):r&&(o=new Date(r,11,31)),{fromDate:i?rc(i):void 0,toDate:o?rc(o):void 0}}var AE=v.createContext(void 0);function wI(e){var t,r=e.initialProps,n=vI(),a=yI(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(m0(r)||vu(r)||yu(r))&&(c=r.onSelect);var d=ct(ct(ct({},n),r),{captionLayout:l,classNames:ct(ct({},n.classNames),r.classNames),components:ct({},r.components),formatters:ct(ct({},n.formatters),r.formatters),fromDate:i,labels:ct(ct({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:ct(ct({},n.modifiers),r.modifiers),modifiersClassNames:ct(ct({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:ct(ct({},n.styles),r.styles),toDate:o});return s.jsx(AE.Provider,{value:d,children:e.children})}function tr(){var e=v.useContext(AE);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function OE(e){var t=tr(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function NI(e){return s.jsx("svg",ct({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function DE(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,d=tr(),u=(r=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:NI;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function jI(e){var t,r=tr(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var m=[];if(jM(n,a))for(var f=Bn(n),p=n.getMonth();p<=a.getMonth();p++)m.push(ym(f,p));else for(var f=Bn(new Date),p=0;p<=11;p++)m.push(ym(f,p));var g=function(x){var w=Number(x.target.value),y=ym(Bn(e.displayMonth),w);e.onChange(y)},h=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:DE;return s.jsx(h,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:m.map(function(x){return s.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function bI(e){var t,r=e.displayMonth,n=tr(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,m=n.labels.labelYearDropdown,f=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var p=a.getFullYear(),g=i.getFullYear(),h=p;h<=g;h++)f.push(lw(yE(new Date),h));var x=function(y){var N=lw(Bn(r),Number(y.target.value));e.onChange(N)},w=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:DE;return s.jsx(w,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:r.getFullYear(),caption:u(r,{locale:o}),children:f.map(function(y){return s.jsx("option",{value:y.getFullYear(),children:u(y,{locale:o})},y.getFullYear())})})}function SI(e,t){var r=v.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function EI(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Od(i,a)<0){var d=-1*(c-1);a=Vs(i,d)}return o&&Od(a,o)<0&&(a=o),Bn(a)}function _I(){var e=tr(),t=EI(e),r=SI(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Bn(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function CI(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Bn(e),i=Bn(Vs(a,n)),o=Od(i,a),l=[],c=0;c<o;c++){var d=Vs(a,c);l.push(d)}return r&&(l=l.reverse()),l}function TI(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Bn(e);if(!r)return Vs(l,o);var c=Od(r,e);if(!(c<i))return Vs(l,o)}}function kI(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=Bn(e);if(!r)return Vs(l,-o);var c=Od(l,r);if(!(c<=0))return Vs(l,-o)}}var RE=v.createContext(void 0);function AI(e){var t=tr(),r=_I(),n=r[0],a=r[1],i=CI(n,t),o=TI(n,t),l=kI(n,t),c=function(m){return i.some(function(f){return uv(m,f)})},d=function(m,f){c(m)||(f&&CE(m,f)?a(Vs(m,1+t.numberOfMonths*-1)):a(m))},u={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(RE.Provider,{value:u,children:e.children})}function wu(){var e=v.useContext(RE);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function dw(e){var t,r=tr(),n=r.classNames,a=r.styles,i=r.components,o=wu().goToMonth,l=function(u){o(Vs(u,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:OE,d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:d}),s.jsx(jI,{onChange:l,displayMonth:e.displayMonth}),s.jsx(bI,{onChange:l,displayMonth:e.displayMonth})]})}function OI(e){return s.jsx("svg",ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function DI(e){return s.jsx("svg",ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var hh=v.forwardRef(function(e,t){var r=tr(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=ct(ct({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",ct({},e,{ref:t,type:"button",className:o,style:l}))});function RI(e){var t,r,n=tr(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,m=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var f=d(e.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),g=u(e.nextMonth,{locale:i}),h=[o.nav_button,o.nav_button_next].join(" "),x=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:DI,w=(r=m==null?void 0:m.IconLeft)!==null&&r!==void 0?r:OI;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(hh,{name:"previous-month","aria-label":f,className:p,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(x,{className:o.nav_icon,style:l.nav_icon}):s.jsx(w,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(hh,{name:"next-month","aria-label":g,className:h,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(w,{className:o.nav_icon,style:l.nav_icon}):s.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function uw(e){var t=tr().numberOfMonths,r=wu(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return uv(e.displayMonth,g)}),c=l===0,d=l===o.length-1,u=t>1&&(c||!d),m=t>1&&(d||!c),f=function(){n&&i(n)},p=function(){a&&i(a)};return s.jsx(RI,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:n,onPreviousClick:f,onNextClick:p})}function PI(e){var t,r=tr(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:OE,d;return a?d=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?d=s.jsx(dw,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?d=s.jsxs(s.Fragment,{children:[s.jsx(dw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(uw,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(uw,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:d})}function FI(e){var t=tr(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function MI(e,t,r){for(var n=r?Po(new Date):bs(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=bn(n,i);a.push(o)}return a}function II(){var e=tr(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=MI(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(u,m){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},m)})]})}function LI(){var e,t=tr(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:II;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function $I(e){var t=tr(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var hv=v.createContext(void 0);function BI(e){if(!vu(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(hv.Provider,{value:t,children:e.children})}return s.jsx(WI,{initialProps:e.initialProps,children:e.children})}function WI(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(d,u,m){var f,p;(f=t.onDayClick)===null||f===void 0||f.call(t,d,u,m);var g=!!(u.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var h=!!(!u.selected&&i&&(n==null?void 0:n.length)===i);if(!h){var x=n?kE([],n):[];if(u.selected){var w=x.findIndex(function(y){return Mn(d,y)});x.splice(w,1)}else x.push(d);(p=t.onSelect)===null||p===void 0||p.call(t,x,d,u,m)}}},l={disabled:[]};n&&l.disabled.push(function(d){var u=i&&n.length>i-1,m=n.some(function(f){return Mn(f,d)});return!!(u&&!m)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(hv.Provider,{value:c,children:r})}function mv(){var e=v.useContext(hv);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function UI(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?Mn(a,e)&&Mn(n,e)?void 0:Mn(a,e)?{from:a,to:void 0}:Mn(n,e)?void 0:ux(n,e)?{from:e,to:a}:{from:n,to:e}:a?ux(e,a)?{from:a,to:e}:{from:e,to:a}:n?CE(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var pv=v.createContext(void 0);function zI(e){if(!yu(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(pv.Provider,{value:t,children:e.children})}return s.jsx(HI,{initialProps:e.initialProps,children:e.children})}function HI(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,d=function(p,g,h){var x,w;(x=t.onDayClick)===null||x===void 0||x.call(t,p,g,h);var y=UI(p,n);(w=t.onSelect)===null||w===void 0||w.call(t,y,p,g,h)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],o?(u.range_end=[o],Mn(i,o)||(u.range_middle=[{after:i,before:o}])):u.range_end=[i]):o&&(u.range_start=[o],u.range_end=[o]),l&&(i&&!o&&u.disabled.push({after:vm(i,l-1),before:bn(i,l-1)}),i&&o&&u.disabled.push({after:i,before:bn(i,l-1)}),!i&&o&&u.disabled.push({after:vm(o,l-1),before:bn(o,l-1)})),c){if(i&&!o&&(u.disabled.push({before:bn(i,-c+1)}),u.disabled.push({after:bn(i,c-1)})),i&&o){var m=ia(o,i)+1,f=c-m;u.disabled.push({before:vm(i,f)}),u.disabled.push({after:bn(o,f)})}!i&&o&&(u.disabled.push({before:bn(o,-c+1)}),u.disabled.push({after:bn(o,c-1)}))}return s.jsx(pv.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function xv(){var e=v.useContext(pv);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Tf(e){return Array.isArray(e)?kE([],e):e!==void 0?[e]:[]}function VI(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Tf(a)}),t}var Gs;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Gs||(Gs={}));var GI=Gs.Selected,va=Gs.Disabled,qI=Gs.Hidden,XI=Gs.Today,wm=Gs.RangeEnd,Nm=Gs.RangeMiddle,jm=Gs.RangeStart,KI=Gs.Outside;function YI(e,t,r){var n,a=(n={},n[GI]=Tf(e.selected),n[va]=Tf(e.disabled),n[qI]=Tf(e.hidden),n[XI]=[e.today],n[wm]=[],n[Nm]=[],n[jm]=[],n[KI]=[],n);return e.fromDate&&a[va].push({before:e.fromDate}),e.toDate&&a[va].push({after:e.toDate}),vu(e)?a[va]=a[va].concat(t.modifiers[va]):yu(e)&&(a[va]=a[va].concat(r.modifiers[va]),a[jm]=r.modifiers[jm],a[Nm]=r.modifiers[Nm],a[wm]=r.modifiers[wm]),a}var PE=v.createContext(void 0);function QI(e){var t=tr(),r=mv(),n=xv(),a=YI(t,r,n),i=VI(t.modifiers),o=ct(ct({},a),i);return s.jsx(PE.Provider,{value:o,children:e.children})}function FE(){var e=v.useContext(PE);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function JI(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function ZI(e){return!!(e&&typeof e=="object"&&"from"in e)}function e8(e){return!!(e&&typeof e=="object"&&"after"in e)}function t8(e){return!!(e&&typeof e=="object"&&"before"in e)}function r8(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function n8(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=ia(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=ia(e,n)>=0&&ia(a,e)>=0;return o}return a?Mn(a,e):n?Mn(n,e):!1}function s8(e){return lv(e)}function a8(e){return Array.isArray(e)&&e.every(lv)}function i8(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(s8(r))return Mn(e,r);if(a8(r))return r.includes(e);if(ZI(r))return n8(e,r);if(r8(r))return r.dayOfWeek.includes(e.getDay());if(JI(r)){var n=ia(r.before,e),a=ia(r.after,e),i=n>0,o=a<0,l=ux(r.before,r.after);return l?o&&i:i||o}return e8(r)?ia(e,r.after)>0:t8(r)?ia(r.before,e)>0:typeof r=="function"?r(e):!1})}function gv(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return i8(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!uv(e,r)&&(a.outside=!0),a}function o8(e,t){for(var r=Bn(e[0]),n=cv(e[e.length-1]),a,i,o=r;o<=n;){var l=gv(o,t),c=!l.disabled&&!l.hidden;if(!c){o=bn(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=bn(o,1)}return i||a}var l8=365;function ME(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,f={day:bn,week:dx,month:Vs,year:yF,startOfWeek:function(x){return a.ISOWeek?Po(x):bs(x,{locale:m,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?wE(x):dv(x,{locale:m,weekStartsOn:c})}},p=f[r](e,n==="after"?1:-1);n==="before"&&d?p=wF([d,p]):n==="after"&&u&&(p=NF([u,p]));var g=!0;if(i){var h=gv(p,i);g=!h.disabled&&!h.hidden}return g?p:l.count>l8?l.lastFocused:ME(p,{moveBy:r,direction:n,context:a,modifiers:i,retry:ct(ct({},l),{count:l.count+1})})}var IE=v.createContext(void 0);function c8(e){var t=wu(),r=FE(),n=v.useState(),a=n[0],i=n[1],o=v.useState(),l=o[0],c=o[1],d=o8(t.displayMonths,r),u=a??(l&&t.isDateDisplayed(l))?l:d,m=function(){c(a),i(void 0)},f=function(x){i(x)},p=tr(),g=function(x,w){if(a){var y=ME(a,{moveBy:x,direction:w,context:p,modifiers:r});Mn(a,y)||(t.goToDate(y,a),f(y))}},h={focusedDay:a,focusTarget:u,blur:m,focus:f,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return s.jsx(IE.Provider,{value:h,children:e.children})}function vv(){var e=v.useContext(IE);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function d8(e,t){var r=FE(),n=gv(e,r,t);return n}var yv=v.createContext(void 0);function u8(e){if(!m0(e.initialProps)){var t={selected:void 0};return s.jsx(yv.Provider,{value:t,children:e.children})}return s.jsx(f8,{initialProps:e.initialProps,children:e.children})}function f8(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,i,o,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(yv.Provider,{value:a,children:r})}function LE(){var e=v.useContext(yv);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function h8(e,t){var r=tr(),n=LE(),a=mv(),i=xv(),o=vv(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,u=o.focusWeekBefore,m=o.blur,f=o.focus,p=o.focusMonthBefore,g=o.focusMonthAfter,h=o.focusYearBefore,x=o.focusYearAfter,w=o.focusStartOfWeek,y=o.focusEndOfWeek,N=function(ne){var K,re,xe,J;m0(r)?(K=n.onDayClick)===null||K===void 0||K.call(n,e,t,ne):vu(r)?(re=a.onDayClick)===null||re===void 0||re.call(a,e,t,ne):yu(r)?(xe=i.onDayClick)===null||xe===void 0||xe.call(i,e,t,ne):(J=r.onDayClick)===null||J===void 0||J.call(r,e,t,ne)},j=function(ne){var K;f(e),(K=r.onDayFocus)===null||K===void 0||K.call(r,e,t,ne)},b=function(ne){var K;m(),(K=r.onDayBlur)===null||K===void 0||K.call(r,e,t,ne)},_=function(ne){var K;(K=r.onDayMouseEnter)===null||K===void 0||K.call(r,e,t,ne)},S=function(ne){var K;(K=r.onDayMouseLeave)===null||K===void 0||K.call(r,e,t,ne)},C=function(ne){var K;(K=r.onDayPointerEnter)===null||K===void 0||K.call(r,e,t,ne)},A=function(ne){var K;(K=r.onDayPointerLeave)===null||K===void 0||K.call(r,e,t,ne)},U=function(ne){var K;(K=r.onDayTouchCancel)===null||K===void 0||K.call(r,e,t,ne)},k=function(ne){var K;(K=r.onDayTouchEnd)===null||K===void 0||K.call(r,e,t,ne)},R=function(ne){var K;(K=r.onDayTouchMove)===null||K===void 0||K.call(r,e,t,ne)},te=function(ne){var K;(K=r.onDayTouchStart)===null||K===void 0||K.call(r,e,t,ne)},Z=function(ne){var K;(K=r.onDayKeyUp)===null||K===void 0||K.call(r,e,t,ne)},se=function(ne){var K;switch(ne.key){case"ArrowLeft":ne.preventDefault(),ne.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":ne.preventDefault(),ne.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":ne.preventDefault(),ne.stopPropagation(),d();break;case"ArrowUp":ne.preventDefault(),ne.stopPropagation(),u();break;case"PageUp":ne.preventDefault(),ne.stopPropagation(),ne.shiftKey?h():p();break;case"PageDown":ne.preventDefault(),ne.stopPropagation(),ne.shiftKey?x():g();break;case"Home":ne.preventDefault(),ne.stopPropagation(),w();break;case"End":ne.preventDefault(),ne.stopPropagation(),y();break}(K=r.onDayKeyDown)===null||K===void 0||K.call(r,e,t,ne)},ae={onClick:N,onFocus:j,onBlur:b,onKeyDown:se,onKeyUp:Z,onMouseEnter:_,onMouseLeave:S,onPointerEnter:C,onPointerLeave:A,onTouchCancel:U,onTouchEnd:k,onTouchMove:R,onTouchStart:te};return ae}function m8(){var e=tr(),t=LE(),r=mv(),n=xv(),a=m0(e)?t.selected:vu(e)?r.selected:yu(e)?n.selected:void 0;return a}function p8(e){return Object.values(Gs).includes(e)}function x8(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(p8(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function g8(e,t){var r=ct({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=ct(ct({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function v8(e,t,r){var n,a,i,o=tr(),l=vv(),c=d8(e,t),d=h8(e,c),u=m8(),m=!!(o.onDayClick||o.mode!=="default");v.useEffect(function(){var _;c.outside||l.focusedDay&&m&&Mn(l.focusedDay,e)&&((_=r.current)===null||_===void 0||_.focus())},[l.focusedDay,e,r,m,c.outside]);var f=x8(o,c).join(" "),p=g8(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),h=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:$I,x=s.jsx(h,{date:e,displayMonth:t,activeModifiers:c}),w={style:p,className:f,children:x,role:"gridcell"},y=l.focusTarget&&Mn(l.focusTarget,e)&&!c.outside,N=l.focusedDay&&Mn(l.focusedDay,e),j=ct(ct(ct({},w),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=N||y?0:-1,n)),d),b={isButton:m,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:j,divProps:w};return b}function y8(e){var t=v.useRef(null),r=v8(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(hh,ct({name:"day",ref:t},r.buttonProps)):s.jsx("div",ct({},r.divProps))}function w8(e){var t=e.number,r=e.dates,n=tr(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:u});var m=c(Number(t),{locale:l}),f=function(p){a(t,r,p)};return s.jsx(hh,{name:"week-number","aria-label":m,className:o.weeknumber,style:i.weeknumber,onClick:f,children:u})}function N8(e){var t,r,n=tr(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:y8,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:w8,u;return o&&(u=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(d,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[u,e.dates.map(function(m){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:m})},yM(m))})]})}function fw(e,t,r){for(var n=r!=null&&r.ISOWeek?wE(t):dv(t,r),a=r!=null&&r.ISOWeek?Po(e):bs(e,r),i=ia(n,a),o=[],l=0;l<=i;l++)o.push(bn(a,l));var c=o.reduce(function(d,u){var m=r!=null&&r.ISOWeek?bE(u):EE(u,r),f=d.find(function(p){return p.weekNumber===m});return f?(f.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function j8(e,t){var r=fw(Bn(e),cv(e),t);if(t!=null&&t.useFixedWeeks){var n=NM(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=dx(i,6-n),l=fw(dx(i,1),o,t);r.push.apply(r,l)}}return r}function b8(e){var t,r,n,a=tr(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,f=a.firstWeekContainsDate,p=a.ISOWeek,g=j8(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:m,firstWeekContainsDate:f}),h=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:LI,x=(r=u==null?void 0:u.Row)!==null&&r!==void 0?r:N8,w=(n=u==null?void 0:u.Footer)!==null&&n!==void 0?n:FI;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(h,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(y){return s.jsx(x,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),s.jsx(w,{displayMonth:e.displayMonth})]})}function S8(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var E8=S8()?v.useLayoutEffect:v.useEffect,bm=!1,_8=0;function hw(){return"react-day-picker-".concat(++_8)}function C8(e){var t,r=e??(bm?hw():null),n=v.useState(r),a=n[0],i=n[1];return E8(function(){a===null&&i(hw())},[]),v.useEffect(function(){bm===!1&&(bm=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function T8(e){var t,r,n=tr(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=wu().displayMonths,d=C8(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,m=[i.month],f=o.month,p=e.displayIndex===0,g=e.displayIndex===c.length-1,h=!p&&!g;a==="rtl"&&(t=[p,g],g=t[0],p=t[1]),p&&(m.push(i.caption_start),f=ct(ct({},f),o.caption_start)),g&&(m.push(i.caption_end),f=ct(ct({},f),o.caption_end)),h&&(m.push(i.caption_between),f=ct(ct({},f),o.caption_between));var x=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:PI;return s.jsxs("div",{className:m.join(" "),style:f,children:[s.jsx(x,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(b8,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function k8(e){var t=tr(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function A8(e){var t,r,n=e.initialProps,a=tr(),i=vv(),o=wu(),l=v.useState(!1),c=l[0],d=l[1];v.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=ct(ct({},a.styles.root),a.style),f=Object.keys(n).filter(function(g){return g.startsWith("data-")}).reduce(function(g,h){var x;return ct(ct({},g),(x={},x[h]=n[h],x))},{}),p=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:k8;return s.jsx("div",ct({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:s.jsx(p,{children:o.displayMonths.map(function(g,h){return s.jsx(T8,{displayIndex:h,displayMonth:g},h)})})}))}function O8(e){var t=e.children,r=tI(e,["children"]);return s.jsx(wI,{initialProps:r,children:s.jsx(AI,{children:s.jsx(u8,{initialProps:r,children:s.jsx(BI,{initialProps:r,children:s.jsx(zI,{initialProps:r,children:s.jsx(QI,{children:s.jsx(c8,{children:t})})})})})})})}function D8(e){return s.jsx(O8,ct({},e,{children:s.jsx(A8,{initialProps:e})}))}function wv({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(D8,{showOutsideDays:r,className:We("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:We(Td({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:We(Td({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(fS,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(hS,{className:"h-4 w-4"})},...n})}wv.displayName="Calendar";var $E="AlertDialog",[R8,yH]=Hi($E,[w4]),Ua=w4(),BE=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ua(t);return s.jsx(Vg,{...n,...r,modal:!0})};BE.displayName=$E;var P8="AlertDialogTrigger",WE=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ua(r);return s.jsx(Gg,{...a,...n,ref:t})});WE.displayName=P8;var F8="AlertDialogPortal",UE=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ua(t);return s.jsx(qg,{...n,...r})};UE.displayName=F8;var M8="AlertDialogOverlay",zE=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ua(r);return s.jsx(hu,{...a,...n,ref:t})});zE.displayName=M8;var Tl="AlertDialogContent",[I8,L8]=R8(Tl),HE=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=Ua(r),o=v.useRef(null),l=Mt(t,o),c=v.useRef(null);return s.jsx(hP,{contentName:Tl,titleName:VE,docsSlug:"alert-dialog",children:s.jsx(I8,{scope:r,cancelRef:c,children:s.jsxs(mu,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:at(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(vg,{children:n}),s.jsx(B8,{contentRef:o})]})})})});HE.displayName=Tl;var VE="AlertDialogTitle",GE=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ua(r);return s.jsx(pu,{...a,...n,ref:t})});GE.displayName=VE;var qE="AlertDialogDescription",XE=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ua(r);return s.jsx(xu,{...a,...n,ref:t})});XE.displayName=qE;var $8="AlertDialogAction",KE=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=Ua(r);return s.jsx(c0,{...a,...n,ref:t})});KE.displayName=$8;var YE="AlertDialogCancel",QE=v.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=L8(YE,r),i=Ua(r),o=Mt(t,a);return s.jsx(c0,{...i,...n,ref:o})});QE.displayName=YE;var B8=({contentRef:e})=>{const t=`\`${Tl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Tl}\` by passing a \`${qE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Tl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},W8=BE,U8=WE,z8=UE,JE=zE,ZE=HE,e_=KE,t_=QE,r_=GE,n_=XE;const mh=W8,ph=U8,H8=z8,s_=v.forwardRef(({className:e,...t},r)=>s.jsx(JE,{className:We("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));s_.displayName=JE.displayName;const Dd=v.forwardRef(({className:e,...t},r)=>s.jsxs(H8,{children:[s.jsx(s_,{}),s.jsx(ZE,{ref:r,className:We("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Dd.displayName=ZE.displayName;const Rd=({className:e,...t})=>s.jsx("div",{className:We("flex flex-col space-y-2 text-center sm:text-left",e),...t});Rd.displayName="AlertDialogHeader";const Pd=({className:e,...t})=>s.jsx("div",{className:We("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Pd.displayName="AlertDialogFooter";const Fd=v.forwardRef(({className:e,...t},r)=>s.jsx(r_,{ref:r,className:We("text-lg font-semibold",e),...t}));Fd.displayName=r_.displayName;const Md=v.forwardRef(({className:e,...t},r)=>s.jsx(n_,{ref:r,className:We("text-sm text-muted-foreground",e),...t}));Md.displayName=n_.displayName;const Id=v.forwardRef(({className:e,...t},r)=>s.jsx(e_,{ref:r,className:We(Td(),e),...t}));Id.displayName=e_.displayName;const Ld=v.forwardRef(({className:e,...t},r)=>s.jsx(t_,{ref:r,className:We(Td({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ld.displayName=t_.displayName;/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var xh={};xh.version="0.18.5";var a_=1252,V8=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],i_=function(e){V8.indexOf(e)!=-1&&(a_=e)};function G8(){i_(1252)}var $d=function(e){i_(e)};function q8(){$d(1200),G8()}var Zu=function(t){return String.fromCharCode(t)},mw=function(t){return String.fromCharCode(t)},to,gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Bd(e){for(var t="",r=0,n=0,a=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,a=e.charCodeAt(d++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),t+=gi.charAt(i)+gi.charAt(o)+gi.charAt(l)+gi.charAt(c);return t}function Ma(e){var t="",r=0,n=0,a=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=gi.indexOf(e.charAt(d++)),o=gi.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=gi.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=gi.indexOf(e.charAt(d++)),a=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var Tt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),za=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Fo(e){return Tt?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function pw(e){return Tt?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ms=function(t){return Tt?za(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function p0(e){if(typeof ArrayBuffer>"u")return Ms(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Nu(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function X8(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}var Zr=Tt?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:za(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function K8(e){for(var t=[],r=0,n=e.length+250,a=Fo(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Fo(65535),n=65530)}return t.push(a.slice(0,r)),Zr(t)}var ed=/\u0000/g,ef=/[\u0001-\u0006]/g;function kl(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ls(e,t){var r=""+e;return r.length>=t?r:wr("0",t-r.length)+r}function Nv(e,t){var r=""+e;return r.length>=t?r:wr(" ",t-r.length)+r}function gh(e,t){var r=""+e;return r.length>=t?r:r+wr(" ",t-r.length)}function Y8(e,t){var r=""+Math.round(e);return r.length>=t?r:wr("0",t-r.length)+r}function Q8(e,t){var r=""+e;return r.length>=t?r:wr("0",t-r.length)+r}var xw=Math.pow(2,32);function Zo(e,t){if(e>xw||e<-xw)return Y8(e,t);var r=Math.round(e);return Q8(r,t)}function vh(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var gw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Sm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function J8(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Nr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},vw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Z8={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function yh(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,o=1,l=0,c=1,d=0,u=0,m=Math.floor(a);d<t&&(m=Math.floor(a),l=m*o+i,u=m*d+c,!(a-m<5e-8));)a=1/(a-m),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,n*l,u];var f=Math.floor(n*l/u);return[f,n*l-f*u,u]}function tf(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=iL(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=i,l}var o_=new Date(1899,11,31,0,0,0),eL=o_.getTime(),tL=new Date(1900,2,1,0,0,0);function l_(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=tL&&(r+=24*60*60*1e3),(r-(eL+(e.getTimezoneOffset()-o_.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function jv(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function rL(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function nL(e){var t=e<0?12:11,r=jv(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function sL(e){var t=jv(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function aL(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=nL(e):t===10?r=e.toFixed(10).substr(0,12):r=sL(e),jv(rL(r.toUpperCase()))}function fx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):aL(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Ii(14,l_(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function iL(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function oL(e,t,r,n){var a="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return Sm[r.m-1][1];case 5:return Sm[r.m-1][0];default:return Sm[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return gw[r.q][0];default:return gw[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ls(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(a=Ls(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Ls(c,d):"";return u}function vi(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var c_=/%/g;function lL(e,t,r){var n=t.replace(c_,""),a=t.length-n.length;return _a(e,n,r*Math.pow(10,2*a))+wr("%",a)}function cL(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return _a(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function d_(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+d_(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var u_=/# (\?+)( ?)\/( ?)(\d+)/;function dL(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),o=a-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?wr(" ",e[1].length+1+e[4].length):Nv(o,e[1].length)+e[2]+"/"+e[3]+Ls(l,e[4].length))}function uL(e,t,r){return r+(t===0?"":""+t)+wr(" ",e[1].length+2+e[4].length)}var f_=/^#*0*\.([0#]+)/,h_=/\).*[0#]/,m_=/\(###\) ###\\?-####/;function Sn(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function yw(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function ww(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function fL(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function hL(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ds(e,t,r){if(e.charCodeAt(0)===40&&!t.match(h_)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ds("n",n,r):"("+ds("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return cL(e,t,r);if(t.indexOf("%")!==-1)return lL(e,t,r);if(t.indexOf("E")!==-1)return d_(t,r);if(t.charCodeAt(0)===36)return"$"+ds(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Zo(c,t.length);if(t.match(/^[#?]+$/))return a=Zo(r,0),a==="0"&&(a=""),a.length>t.length?a:Sn(t.substr(0,t.length-a.length))+a;if(i=t.match(u_))return dL(i,c,d);if(t.match(/^#+0+$/))return d+Zo(c,t.length-t.indexOf("0"));if(i=t.match(f_))return a=yw(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Sn(i[1])).replace(/\.$/,"."+Sn(i[1])).replace(/\.(\d*)$/,function(g,h){return"."+h+wr("0",Sn(i[1]).length-h.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+yw(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+vi(Zo(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ds(e,t,-r):vi(""+(Math.floor(r)+fL(r,i[1].length)))+"."+Ls(ww(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return ds(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=kl(ds(e,t.replace(/[\\-]/g,""),r)),o=0,kl(kl(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(m_))return a=ds(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=yh(c,Math.pow(10,o)-1,!1),a=""+d,u=_a("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=gh(l[2],o),u.length<i[4].length&&(u=Sn(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=yh(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Nv(l[1],o)+i[2]+"/"+i[3]+gh(l[2],o):wr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Zo(r,0),t.length<=a.length?a:Sn(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var m=t.indexOf(".")-o,f=t.length-a.length-m;return Sn(t.substr(0,m)+a+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=ww(r,i[1].length),r<0?"-"+ds(e,t,-r):vi(hL(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ls(0,3-g.length):"")+g})+"."+Ls(o,i[1].length);switch(t){case"###,##0.00":return ds(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=vi(Zo(c,0));return p!=="0"?d+p:"";case"###,###.00":return ds(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ds(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function mL(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return _a(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function pL(e,t,r){var n=t.replace(c_,""),a=t.length-n.length;return _a(e,n,r*Math.pow(10,2*a))+wr("%",a)}function p_(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+p_(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ks(e,t,r){if(e.charCodeAt(0)===40&&!t.match(h_)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ks("n",n,r):"("+Ks("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return mL(e,t,r);if(t.indexOf("%")!==-1)return pL(e,t,r);if(t.indexOf("E")!==-1)return p_(t,r);if(t.charCodeAt(0)===36)return"$"+Ks(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Ls(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Sn(t.substr(0,t.length-a.length))+a;if(i=t.match(u_))return uL(i,c,d);if(t.match(/^#+0+$/))return d+Ls(c,t.length-t.indexOf("0"));if(i=t.match(f_))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Sn(i[1])).replace(/\.$/,"."+Sn(i[1])),a=a.replace(/\.(\d*)$/,function(g,h){return"."+h+wr("0",Sn(i[1]).length-h.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+vi(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ks(e,t,-r):vi(""+r)+"."+wr("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Ks(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=kl(Ks(e,t.replace(/[\\-]/g,""),r)),o=0,kl(kl(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return o<a.length?a.charAt(o++):g==="0"?"0":""}));if(t.match(m_))return a=Ks(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=yh(c,Math.pow(10,o)-1,!1),a=""+d,u=_a("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=gh(l[2],o),u.length<i[4].length&&(u=Sn(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=yh(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?Nv(l[1],o)+i[2]+"/"+i[3]+gh(l[2],o):wr(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Sn(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var m=t.indexOf(".")-o,f=t.length-a.length-m;return Sn(t.substr(0,m)+a+t.substr(t.length-f))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ks(e,t,-r):vi(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ls(0,3-g.length):"")+g})+"."+Ls(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=vi(""+c);return p!=="0"?d+p:"";default:if(t.match(/\.[0#?]*$/))return Ks(e,t.slice(0,t.lastIndexOf(".")),r)+Sn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function _a(e,t,r){return(r|0)===r?Ks(e,t,r):ds(e,t,r)}function xL(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var x_=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function g_(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":vh(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(x_))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function gL(e,t,r,n){for(var a=[],i="",o=0,l="",c="t",d,u,m,f="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!vh(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(m=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(m);a[a.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=tf(t,r,e.charAt(o+1)==="2"),d==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=tf(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),a[a.length]={t:l,v:i},c=l;break;case"A":case"a":case"上":var h={t:l,v:l};if(d==null&&(d=tf(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(h.v=d.H>=12?"P":"A"),h.t="T",f="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(h.v=d.H>=12?"PM":"AM"),h.t="T",o+=5,f="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(d!=null&&(h.v=d.H>=12?"下午":"上午"),h.t="T",o+=5,f="h"):(h.t="t",++o),d==null&&h.t==="T")return"";a[a.length]=h,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(x_)){if(d==null&&(d=tf(t,r),d==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",g_(e)||(a[a.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;a[a.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;a[a.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var x=0,w=0,y;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=f,c="h",x<1&&(x=1);break;case"s":(y=a[o].v.match(/\.0+$/))&&(w=Math.max(w,y[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&a[o].v.match(/[Hh]/)&&(x=1),x<2&&a[o].v.match(/[Mm]/)&&(x=2),x<3&&a[o].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var N="",j;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=oL(a[o].t.charCodeAt(0),a[o].v,d,w),a[o].t="t";break;case"n":case"?":for(j=o+1;a[j]!=null&&((l=a[j].t)==="?"||l==="D"||(l===" "||l==="t")&&a[j+1]!=null&&(a[j+1].t==="?"||a[j+1].t==="t"&&a[j+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[j].v==="/"||a[j].v===" "&&a[j+1]!=null&&a[j+1].t=="?"));)a[o].v+=a[j].v,a[j]={v:"",t:";"},++j;N+=a[o].v,o=j-1;break;case"G":a[o].t="t",a[o].v=fx(t,r);break}var b="",_,S;if(N.length>0){N.charCodeAt(0)==40?(_=t<0&&N.charCodeAt(0)===45?-t:t,S=_a("n",N,_)):(_=t<0&&n>1?-t:t,S=_a("n",N,_),_<0&&a[0]&&a[0].t=="t"&&(S=S.substr(1),a[0].v="-"+a[0].v)),j=S.length-1;var C=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){C=o;break}var A=a.length;if(C===a.length&&S.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(j>=a[o].v.length-1?(j-=a[o].v.length,a[o].v=S.substr(j+1,a[o].v.length)):j<0?a[o].v="":(a[o].v=S.substr(0,j+1),j=-1),a[o].t="t",A=o);j>=0&&A<a.length&&(a[A].v=S.substr(0,j+1)+a[A].v)}else if(C!==a.length&&S.indexOf("E")===-1){for(j=S.indexOf(".")-1,o=C;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(u=a[o].v.indexOf(".")>-1&&o===C?a[o].v.indexOf(".")-1:a[o].v.length-1,b=a[o].v.substr(u+1);u>=0;--u)j>=0&&(a[o].v.charAt(u)==="0"||a[o].v.charAt(u)==="#")&&(b=S.charAt(j--)+b);a[o].v=b,a[o].t="t",A=o}for(j>=0&&A<a.length&&(a[A].v=S.substr(0,j+1)+a[A].v),j=S.indexOf(".")+1,o=C;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==C)){for(u=a[o].v.indexOf(".")>-1&&o===C?a[o].v.indexOf(".")+1:0,b=a[o].v.substr(0,u);u<a[o].v.length;++u)j<S.length&&(b+=S.charAt(j++));a[o].v=b,a[o].t="t",A=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(_=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=_a(a[o].t,a[o].v,_),a[o].t="t");var U="";for(o=0;o!==a.length;++o)a[o]!=null&&(U+=a[o].v);return U}var Nw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function jw(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function vL(e,t){var r=xL(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(Nw),l=r[1].match(Nw);return jw(t,o)?[n,r[0]]:jw(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Ii(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Nr)[e],n==null&&(n=r.table&&r.table[vw[e]]||Nr[vw[e]]),n==null&&(n=Z8[e]||"General");break}if(vh(n,0))return fx(t,r);t instanceof Date&&(t=l_(t,r.date1904));var a=vL(n,t);if(vh(a[1]))return fx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return gL(a[1],t,r,a[0])}function v_(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Nr[r]==null){t<0&&(t=r);continue}if(Nr[r]==e){t=r;break}}t<0&&(t=391)}return Nr[t]=e,t}function x0(e){for(var t=0;t!=392;++t)e[t]!==void 0&&v_(e[t],t)}function g0(){Nr=J8()}var y_=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function yL(e){var t=typeof e=="number"?Nr[e]:e;return t=t.replace(y_,"(\\d+)"),new RegExp("^"+t+"$")}function wL(e,t,r){var n=-1,a=-1,i=-1,o=-1,l=-1,c=-1;(t.match(y_)||[]).forEach(function(m,f){var p=parseInt(r[f+1],10);switch(m.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:a=p;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:n==-1&&a==-1&&i==-1?u:d+"T"+u}var NL=function(){var e={};e.version="1.2.0";function t(){for(var S=0,C=new Array(256),A=0;A!=256;++A)S=A,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,S=S&1?-306674912^S>>>1:S>>>1,C[A]=S;return typeof Int32Array<"u"?new Int32Array(C):C}var r=t();function n(S){var C=0,A=0,U=0,k=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)k[U]=S[U];for(U=0;U!=256;++U)for(A=S[U],C=256+U;C<4096;C+=256)A=k[C]=A>>>8^S[A&255];var R=[];for(U=1;U!=16;++U)R[U-1]=typeof Int32Array<"u"?k.subarray(U*256,U*256+256):k.slice(U*256,U*256+256);return R}var a=n(r),i=a[0],o=a[1],l=a[2],c=a[3],d=a[4],u=a[5],m=a[6],f=a[7],p=a[8],g=a[9],h=a[10],x=a[11],w=a[12],y=a[13],N=a[14];function j(S,C){for(var A=C^-1,U=0,k=S.length;U<k;)A=A>>>8^r[(A^S.charCodeAt(U++))&255];return~A}function b(S,C){for(var A=C^-1,U=S.length-15,k=0;k<U;)A=N[S[k++]^A&255]^y[S[k++]^A>>8&255]^w[S[k++]^A>>16&255]^x[S[k++]^A>>>24]^h[S[k++]]^g[S[k++]]^p[S[k++]]^f[S[k++]]^m[S[k++]]^u[S[k++]]^d[S[k++]]^c[S[k++]]^l[S[k++]]^o[S[k++]]^i[S[k++]]^r[S[k++]];for(U+=15;k<U;)A=A>>>8^r[(A^S[k++])&255];return~A}function _(S,C){for(var A=C^-1,U=0,k=S.length,R=0,te=0;U<k;)R=S.charCodeAt(U++),R<128?A=A>>>8^r[(A^R)&255]:R<2048?(A=A>>>8^r[(A^(192|R>>6&31))&255],A=A>>>8^r[(A^(128|R&63))&255]):R>=55296&&R<57344?(R=(R&1023)+64,te=S.charCodeAt(U++)&1023,A=A>>>8^r[(A^(240|R>>8&7))&255],A=A>>>8^r[(A^(128|R>>2&63))&255],A=A>>>8^r[(A^(128|te>>6&15|(R&3)<<4))&255],A=A>>>8^r[(A^(128|te&63))&255]):(A=A>>>8^r[(A^(224|R>>12&15))&255],A=A>>>8^r[(A^(128|R>>6&63))&255],A=A>>>8^r[(A^(128|R&63))&255]);return~A}return e.table=r,e.bstr=j,e.buf=b,e.str=_,e}(),Vt=function(){var t={};t.version="1.2.1";function r(T,L){for(var O=T.split("/"),F=L.split("/"),W=0,z=0,oe=Math.min(O.length,F.length);W<oe;++W){if(z=O[W].length-F[W].length)return z;if(O[W]!=F[W])return O[W]<F[W]?-1:1}return O.length-F.length}function n(T){if(T.charAt(T.length-1)=="/")return T.slice(0,-1).indexOf("/")===-1?T:n(T.slice(0,-1));var L=T.lastIndexOf("/");return L===-1?T:T.slice(0,L+1)}function a(T){if(T.charAt(T.length-1)=="/")return a(T.slice(0,-1));var L=T.lastIndexOf("/");return L===-1?T:T.slice(L+1)}function i(T,L){typeof L=="string"&&(L=new Date(L));var O=L.getHours();O=O<<6|L.getMinutes(),O=O<<5|L.getSeconds()>>>1,T.write_shift(2,O);var F=L.getFullYear()-1980;F=F<<4|L.getMonth()+1,F=F<<5|L.getDate(),T.write_shift(2,F)}function o(T){var L=T.read_shift(2)&65535,O=T.read_shift(2)&65535,F=new Date,W=O&31;O>>>=5;var z=O&15;O>>>=4,F.setMilliseconds(0),F.setFullYear(O+1980),F.setMonth(z-1),F.setDate(W);var oe=L&31;L>>>=5;var ye=L&63;return L>>>=6,F.setHours(L),F.setMinutes(ye),F.setSeconds(oe<<1),F}function l(T){Qn(T,0);for(var L={},O=0;T.l<=T.length-4;){var F=T.read_shift(2),W=T.read_shift(2),z=T.l+W,oe={};switch(F){case 21589:O=T.read_shift(1),O&1&&(oe.mtime=T.read_shift(4)),W>5&&(O&2&&(oe.atime=T.read_shift(4)),O&4&&(oe.ctime=T.read_shift(4))),oe.mtime&&(oe.mt=new Date(oe.mtime*1e3));break}T.l=z,L[F]=oe}return L}var c;function d(){return c||(c={})}function u(T,L){if(T[0]==80&&T[1]==75)return it(T,L);if((T[0]|32)==109&&(T[1]|32)==105)return Xe(T,L);if(T.length<512)throw new Error("CFB file size "+T.length+" < 512");var O=3,F=512,W=0,z=0,oe=0,ye=0,ie=0,le=[],de=T.slice(0,512);Qn(de,0);var Oe=m(de);switch(O=Oe[0],O){case 3:F=512;break;case 4:F=4096;break;case 0:if(Oe[1]==0)return it(T,L);default:throw new Error("Major Version: Expected 3 or 4 saw "+O)}F!==512&&(de=T.slice(0,F),Qn(de,28));var Be=T.slice(0,F);f(de,O);var Ve=de.read_shift(4,"i");if(O===3&&Ve!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ve);de.l+=4,oe=de.read_shift(4,"i"),de.l+=4,de.chk("00100000","Mini Stream Cutoff Size: "),ye=de.read_shift(4,"i"),W=de.read_shift(4,"i"),ie=de.read_shift(4,"i"),z=de.read_shift(4,"i");for(var Re=-1,Ue=0;Ue<109&&(Re=de.read_shift(4,"i"),!(Re<0));++Ue)le[Ue]=Re;var ut=p(T,F);x(ie,z,ut,F,le);var Qt=y(ut,oe,le,F);Qt[oe].name="!Directory",W>0&&ye!==te&&(Qt[ye].name="!MiniFAT"),Qt[le[0]].name="!FAT",Qt.fat_addrs=le,Qt.ssz=F;var Jt={},Dr=[],Ha=[],Ki=[];N(oe,Qt,ut,Dr,W,Jt,Ha,ye),g(Ha,Ki,Dr),Dr.shift();var Yi={FileIndex:Ha,FullPaths:Ki};return L&&L.raw&&(Yi.raw={header:Be,sectors:ut}),Yi}function m(T){if(T[T.l]==80&&T[T.l+1]==75)return[0,0];T.chk(Z,"Header Signature: "),T.l+=16;var L=T.read_shift(2,"u");return[T.read_shift(2,"u"),L]}function f(T,L){var O=9;switch(T.l+=2,O=T.read_shift(2)){case 9:if(L!=3)throw new Error("Sector Shift: Expected 9 saw "+O);break;case 12:if(L!=4)throw new Error("Sector Shift: Expected 12 saw "+O);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+O)}T.chk("0600","Mini Sector Shift: "),T.chk("000000000000","Reserved: ")}function p(T,L){for(var O=Math.ceil(T.length/L)-1,F=[],W=1;W<O;++W)F[W-1]=T.slice(W*L,(W+1)*L);return F[O-1]=T.slice(O*L),F}function g(T,L,O){for(var F=0,W=0,z=0,oe=0,ye=0,ie=O.length,le=[],de=[];F<ie;++F)le[F]=de[F]=F,L[F]=O[F];for(;ye<de.length;++ye)F=de[ye],W=T[F].L,z=T[F].R,oe=T[F].C,le[F]===F&&(W!==-1&&le[W]!==W&&(le[F]=le[W]),z!==-1&&le[z]!==z&&(le[F]=le[z])),oe!==-1&&(le[oe]=F),W!==-1&&F!=le[F]&&(le[W]=le[F],de.lastIndexOf(W)<ye&&de.push(W)),z!==-1&&F!=le[F]&&(le[z]=le[F],de.lastIndexOf(z)<ye&&de.push(z));for(F=1;F<ie;++F)le[F]===F&&(z!==-1&&le[z]!==z?le[F]=le[z]:W!==-1&&le[W]!==W&&(le[F]=le[W]));for(F=1;F<ie;++F)if(T[F].type!==0){if(ye=F,ye!=le[ye])do ye=le[ye],L[F]=L[ye]+"/"+L[F];while(ye!==0&&le[ye]!==-1&&ye!=le[ye]);le[F]=-1}for(L[0]+="/",F=1;F<ie;++F)T[F].type!==2&&(L[F]+="/")}function h(T,L,O){for(var F=T.start,W=T.size,z=[],oe=F;O&&W>0&&oe>=0;)z.push(L.slice(oe*R,oe*R+R)),W-=R,oe=ro(O,oe*4);return z.length===0?ve(0):Zr(z).slice(0,T.size)}function x(T,L,O,F,W){var z=te;if(T===te){if(L!==0)throw new Error("DIFAT chain shorter than expected")}else if(T!==-1){var oe=O[T],ye=(F>>>2)-1;if(!oe)return;for(var ie=0;ie<ye&&(z=ro(oe,ie*4))!==te;++ie)W.push(z);x(ro(oe,F-4),L-1,O,F,W)}}function w(T,L,O,F,W){var z=[],oe=[];W||(W=[]);var ye=F-1,ie=0,le=0;for(ie=L;ie>=0;){W[ie]=!0,z[z.length]=ie,oe.push(T[ie]);var de=O[Math.floor(ie*4/F)];if(le=ie*4&ye,F<4+le)throw new Error("FAT boundary crossed: "+ie+" 4 "+F);if(!T[de])break;ie=ro(T[de],le)}return{nodes:z,data:Aw([oe])}}function y(T,L,O,F){var W=T.length,z=[],oe=[],ye=[],ie=[],le=F-1,de=0,Oe=0,Be=0,Ve=0;for(de=0;de<W;++de)if(ye=[],Be=de+L,Be>=W&&(Be-=W),!oe[Be]){ie=[];var Re=[];for(Oe=Be;Oe>=0;){Re[Oe]=!0,oe[Oe]=!0,ye[ye.length]=Oe,ie.push(T[Oe]);var Ue=O[Math.floor(Oe*4/F)];if(Ve=Oe*4&le,F<4+Ve)throw new Error("FAT boundary crossed: "+Oe+" 4 "+F);if(!T[Ue]||(Oe=ro(T[Ue],Ve),Re[Oe]))break}z[Be]={nodes:ye,data:Aw([ie])}}return z}function N(T,L,O,F,W,z,oe,ye){for(var ie=0,le=F.length?2:0,de=L[T].data,Oe=0,Be=0,Ve;Oe<de.length;Oe+=128){var Re=de.slice(Oe,Oe+128);Qn(Re,64),Be=Re.read_shift(2),Ve=Cv(Re,0,Be-le),F.push(Ve);var Ue={name:Ve,type:Re.read_shift(1),color:Re.read_shift(1),L:Re.read_shift(4,"i"),R:Re.read_shift(4,"i"),C:Re.read_shift(4,"i"),clsid:Re.read_shift(16),state:Re.read_shift(4,"i"),start:0,size:0},ut=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);ut!==0&&(Ue.ct=j(Re,Re.l-8));var Qt=Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2)+Re.read_shift(2);Qt!==0&&(Ue.mt=j(Re,Re.l-8)),Ue.start=Re.read_shift(4,"i"),Ue.size=Re.read_shift(4,"i"),Ue.size<0&&Ue.start<0&&(Ue.size=Ue.type=0,Ue.start=te,Ue.name=""),Ue.type===5?(ie=Ue.start,W>0&&ie!==te&&(L[ie].name="!StreamData")):Ue.size>=4096?(Ue.storage="fat",L[Ue.start]===void 0&&(L[Ue.start]=w(O,Ue.start,L.fat_addrs,L.ssz)),L[Ue.start].name=Ue.name,Ue.content=L[Ue.start].data.slice(0,Ue.size)):(Ue.storage="minifat",Ue.size<0?Ue.size=0:ie!==te&&Ue.start!==te&&L[ie]&&(Ue.content=h(Ue,L[ie].data,(L[ye]||{}).data))),Ue.content&&Qn(Ue.content,0),z[Ve]=Ue,oe.push(Ue)}}function j(T,L){return new Date((es(T,L+4)/1e7*Math.pow(2,32)+es(T,L)/1e7-11644473600)*1e3)}function b(T,L){return d(),u(c.readFileSync(T),L)}function _(T,L){var O=L&&L.type;switch(O||Tt&&Buffer.isBuffer(T)&&(O="buffer"),O||"base64"){case"file":return b(T,L);case"base64":return u(Ms(Ma(T)),L);case"binary":return u(Ms(T),L)}return u(T,L)}function S(T,L){var O=L||{},F=O.root||"Root Entry";if(T.FullPaths||(T.FullPaths=[]),T.FileIndex||(T.FileIndex=[]),T.FullPaths.length!==T.FileIndex.length)throw new Error("inconsistent CFB structure");T.FullPaths.length===0&&(T.FullPaths[0]=F+"/",T.FileIndex[0]={name:F,type:5}),O.CLSID&&(T.FileIndex[0].clsid=O.CLSID),C(T)}function C(T){var L="Sh33tJ5";if(!Vt.find(T,"/"+L)){var O=ve(4);O[0]=55,O[1]=O[3]=50,O[2]=54,T.FileIndex.push({name:L,type:2,content:O,size:4,L:69,R:69,C:69}),T.FullPaths.push(T.FullPaths[0]+L),A(T)}}function A(T,L){S(T);for(var O=!1,F=!1,W=T.FullPaths.length-1;W>=0;--W){var z=T.FileIndex[W];switch(z.type){case 0:F?O=!0:(T.FileIndex.pop(),T.FullPaths.pop());break;case 1:case 2:case 5:F=!0,isNaN(z.R*z.L*z.C)&&(O=!0),z.R>-1&&z.L>-1&&z.R==z.L&&(O=!0);break;default:O=!0;break}}if(!(!O&&!L)){var oe=new Date(1987,1,19),ye=0,ie=Object.create?Object.create(null):{},le=[];for(W=0;W<T.FullPaths.length;++W)ie[T.FullPaths[W]]=!0,T.FileIndex[W].type!==0&&le.push([T.FullPaths[W],T.FileIndex[W]]);for(W=0;W<le.length;++W){var de=n(le[W][0]);F=ie[de],F||(le.push([de,{name:a(de).replace("/",""),type:1,clsid:ae,ct:oe,mt:oe,content:null}]),ie[de]=!0)}for(le.sort(function(Ve,Re){return r(Ve[0],Re[0])}),T.FullPaths=[],T.FileIndex=[],W=0;W<le.length;++W)T.FullPaths[W]=le[W][0],T.FileIndex[W]=le[W][1];for(W=0;W<le.length;++W){var Oe=T.FileIndex[W],Be=T.FullPaths[W];if(Oe.name=a(Be).replace("/",""),Oe.L=Oe.R=Oe.C=-(Oe.color=1),Oe.size=Oe.content?Oe.content.length:0,Oe.start=0,Oe.clsid=Oe.clsid||ae,W===0)Oe.C=le.length>1?1:-1,Oe.size=0,Oe.type=5;else if(Be.slice(-1)=="/"){for(ye=W+1;ye<le.length&&n(T.FullPaths[ye])!=Be;++ye);for(Oe.C=ye>=le.length?-1:ye,ye=W+1;ye<le.length&&n(T.FullPaths[ye])!=n(Be);++ye);Oe.R=ye>=le.length?-1:ye,Oe.type=1}else n(T.FullPaths[W+1]||"")==n(Be)&&(Oe.R=W+1),Oe.type=2}}}function U(T,L){var O=L||{};if(O.fileType=="mad")return Dt(T,O);switch(A(T),O.fileType){case"zip":return Yt(T,O)}var F=function(Ve){for(var Re=0,Ue=0,ut=0;ut<Ve.FileIndex.length;++ut){var Qt=Ve.FileIndex[ut];if(Qt.content){var Jt=Qt.content.length;Jt>0&&(Jt<4096?Re+=Jt+63>>6:Ue+=Jt+511>>9)}}for(var Dr=Ve.FullPaths.length+3>>2,Ha=Re+7>>3,Ki=Re+127>>7,Yi=Ha+Ue+Dr+Ki,pa=Yi+127>>7,gc=pa<=109?0:Math.ceil((pa-109)/127);Yi+pa+gc+127>>7>pa;)gc=++pa<=109?0:Math.ceil((pa-109)/127);var Es=[1,gc,pa,Ki,Dr,Ue,Re,0];return Ve.FileIndex[0].size=Re<<6,Es[7]=(Ve.FileIndex[0].start=Es[0]+Es[1]+Es[2]+Es[3]+Es[4]+Es[5])+(Es[6]+7>>3),Es}(T),W=ve(F[7]<<9),z=0,oe=0;{for(z=0;z<8;++z)W.write_shift(1,se[z]);for(z=0;z<8;++z)W.write_shift(2,0);for(W.write_shift(2,62),W.write_shift(2,3),W.write_shift(2,65534),W.write_shift(2,9),W.write_shift(2,6),z=0;z<3;++z)W.write_shift(2,0);for(W.write_shift(4,0),W.write_shift(4,F[2]),W.write_shift(4,F[0]+F[1]+F[2]+F[3]-1),W.write_shift(4,0),W.write_shift(4,4096),W.write_shift(4,F[3]?F[0]+F[1]+F[2]-1:te),W.write_shift(4,F[3]),W.write_shift(-4,F[1]?F[0]-1:te),W.write_shift(4,F[1]),z=0;z<109;++z)W.write_shift(-4,z<F[2]?F[1]+z:-1)}if(F[1])for(oe=0;oe<F[1];++oe){for(;z<236+oe*127;++z)W.write_shift(-4,z<F[2]?F[1]+z:-1);W.write_shift(-4,oe===F[1]-1?te:oe+1)}var ye=function(Ve){for(oe+=Ve;z<oe-1;++z)W.write_shift(-4,z+1);Ve&&(++z,W.write_shift(-4,te))};for(oe=z=0,oe+=F[1];z<oe;++z)W.write_shift(-4,ne.DIFSECT);for(oe+=F[2];z<oe;++z)W.write_shift(-4,ne.FATSECT);ye(F[3]),ye(F[4]);for(var ie=0,le=0,de=T.FileIndex[0];ie<T.FileIndex.length;++ie)de=T.FileIndex[ie],de.content&&(le=de.content.length,!(le<4096)&&(de.start=oe,ye(le+511>>9)));for(ye(F[6]+7>>3);W.l&511;)W.write_shift(-4,ne.ENDOFCHAIN);for(oe=z=0,ie=0;ie<T.FileIndex.length;++ie)de=T.FileIndex[ie],de.content&&(le=de.content.length,!(!le||le>=4096)&&(de.start=oe,ye(le+63>>6)));for(;W.l&511;)W.write_shift(-4,ne.ENDOFCHAIN);for(z=0;z<F[4]<<2;++z){var Oe=T.FullPaths[z];if(!Oe||Oe.length===0){for(ie=0;ie<17;++ie)W.write_shift(4,0);for(ie=0;ie<3;++ie)W.write_shift(4,-1);for(ie=0;ie<12;++ie)W.write_shift(4,0);continue}de=T.FileIndex[z],z===0&&(de.start=de.size?de.start-1:te);var Be=z===0&&O.root||de.name;if(le=2*(Be.length+1),W.write_shift(64,Be,"utf16le"),W.write_shift(2,le),W.write_shift(1,de.type),W.write_shift(1,de.color),W.write_shift(-4,de.L),W.write_shift(-4,de.R),W.write_shift(-4,de.C),de.clsid)W.write_shift(16,de.clsid,"hex");else for(ie=0;ie<4;++ie)W.write_shift(4,0);W.write_shift(4,de.state||0),W.write_shift(4,0),W.write_shift(4,0),W.write_shift(4,0),W.write_shift(4,0),W.write_shift(4,de.start),W.write_shift(4,de.size),W.write_shift(4,0)}for(z=1;z<T.FileIndex.length;++z)if(de=T.FileIndex[z],de.size>=4096)if(W.l=de.start+1<<9,Tt&&Buffer.isBuffer(de.content))de.content.copy(W,W.l,0,de.size),W.l+=de.size+511&-512;else{for(ie=0;ie<de.size;++ie)W.write_shift(1,de.content[ie]);for(;ie&511;++ie)W.write_shift(1,0)}for(z=1;z<T.FileIndex.length;++z)if(de=T.FileIndex[z],de.size>0&&de.size<4096)if(Tt&&Buffer.isBuffer(de.content))de.content.copy(W,W.l,0,de.size),W.l+=de.size+63&-64;else{for(ie=0;ie<de.size;++ie)W.write_shift(1,de.content[ie]);for(;ie&63;++ie)W.write_shift(1,0)}if(Tt)W.l=W.length;else for(;W.l<W.length;)W.write_shift(1,0);return W}function k(T,L){var O=T.FullPaths.map(function(ie){return ie.toUpperCase()}),F=O.map(function(ie){var le=ie.split("/");return le[le.length-(ie.slice(-1)=="/"?2:1)]}),W=!1;L.charCodeAt(0)===47?(W=!0,L=O[0].slice(0,-1)+L):W=L.indexOf("/")!==-1;var z=L.toUpperCase(),oe=W===!0?O.indexOf(z):F.indexOf(z);if(oe!==-1)return T.FileIndex[oe];var ye=!z.match(ef);for(z=z.replace(ed,""),ye&&(z=z.replace(ef,"!")),oe=0;oe<O.length;++oe)if((ye?O[oe].replace(ef,"!"):O[oe]).replace(ed,"")==z||(ye?F[oe].replace(ef,"!"):F[oe]).replace(ed,"")==z)return T.FileIndex[oe];return null}var R=64,te=-2,Z="d0cf11e0a1b11ae1",se=[208,207,17,224,161,177,26,225],ae="00000000000000000000000000000000",ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:te,FREESECT:-1,HEADER_SIGNATURE:Z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ae,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function K(T,L,O){d();var F=U(T,O);c.writeFileSync(L,F)}function re(T){for(var L=new Array(T.length),O=0;O<T.length;++O)L[O]=String.fromCharCode(T[O]);return L.join("")}function xe(T,L){var O=U(T,L);switch(L&&L.type||"buffer"){case"file":return d(),c.writeFileSync(L.filename,O),O;case"binary":return typeof O=="string"?O:re(O);case"base64":return Bd(typeof O=="string"?O:re(O));case"buffer":if(Tt)return Buffer.isBuffer(O)?O:za(O);case"array":return typeof O=="string"?Ms(O):O}return O}var J;function D(T){try{var L=T.InflateRaw,O=new L;if(O._processChunk(new Uint8Array([3,0]),O._finishFlushFlag),O.bytesRead)J=T;else throw new Error("zlib does not expose bytesRead")}catch(F){console.error("cannot use native zlib: "+(F.message||F))}}function X(T,L){if(!J)return Me(T,L);var O=J.InflateRaw,F=new O,W=F._processChunk(T.slice(T.l),F._finishFlushFlag);return T.l+=F.bytesRead,W}function V(T){return J?J.deflateRawSync(T):ge(T)}var E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(T){var L=(T<<1|T<<11)&139536|(T<<5|T<<15)&558144;return(L>>16|L>>8|L)&255}for(var he=typeof Uint8Array<"u",B=he?new Uint8Array(256):[],be=0;be<256;++be)B[be]=me(be);function pe(T,L){var O=B[T&255];return L<=8?O>>>8-L:(O=O<<8|B[T>>8&255],L<=16?O>>>16-L:(O=O<<8|B[T>>16&255],O>>>24-L))}function Y(T,L){var O=L&7,F=L>>>3;return(T[F]|(O<=6?0:T[F+1]<<8))>>>O&3}function P(T,L){var O=L&7,F=L>>>3;return(T[F]|(O<=5?0:T[F+1]<<8))>>>O&7}function ce(T,L){var O=L&7,F=L>>>3;return(T[F]|(O<=4?0:T[F+1]<<8))>>>O&15}function Se(T,L){var O=L&7,F=L>>>3;return(T[F]|(O<=3?0:T[F+1]<<8))>>>O&31}function ue(T,L){var O=L&7,F=L>>>3;return(T[F]|(O<=1?0:T[F+1]<<8))>>>O&127}function Pe(T,L,O){var F=L&7,W=L>>>3,z=(1<<O)-1,oe=T[W]>>>F;return O<8-F||(oe|=T[W+1]<<8-F,O<16-F)||(oe|=T[W+2]<<16-F,O<24-F)||(oe|=T[W+3]<<24-F),oe&z}function je(T,L,O){var F=L&7,W=L>>>3;return F<=5?T[W]|=(O&7)<<F:(T[W]|=O<<F&255,T[W+1]=(O&7)>>8-F),L+3}function ke(T,L,O){var F=L&7,W=L>>>3;return O=(O&1)<<F,T[W]|=O,L+1}function gt(T,L,O){var F=L&7,W=L>>>3;return O<<=F,T[W]|=O&255,O>>>=8,T[W+1]=O,L+8}function dt(T,L,O){var F=L&7,W=L>>>3;return O<<=F,T[W]|=O&255,O>>>=8,T[W+1]=O&255,T[W+2]=O>>>8,L+16}function qt(T,L){var O=T.length,F=2*O>L?2*O:L+5,W=0;if(O>=L)return T;if(Tt){var z=pw(F);if(T.copy)T.copy(z);else for(;W<T.length;++W)z[W]=T[W];return z}else if(he){var oe=new Uint8Array(F);if(oe.set)oe.set(T);else for(;W<O;++W)oe[W]=T[W];return oe}return T.length=F,T}function Ot(T){for(var L=new Array(T),O=0;O<T;++O)L[O]=0;return L}function Kt(T,L,O){var F=1,W=0,z=0,oe=0,ye=0,ie=T.length,le=he?new Uint16Array(32):Ot(32);for(z=0;z<32;++z)le[z]=0;for(z=ie;z<O;++z)T[z]=0;ie=T.length;var de=he?new Uint16Array(ie):Ot(ie);for(z=0;z<ie;++z)le[W=T[z]]++,F<W&&(F=W),de[z]=0;for(le[0]=0,z=1;z<=F;++z)le[z+16]=ye=ye+le[z-1]<<1;for(z=0;z<ie;++z)ye=T[z],ye!=0&&(de[z]=le[ye+16]++);var Oe=0;for(z=0;z<ie;++z)if(Oe=T[z],Oe!=0)for(ye=pe(de[z],F)>>F-Oe,oe=(1<<F+4-Oe)-1;oe>=0;--oe)L[ye|oe<<Oe]=Oe&15|z<<4;return F}var H=he?new Uint16Array(512):Ot(512),fe=he?new Uint16Array(32):Ot(32);if(!he){for(var we=0;we<512;++we)H[we]=0;for(we=0;we<32;++we)fe[we]=0}(function(){for(var T=[],L=0;L<32;L++)T.push(5);Kt(T,fe,32);var O=[];for(L=0;L<=143;L++)O.push(8);for(;L<=255;L++)O.push(9);for(;L<=279;L++)O.push(7);for(;L<=287;L++)O.push(8);Kt(O,H,288)})();var M=function(){for(var L=he?new Uint8Array(32768):[],O=0,F=0;O<G.length-1;++O)for(;F<G[O+1];++F)L[F]=O;for(;F<32768;++F)L[F]=29;var W=he?new Uint8Array(259):[];for(O=0,F=0;O<I.length-1;++O)for(;F<I[O+1];++F)W[F]=O;function z(ye,ie){for(var le=0;le<ye.length;){var de=Math.min(65535,ye.length-le),Oe=le+de==ye.length;for(ie.write_shift(1,+Oe),ie.write_shift(2,de),ie.write_shift(2,~de&65535);de-- >0;)ie[ie.l++]=ye[le++]}return ie.l}function oe(ye,ie){for(var le=0,de=0,Oe=he?new Uint16Array(32768):[];de<ye.length;){var Be=Math.min(65535,ye.length-de);if(Be<10){for(le=je(ie,le,+(de+Be==ye.length)),le&7&&(le+=8-(le&7)),ie.l=le/8|0,ie.write_shift(2,Be),ie.write_shift(2,~Be&65535);Be-- >0;)ie[ie.l++]=ye[de++];le=ie.l*8;continue}le=je(ie,le,+(de+Be==ye.length)+2);for(var Ve=0;Be-- >0;){var Re=ye[de];Ve=(Ve<<5^Re)&32767;var Ue=-1,ut=0;if((Ue=Oe[Ve])&&(Ue|=de&-32768,Ue>de&&(Ue-=32768),Ue<de))for(;ye[Ue+ut]==ye[de+ut]&&ut<250;)++ut;if(ut>2){Re=W[ut],Re<=22?le=gt(ie,le,B[Re+1]>>1)-1:(gt(ie,le,3),le+=5,gt(ie,le,B[Re-23]>>5),le+=3);var Qt=Re<8?0:Re-4>>2;Qt>0&&(dt(ie,le,ut-I[Re]),le+=Qt),Re=L[de-Ue],le=gt(ie,le,B[Re]>>3),le-=3;var Jt=Re<4?0:Re-2>>1;Jt>0&&(dt(ie,le,de-Ue-G[Re]),le+=Jt);for(var Dr=0;Dr<ut;++Dr)Oe[Ve]=de&32767,Ve=(Ve<<5^ye[de])&32767,++de;Be-=ut-1}else Re<=143?Re=Re+48:le=ke(ie,le,1),le=gt(ie,le,B[Re]),Oe[Ve]=de&32767,++de}le=gt(ie,le,0)-1}return ie.l=(le+7)/8|0,ie.l}return function(ie,le){return ie.length<8?z(ie,le):oe(ie,le)}}();function ge(T){var L=ve(50+Math.floor(T.length*1.1)),O=M(T,L);return L.slice(0,O)}var Ne=he?new Uint16Array(32768):Ot(32768),Le=he?new Uint16Array(32768):Ot(32768),ze=he?new Uint16Array(128):Ot(128),nt=1,_e=1;function $e(T,L){var O=Se(T,L)+257;L+=5;var F=Se(T,L)+1;L+=5;var W=ce(T,L)+4;L+=4;for(var z=0,oe=he?new Uint8Array(19):Ot(19),ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ie=1,le=he?new Uint8Array(8):Ot(8),de=he?new Uint8Array(8):Ot(8),Oe=oe.length,Be=0;Be<W;++Be)oe[E[Be]]=z=P(T,L),ie<z&&(ie=z),le[z]++,L+=3;var Ve=0;for(le[0]=0,Be=1;Be<=ie;++Be)de[Be]=Ve=Ve+le[Be-1]<<1;for(Be=0;Be<Oe;++Be)(Ve=oe[Be])!=0&&(ye[Be]=de[Ve]++);var Re=0;for(Be=0;Be<Oe;++Be)if(Re=oe[Be],Re!=0){Ve=B[ye[Be]]>>8-Re;for(var Ue=(1<<7-Re)-1;Ue>=0;--Ue)ze[Ve|Ue<<Re]=Re&7|Be<<3}var ut=[];for(ie=1;ut.length<O+F;)switch(Ve=ze[ue(T,L)],L+=Ve&7,Ve>>>=3){case 16:for(z=3+Y(T,L),L+=2,Ve=ut[ut.length-1];z-- >0;)ut.push(Ve);break;case 17:for(z=3+P(T,L),L+=3;z-- >0;)ut.push(0);break;case 18:for(z=11+ue(T,L),L+=7;z-- >0;)ut.push(0);break;default:ut.push(Ve),ie<Ve&&(ie=Ve);break}var Qt=ut.slice(0,O),Jt=ut.slice(O);for(Be=O;Be<286;++Be)Qt[Be]=0;for(Be=F;Be<30;++Be)Jt[Be]=0;return nt=Kt(Qt,Ne,286),_e=Kt(Jt,Le,30),L}function Qe(T,L){if(T[0]==3&&!(T[1]&3))return[Fo(L),2];for(var O=0,F=0,W=pw(L||1<<18),z=0,oe=W.length>>>0,ye=0,ie=0;!(F&1);){if(F=P(T,O),O+=3,F>>>1)F>>1==1?(ye=9,ie=5):(O=$e(T,O),ye=nt,ie=_e);else{O&7&&(O+=8-(O&7));var le=T[O>>>3]|T[(O>>>3)+1]<<8;if(O+=32,le>0)for(!L&&oe<z+le&&(W=qt(W,z+le),oe=W.length);le-- >0;)W[z++]=T[O>>>3],O+=8;continue}for(;;){!L&&oe<z+32767&&(W=qt(W,z+32767),oe=W.length);var de=Pe(T,O,ye),Oe=F>>>1==1?H[de]:Ne[de];if(O+=Oe&15,Oe>>>=4,!(Oe>>>8&255))W[z++]=Oe;else{if(Oe==256)break;Oe-=257;var Be=Oe<8?0:Oe-4>>2;Be>5&&(Be=0);var Ve=z+I[Oe];Be>0&&(Ve+=Pe(T,O,Be),O+=Be),de=Pe(T,O,ie),Oe=F>>>1==1?fe[de]:Le[de],O+=Oe&15,Oe>>>=4;var Re=Oe<4?0:Oe-2>>1,Ue=G[Oe];for(Re>0&&(Ue+=Pe(T,O,Re),O+=Re),!L&&oe<Ve&&(W=qt(W,Ve+100),oe=W.length);z<Ve;)W[z]=W[z-Ue],++z}}}return L?[W,O+7>>>3]:[W.slice(0,z),O+7>>>3]}function Me(T,L){var O=T.slice(T.l||0),F=Qe(O,L);return T.l+=F[1],F[0]}function Ye(T,L){if(T)typeof console<"u"&&console.error(L);else throw new Error(L)}function it(T,L){var O=T;Qn(O,0);var F=[],W=[],z={FileIndex:F,FullPaths:W};S(z,{root:L.root});for(var oe=O.length-4;(O[oe]!=80||O[oe+1]!=75||O[oe+2]!=5||O[oe+3]!=6)&&oe>=0;)--oe;O.l=oe+4,O.l+=4;var ye=O.read_shift(2);O.l+=6;var ie=O.read_shift(4);for(O.l=ie,oe=0;oe<ye;++oe){O.l+=20;var le=O.read_shift(4),de=O.read_shift(4),Oe=O.read_shift(2),Be=O.read_shift(2),Ve=O.read_shift(2);O.l+=8;var Re=O.read_shift(4),Ue=l(O.slice(O.l+Oe,O.l+Oe+Be));O.l+=Oe+Be+Ve;var ut=O.l;O.l=Re+4,Ht(O,le,de,z,Ue),O.l=ut}return z}function Ht(T,L,O,F,W){T.l+=2;var z=T.read_shift(2),oe=T.read_shift(2),ye=o(T);if(z&8257)throw new Error("Unsupported ZIP encryption");for(var ie=T.read_shift(4),le=T.read_shift(4),de=T.read_shift(4),Oe=T.read_shift(2),Be=T.read_shift(2),Ve="",Re=0;Re<Oe;++Re)Ve+=String.fromCharCode(T[T.l++]);if(Be){var Ue=l(T.slice(T.l,T.l+Be));(Ue[21589]||{}).mt&&(ye=Ue[21589].mt),((W||{})[21589]||{}).mt&&(ye=W[21589].mt)}T.l+=Be;var ut=T.slice(T.l,T.l+le);switch(oe){case 8:ut=X(T,de);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+oe)}var Qt=!1;z&8&&(ie=T.read_shift(4),ie==134695760&&(ie=T.read_shift(4),Qt=!0),le=T.read_shift(4),de=T.read_shift(4)),le!=L&&Ye(Qt,"Bad compressed size: "+L+" != "+le),de!=O&&Ye(Qt,"Bad uncompressed size: "+O+" != "+de),It(F,Ve,ut,{unsafe:!0,mt:ye})}function Yt(T,L){var O=L||{},F=[],W=[],z=ve(1),oe=O.compression?8:0,ye=0,ie=0,le=0,de=0,Oe=0,Be=T.FullPaths[0],Ve=Be,Re=T.FileIndex[0],Ue=[],ut=0;for(ie=1;ie<T.FullPaths.length;++ie)if(Ve=T.FullPaths[ie].slice(Be.length),Re=T.FileIndex[ie],!(!Re.size||!Re.content||Ve=="Sh33tJ5")){var Qt=de,Jt=ve(Ve.length);for(le=0;le<Ve.length;++le)Jt.write_shift(1,Ve.charCodeAt(le)&127);Jt=Jt.slice(0,Jt.l),Ue[Oe]=NL.buf(Re.content,0);var Dr=Re.content;oe==8&&(Dr=V(Dr)),z=ve(30),z.write_shift(4,67324752),z.write_shift(2,20),z.write_shift(2,ye),z.write_shift(2,oe),Re.mt?i(z,Re.mt):z.write_shift(4,0),z.write_shift(-4,Ue[Oe]),z.write_shift(4,Dr.length),z.write_shift(4,Re.content.length),z.write_shift(2,Jt.length),z.write_shift(2,0),de+=z.length,F.push(z),de+=Jt.length,F.push(Jt),de+=Dr.length,F.push(Dr),z=ve(46),z.write_shift(4,33639248),z.write_shift(2,0),z.write_shift(2,20),z.write_shift(2,ye),z.write_shift(2,oe),z.write_shift(4,0),z.write_shift(-4,Ue[Oe]),z.write_shift(4,Dr.length),z.write_shift(4,Re.content.length),z.write_shift(2,Jt.length),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(4,0),z.write_shift(4,Qt),ut+=z.l,W.push(z),ut+=Jt.length,W.push(Jt),++Oe}return z=ve(22),z.write_shift(4,101010256),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(2,Oe),z.write_shift(2,Oe),z.write_shift(4,ut),z.write_shift(4,de),z.write_shift(2,0),Zr([Zr(F),Zr(W),z])}var xn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function rr(T,L){if(T.ctype)return T.ctype;var O=T.name||"",F=O.match(/\.([^\.]+)$/);return F&&xn[F[1]]||L&&(F=(O=L).match(/[\.\\]([^\.\\])+$/),F&&xn[F[1]])?xn[F[1]]:"application/octet-stream"}function bt(T){for(var L=Bd(T),O=[],F=0;F<L.length;F+=76)O.push(L.slice(F,F+76));return O.join(`\r
`)+`\r
`}function _r(T){var L=T.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(le){var de=le.charCodeAt(0).toString(16).toUpperCase();return"="+(de.length==1?"0"+de:de)});L=L.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),L.charAt(0)==`
`&&(L="=0D"+L.slice(1)),L=L.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var O=[],F=L.split(`\r
`),W=0;W<F.length;++W){var z=F[W];if(z.length==0){O.push("");continue}for(var oe=0;oe<z.length;){var ye=76,ie=z.slice(oe,oe+ye);ie.charAt(ye-1)=="="?ye--:ie.charAt(ye-2)=="="?ye-=2:ie.charAt(ye-3)=="="&&(ye-=3),ie=z.slice(oe,oe+ye),oe+=ye,oe<z.length&&(ie+="="),O.push(ie)}}return O.join(`\r
`)}function Xt(T){for(var L=[],O=0;O<T.length;++O){for(var F=T[O];O<=T.length&&F.charAt(F.length-1)=="=";)F=F.slice(0,F.length-1)+T[++O];L.push(F)}for(var W=0;W<L.length;++W)L[W]=L[W].replace(/[=][0-9A-Fa-f]{2}/g,function(z){return String.fromCharCode(parseInt(z.slice(1),16))});return Ms(L.join(`\r
`))}function fr(T,L,O){for(var F="",W="",z="",oe,ye=0;ye<10;++ye){var ie=L[ye];if(!ie||ie.match(/^\s*$/))break;var le=ie.match(/^(.*?):\s*([^\s].*)$/);if(le)switch(le[1].toLowerCase()){case"content-location":F=le[2].trim();break;case"content-type":z=le[2].trim();break;case"content-transfer-encoding":W=le[2].trim();break}}switch(++ye,W.toLowerCase()){case"base64":oe=Ms(Ma(L.slice(ye).join("")));break;case"quoted-printable":oe=Xt(L.slice(ye));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+W)}var de=It(T,F.slice(O.length),oe,{unsafe:!0});z&&(de.ctype=z)}function Xe(T,L){if(re(T.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var O=L&&L.root||"",F=(Tt&&Buffer.isBuffer(T)?T.toString("binary"):re(T)).split(`\r
`),W=0,z="";for(W=0;W<F.length;++W)if(z=F[W],!!/^Content-Location:/i.test(z)&&(z=z.slice(z.indexOf("file")),O||(O=z.slice(0,z.lastIndexOf("/")+1)),z.slice(0,O.length)!=O))for(;O.length>0&&(O=O.slice(0,O.length-1),O=O.slice(0,O.lastIndexOf("/")+1),z.slice(0,O.length)!=O););var oe=(F[1]||"").match(/boundary="(.*?)"/);if(!oe)throw new Error("MAD cannot find boundary");var ye="--"+(oe[1]||""),ie=[],le=[],de={FileIndex:ie,FullPaths:le};S(de);var Oe,Be=0;for(W=0;W<F.length;++W){var Ve=F[W];Ve!==ye&&Ve!==ye+"--"||(Be++&&fr(de,F.slice(Oe,W),O),Oe=W)}return de}function Dt(T,L){var O=L||{},F=O.boundary||"SheetJS";F="------="+F;for(var W=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+F.slice(2)+'"',"","",""],z=T.FullPaths[0],oe=z,ye=T.FileIndex[0],ie=1;ie<T.FullPaths.length;++ie)if(oe=T.FullPaths[ie].slice(z.length),ye=T.FileIndex[ie],!(!ye.size||!ye.content||oe=="Sh33tJ5")){oe=oe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ut){return"_x"+ut.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ut){return"_u"+ut.charCodeAt(0).toString(16)+"_"});for(var le=ye.content,de=Tt&&Buffer.isBuffer(le)?le.toString("binary"):re(le),Oe=0,Be=Math.min(1024,de.length),Ve=0,Re=0;Re<=Be;++Re)(Ve=de.charCodeAt(Re))>=32&&Ve<128&&++Oe;var Ue=Oe>=Be*4/5;W.push(F),W.push("Content-Location: "+(O.root||"file:///C:/SheetJS/")+oe),W.push("Content-Transfer-Encoding: "+(Ue?"quoted-printable":"base64")),W.push("Content-Type: "+rr(ye,oe)),W.push(""),W.push(Ue?_r(de):bt(de))}return W.push(F+`--\r
`),W.join(`\r
`)}function on(T){var L={};return S(L,T),L}function It(T,L,O,F){var W=F&&F.unsafe;W||S(T);var z=!W&&Vt.find(T,L);if(!z){var oe=T.FullPaths[0];L.slice(0,oe.length)==oe?oe=L:(oe.slice(-1)!="/"&&(oe+="/"),oe=(oe+L).replace("//","/")),z={name:a(L),type:2},T.FileIndex.push(z),T.FullPaths.push(oe),W||Vt.utils.cfb_gc(T)}return z.content=O,z.size=O?O.length:0,F&&(F.CLSID&&(z.clsid=F.CLSID),F.mt&&(z.mt=F.mt),F.ct&&(z.ct=F.ct)),z}function $r(T,L){S(T);var O=Vt.find(T,L);if(O){for(var F=0;F<T.FileIndex.length;++F)if(T.FileIndex[F]==O)return T.FileIndex.splice(F,1),T.FullPaths.splice(F,1),!0}return!1}function gn(T,L,O){S(T);var F=Vt.find(T,L);if(F){for(var W=0;W<T.FileIndex.length;++W)if(T.FileIndex[W]==F)return T.FileIndex[W].name=a(O),T.FullPaths[W]=O,!0}return!1}function qo(T){A(T,!0)}return t.find=k,t.read=_,t.parse=u,t.write=xe,t.writeFile=K,t.utils={cfb_new:on,cfb_add:It,cfb_del:$r,cfb_mov:gn,cfb_gc:qo,ReadShift:rd,CheckField:I_,prep_blob:Qn,bconcat:Zr,use_zlib:D,_deflateRaw:ge,_inflateRaw:Me,consts:ne},t}();function jL(e){return typeof e=="string"?p0(e):Array.isArray(e)?X8(e):e}function ju(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=p0(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Ud(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([jL(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Nu(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function an(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function bw(e,t){for(var r=[],n=an(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function bv(e){for(var t=[],r=an(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function v0(e){for(var t=[],r=an(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function bL(e){for(var t=[],r=an(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var wh=new Date(1899,11,30,0,0,0);function zn(e,t){var r=e.getTime(),n=wh.getTime()+(e.getTimezoneOffset()-wh.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var w_=new Date,SL=wh.getTime()+(w_.getTimezoneOffset()-wh.getTimezoneOffset())*6e4,Sw=w_.getTimezoneOffset();function N_(e){var t=new Date;return t.setTime(e*24*60*60*1e3+SL),t.getTimezoneOffset()!==Sw&&t.setTime(t.getTime()+(t.getTimezoneOffset()-Sw)*6e4),t}var Ew=new Date("2017-02-19T19:06:09.000Z"),j_=isNaN(Ew.getFullYear())?new Date("2/19/17"):Ew,EL=j_.getFullYear()==2017;function kn(e,t){var r=new Date(e);if(EL)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(j_.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function y0(e,t){if(Tt&&Buffer.isBuffer(e))return e.toString("binary");if(typeof TextDecoder<"u")try{var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Hn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Hn(e[r]));return t}function wr(e,t){for(var r="";r.length<t;)r+=e;return r}function Ca(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var _L=["january","february","march","april","may","june","july","august","september","october","november","december"];function Wd(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&_L.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}function xt(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Tt?n=za(r):n=K8(r),Vt.utils.cfb_add(e,t,n)}Vt.utils.cfb_add(e,t,r)}else e.file(t,r)}function Sv(){return Vt.utils.cfb_new()}var Or=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,CL={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Ev=bv(CL),_v=/[&<>'"]/g,TL=/[\u0000-\u0008\u000b-\u001f]/g;function Wt(e){var t=e+"";return t.replace(_v,function(r){return Ev[r]}).replace(TL,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function _w(e){return Wt(e).replace(/ /g,"_x0020_")}var b_=/[\u0000-\u001f]/g;function kL(e){var t=e+"";return t.replace(_v,function(r){return Ev[r]}).replace(/\n/g,"<br/>").replace(b_,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function AL(e){var t=e+"";return t.replace(_v,function(r){return Ev[r]}).replace(b_,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function OL(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function DL(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Em(e){for(var t="",r=0,n=0,a=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function Cw(e){var t=Fo(2*e.length),r,n,a=1,i=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function Tw(e){return za(e,"binary").toString("utf8")}var rf="foo bar bazâð£",td=Tt&&(Tw(rf)==Em(rf)&&Tw||Cw(rf)==Em(rf)&&Cw)||Em,Ud=Tt?function(e){return za(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},RL=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),S_=/(^\s|\s$|\n)/;function en(e,t){return"<"+e+(t.match(S_)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function zd(e){return an(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Fe(e,t,r){return"<"+e+(r!=null?zd(r):"")+(t!=null?(t.match(S_)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function hx(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function PL(e,t){switch(typeof e){case"string":var r=Fe("vt:lpwstr",Wt(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Fe((e|0)==e?"vt:i4":"vt:r8",Wt(String(e)));case"boolean":return Fe("vt:bool",e?"true":"false")}if(e instanceof Date)return Fe("vt:filetime",hx(e));throw new Error("Unable to serialize "+e)}var Ur={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},hc=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Zn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function FL(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function ML(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,o=n?-t:t;isFinite(o)?o==0?a=i=0:(a=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var kw=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},Aw=Tt?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:za(t)})):kw(e)}:kw,Ow=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(Bc(e,a)));return n.join("").replace(ed,"")},Cv=Tt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(ed,""):Ow(e,t,r)}:Ow,Dw=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},E_=Tt?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):Dw(e,t,r)}:Dw,Rw=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(rl(e,a)));return n.join("")},bu=Tt?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):Rw(t,r,n)}:Rw,__=function(e,t){var r=es(e,t);return r>0?bu(e,t+4,t+4+r-1):""},C_=__,T_=function(e,t){var r=es(e,t);return r>0?bu(e,t+4,t+4+r-1):""},k_=T_,A_=function(e,t){var r=2*es(e,t);return r>0?bu(e,t+4,t+4+r-1):""},O_=A_,D_=function(t,r){var n=es(t,r);return n>0?Cv(t,r+4,r+4+n):""},R_=D_,P_=function(e,t){var r=es(e,t);return r>0?bu(e,t+4,t+4+r):""},F_=P_,M_=function(e,t){return FL(e,t)},Nh=M_,Tv=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Tt&&(C_=function(t,r){if(!Buffer.isBuffer(t))return __(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},k_=function(t,r){if(!Buffer.isBuffer(t))return T_(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},O_=function(t,r){if(!Buffer.isBuffer(t))return A_(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},R_=function(t,r){if(!Buffer.isBuffer(t))return D_(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},F_=function(t,r){if(!Buffer.isBuffer(t))return P_(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Nh=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):M_(t,r)},Tv=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var rl=function(e,t){return e[t]},Bc=function(e,t){return e[t+1]*256+e[t]},IL=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},es=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},ro=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},LL=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function rd(e,t){var r="",n,a,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,Tt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Bc(this,d)),d+=2;e*=2;break;case"utf8":r=bu(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Cv(this,this.l,this.l+e);break;case"wstr":return rd.call(this,e,"dbcs");case"lpstr-ansi":r=C_(this,this.l),e=4+es(this,this.l);break;case"lpstr-cp":r=k_(this,this.l),e=4+es(this,this.l);break;case"lpwstr":r=O_(this,this.l),e=4+2*es(this,this.l);break;case"lpp4":e=4+es(this,this.l),r=R_(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+es(this,this.l),r=F_(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=rl(this,this.l+e++))!==0;)i.push(Zu(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Bc(this,this.l+e))!==0;)i.push(Zu(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=rl(this,d),this.l=d+1,l=rd.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Zu(Bc(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=rl(this,d),this.l=d+1,l=rd.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Zu(rl(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=rl(this,this.l),this.l++,n;case 2:return n=(t==="i"?IL:Bc)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?ro:LL)(this,this.l),this.l+=4,n):(a=es(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=Nh(this,this.l):a=Nh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=E_(this,this.l,e);break}}return this.l+=e,r}var $L=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},BL=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},WL=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function UL(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)WL(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,$L(this,t,this.l);break;case 8:if(n=8,r==="f"){ML(this,t,this.l);break}case 16:break;case-4:n=4,BL(this,t,this.l);break}return this.l+=n,this}function I_(e,t){var r=E_(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Qn(e,t){e.l=t,e.read_shift=rd,e.chk=I_,e.write_shift=UL}function fa(e,t){e.l+=t}function ve(e){var t=Fo(e);return Qn(t,0),t}function Wn(){var e=[],t=Tt?256:2048,r=function(d){var u=ve(d);return Qn(u,0),u},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(a(),n=r(Math.max(d+1,t)))},o=function(){return a(),Zr(e)},l=function(d){a(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Ee(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=FU[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&Tv(r)&&e.push(r)}}function nd(e,t,r){var n=Hn(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Pw(e,t,r){var n=Hn(e);return n.s=nd(n.s,t.s,r),n.e=nd(n.e,t.s,r),n}function sd(e,t){if(e.cRel&&e.c<0)for(e=Hn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Hn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=zt(e);return!e.cRel&&e.cRel!=null&&(r=VL(r)),!e.rRel&&e.rRel!=null&&(r=zL(r)),r}function _m(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+fn(e.s.c)+":"+(e.e.cRel?"":"$")+fn(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+rn(e.s.r)+":"+(e.e.rRel?"":"$")+rn(e.e.r):sd(e.s,t.biff)+":"+sd(e.e,t.biff)}function kv(e){return parseInt(HL(e),10)-1}function rn(e){return""+(e+1)}function zL(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function HL(e){return e.replace(/\$(\d+)$/,"$1")}function Av(e){for(var t=GL(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function fn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function VL(e){return e.replace(/^([A-Z])/,"$$$1")}function GL(e){return e.replace(/^\$([A-Z])/,"$1")}function qL(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Vr(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function zt(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function os(e){var t=e.indexOf(":");return t==-1?{s:Vr(e),e:Vr(e)}:{s:Vr(e.slice(0,t)),e:Vr(e.slice(t+1))}}function Ar(e,t){return typeof t>"u"||typeof t=="number"?Ar(e.s,e.e):(typeof e!="string"&&(e=zt(e)),typeof t!="string"&&(t=zt(t)),e==t?e:e+":"+t)}function lr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function Fw(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Ii(e.z,r?zn(t):t)}catch{}try{return e.w=Ii((e.XF||{}).numFmtId||(r?14:0),r?zn(t):t)}catch{return""+t}}function Ia(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Su[e.v]||e.v:t==null?Fw(e,e.v):Fw(e,t))}function Uo(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function L_(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Vr(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=lr(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var m=0;m!=t.length;++m)if(t[m]){if(!Array.isArray(t[m]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=t[m].length;++f)if(!(typeof t[m][f]>"u")){var p={v:t[m][f]},g=o+m,h=l+f;if(d.s.r>g&&(d.s.r=g),d.s.c>h&&(d.s.c=h),d.e.r<g&&(d.e.r=g),d.e.c<h&&(d.e.c=h),t[m][f]&&typeof t[m][f]=="object"&&!Array.isArray(t[m][f])&&!(t[m][f]instanceof Date))p=t[m][f];else if(Array.isArray(p.v)&&(p.f=t[m][f][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Nr[14],n.cellDates?(p.t="d",p.w=Ii(p.z,zn(p.v))):(p.t="n",p.v=zn(p.v),p.w=Ii(p.z,p.v))):p.t="s";if(a)i[g]||(i[g]=[]),i[g][h]&&i[g][h].z&&(p.z=i[g][h].z),i[g][h]=p;else{var x=zt({c:h,r:g});i[x]&&i[x].z&&(p.z=i[x].z),i[x]=p}}}return d.s.c<1e7&&(i["!ref"]=Ar(d)),i}function mc(e,t){return L_(null,e,t)}function XL(e){return e.read_shift(4,"i")}function Ws(e,t){return t||(t=ve(4)),t.write_shift(4,e),t}function hn(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Gr(e,t){var r=!1;return t==null&&(r=!0,t=ve(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function KL(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function YL(e,t){return t||(t=ve(4)),t.write_shift(2,0),t.write_shift(2,0),t}function Ov(e,t){var r=e.l,n=e.read_shift(1),a=hn(e),i=[],o={t:a,h:a};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(KL(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function QL(e,t){var r=!1;return t==null&&(r=!0,t=ve(15+4*e.t.length)),t.write_shift(1,0),Gr(e.t,t),r?t.slice(0,t.l):t}var JL=Ov;function ZL(e,t){var r=!1;return t==null&&(r=!0,t=ve(23+4*e.t.length)),t.write_shift(1,1),Gr(e.t,t),t.write_shift(4,1),YL({ich:0,ifnt:0},t),r?t.slice(0,t.l):t}function Ss(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function zo(e,t){return t==null&&(t=ve(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Ho(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Vo(e,t){return t==null&&(t=ve(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var e7=hn,$_=Gr;function Dv(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function jh(e,t){var r=!1;return t==null&&(r=!0,t=ve(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var t7=hn,mx=Dv,Rv=jh;function B_(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?Nh([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):ro(t,0)>>2;return r?a/100:a}function W_(e,t){t==null&&(t=ve(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-(1<<29)&&e<1<<29?n=1:a==(a|0)&&a>=-(1<<29)&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function U_(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function r7(e,t){return t||(t=ve(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Go=U_,pc=r7;function xc(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Mo(e,t){return(t||ve(8)).write_shift(8,e,"f")}function n7(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var d=f7[a];d&&(t.rgb=Gw(d));break;case 2:t.rgb=Gw([o,l,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function bh(e,t){if(t||(t=ve(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function s7(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function a7(e,t){t||(t=ve(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}var z_=2,Xn=3,nf=11,Sh=19,sf=64,i7=65,o7=71,l7=4108,c7=4126,Jr=80,Mw={1:{n:"CodePage",t:z_},2:{n:"Category",t:Jr},3:{n:"PresentationFormat",t:Jr},4:{n:"ByteCount",t:Xn},5:{n:"LineCount",t:Xn},6:{n:"ParagraphCount",t:Xn},7:{n:"SlideCount",t:Xn},8:{n:"NoteCount",t:Xn},9:{n:"HiddenCount",t:Xn},10:{n:"MultimediaClipCount",t:Xn},11:{n:"ScaleCrop",t:nf},12:{n:"HeadingPairs",t:l7},13:{n:"TitlesOfParts",t:c7},14:{n:"Manager",t:Jr},15:{n:"Company",t:Jr},16:{n:"LinksUpToDate",t:nf},17:{n:"CharacterCount",t:Xn},19:{n:"SharedDoc",t:nf},22:{n:"HyperlinksChanged",t:nf},23:{n:"AppVersion",t:Xn,p:"version"},24:{n:"DigSig",t:i7},26:{n:"ContentType",t:Jr},27:{n:"ContentStatus",t:Jr},28:{n:"Language",t:Jr},29:{n:"Version",t:Jr},255:{},2147483648:{n:"Locale",t:Sh},2147483651:{n:"Behavior",t:Sh},1919054434:{}},Iw={1:{n:"CodePage",t:z_},2:{n:"Title",t:Jr},3:{n:"Subject",t:Jr},4:{n:"Author",t:Jr},5:{n:"Keywords",t:Jr},6:{n:"Comments",t:Jr},7:{n:"Template",t:Jr},8:{n:"LastAuthor",t:Jr},9:{n:"RevNumber",t:Jr},10:{n:"EditTime",t:sf},11:{n:"LastPrinted",t:sf},12:{n:"CreatedDate",t:sf},13:{n:"ModifiedDate",t:sf},14:{n:"PageCount",t:Xn},15:{n:"WordCount",t:Xn},16:{n:"CharCount",t:Xn},17:{n:"Thumbnail",t:o7},18:{n:"Application",t:Jr},19:{n:"DocSecurity",t:Xn},255:{},2147483648:{n:"Locale",t:Sh},2147483651:{n:"Behavior",t:Sh},1919054434:{}};function d7(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var u7=d7([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),f7=Hn(u7),Su={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},h7={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},af={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function H_(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function V_(e,t){var r=bL(h7),n=[],a;n[n.length]=Or,n[n.length]=Fe("Types",null,{xmlns:Ur.CT,"xmlns:xsd":Ur.xsd,"xmlns:xsi":Ur.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Fe("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Fe("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:af[c][t.bookType]||af[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Fe("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:af[c][t.bookType]||af[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Fe("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var St={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function G_(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Al(e){var t=[Or,Fe("Relationships",null,{xmlns:Ur.RELS})];return an(e["!id"]).forEach(function(r){t[t.length]=Fe("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Bt(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[St.HLINK,St.XPATH,St.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}function m7(e){var t=[Or];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function Lw(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function p7(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function x7(e){var t=[Or];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(Lw(e[r][0],e[r][1])),t.push(p7("",e[r][0]));return t.push(Lw("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function q_(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+xh.version+"</meta:generator></office:meta></office:document-meta>"}var yo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Cm(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Wt(t),n[n.length]=r?Fe(e,t,r):en(e,t))}function X_(e,t){var r=t||{},n=[Or,Fe("cp:coreProperties",null,{"xmlns:cp":Ur.CORE_PROPS,"xmlns:dc":Ur.dc,"xmlns:dcterms":Ur.dcterms,"xmlns:dcmitype":Ur.dcmitype,"xmlns:xsi":Ur.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&Cm("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:hx(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&Cm("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:hx(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=yo.length;++i){var o=yo[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&Cm(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Ol=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],K_=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Y_(e){var t=[],r=Fe;return e||(e={}),e.Application="SheetJS",t[t.length]=Or,t[t.length]=Fe("Properties",null,{xmlns:Ur.EXT_PROPS,"xmlns:vt":Ur.vt}),Ol.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Wt(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Wt(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Q_(e){var t=[Or,Fe("Properties",null,{xmlns:Ur.CUST_PROPS,"xmlns:vt":Ur.vt})];if(!e)return t.join("");var r=1;return an(e).forEach(function(a){++r,t[t.length]=Fe("property",PL(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Wt(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var $w={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function g7(e,t){var r=[];return an($w).map(function(n){for(var a=0;a<yo.length;++a)if(yo[a][1]==n)return yo[a];for(a=0;a<Ol.length;++a)if(Ol[a][1]==n)return Ol[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(en($w[n[1]]||n[1],a))}}),Fe("DocumentProperties",r.join(""),{xmlns:Zn.o})}function v7(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&an(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<yo.length;++o)if(i==yo[o][1])return;for(o=0;o<Ol.length;++o)if(i==Ol[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(Fe(_w(i),l,{"dt:dt":c}))}}),t&&an(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(Fe(_w(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Zn.o+'">'+a.join("")+"</"+n+">"}function y7(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var o=ve(8);return o.write_shift(4,n),o.write_shift(4,a),o}function Bw(e,t){var r=ve(4),n=ve(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=ve(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=y7(t);break;case 31:case 80:for(n=ve(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Zr([r,n])}var J_=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function w7(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function Ww(e,t,r){var n=ve(8),a=[],i=[],o=8,l=0,c=ve(8),d=ve(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),a.push(d),o+=8+c.length,!t){d=ve(8),d.write_shift(4,0),a.unshift(d);var u=[ve(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var m=e[l][0];for(c=ve(8+2*(m.length+1)+(m.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,m.length+1),c.write_shift(0,m,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=Zr(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(J_.indexOf(e[l][0])>-1||K_.indexOf(e[l][0])>-1)&&e[l][1]!=null){var f=e[l][1],p=0;if(t){p=+t[e[l][0]];var g=r[p];if(g.p=="version"&&typeof f=="string"){var h=f.split(".");f=(+h[0]<<16)+(+h[1]||0)}c=Bw(g.t,f)}else{var x=w7(f);x==-1&&(x=31,f=String(f)),c=Bw(x,f)}i.push(c),d=ve(8),d.write_shift(4,t?p:2+l),a.push(d),o+=8+c.length}var w=8*(i.length+1);for(l=0;l<i.length;++l)a[l].write_shift(4,w),w+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),Zr([n].concat(a).concat(i))}function Uw(e,t,r,n,a,i){var o=ve(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Vt.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var c=Ww(e,r,n);if(l.push(c),a){var d=Ww(a,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return Zr(l)}function N7(e,t){t||(t=ve(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function j7(e,t){return e.read_shift(t)===1}function En(e,t){return t||(t=ve(2)),t.write_shift(2,+!!e),t}function Z_(e){return e.read_shift(2,"u")}function hs(e,t){return t||(t=ve(2)),t.write_shift(2,e),t}function eC(e,t,r){return r||(r=ve(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function tC(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function b7(e){var t=e.t||"",r=ve(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=ve(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Zr(a)}function S7(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function E7(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):S7(e,n,r)}function _7(e,t,r){if(r.biff>5)return E7(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function rC(e,t,r){return r||(r=ve(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function zw(e,t){t||(t=ve(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function C7(e){var t=ve(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),zw(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&zw(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Io(e,t,r,n){return n||(n=ve(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function T7(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,i,o]}function k7(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function nC(e,t){return t||(t=ve(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Pv(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=ve(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function A7(e,t){var r=!t||t.biff==8,n=ve(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function O7(e,t){var r=!t||t.biff>=8?2:1,n=ve(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function D7(e,t){var r=ve(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=b7(e[a]);var i=Zr([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function R7(){var e=ve(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function P7(e){var t=ve(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function F7(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=ve(a);return i.write_shift(2,(e.sz||12)*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function M7(e,t,r,n){var a=ve(10);return Io(e,t,n,a),a.write_shift(4,r),a}function I7(e,t,r,n,a){var i=!a||a.biff==8,o=ve(8+ +i+(1+i)*r.length);return Io(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function L7(e,t,r,n){var a=r&&r.biff==5;n||(n=ve(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function $7(e,t){var r=t.biff==8||!t.biff?4:2,n=ve(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Hw(e,t,r,n){var a=r&&r.biff==5;n||(n=ve(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function B7(e){var t=ve(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function W7(e,t,r,n,a,i){var o=ve(8);return Io(e,t,n,o),eC(r,i,o),o}function U7(e,t,r,n){var a=ve(14);return Io(e,t,n,a),Mo(r,a),a}function z7(e,t,r){if(r.biff<8)return H7(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(T7(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function H7(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=tC(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function V7(e){var t=ve(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)nC(e[r],t);return t}function G7(e){var t=ve(24),r=Vr(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Zr([t,C7(e[1])])}function q7(e){var t=e[1].Tooltip,r=ve(10+2*(t.length+1));r.write_shift(2,2048);var n=Vr(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function X7(e){return e||(e=ve(4)),e.write_shift(2,1),e.write_shift(2,1),e}function K7(e,t,r){if(!r.cellStyles)return fa(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var d={s:a,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function Y7(e,t){var r=ve(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Q7(e){for(var t=ve(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}function J7(e,t,r){var n=ve(15);return _u(n,e,t),n.write_shift(8,r,"f"),n}function Z7(e,t,r){var n=ve(9);return _u(n,e,t),n.write_shift(2,r),n}var e9=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=bv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=Fo(1);switch(c.type){case"base64":u=Ms(Ma(l));break;case"binary":u=Ms(l);break;case"buffer":case"array":u=l;break}Qn(u,0);var m=u.read_shift(1),f=!!(m&136),p=!1,g=!1;switch(m){case 2:break;case 3:break;case 48:p=!0,f=!0;break;case 49:p=!0,f=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+m.toString(16))}var h=0,x=521;m==2&&(h=u.read_shift(2)),u.l+=3,m!=2&&(h=u.read_shift(4)),h>1048576&&(h=1e6),m!=2&&(x=u.read_shift(2));var w=u.read_shift(2),y=c.codepage||1252;m!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(y=e[u[u.l]]),u.l+=1,u.l+=2),g&&(u.l+=36);for(var N=[],j={},b=Math.min(u.length,m==2?521:x-10-(p?264:0)),_=g?32:11;u.l<b&&u[u.l]!=13;)switch(j={},j.name=to.utils.decode(y,u.slice(u.l,u.l+_)).replace(/[\u0000\r\n].*$/g,""),u.l+=_,j.type=String.fromCharCode(u.read_shift(1)),m!=2&&!g&&(j.offset=u.read_shift(4)),j.len=u.read_shift(1),m==2&&(j.offset=u.read_shift(2)),j.dec=u.read_shift(1),j.name.length&&N.push(j),m!=2&&(u.l+=g?13:14),j.type){case"B":(!p||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(u[u.l]!==13&&(u.l=x-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=x;var S=0,C=0;for(d[0]=[],C=0;C!=N.length;++C)d[0][C]=N[C].name;for(;h-- >0;){if(u[u.l]===42){u.l+=w;continue}for(++u.l,d[++S]=[],C=0,C=0;C!=N.length;++C){var A=u.slice(u.l,u.l+N[C].len);u.l+=N[C].len,Qn(A,0);var U=to.utils.decode(y,A);switch(N[C].type){case"C":U.trim().length&&(d[S][C]=U.replace(/\s+$/,""));break;case"D":U.length===8?d[S][C]=new Date(+U.slice(0,4),+U.slice(4,6)-1,+U.slice(6,8)):d[S][C]=U;break;case"F":d[S][C]=parseFloat(U.trim());break;case"+":case"I":d[S][C]=g?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(U.trim().toUpperCase()){case"Y":case"T":d[S][C]=!0;break;case"N":case"F":d[S][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+U+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+m.toString(16));d[S][C]="##MEMO##"+(g?parseInt(U.trim(),10):A.read_shift(4));break;case"N":U=U.replace(/\u0000/g,"").trim(),U&&U!="."&&(d[S][C]=+U||0);break;case"@":d[S][C]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":d[S][C]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":d[S][C]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[S][C]=-A.read_shift(-8,"f");break;case"B":if(p&&N[C].len==8){d[S][C]=A.read_shift(8,"f");break}case"G":case"P":A.l+=N[C].len;break;case"0":if(N[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[C].type)}}}if(m!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=N,d}function n(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=mc(r(l,d),d);return u["!cols"]=d.DBF.map(function(m){return{wch:m.len,DBF:m}}),delete d.DBF,u}function a(l,c){try{return Uo(n(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&$d(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Wn(),m=kh(l,{header:1,raw:!0,cellDates:!0}),f=m[0],p=m.slice(1),g=l["!cols"]||[],h=0,x=0,w=0,y=1;for(h=0;h<f.length;++h){if(((g[h]||{}).DBF||{}).name){f[h]=g[h].DBF.name,++w;continue}if(f[h]!=null){if(++w,typeof f[h]=="number"&&(f[h]=f[h].toString(10)),typeof f[h]!="string")throw new Error("DBF Invalid column name "+f[h]+" |"+typeof f[h]+"|");if(f.indexOf(f[h])!==h){for(x=0;x<1024;++x)if(f.indexOf(f[h]+"_"+x)==-1){f[h]+="_"+x;break}}}}var N=lr(l["!ref"]),j=[],b=[],_=[];for(h=0;h<=N.e.c-N.s.c;++h){var S="",C="",A=0,U=[];for(x=0;x<p.length;++x)p[x][h]!=null&&U.push(p[x][h]);if(U.length==0||f[h]==null){j[h]="?";continue}for(x=0;x<U.length;++x){switch(typeof U[x]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=U[x]instanceof Date?"D":"C";break;default:C="C"}A=Math.max(A,String(U[x]).length),S=S&&S!=C?"C":C}A>250&&(A=250),C=((g[h]||{}).DBF||{}).type,C=="C"&&g[h].DBF.len>A&&(A=g[h].DBF.len),S=="B"&&C=="N"&&(S="N",_[h]=g[h].DBF.dec,A=g[h].DBF.len),b[h]=S=="C"||C=="N"?A:i[S]||0,y+=b[h],j[h]=S}var k=u.next(32);for(k.write_shift(4,318902576),k.write_shift(4,p.length),k.write_shift(2,296+32*w),k.write_shift(2,y),h=0;h<4;++h)k.write_shift(4,0);for(k.write_shift(4,0|(+t[a_]||3)<<8),h=0,x=0;h<f.length;++h)if(f[h]!=null){var R=u.next(32),te=(f[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);R.write_shift(1,te,"sbcs"),R.write_shift(1,j[h]=="?"?"C":j[h],"sbcs"),R.write_shift(4,x),R.write_shift(1,b[h]||i[j[h]]||0),R.write_shift(1,_[h]||0),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(1,0),R.write_shift(4,0),R.write_shift(4,0),x+=b[h]||i[j[h]]||0}var Z=u.next(264);for(Z.write_shift(4,13),h=0;h<65;++h)Z.write_shift(4,0);for(h=0;h<p.length;++h){var se=u.next(y);for(se.write_shift(1,0),x=0;x<f.length;++x)if(f[x]!=null)switch(j[x]){case"L":se.write_shift(1,p[h][x]==null?63:p[h][x]?84:70);break;case"B":se.write_shift(8,p[h][x]||0,"f");break;case"N":var ae="0";for(typeof p[h][x]=="number"&&(ae=p[h][x].toFixed(_[x]||0)),w=0;w<b[x]-ae.length;++w)se.write_shift(1,32);se.write_shift(1,ae,"sbcs");break;case"D":p[h][x]?(se.write_shift(4,("0000"+p[h][x].getFullYear()).slice(-4),"sbcs"),se.write_shift(2,("00"+(p[h][x].getMonth()+1)).slice(-2),"sbcs"),se.write_shift(2,("00"+p[h][x].getDate()).slice(-2),"sbcs")):se.write_shift(8,"00000000","sbcs");break;case"C":var ne=String(p[h][x]!=null?p[h][x]:"").slice(0,b[x]);for(se.write_shift(1,ne,"sbcs"),w=0;w<b[x]-ne.length;++w)se.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),t9=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+an(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,p){var g=e[p];return typeof g=="number"?mw(g):g},n=function(f,p,g){var h=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return h==59?f:mw(h)};e["|"]=254;function a(f,p){switch(p.type){case"base64":return i(Ma(f),p);case"binary":return i(f,p);case"buffer":return i(Tt&&Buffer.isBuffer(f)?f.toString("binary"):Nu(f),p);case"array":return i(y0(f),p)}throw new Error("Unrecognized type "+p.type)}function i(f,p){var g=f.split(/[\n\r]+/),h=-1,x=-1,w=0,y=0,N=[],j=[],b=null,_={},S=[],C=[],A=[],U=0,k;for(+p.codepage>=0&&$d(+p.codepage);w!==g.length;++w){U=0;var R=g[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),te=R.replace(/;;/g,"\0").split(";").map(function(E){return E.replace(/\u0000/g,";")}),Z=te[0],se;if(R.length>0)switch(Z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":te[1].charAt(0)=="P"&&j.push(R.slice(3).replace(/;;/g,";"));break;case"C":var ae=!1,ne=!1,K=!1,re=!1,xe=-1,J=-1;for(y=1;y<te.length;++y)switch(te[y].charAt(0)){case"A":break;case"X":x=parseInt(te[y].slice(1))-1,ne=!0;break;case"Y":for(h=parseInt(te[y].slice(1))-1,ne||(x=0),k=N.length;k<=h;++k)N[k]=[];break;case"K":se=te[y].slice(1),se.charAt(0)==='"'?se=se.slice(1,se.length-1):se==="TRUE"?se=!0:se==="FALSE"?se=!1:isNaN(Ca(se))?isNaN(Wd(se).getDate())||(se=kn(se)):(se=Ca(se),b!==null&&g_(b)&&(se=N_(se))),ae=!0;break;case"E":re=!0;var D=Z9(te[y].slice(1),{r:h,c:x});N[h][x]=[N[h][x],D];break;case"S":K=!0,N[h][x]=[N[h][x],"S5S"];break;case"G":break;case"R":xe=parseInt(te[y].slice(1))-1;break;case"C":J=parseInt(te[y].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+R)}if(ae&&(N[h][x]&&N[h][x].length==2?N[h][x][0]=se:N[h][x]=se,b=null),K){if(re)throw new Error("SYLK shared formula cannot have own formula");var X=xe>-1&&N[xe][J];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");N[h][x][1]=e$(X[1],{r:h-xe,c:x-J})}break;case"F":var V=0;for(y=1;y<te.length;++y)switch(te[y].charAt(0)){case"X":x=parseInt(te[y].slice(1))-1,++V;break;case"Y":for(h=parseInt(te[y].slice(1))-1,k=N.length;k<=h;++k)N[k]=[];break;case"M":U=parseInt(te[y].slice(1))/20;break;case"F":break;case"G":break;case"P":b=j[parseInt(te[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=te[y].slice(1).split(" "),k=parseInt(A[0],10);k<=parseInt(A[1],10);++k)U=parseInt(A[2],10),C[k-1]=U===0?{hidden:!0}:{wch:U},Fv(C[k-1]);break;case"C":x=parseInt(te[y].slice(1))-1,C[x]||(C[x]={});break;case"R":h=parseInt(te[y].slice(1))-1,S[h]||(S[h]={}),U>0?(S[h].hpt=U,S[h].hpx=lC(U)):U===0&&(S[h].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+R)}V<1&&(b=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+R)}}return S.length>0&&(_["!rows"]=S),C.length>0&&(_["!cols"]=C),p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),[N,_]}function o(f,p){var g=a(f,p),h=g[0],x=g[1],w=mc(h,p);return an(x).forEach(function(y){w[y]=x[y]}),w}function l(f,p){return Uo(o(f,p),p)}function c(f,p,g,h){var x="C;Y"+(g+1)+";X"+(h+1)+";K";switch(f.t){case"n":x+=f.v||0,f.f&&!f.F&&(x+=";E"+Iv(f.f,{r:g,c:h}));break;case"b":x+=f.v?"TRUE":"FALSE";break;case"e":x+=f.w||f.v;break;case"d":x+='"'+(f.w||f.v)+'"';break;case"s":x+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function d(f,p){p.forEach(function(g,h){var x="F;W"+(h+1)+" "+(h+1)+" ";g.hidden?x+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=Eh(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=_h(g.wpx)),typeof g.wch=="number"&&(x+=Math.round(g.wch))),x.charAt(x.length-1)!=" "&&f.push(x)})}function u(f,p){p.forEach(function(g,h){var x="F;";g.hidden?x+="M0;":g.hpt?x+="M"+20*g.hpt+";":g.hpx&&(x+="M"+20*Ch(g.hpx)+";"),x.length>2&&f.push(x+"R"+(h+1))})}function m(f,p){var g=["ID;PWXL;N;E"],h=[],x=lr(f["!ref"]),w,y=Array.isArray(f),N=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),f["!cols"]&&d(g,f["!cols"]),f["!rows"]&&u(g,f["!rows"]),g.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var j=x.s.r;j<=x.e.r;++j)for(var b=x.s.c;b<=x.e.c;++b){var _=zt({r:j,c:b});w=y?(f[j]||[])[b]:f[_],!(!w||w.v==null&&(!w.f||w.F))&&h.push(c(w,f,j,b))}return g.join(N)+N+h.join(N)+N+"E"+N}return{to_workbook:l,to_sheet:o,from_sheet:m}}(),r9=function(){function e(i,o){switch(o.type){case"base64":return t(Ma(i),o);case"binary":return t(i,o);case"buffer":return t(Tt&&Buffer.isBuffer(i)?i.toString("binary"):Nu(i),o);case"array":return t(y0(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,m=[];u!==l.length;++u){if(l[u].trim()==="BOT"){m[++c]=[],d=0;continue}if(!(c<0)){var f=l[u].trim().split(","),p=f[0],g=f[1];++u;for(var h=l[u]||"";(h.match(/["]/g)||[]).length&1&&u<l.length-1;)h+=`
`+l[++u];switch(h=h.trim(),+p){case-1:if(h==="BOT"){m[++c]=[],d=0;continue}else if(h!=="EOD")throw new Error("Unrecognized DIF special command "+h);break;case 0:h==="TRUE"?m[c][d]=!0:h==="FALSE"?m[c][d]=!1:isNaN(Ca(g))?isNaN(Wd(g).getDate())?m[c][d]=g:m[c][d]=kn(g):m[c][d]=Ca(g),++d;break;case 1:h=h.slice(1,h.length-1),h=h.replace(/""/g,'"'),h&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),m[c][d++]=h!==""?h:null;break}if(h==="EOD")break}}return o&&o.sheetRows&&(m=m.slice(0,o.sheetRows)),m}function r(i,o){return mc(e(i,o),o)}function n(i,o){return Uo(r(i,o),o)}var a=function(){var i=function(c,d,u,m,f){c.push(d),c.push(u+","+m),c.push('"'+f.replace(/"/g,'""')+'"')},o=function(c,d,u,m){c.push(d+","+u),c.push(d==1?'"'+m.replace(/"/g,'""')+'"':m)};return function(c){var d=[],u=lr(c["!ref"]),m,f=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(d,-1,0,"BOT");for(var g=u.s.c;g<=u.e.c;++g){var h=zt({r:p,c:g});if(m=f?(c[p]||[])[g]:c[h],!m){o(d,1,0,"");continue}switch(m.t){case"n":var x=m.w;!x&&m.v!=null&&(x=m.v),x==null?m.f&&!m.F?o(d,1,0,"="+m.f):o(d,1,0,""):o(d,0,x,"V");break;case"b":o(d,0,m.v?1:0,m.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(m.v)?m.v:'="'+m.v+'"');break;case"d":m.w||(m.w=Ii(m.z||Nr[14],zn(kn(m.v)))),o(d,0,m.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var w=`\r
`,y=d.join(w);return y}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),sC=function(){function e(m){return m.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(m){return m.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(m,f){for(var p=m.split(`
`),g=-1,h=-1,x=0,w=[];x!==p.length;++x){var y=p[x].trim().split(":");if(y[0]==="cell"){var N=Vr(y[1]);if(w.length<=N.r)for(g=w.length;g<=N.r;++g)w[g]||(w[g]=[]);switch(g=N.r,h=N.c,y[2]){case"t":w[g][h]=e(y[3]);break;case"v":w[g][h]=+y[3];break;case"vtf":var j=y[y.length-1];case"vtc":switch(y[3]){case"nl":w[g][h]=!!+y[4];break;default:w[g][h]=+y[4];break}y[2]=="vtf"&&(w[g][h]=[w[g][h],j])}}}return f&&f.sheetRows&&(w=w.slice(0,f.sheetRows)),w}function n(m,f){return mc(r(m,f),f)}function a(m,f){return Uo(n(m,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(m){if(!m||!m["!ref"])return"";for(var f=[],p=[],g,h="",x=os(m["!ref"]),w=Array.isArray(m),y=x.s.r;y<=x.e.r;++y)for(var N=x.s.c;N<=x.e.c;++N)if(h=zt({r:y,c:N}),g=w?(m[y]||[])[N]:m[h],!(!g||g.v==null||g.t==="z")){switch(p=["cell",h,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var j=zn(kn(g.v));p[2]="vtc",p[3]="nd",p[4]=""+j,p[5]=g.w||Ii(g.z||Nr[14],j);break;case"e":continue}f.push(p.join(":"))}return f.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(m){return[i,o,l,o,d(m),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:u}}(),n9=function(){function e(u,m,f,p,g){g.raw?m[f][p]=u:u===""||(u==="TRUE"?m[f][p]=!0:u==="FALSE"?m[f][p]=!1:isNaN(Ca(u))?isNaN(Wd(u).getDate())?m[f][p]=u:m[f][p]=kn(u):m[f][p]=Ca(u))}function t(u,m){var f=m||{},p=[];if(!u||u.length===0)return p;for(var g=u.split(/[\r\n]/),h=g.length-1;h>=0&&g[h].length===0;)--h;for(var x=10,w=0,y=0;y<=h;++y)w=g[y].indexOf(" "),w==-1?w=g[y].length:w++,x=Math.max(x,w);for(y=0;y<=h;++y){p[y]=[];var N=0;for(e(g[y].slice(0,x).trim(),p,y,N,f),N=1;N<=(g[y].length-x)/10+1;++N)e(g[y].slice(x+(N-1)*10,x+N*10).trim(),p,y,N,f)}return f.sheetRows&&(p=p.slice(0,f.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(u){for(var m={},f=!1,p=0,g=0;p<u.length;++p)(g=u.charCodeAt(p))==34?f=!f:!f&&g in r&&(m[g]=(m[g]||0)+1);g=[];for(p in m)Object.prototype.hasOwnProperty.call(m,p)&&g.push([m[p],p]);if(!g.length){m=n;for(p in m)Object.prototype.hasOwnProperty.call(m,p)&&g.push([m[p],p])}return g.sort(function(h,x){return h[0]-x[0]||n[h[1]]-n[x[1]]}),r[g.pop()[1]]||44}function i(u,m){var f=m||{},p="",g=f.dense?[]:{},h={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=a(u.slice(0,1024)):f&&f.FS?p=f.FS:p=a(u.slice(0,1024));var x=0,w=0,y=0,N=0,j=0,b=p.charCodeAt(0),_=!1,S=0,C=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var A=f.dateNF!=null?yL(f.dateNF):null;function U(){var k=u.slice(N,j),R={};if(k.charAt(0)=='"'&&k.charAt(k.length-1)=='"'&&(k=k.slice(1,-1).replace(/""/g,'"')),k.length===0)R.t="z";else if(f.raw)R.t="s",R.v=k;else if(k.trim().length===0)R.t="s",R.v=k;else if(k.charCodeAt(0)==61)k.charCodeAt(1)==34&&k.charCodeAt(k.length-1)==34?(R.t="s",R.v=k.slice(2,-1).replace(/""/g,'"')):t$(k)?(R.t="n",R.f=k.slice(1)):(R.t="s",R.v=k);else if(k=="TRUE")R.t="b",R.v=!0;else if(k=="FALSE")R.t="b",R.v=!1;else if(!isNaN(y=Ca(k)))R.t="n",f.cellText!==!1&&(R.w=k),R.v=y;else if(!isNaN(Wd(k).getDate())||A&&k.match(A)){R.z=f.dateNF||Nr[14];var te=0;A&&k.match(A)&&(k=wL(k,f.dateNF,k.match(A)||[]),te=1),f.cellDates?(R.t="d",R.v=kn(k,te)):(R.t="n",R.v=zn(kn(k,te))),f.cellText!==!1&&(R.w=Ii(R.z,R.v instanceof Date?zn(R.v):R.v)),f.cellNF||delete R.z}else R.t="s",R.v=k;if(R.t=="z"||(f.dense?(g[x]||(g[x]=[]),g[x][w]=R):g[zt({c:w,r:x})]=R),N=j+1,C=u.charCodeAt(N),h.e.c<w&&(h.e.c=w),h.e.r<x&&(h.e.r=x),S==b)++w;else if(w=0,++x,f.sheetRows&&f.sheetRows<=x)return!0}e:for(;j<u.length;++j)switch(S=u.charCodeAt(j)){case 34:C===34&&(_=!_);break;case b:case 10:case 13:if(!_&&U())break e;break}return j-N>0&&U(),g["!ref"]=Ar(h),g}function o(u,m){return!(m&&m.PRN)||m.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,m):mc(t(u,m),m)}function l(u,m){var f="",p=m.type=="string"?[0,0,0,0]:pz(u,m);switch(m.type){case"base64":f=Ma(u);break;case"binary":f=u;break;case"buffer":m.codepage==65001?f=u.toString("utf8"):m.codepage&&typeof to<"u"?f=to.utils.decode(m.codepage,u):f=Tt&&Buffer.isBuffer(u)?u.toString("binary"):Nu(u);break;case"array":f=y0(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+m.type)}return p[0]==239&&p[1]==187&&p[2]==191?f=td(f.slice(3)):m.type!="string"&&m.type!="buffer"&&m.codepage==65001?f=td(f):m.type=="binary"&&typeof to<"u"&&m.codepage&&(f=to.utils.decode(m.codepage,to.utils.encode(28591,f))),f.slice(0,19)=="socialcalc:version:"?sC.to_sheet(m.type=="string"?f:td(f),m):o(f,m)}function c(u,m){return Uo(l(u,m),m)}function d(u){for(var m=[],f=lr(u["!ref"]),p,g=Array.isArray(u),h=f.s.r;h<=f.e.r;++h){for(var x=[],w=f.s.c;w<=f.e.c;++w){var y=zt({r:h,c:w});if(p=g?(u[h]||[])[w]:u[y],!p||p.v==null){x.push("          ");continue}for(var N=(p.w||(Ia(p),p.w)||"").slice(0,10);N.length<10;)N+=" ";x.push(N+(w===0?" ":""))}m.push(x.join(""))}return m.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}(),Vw=function(){function e(D,X,V){if(D){Qn(D,D.l||0);for(var E=V.Enum||xe;D.l<D.length;){var I=D.read_shift(2),G=E[I]||E[65535],me=D.read_shift(2),he=D.l+me,B=G.f&&G.f(D,me,V);if(D.l=he,X(B,G,I))return}}}function t(D,X){switch(X.type){case"base64":return r(Ms(Ma(D)),X);case"binary":return r(Ms(D),X);case"buffer":case"array":return r(D,X)}throw"Unsupported type "+X.type}function r(D,X){if(!D)return D;var V=X||{},E=V.dense?[]:{},I="Sheet1",G="",me=0,he={},B=[],be=[],pe={s:{r:0,c:0},e:{r:0,c:0}},Y=V.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)V.Enum=xe,e(D,function(ue,Pe,je){switch(je){case 0:V.vers=ue,ue>=4096&&(V.qpro=!0);break;case 6:pe=ue;break;case 204:ue&&(G=ue);break;case 222:G=ue;break;case 15:case 51:V.qpro||(ue[1].v=ue[1].v.slice(1));case 13:case 14:case 16:je==14&&(ue[2]&112)==112&&(ue[2]&15)>1&&(ue[2]&15)<15&&(ue[1].z=V.dateNF||Nr[14],V.cellDates&&(ue[1].t="d",ue[1].v=N_(ue[1].v))),V.qpro&&ue[3]>me&&(E["!ref"]=Ar(pe),he[I]=E,B.push(I),E=V.dense?[]:{},pe={s:{r:0,c:0},e:{r:0,c:0}},me=ue[3],I=G||"Sheet"+(me+1),G="");var ke=V.dense?(E[ue[0].r]||[])[ue[0].c]:E[zt(ue[0])];if(ke){ke.t=ue[1].t,ke.v=ue[1].v,ue[1].z!=null&&(ke.z=ue[1].z),ue[1].f!=null&&(ke.f=ue[1].f);break}V.dense?(E[ue[0].r]||(E[ue[0].r]=[]),E[ue[0].r][ue[0].c]=ue[1]):E[zt(ue[0])]=ue[1];break}},V);else if(D[2]==26||D[2]==14)V.Enum=J,D[2]==14&&(V.qpro=!0,D.l=0),e(D,function(ue,Pe,je){switch(je){case 204:I=ue;break;case 22:ue[1].v=ue[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ue[3]>me&&(E["!ref"]=Ar(pe),he[I]=E,B.push(I),E=V.dense?[]:{},pe={s:{r:0,c:0},e:{r:0,c:0}},me=ue[3],I="Sheet"+(me+1)),Y>0&&ue[0].r>=Y)break;V.dense?(E[ue[0].r]||(E[ue[0].r]=[]),E[ue[0].r][ue[0].c]=ue[1]):E[zt(ue[0])]=ue[1],pe.e.c<ue[0].c&&(pe.e.c=ue[0].c),pe.e.r<ue[0].r&&(pe.e.r=ue[0].r);break;case 27:ue[14e3]&&(be[ue[14e3][0]]=ue[14e3][1]);break;case 1537:be[ue[0]]=ue[1],ue[0]==me&&(I=ue[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(E["!ref"]=Ar(pe),he[G||I]=E,B.push(G||I),!be.length)return{SheetNames:B,Sheets:he};for(var P={},ce=[],Se=0;Se<be.length;++Se)he[B[Se]]?(ce.push(be[Se]||B[Se]),P[be[Se]]=he[be[Se]]||he[B[Se]]):(ce.push(be[Se]),P[be[Se]]={"!ref":"A1"});return{SheetNames:ce,Sheets:P}}function n(D,X){var V=X||{};if(+V.codepage>=0&&$d(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var E=Wn(),I=lr(D["!ref"]),G=Array.isArray(D),me=[];Ie(E,0,i(1030)),Ie(E,6,c(I));for(var he=Math.min(I.e.r,8191),B=I.s.r;B<=he;++B)for(var be=rn(B),pe=I.s.c;pe<=I.e.c;++pe){B===I.s.r&&(me[pe]=fn(pe));var Y=me[pe]+be,P=G?(D[B]||[])[pe]:D[Y];if(!(!P||P.t=="z"))if(P.t=="n")(P.v|0)==P.v&&P.v>=-32768&&P.v<=32767?Ie(E,13,p(B,pe,P.v)):Ie(E,14,h(B,pe,P.v));else{var ce=Ia(P);Ie(E,15,m(B,pe,ce.slice(0,239)))}}return Ie(E,1),E.end()}function a(D,X){var V=X||{};if(+V.codepage>=0&&$d(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var E=Wn();Ie(E,0,o(D));for(var I=0,G=0;I<D.SheetNames.length;++I)(D.Sheets[D.SheetNames[I]]||{})["!ref"]&&Ie(E,27,re(D.SheetNames[I],G++));var me=0;for(I=0;I<D.SheetNames.length;++I){var he=D.Sheets[D.SheetNames[I]];if(!(!he||!he["!ref"])){for(var B=lr(he["!ref"]),be=Array.isArray(he),pe=[],Y=Math.min(B.e.r,8191),P=B.s.r;P<=Y;++P)for(var ce=rn(P),Se=B.s.c;Se<=B.e.c;++Se){P===B.s.r&&(pe[Se]=fn(Se));var ue=pe[Se]+ce,Pe=be?(he[P]||[])[Se]:he[ue];if(!(!Pe||Pe.t=="z"))if(Pe.t=="n")Ie(E,23,U(P,Se,me,Pe.v));else{var je=Ia(Pe);Ie(E,22,S(P,Se,me,je.slice(0,239)))}}++me}}return Ie(E,1),E.end()}function i(D){var X=ve(2);return X.write_shift(2,D),X}function o(D){var X=ve(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var V=0,E=0,I=0,G=0;G<D.SheetNames.length;++G){var me=D.SheetNames[G],he=D.Sheets[me];if(!(!he||!he["!ref"])){++I;var B=os(he["!ref"]);V<B.e.r&&(V=B.e.r),E<B.e.c&&(E=B.e.c)}}return V>8191&&(V=8191),X.write_shift(2,V),X.write_shift(1,I),X.write_shift(1,E),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function l(D,X,V){var E={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&V.qpro?(E.s.c=D.read_shift(1),D.l++,E.s.r=D.read_shift(2),E.e.c=D.read_shift(1),D.l++,E.e.r=D.read_shift(2),E):(E.s.c=D.read_shift(2),E.s.r=D.read_shift(2),X==12&&V.qpro&&(D.l+=2),E.e.c=D.read_shift(2),E.e.r=D.read_shift(2),X==12&&V.qpro&&(D.l+=2),E.s.c==65535&&(E.s.c=E.e.c=E.s.r=E.e.r=0),E)}function c(D){var X=ve(8);return X.write_shift(2,D.s.c),X.write_shift(2,D.s.r),X.write_shift(2,D.e.c),X.write_shift(2,D.e.r),X}function d(D,X,V){var E=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(E[0].c=D.read_shift(1),E[3]=D.read_shift(1),E[0].r=D.read_shift(2),D.l+=2):(E[2]=D.read_shift(1),E[0].c=D.read_shift(2),E[0].r=D.read_shift(2)),E}function u(D,X,V){var E=D.l+X,I=d(D,X,V);if(I[1].t="s",V.vers==20768){D.l++;var G=D.read_shift(1);return I[1].v=D.read_shift(G,"utf8"),I}return V.qpro&&D.l++,I[1].v=D.read_shift(E-D.l,"cstr"),I}function m(D,X,V){var E=ve(7+V.length);E.write_shift(1,255),E.write_shift(2,X),E.write_shift(2,D),E.write_shift(1,39);for(var I=0;I<E.length;++I){var G=V.charCodeAt(I);E.write_shift(1,G>=128?95:G)}return E.write_shift(1,0),E}function f(D,X,V){var E=d(D,X,V);return E[1].v=D.read_shift(2,"i"),E}function p(D,X,V){var E=ve(7);return E.write_shift(1,255),E.write_shift(2,X),E.write_shift(2,D),E.write_shift(2,V,"i"),E}function g(D,X,V){var E=d(D,X,V);return E[1].v=D.read_shift(8,"f"),E}function h(D,X,V){var E=ve(13);return E.write_shift(1,255),E.write_shift(2,X),E.write_shift(2,D),E.write_shift(8,V,"f"),E}function x(D,X,V){var E=D.l+X,I=d(D,X,V);if(I[1].v=D.read_shift(8,"f"),V.qpro)D.l=E;else{var G=D.read_shift(2);j(D.slice(D.l,D.l+G),I),D.l+=G}return I}function w(D,X,V){var E=X&32768;return X&=-32769,X=(E?D:0)+(X>=8192?X-16384:X),(E?"":"$")+(V?fn(X):rn(X))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(D,X){Qn(D,0);for(var V=[],E=0,I="",G="",me="",he="";D.l<D.length;){var B=D[D.l++];switch(B){case 0:V.push(D.read_shift(8,"f"));break;case 1:G=w(X[0].c,D.read_shift(2),!0),I=w(X[0].r,D.read_shift(2),!1),V.push(G+I);break;case 2:{var be=w(X[0].c,D.read_shift(2),!0),pe=w(X[0].r,D.read_shift(2),!1);G=w(X[0].c,D.read_shift(2),!0),I=w(X[0].r,D.read_shift(2),!1),V.push(be+pe+":"+G+I)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(D.read_shift(2));break;case 6:{for(var Y="";B=D[D.l++];)Y+=String.fromCharCode(B);V.push('"'+Y.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:he=V.pop(),me=V.pop(),V.push(["AND","OR"][B-20]+"("+me+","+he+")");break;default:if(B<32&&N[B])he=V.pop(),me=V.pop(),V.push(me+N[B]+he);else if(y[B]){if(E=y[B][1],E==69&&(E=D[D.l++]),E>V.length){console.error("WK1 bad formula parse 0x"+B.toString(16)+":|"+V.join("|")+"|");return}var P=V.slice(-E);V.length-=E,V.push(y[B][0]+"("+P.join(",")+")")}else return B<=7?console.error("WK1 invalid opcode "+B.toString(16)):B<=24?console.error("WK1 unsupported op "+B.toString(16)):B<=30?console.error("WK1 invalid opcode "+B.toString(16)):B<=115?console.error("WK1 unsupported function opcode "+B.toString(16)):console.error("WK1 unrecognized opcode "+B.toString(16))}}V.length==1?X[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function b(D){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=D.read_shift(2),X[3]=D[D.l++],X[0].c=D[D.l++],X}function _(D,X){var V=b(D);return V[1].t="s",V[1].v=D.read_shift(X-4,"cstr"),V}function S(D,X,V,E){var I=ve(6+E.length);I.write_shift(2,D),I.write_shift(1,V),I.write_shift(1,X),I.write_shift(1,39);for(var G=0;G<E.length;++G){var me=E.charCodeAt(G);I.write_shift(1,me>=128?95:me)}return I.write_shift(1,0),I}function C(D,X){var V=b(D);V[1].v=D.read_shift(2);var E=V[1].v>>1;if(V[1].v&1)switch(E&7){case 0:E=(E>>3)*5e3;break;case 1:E=(E>>3)*500;break;case 2:E=(E>>3)/20;break;case 3:E=(E>>3)/200;break;case 4:E=(E>>3)/2e3;break;case 5:E=(E>>3)/2e4;break;case 6:E=(E>>3)/16;break;case 7:E=(E>>3)/64;break}return V[1].v=E,V}function A(D,X){var V=b(D),E=D.read_shift(4),I=D.read_shift(4),G=D.read_shift(2);if(G==65535)return E===0&&I===3221225472?(V[1].t="e",V[1].v=15):E===0&&I===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var me=G&32768;return G=(G&32767)-16446,V[1].v=(1-me*2)*(I*Math.pow(2,G+32)+E*Math.pow(2,G)),V}function U(D,X,V,E){var I=ve(14);if(I.write_shift(2,D),I.write_shift(1,V),I.write_shift(1,X),E==0)return I.write_shift(4,0),I.write_shift(4,0),I.write_shift(2,65535),I;var G=0,me=0,he=0,B=0;return E<0&&(G=1,E=-E),me=Math.log2(E)|0,E/=Math.pow(2,me-31),B=E>>>0,B&2147483648||(E/=2,++me,B=E>>>0),E-=B,B|=2147483648,B>>>=0,E*=Math.pow(2,32),he=E>>>0,I.write_shift(4,he),I.write_shift(4,B),me+=16383+(G?32768:0),I.write_shift(2,me),I}function k(D,X){var V=A(D);return D.l+=X-14,V}function R(D,X){var V=b(D),E=D.read_shift(4);return V[1].v=E>>6,V}function te(D,X){var V=b(D),E=D.read_shift(8,"f");return V[1].v=E,V}function Z(D,X){var V=te(D);return D.l+=X-10,V}function se(D,X){return D[D.l+X-1]==0?D.read_shift(X,"cstr"):""}function ae(D,X){var V=D[D.l++];V>X-1&&(V=X-1);for(var E="";E.length<V;)E+=String.fromCharCode(D[D.l++]);return E}function ne(D,X,V){if(!(!V.qpro||X<21)){var E=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var I=D.read_shift(X-21,"cstr");return[E,I]}}function K(D,X){for(var V={},E=D.l+X;D.l<E;){var I=D.read_shift(2);if(I==14e3){for(V[I]=[0,""],V[I][0]=D.read_shift(2);D[D.l];)V[I][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return V}function re(D,X){var V=ve(5+D.length);V.write_shift(2,14e3),V.write_shift(2,X);for(var E=0;E<D.length;++E){var I=D.charCodeAt(E);V[V.l++]=I>127?95:I}return V[V.l++]=0,V}var xe={0:{n:"BOF",f:Z_},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:se},222:{n:"SHEETNAMELP",f:ae},65535:{n:""}},J={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:_},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:k},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:K},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:R},38:{n:"??"},39:{n:"NUMBER27",f:te},40:{n:"FORMULA28",f:Z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:se},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}(),s9=/^\s|\s$|[\t\n\r]/;function aC(e,t){if(!t.bookSST)return"";var r=[Or];r[r.length]=Fe("sst",null,{xmlns:hc[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(s9)&&(i+=' xml:space="preserve"'),i+=">"+Wt(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function a9(e){return[e.read_shift(4),e.read_shift(4)]}function i9(e,t){return t||(t=ve(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var o9=QL;function l9(e){var t=Wn();Ee(t,159,i9(e));for(var r=0;r<e.length;++r)Ee(t,19,o9(e[r]));return Ee(t,160),t.end()}function c9(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function iC(e){var t=0,r,n=c9(e),a=n.length+1,i,o,l,c,d;for(r=Fo(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)o=r[i],l=t&16384?1:0,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var d9=function(){function e(a,i){switch(i.type){case"base64":return t(Ma(a),i);case"binary":return t(a,i);case"buffer":return t(Tt&&Buffer.isBuffer(a)?a.toString("binary"):Nu(a),i);case"array":return t(y0(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var o=i||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,m){Array.isArray(l)&&(l[m]=[]);for(var f=/\\\w+\b/g,p=0,g,h=-1;g=f.exec(u);){switch(g[0]){case"\\cell":var x=u.slice(p,f.lastIndex-g[0].length);if(x[0]==" "&&(x=x.slice(1)),++h,x.length){var w={v:x,t:"s"};Array.isArray(l)?l[m][h]=w:l[zt({r:m,c:h})]=w}break}p=f.lastIndex}h>d.e.c&&(d.e.c=h)}),l["!ref"]=Ar(d),l}function r(a,i){return Uo(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],o=lr(a["!ref"]),l,c=Array.isArray(a),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var m=zt({r:d,c:u});l=c?(a[d]||[])[u]:a[m],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Ia(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function Gw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}var u9=6,Ta=u9;function Eh(e){return Math.floor((e+Math.round(128/Ta)/256)*Ta)}function _h(e){return Math.floor((e-5)/Ta*100+.5)/100}function px(e){return Math.round((e*Ta+5)/Ta*256)/256}function Fv(e){e.width?(e.wpx=Eh(e.width),e.wch=_h(e.wpx),e.MDW=Ta):e.wpx?(e.wch=_h(e.wpx),e.width=px(e.wch),e.MDW=Ta):typeof e.wch=="number"&&(e.width=px(e.wch),e.wpx=Eh(e.width),e.MDW=Ta),e.customWidth&&delete e.customWidth}var f9=96,oC=f9;function Ch(e){return e*96/oC}function lC(e){return e*oC/96}function h9(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Fe("numFmt",null,{numFmtId:n,formatCode:Wt(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Fe("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function m9(e){var t=[];return t[t.length]=Fe("cellXfs",null),e.forEach(function(r){t[t.length]=Fe("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Fe("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}function cC(e,t){var r=[Or,Fe("styleSheet",null,{xmlns:hc[0],"xmlns:vt":Ur.vt})],n;return e.SSF&&(n=h9(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=m9(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function p9(e,t){var r=e.read_shift(2),n=hn(e);return[r,n]}function x9(e,t,r){r||(r=ve(6+4*t.length)),r.write_shift(2,e),Gr(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function g9(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=s7(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=n7(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=hn(e),n}function v9(e,t){t||(t=ve(25+4*32)),t.write_shift(2,e.sz*20),a7(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),bh(e.color,t);var n=0;return e.scheme=="major"&&(n=1),e.scheme=="minor"&&(n=2),t.write_shift(1,n),Gr(e.name,t),t.length>t.l?t.slice(0,t.l):t}var y9=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Tm,w9=fa;function qw(e,t){t||(t=ve(4*3+8*7+16*1)),Tm||(Tm=bv(y9));var r=Tm[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(bh({auto:1},t),bh({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function N9(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function dC(e,t,r){r||(r=ve(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Oc(e,t){return t||(t=ve(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var j9=fa;function b9(e,t){return t||(t=ve(51)),t.write_shift(1,0),Oc(null,t),Oc(null,t),Oc(null,t),Oc(null,t),Oc(null,t),t.length>t.l?t.slice(0,t.l):t}function S9(e,t){return t||(t=ve(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,+e.builtinId),t.write_shift(1,0),jh(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function E9(e,t,r){var n=ve(2052);return n.write_shift(4,e),jh(t,n),jh(r,n),n.length>n.l?n.slice(0,n.l):n}function _9(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Ee(e,615,Ws(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Ee(e,44,x9(a,t[a]))}),Ee(e,616))}}function C9(e){var t=1;Ee(e,611,Ws(t)),Ee(e,43,v9({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Ee(e,612)}function T9(e){var t=2;Ee(e,603,Ws(t)),Ee(e,45,qw({patternType:"none"})),Ee(e,45,qw({patternType:"gray125"})),Ee(e,604)}function k9(e){var t=1;Ee(e,613,Ws(t)),Ee(e,46,b9()),Ee(e,614)}function A9(e){var t=1;Ee(e,626,Ws(t)),Ee(e,47,dC({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Ee(e,627)}function O9(e,t){Ee(e,617,Ws(t.length)),t.forEach(function(r){Ee(e,47,dC(r,0))}),Ee(e,618)}function D9(e){var t=1;Ee(e,619,Ws(t)),Ee(e,48,S9({xfId:0,builtinId:0,name:"Normal"})),Ee(e,620)}function R9(e){var t=0;Ee(e,505,Ws(t)),Ee(e,506)}function P9(e){var t=0;Ee(e,508,E9(t,"TableStyleMedium9","PivotStyleMedium4")),Ee(e,509)}function F9(e,t){var r=Wn();return Ee(r,278),_9(r,e.SSF),C9(r),T9(r),k9(r),A9(r),O9(r,t.cellXfs),D9(r),R9(r),P9(r),Ee(r,279),r.end()}function uC(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Or];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function M9(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:hn(e)}}function I9(e){var t=ve(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Gr(e.name,t),t.slice(0,t.l)}function L9(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function $9(e){var t=ve(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function B9(e,t){var r=ve(8+2*t.length);return r.write_shift(4,e),Gr(t,r),r.slice(0,r.l)}function W9(e){return e.l+=4,e.read_shift(4)!=0}function U9(e,t){var r=ve(8);return r.write_shift(4,e),r.write_shift(4,1),r}function z9(){var e=Wn();return Ee(e,332),Ee(e,334,Ws(1)),Ee(e,335,I9({name:"XLDAPR",version:12e4,flags:3496657072})),Ee(e,336),Ee(e,339,B9(1,"XLDAPR")),Ee(e,52),Ee(e,35,Ws(514)),Ee(e,4096,Ws(0)),Ee(e,4097,hs(1)),Ee(e,36),Ee(e,53),Ee(e,340),Ee(e,337,U9(1)),Ee(e,51,$9([[1,0]])),Ee(e,338),Ee(e,333),e.end()}function fC(){var e=[Or];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function H9(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=zt(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}var pl=1024;function hC(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Fe("xml",null,{"xmlns:v":Zn.v,"xmlns:o":Zn.o,"xmlns:x":Zn.x,"xmlns:mv":Zn.mv}).replace(/\/>/,">"),Fe("o:shapelayout",Fe("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Fe("v:shapetype",[Fe("v:stroke",null,{joinstyle:"miter"}),Fe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];pl<e*1e3;)pl+=1e3;return t.forEach(function(i){var o=Vr(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Fe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Fe("v:fill",c,l),u={on:"t",obscured:"t"};++pl,a=a.concat(["<v:shape"+zd({id:"_x0000_s"+pl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Fe("v:shadow",null,u),Fe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",en("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),en("x:AutoFill","False"),en("x:Row",String(o.r)),en("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function mC(e){var t=[Or,Fe("comments",null,{xmlns:hc[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=Wt(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Wt(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(en("t",Wt(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(en("t",Wt(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function V9(e,t,r){var n=[Or,Fe("ThreadedComments",null,{xmlns:Ur.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Fe("threadedComment",en("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function G9(e){var t=[Or,Fe("personList",null,{xmlns:Ur.TCMNT,"xmlns:x":hc[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Fe("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function q9(e){var t={};t.iauthor=e.read_shift(4);var r=Go(e);return t.rfx=r.s,t.ref=zt(r.s),e.l+=16,t}function X9(e,t){return t==null&&(t=ve(36)),t.write_shift(4,e[1].iauthor),pc(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var K9=hn;function Y9(e){return Gr(e.slice(0,54))}function Q9(e){var t=Wn(),r=[];return Ee(t,628),Ee(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Ee(t,632,Y9(a.a)))})}),Ee(t,631),Ee(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:Vr(n[0]),e:Vr(n[0])};Ee(t,635,X9([i,a])),a.t&&a.t.length>0&&Ee(t,637,ZL(a)),Ee(t,636),delete a.iauthor})}),Ee(t,634),Ee(t,629),t.end()}function J9(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Vt.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var pC=["xlsb","xlsm","xlam","biff8","xla"],Z9=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,a+(l?"":"$")+fn(u)+(c?"":"$")+rn(d)}return function(a,i){return t=i,a.replace(e,r)}}(),Mv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Iv=function(){return function(t,r){return t.replace(Mv,function(n,a,i,o,l,c){var d=Av(o)-(i?0:r.c),u=kv(c)-(l?0:r.r),m=u==0?"":l?u+1:"["+u+"]",f=d==0?"":i?d+1:"["+d+"]";return a+"R"+m+"C"+f})}}();function e$(e,t){return e.replace(Mv,function(r,n,a,i,o,l){return n+(a=="$"?a+i:fn(Av(i)+t.c))+(o=="$"?o+l:rn(kv(l)+t.r))})}function t$(e){return e.length!=1}function Cr(e){e.l+=1}function Li(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function xC(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return gC(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),o=Li(e),l=Li(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function gC(e){var t=Li(e),r=Li(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function r$(e,t,r){if(r.biff<8)return gC(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=Li(e),o=Li(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function vC(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return n$(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Li(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function n$(e){var t=Li(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function s$(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function a$(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return i$(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:o,rRel:l}}function i$(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function o$(e,t,r){var n=(e[e.l++]&96)>>5,a=xC(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function l$(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=xC(e,i,r);return[n,a,o]}function c$(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function d$(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function u$(e,t,r){var n=(e[e.l++]&96)>>5,a=r$(e,t-1,r);return[n,a]}function f$(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Xw(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function h$(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function m$(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function p$(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function x$(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function g$(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function yC(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function v$(e){return e.read_shift(2),yC(e)}function y$(e){return e.read_shift(2),yC(e)}function w$(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=vC(e,0,r);return[n,a]}function N$(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=a$(e,0,r);return[n,a]}function j$(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=vC(e,0,r);return[n,a,i]}function b$(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[bB[a],jC[a],n]}function S$(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:E$(e);return[a,(i[0]===0?jC:jB)[i[1]]]}function E$(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function _$(e,t,r){e.l+=r&&r.biff==2?3:4}function C$(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function T$(e){return e.l++,Su[e.read_shift(1)]}function k$(e){return e.l++,e.read_shift(2)}function A$(e){return e.l++,e.read_shift(1)!==0}function O$(e){return e.l++,xc(e)}function D$(e,t,r){return e.l++,tC(e,t-1,r)}function R$(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=j7(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Su[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=xc(e);break;case 2:r[1]=_7(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function P$(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?Go:k7)(e));return a}function F$(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=a;++l)o[i][l]=R$(e,r.biff);return o}function M$(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function I$(e,t,r){if(r.biff==5)return L$(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function L$(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function $$(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function B$(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function W$(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function U$(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var z$=fa,H$=fa,V$=fa;function Eu(e,t,r){return e.l+=2,[s$(e)]}function Lv(e){return e.l+=6,[]}var G$=Eu,q$=Lv,X$=Lv,K$=Eu;function wC(e){return e.l+=2,[Z_(e),e.read_shift(2)&1]}var Y$=Eu,Q$=wC,J$=Lv,Z$=Eu,eB=Eu,tB=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function rB(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),o=tB[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:i}}function nB(e){return e.l+=2,[e.read_shift(4)]}function sB(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function aB(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function iB(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function oB(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function lB(e){return e.l+=4,[0,0]}var Kw={1:{n:"PtgExp",f:C$},2:{n:"PtgTbl",f:V$},3:{n:"PtgAdd",f:Cr},4:{n:"PtgSub",f:Cr},5:{n:"PtgMul",f:Cr},6:{n:"PtgDiv",f:Cr},7:{n:"PtgPower",f:Cr},8:{n:"PtgConcat",f:Cr},9:{n:"PtgLt",f:Cr},10:{n:"PtgLe",f:Cr},11:{n:"PtgEq",f:Cr},12:{n:"PtgGe",f:Cr},13:{n:"PtgGt",f:Cr},14:{n:"PtgNe",f:Cr},15:{n:"PtgIsect",f:Cr},16:{n:"PtgUnion",f:Cr},17:{n:"PtgRange",f:Cr},18:{n:"PtgUplus",f:Cr},19:{n:"PtgUminus",f:Cr},20:{n:"PtgPercent",f:Cr},21:{n:"PtgParen",f:Cr},22:{n:"PtgMissArg",f:Cr},23:{n:"PtgStr",f:D$},26:{n:"PtgSheet",f:sB},27:{n:"PtgEndSheet",f:aB},28:{n:"PtgErr",f:T$},29:{n:"PtgBool",f:A$},30:{n:"PtgInt",f:k$},31:{n:"PtgNum",f:O$},32:{n:"PtgArray",f:f$},33:{n:"PtgFunc",f:b$},34:{n:"PtgFuncVar",f:S$},35:{n:"PtgName",f:M$},36:{n:"PtgRef",f:w$},37:{n:"PtgArea",f:o$},38:{n:"PtgMemArea",f:$$},39:{n:"PtgMemErr",f:z$},40:{n:"PtgMemNoMem",f:H$},41:{n:"PtgMemFunc",f:B$},42:{n:"PtgRefErr",f:W$},43:{n:"PtgAreaErr",f:c$},44:{n:"PtgRefN",f:N$},45:{n:"PtgAreaN",f:u$},46:{n:"PtgMemAreaN",f:iB},47:{n:"PtgMemNoMemN",f:oB},57:{n:"PtgNameX",f:I$},58:{n:"PtgRef3d",f:j$},59:{n:"PtgArea3d",f:l$},60:{n:"PtgRefErr3d",f:U$},61:{n:"PtgAreaErr3d",f:d$},255:{}},cB={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},dB={1:{n:"PtgElfLel",f:wC},2:{n:"PtgElfRw",f:Z$},3:{n:"PtgElfCol",f:G$},6:{n:"PtgElfRwV",f:eB},7:{n:"PtgElfColV",f:K$},10:{n:"PtgElfRadical",f:Y$},11:{n:"PtgElfRadicalS",f:J$},13:{n:"PtgElfColS",f:q$},15:{n:"PtgElfColSV",f:X$},16:{n:"PtgElfRadicalLel",f:Q$},25:{n:"PtgList",f:rB},29:{n:"PtgSxName",f:nB},255:{}},uB={0:{n:"PtgAttrNoop",f:lB},1:{n:"PtgAttrSemi",f:g$},2:{n:"PtgAttrIf",f:p$},4:{n:"PtgAttrChoose",f:h$},8:{n:"PtgAttrGoto",f:m$},16:{n:"PtgAttrSum",f:_$},32:{n:"PtgAttrBaxcel",f:Xw},33:{n:"PtgAttrBaxcel",f:Xw},64:{n:"PtgAttrSpace",f:v$},65:{n:"PtgAttrSpaceSemi",f:y$},128:{n:"PtgAttrIfError",f:x$},255:{}};function fB(e,t,r,n){if(n.biff<8)return fa(e,t);for(var a=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=F$(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=P$(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&i.push(fa(e,t)),i}function hB(e,t,r){for(var n=e.l+t,a,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],a=Kw[i]||Kw[cB[i]],(i===24||i===25)&&(a=(i===24?dB:uB)[e[e.l+1]]),!a||!a.f?fa(e,t):o.push([a.n,a.f(e,t,r)]);return o}function mB(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var pB={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function xB(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function NC(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Yw(e,t,r){var n=NC(e,t,r);return n=="#REF"?n:xB(n,r)}function nc(e,t,r,n,a){var i=a&&a.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},l=[],c,d,u,m=0,f=0,p,g="";if(!e[0]||!e[0][0])return"";for(var h=-1,x="",w=0,y=e[0].length;w<y;++w){var N=e[0][w];switch(N[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),h>=0){switch(e[0][h][1][0]){case 0:x=wr(" ",e[0][h][1][1]);break;case 1:x=wr("\r",e[0][h][1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}d=d+x,h=-1}l.push(d+pB[N[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=nd(N[1][1],o,a),l.push(sd(u,i));break;case"PtgRefN":u=r?nd(N[1][1],r,a):N[1][1],l.push(sd(u,i));break;case"PtgRef3d":m=N[1][1],u=nd(N[1][2],o,a),g=Yw(n,m,a),l.push(g+"!"+sd(u,i));break;case"PtgFunc":case"PtgFuncVar":var j=N[1][0],b=N[1][1];j||(j=0),j&=127;var _=j==0?[]:l.slice(-j);l.length-=j,b==="User"&&(b=_.shift()),l.push(b+"("+_.join(",")+")");break;case"PtgBool":l.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(N[1]);break;case"PtgNum":l.push(String(N[1]));break;case"PtgStr":l.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(N[1]);break;case"PtgAreaN":p=Pw(N[1][1],r?{s:r}:o,a),l.push(_m(p,a));break;case"PtgArea":p=Pw(N[1][1],o,a),l.push(_m(p,a));break;case"PtgArea3d":m=N[1][1],p=N[1][2],g=Yw(n,m,a),l.push(g+"!"+_m(p,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=N[1][2];var S=(n.names||[])[f-1]||(n[0]||[])[f],C=S?S.Name:"SH33TJSNAME"+String(f);C&&C.slice(0,6)=="_xlfn."&&!a.xlfn&&(C=C.slice(6)),l.push(C);break;case"PtgNameX":var A=N[1][1];f=N[1][2];var U;if(a.biff<=5)A<0&&(A=-A),n[A]&&(U=n[A][f]);else{var k="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][f]&&n[A][f].itab>0&&(k=n.SheetNames[n[A][f].itab-1]+"!"):k=n.SheetNames[f-1]+"!"),n[A]&&n[A][f])k+=n[A][f].Name;else if(n[0]&&n[0][f])k+=n[0][f].Name;else{var R=(NC(n,A,a)||"").split(";;");R[f-1]?k=R[f-1]:k+="SH33TJSERRX"}l.push(k);break}U||(U={Name:"SH33TJSERRY"}),l.push(U.Name);break;case"PtgParen":var te="(",Z=")";if(h>=0){switch(x="",e[0][h][1][0]){case 2:te=wr(" ",e[0][h][1][1])+te;break;case 3:te=wr("\r",e[0][h][1][1])+te;break;case 4:Z=wr(" ",e[0][h][1][1])+Z;break;case 5:Z=wr("\r",e[0][h][1][1])+Z;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][h][1][0])}h=-1}l.push(te+l.pop()+Z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:N[1][1],r:N[1][0]};var se={c:r.c,r:r.r};if(n.sharedf[zt(u)]){var ae=n.sharedf[zt(u)];l.push(nc(ae,o,se,n,a))}else{var ne=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(nc(d[1],o,se,n,a)),ne=!0;break}ne||l.push(N[1])}break;case"PtgArray":l.push("{"+mB(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":h=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var K=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&h>=0&&K.indexOf(e[0][w][0])==-1){N=e[0][h];var re=!0;switch(N[1][0]){case 4:re=!1;case 0:x=wr(" ",N[1][1]);break;case 5:re=!1;case 1:x=wr("\r",N[1][1]);break;default:if(x="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}l.push((re?x:"")+l.pop()+(re?"":x)),h=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function gB(e){if(e==null){var t=ve(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Mo(e);return Mo(0)}function vB(e,t,r,n,a){var i=Io(t,r,a),o=gB(e.v),l=ve(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=ve(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var m=Zr([i,o,l,d]);return m}function w0(e,t,r){var n=e.read_shift(4),a=hB(e,n,r),i=e.read_shift(4),o=i>0?fB(e,i,a,r):null;return[a,o]}var yB=w0,N0=w0,wB=w0,NB=w0,jB={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},jC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},bB={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function SB(e){var t="of:="+e.replace(Mv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function EB(e){return e.replace(/\./,"!")}var ad=typeof Map<"u";function $v(e,t,r){var n=0,a=e.length;if(r){if(ad?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=ad?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(ad?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function j0(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Ta=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=_h(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=px(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function bC(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Xi(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){v_(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function _B(e,t,r){if(e&&e["!ref"]){var n=lr(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function CB(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Ar(e[r])+'"/>';return t+"</mergeCells>"}function TB(e,t,r,n,a){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Ud(Wt(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+Fe("outlinePr",null,d)}!i&&!l||(a[a.length]=Fe("sheetPr",l,o))}var kB=["objects","scenarios","selectLockedCells","selectUnlockedCells"],AB=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function OB(e){var t={sheet:1};return kB.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),AB.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=iC(e.password).toString(16).toUpperCase()),Fe("sheetProtection",null,t)}function DB(e){return bC(e),Fe("pageMargins",null,e)}function RB(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Fe("col",null,j0(a,n)));return r[r.length]="</cols>",r.join("")}function PB(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Ar(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=os(a);o.s.r==o.e.r&&(o.e.r=os(t["!ref"]).e.r,a=Ar(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Fe("autoFilter",null,{ref:a})}function FB(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Fe("sheetViews",Fe("sheetView",null,a),{})}function MB(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Su[e.v];break;case"d":n&&n.cellDates?a=kn(e.v,-1).toISOString():(e=Hn(e),e.t="n",a=""+(e.v=zn(kn(e.v)))),typeof e.z>"u"&&(e.z=Nr[14]);break;default:a=e.v;break}var l=en("v",Wt(a)),c={r:t},d=Xi(n.cellXfs,e,n);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=en("v",""+$v(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Fe("f",Wt(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Fe("c",l,c)}function IB(e,t,r,n){var a=[],i=[],o=lr(e["!ref"]),l="",c,d="",u=[],m=0,f=0,p=e["!rows"],g=Array.isArray(e),h={r:d},x,w=-1;for(f=o.s.c;f<=o.e.c;++f)u[f]=fn(f);for(m=o.s.r;m<=o.e.r;++m){for(i=[],d=rn(m),f=o.s.c;f<=o.e.c;++f){c=u[f]+d;var y=g?(e[m]||[])[f]:e[c];y!==void 0&&(l=MB(y,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[m])&&(h={r:d},p&&p[m]&&(x=p[m],x.hidden&&(h.hidden=1),w=-1,x.hpx?w=Ch(x.hpx):x.hpt&&(w=x.hpt),w>-1&&(h.ht=w,h.customHeight=1),x.level&&(h.outlineLevel=x.level)),a[a.length]=Fe("row",i.join(""),h))}if(p)for(;m<p.length;++m)p&&p[m]&&(h={r:m+1},x=p[m],x.hidden&&(h.hidden=1),w=-1,x.hpx?w=Ch(x.hpx):x.hpt&&(w=x.hpt),w>-1&&(h.ht=w,h.customHeight=1),x.level&&(h.outlineLevel=x.level),a[a.length]=Fe("row","",h));return a.join("")}function SC(e,t,r,n){var a=[Or,Fe("worksheet",null,{xmlns:hc[0],"xmlns:r":Ur.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=lr(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=Ar(u)}n||(n={}),c["!comments"]=[];var m=[];TB(c,r,e,t,a),a[a.length]=Fe("dimension",null,{ref:d}),a[a.length]=FB(c,t,e,r),t.sheetFormat&&(a[a.length]=Fe("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=RB(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=IB(c,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=OB(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=PB(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=CB(c["!merges"]));var f=-1,p,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(h){h[1].Target&&(p={ref:h[0]},h[1].Target.charAt(0)!="#"&&(g=Bt(n,-1,Wt(h[1].Target).replace(/#.*$/,""),St.HLINK),p["r:id"]="rId"+g),(f=h[1].Target.indexOf("#"))>-1&&(p.location=Wt(h[1].Target.slice(f+1))),h[1].Tooltip&&(p.tooltip=Wt(h[1].Tooltip)),a[a.length]=Fe("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=DB(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=en("ignoredErrors",Fe("ignoredError",null,{numberStoredAsText:1,sqref:d}))),m.length>0&&(g=Bt(n,-1,"../drawings/drawing"+(e+1)+".xml",St.DRAW),a[a.length]=Fe("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=m),c["!comments"].length>0&&(g=Bt(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",St.VML),a[a.length]=Fe("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function LB(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function $B(e,t,r){var n=ve(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Ch(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var m=-1,f=-1,p=u<<10;p<u+1<<10;++p){d.c=p;var g=Array.isArray(r)?(r[d.r]||[])[d.c]:r[zt(d)];g&&(m<0&&(m=p),f=p)}m<0||(++l,n.write_shift(4,m),n.write_shift(4,f))}var h=n.l;return n.l=c,n.write_shift(4,l),n.l=h,n.length>n.l?n.slice(0,n.l):n}function BB(e,t,r,n){var a=$B(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Ee(e,0,a)}var WB=Go,UB=pc;function zB(){}function HB(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=e7(e),r}function VB(e,t,r){r==null&&(r=ve(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return bh({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),$_(e,r),r.slice(0,r.l)}function GB(e){var t=Ss(e);return[t]}function qB(e,t,r){return r==null&&(r=ve(8)),zo(t,r)}function XB(e){var t=Ho(e);return[t]}function KB(e,t,r){return r==null&&(r=ve(4)),Vo(t,r)}function YB(e){var t=Ss(e),r=e.read_shift(1);return[t,r,"b"]}function QB(e,t,r){return r==null&&(r=ve(9)),zo(t,r),r.write_shift(1,e.v?1:0),r}function JB(e){var t=Ho(e),r=e.read_shift(1);return[t,r,"b"]}function ZB(e,t,r){return r==null&&(r=ve(5)),Vo(t,r),r.write_shift(1,e.v?1:0),r}function eW(e){var t=Ss(e),r=e.read_shift(1);return[t,r,"e"]}function tW(e,t,r){return r==null&&(r=ve(9)),zo(t,r),r.write_shift(1,e.v),r}function rW(e){var t=Ho(e),r=e.read_shift(1);return[t,r,"e"]}function nW(e,t,r){return r==null&&(r=ve(8)),Vo(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function sW(e){var t=Ss(e),r=e.read_shift(4);return[t,r,"s"]}function aW(e,t,r){return r==null&&(r=ve(12)),zo(t,r),r.write_shift(4,t.v),r}function iW(e){var t=Ho(e),r=e.read_shift(4);return[t,r,"s"]}function oW(e,t,r){return r==null&&(r=ve(8)),Vo(t,r),r.write_shift(4,t.v),r}function lW(e){var t=Ss(e),r=xc(e);return[t,r,"n"]}function cW(e,t,r){return r==null&&(r=ve(16)),zo(t,r),Mo(e.v,r),r}function dW(e){var t=Ho(e),r=xc(e);return[t,r,"n"]}function uW(e,t,r){return r==null&&(r=ve(12)),Vo(t,r),Mo(e.v,r),r}function fW(e){var t=Ss(e),r=B_(e);return[t,r,"n"]}function hW(e,t,r){return r==null&&(r=ve(12)),zo(t,r),W_(e.v,r),r}function mW(e){var t=Ho(e),r=B_(e);return[t,r,"n"]}function pW(e,t,r){return r==null&&(r=ve(8)),Vo(t,r),W_(e.v,r),r}function xW(e){var t=Ss(e),r=Ov(e);return[t,r,"is"]}function gW(e){var t=Ss(e),r=hn(e);return[t,r,"str"]}function vW(e,t,r){return r==null&&(r=ve(12+4*e.v.length)),zo(t,r),Gr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function yW(e){var t=Ho(e),r=hn(e);return[t,r,"str"]}function wW(e,t,r){return r==null&&(r=ve(8+4*e.v.length)),Vo(t,r),Gr(e.v,r),r.length>r.l?r.slice(0,r.l):r}function NW(e,t,r){var n=e.l+t,a=Ss(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"b"];if(r.cellFormula){e.l+=2;var l=N0(e,n-e.l,r);o[3]=nc(l,null,a,r.supbooks,r)}else e.l=n;return o}function jW(e,t,r){var n=e.l+t,a=Ss(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"e"];if(r.cellFormula){e.l+=2;var l=N0(e,n-e.l,r);o[3]=nc(l,null,a,r.supbooks,r)}else e.l=n;return o}function bW(e,t,r){var n=e.l+t,a=Ss(e);a.r=r["!row"];var i=xc(e),o=[a,i,"n"];if(r.cellFormula){e.l+=2;var l=N0(e,n-e.l,r);o[3]=nc(l,null,a,r.supbooks,r)}else e.l=n;return o}function SW(e,t,r){var n=e.l+t,a=Ss(e);a.r=r["!row"];var i=hn(e),o=[a,i,"str"];if(r.cellFormula){e.l+=2;var l=N0(e,n-e.l,r);o[3]=nc(l,null,a,r.supbooks,r)}else e.l=n;return o}var EW=Go,_W=pc;function CW(e,t){return t==null&&(t=ve(4)),t.write_shift(4,e),t}function TW(e,t){var r=e.l+t,n=Go(e),a=Dv(e),i=hn(e),o=hn(e),l=hn(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:l};return o&&(c.Tooltip=o),c}function kW(e,t){var r=ve(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));pc({s:Vr(e[0]),e:Vr(e[0])},r),Rv("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Gr(a||"",r),Gr(e[1].Tooltip||"",r),Gr("",r),r.slice(0,r.l)}function AW(){}function OW(e,t,r){var n=e.l+t,a=U_(e),i=e.read_shift(1),o=[a];if(o[2]=i,r.cellFormula){var l=yB(e,n-e.l,r);o[1]=l}else e.l=n;return o}function DW(e,t,r){var n=e.l+t,a=Go(e),i=[a];if(r.cellFormula){var o=NB(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function RW(e,t,r){r==null&&(r=ve(18));var n=j0(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var EC=["left","right","top","bottom","header","footer"];function PW(e){var t={};return EC.forEach(function(r){t[r]=xc(e)}),t}function FW(e,t){return t==null&&(t=ve(6*8)),bC(e),EC.forEach(function(r){Mo(e[r],t)}),t}function MW(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function IW(e,t,r){r==null&&(r=ve(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function LW(e){var t=ve(24);return t.write_shift(4,4),t.write_shift(4,1),pc(e,t),t}function $W(e,t){return t==null&&(t=ve(16*4+2)),t.write_shift(2,e.password?iC(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function BW(){}function WW(){}function UW(e,t,r,n,a,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Hn(t),t.z=t.z||Nr[14],t.v=zn(kn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=Xi(a.cellXfs,t,a),t.l&&i["!links"].push([zt(c),t.l]),t.c&&i["!comments"].push([zt(c),t.c]),t.t){case"s":case"str":return a.bookSST?(l=$v(a.Strings,t.v,a.revStrings),c.t="s",c.v=l,o?Ee(e,18,oW(t,c)):Ee(e,7,aW(t,c))):(c.t="str",o?Ee(e,17,wW(t,c)):Ee(e,6,vW(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Ee(e,13,pW(t,c)):Ee(e,2,hW(t,c)):o?Ee(e,16,uW(t,c)):Ee(e,5,cW(t,c)),!0;case"b":return c.t="b",o?Ee(e,15,ZB(t,c)):Ee(e,4,QB(t,c)),!0;case"e":return c.t="e",o?Ee(e,14,nW(t,c)):Ee(e,3,tW(t,c)),!0}return o?Ee(e,12,KB(t,c)):Ee(e,1,qB(t,c)),!0}function zW(e,t,r,n){var a=lr(t["!ref"]||"A1"),i,o="",l=[];Ee(e,145);var c=Array.isArray(t),d=a.e.r;t["!rows"]&&(d=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=d;++u){o=rn(u),BB(e,t,a,u);var m=!1;if(u<=a.e.r)for(var f=a.s.c;f<=a.e.c;++f){u===a.s.r&&(l[f]=fn(f)),i=l[f]+o;var p=c?(t[u]||[])[f]:t[i];if(!p){m=!1;continue}m=UW(e,p,u,f,n,t,m)}}Ee(e,146)}function HW(e,t){!t||!t["!merges"]||(Ee(e,177,CW(t["!merges"].length)),t["!merges"].forEach(function(r){Ee(e,176,_W(r))}),Ee(e,178))}function VW(e,t){!t||!t["!cols"]||(Ee(e,390),t["!cols"].forEach(function(r,n){r&&Ee(e,60,RW(n,r))}),Ee(e,391))}function GW(e,t){!t||!t["!ref"]||(Ee(e,648),Ee(e,649,LW(lr(t["!ref"]))),Ee(e,650))}function qW(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Bt(r,-1,n[1].Target.replace(/#.*$/,""),St.HLINK);Ee(e,494,kW(n,a))}}),delete t["!links"]}function XW(e,t,r,n){if(t["!comments"].length>0){var a=Bt(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",St.VML);Ee(e,551,Rv("rId"+a)),t["!legacy"]=a}}function KW(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:Ar(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=os(i);l.s.r==l.e.r&&(l.e.r=os(t["!ref"]).e.r,i=Ar(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Ee(e,161,pc(lr(i))),Ee(e,162)}}function YW(e,t,r){Ee(e,133),Ee(e,137,IW(t,r)),Ee(e,138),Ee(e,134)}function QW(e,t){t["!protect"]&&Ee(e,535,$W(t["!protect"]))}function JW(e,t,r,n){var a=Wn(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=lr(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ee(a,129),(r.vbaraw||o["!outline"])&&Ee(a,147,VB(l,o["!outline"])),Ee(a,148,UB(c)),YW(a,o,r.Workbook),VW(a,o),zW(a,o,e,t),QW(a,o),KW(a,o,r,e),HW(a,o),qW(a,o,n),o["!margins"]&&Ee(a,476,FW(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&GW(a,o),XW(a,o,e,n),Ee(a,130),a.end()}function ZW(e,t){e.l+=10;var r=hn(e);return{name:r}}var eU=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function tU(e){return!e.Workbook||!e.Workbook.WBProps?"false":DL(e.Workbook.WBProps.date1904)?"true":"false"}var rU="][*?/\\".split("");function _C(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return rU.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function nU(e,t,r){e.forEach(function(n,a){_C(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function sU(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];nU(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)_B(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}function CC(e){var t=[Or];t[t.length]=Fe("workbook",null,{xmlns:hc[0],"xmlns:r":Ur.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(eU.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Fe("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Wt(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Fe("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Fe("definedName",Wt(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function aU(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=mx(e),r.name=hn(e),r}function iU(e,t){return t||(t=ve(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),Rv(e.strRelID,t),Gr(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function oU(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?hn(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function lU(e,t){t||(t=ve(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),$_(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function cU(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=t7(e),o=wB(e,0,r),l=Dv(e);e.l=n;var c={Name:i,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function dU(e,t){Ee(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ee(e,156,iU(a))}Ee(e,144)}function uU(e,t){t||(t=ve(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Gr("SheetJS",t),Gr(xh.version,t),Gr(xh.version,t),Gr("7262",t),t.length>t.l?t.slice(0,t.l):t}function fU(e,t){t||(t=ve(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function hU(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(Ee(e,135),Ee(e,158,fU(a)),Ee(e,136))}}function mU(e,t){var r=Wn();return Ee(r,131),Ee(r,128,uU()),Ee(r,153,lU(e.Workbook&&e.Workbook.WBProps||null)),hU(r,e),dU(r,e),Ee(r,132),r.end()}function pU(e,t,r){return(t.slice(-4)===".bin"?mU:CC)(e)}function xU(e,t,r,n,a){return(t.slice(-4)===".bin"?JW:SC)(e,r,n,a)}function gU(e,t,r){return(t.slice(-4)===".bin"?F9:cC)(e,r)}function vU(e,t,r){return(t.slice(-4)===".bin"?l9:aC)(e,r)}function yU(e,t,r){return(t.slice(-4)===".bin"?Q9:mC)(e)}function wU(e){return(e.slice(-4)===".bin"?z9:fC)()}function NU(e,t){var r=[];return e.Props&&r.push(g7(e.Props,t)),e.Custprops&&r.push(v7(e.Props,e.Custprops)),r.join("")}function jU(){return""}function bU(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(Fe("NumberFormat",null,{"ss:Format":Wt(Nr[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(Fe("Style",i.join(""),o))}),Fe("Styles",r.join(""))}function TC(e){return Fe("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+Iv(e.Ref,{r:0,c:0})})}function SU(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(TC(a)))}return Fe("Names",r.join(""))}function EU(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(TC(l)))}return i.join("")}function _U(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Fe("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Fe("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Fe("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Fe("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(en("ProtectContents","True")),e["!protect"].objects&&a.push(en("ProtectObjects","True")),e["!protect"].scenarios&&a.push(en("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(en("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(en("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":Fe("WorksheetOptions",a.join(""),{xmlns:Zn.x})}function CU(e){return e.map(function(t){var r=OL(t.t||""),n=Fe("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Fe("Comment",n,{"ss:Author":t.a})}).join("")}function TU(e,t,r,n,a,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Wt(Iv(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Vr(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Wt(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Wt(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var m="",f="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":m="Number",f=String(e.v);break;case"b":m="Boolean",f=e.v?"1":"0";break;case"e":m="Error",f=Su[e.v];break;case"d":m="DateTime",f=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Nr[14]);break;case"s":m="String",f=AL(e.v||"");break}var p=Xi(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var g=e.v!=null?f:"",h=e.t=="z"?"":'<Data ss:Type="'+m+'">'+g+"</Data>";return(e.c||[]).length>0&&(h+=CU(e.c)),Fe("Cell",h,l)}function kU(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=lC(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function AU(e,t,r,n){if(!e["!ref"])return"";var a=lr(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(x,w){Fv(x);var y=!!x.width,N=j0(w,x),j={"ss:Index":w+1};y&&(j["ss:Width"]=Eh(N.width)),x.hidden&&(j["ss:Hidden"]="1"),l.push(Fe("Column",null,j))});for(var c=Array.isArray(e),d=a.s.r;d<=a.e.r;++d){for(var u=[kU(d,(e["!rows"]||[])[d])],m=a.s.c;m<=a.e.c;++m){var f=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>m)&&!(i[o].s.r>d)&&!(i[o].e.c<m)&&!(i[o].e.r<d)){(i[o].s.c!=m||i[o].s.r!=d)&&(f=!0);break}if(!f){var p={r:d,c:m},g=zt(p),h=c?(e[d]||[])[m]:e[g];u.push(TU(h,g,e,t,r,n,p))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function OU(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],o=i?EU(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?AU(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(_U(i,t,e,r)),n.join("")}function DU(e,t){t||(t={}),e.SSF||(e.SSF=Hn(Nr)),e.SSF&&(g0(),x0(e.SSF),t.revssf=v0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Xi(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(NU(e,t)),r.push(jU()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Fe("Worksheet",OU(n,t,e),{"ss:Name":Wt(e.SheetNames[n])}));return r[2]=bU(e,t),r[3]=SU(e),Or+Fe("Workbook",r.join(""),{xmlns:Zn.ss,"xmlns:o":Zn.o,"xmlns:x":Zn.x,"xmlns:ss":Zn.ss,"xmlns:dt":Zn.dt,"xmlns:html":Zn.html})}var km={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function RU(e,t){var r=[],n=[],a=[],i=0,o,l=bw(Mw,"n"),c=bw(Iw,"n");if(e.Props)for(o=an(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:a).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=an(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:a).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<a.length;++i)J_.indexOf(a[i][0])>-1||K_.indexOf(a[i][0])>-1||a[i][1]!=null&&d.push(a[i]);n.length&&Vt.utils.cfb_add(t,"/SummaryInformation",Uw(n,km.SI,c,Iw)),(r.length||d.length)&&Vt.utils.cfb_add(t,"/DocumentSummaryInformation",Uw(r,km.DSI,l,Mw,d.length?d:null,km.UDI))}function PU(e,t){var r=t||{},n=Vt.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Vt.utils.cfb_add(n,a,kC(e,r)),r.biff==8&&(e.Props||e.Custprops)&&RU(e,n),r.biff==8&&e.vbaraw&&J9(n,Vt.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var FU={0:{f:LB},1:{f:GB},2:{f:fW},3:{f:eW},4:{f:YB},5:{f:lW},6:{f:gW},7:{f:sW},8:{f:SW},9:{f:bW},10:{f:NW},11:{f:jW},12:{f:XB},13:{f:mW},14:{f:rW},15:{f:JB},16:{f:dW},17:{f:yW},18:{f:iW},19:{f:Ov},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:cU},40:{},42:{},43:{f:g9},44:{f:p9},45:{f:w9},46:{f:j9},47:{f:N9},48:{},49:{f:XL},50:{},51:{f:L9},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:K7},62:{f:xW},63:{f:H9},64:{f:BW},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:fa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:MW},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:HB},148:{f:WB,p:16},151:{f:AW},152:{},153:{f:oU},154:{},155:{},156:{f:aU},157:{},158:{},159:{T:1,f:a9},160:{T:-1},161:{T:1,f:Go},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:EW},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:M9},336:{T:-1},337:{f:W9,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:mx},357:{},358:{},359:{},360:{T:1},361:{},362:{f:z7},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:OW},427:{f:DW},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:PW},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:zB},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:TW},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:mx},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:K9},633:{T:1},634:{T:-1},635:{T:1,f:q9},636:{T:-1},637:{f:JL},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ZW},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:WW},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ie(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,i),i>0&&Tv(r)&&e.push(r)}}function MU(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Ie(e,t,r,a);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<a;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function _u(e,t,r){return e||(e=ve(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function IU(e,t,r,n){var a=ve(9);return _u(a,e,t),eC(r,n||"b",a),a}function LU(e,t,r){var n=ve(8+2*r.length);return _u(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function $U(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?zn(kn(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Ie(e,2,Z7(r,n,a)):Ie(e,3,J7(r,n,a));return;case"b":case"e":Ie(e,5,IU(r,n,t.v,t.t));return;case"s":case"str":Ie(e,4,LU(r,n,(t.v||"").slice(0,255)));return}Ie(e,1,_u(null,r,n))}function BU(e,t,r,n){var a=Array.isArray(t),i=lr(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=Ar(i)}for(var d=i.s.r;d<=i.e.r;++d){l=rn(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=fn(u)),o=c[u]+l;var m=a?(t[d]||[])[u]:t[o];m&&$U(e,m,d,u)}}}function WU(e,t){for(var r=t||{},n=Wn(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Ie(n,r.biff==4?1033:r.biff==3?521:9,Pv(e,16,r)),BU(n,e.Sheets[e.SheetNames[a]],a,r),Ie(n,10),n.end()}function UU(e,t,r){Ie(e,49,F7({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},r))}function zU(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Ie(e,1054,L7(a,t[a],r))})}function HU(e,t){var r=ve(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Ie(e,2151,r),r=ve(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),nC(lr(t["!ref"]||"A1"),r),r.write_shift(4,4),Ie(e,2152,r)}function VU(e,t){for(var r=0;r<16;++r)Ie(e,224,Hw({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Ie(e,224,Hw(n,0,t))})}function GU(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Ie(e,440,G7(n)),n[1].Tooltip&&Ie(e,2048,q7(n))}delete t["!links"]}function qU(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Ie(e,125,Y7(j0(a,n),a))})}}function XU(e,t,r,n,a){var i=16+Xi(a.cellXfs,t,a);if(t.v==null&&!t.bf){Ie(e,513,Io(r,n,i));return}if(t.bf)Ie(e,6,vB(t,r,n,a,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?zn(kn(t.v)):t.v;Ie(e,515,U7(r,n,o,i));break;case"b":case"e":Ie(e,517,W7(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var l=$v(a.Strings,t.v,a.revStrings);Ie(e,253,M7(r,n,l,i))}else Ie(e,516,I7(r,n,(t.v||"").slice(0,255),i,a));break;default:Ie(e,513,Io(r,n,i))}}function KU(e,t,r){var n=Wn(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,m="",f=[],p=lr(i["!ref"]||"A1"),g=d?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}Ie(n,2057,Pv(r,16,t)),Ie(n,13,hs(1)),Ie(n,12,hs(100)),Ie(n,15,En(!0)),Ie(n,17,En(!1)),Ie(n,16,Mo(.001)),Ie(n,95,En(!0)),Ie(n,42,En(!1)),Ie(n,43,En(!1)),Ie(n,130,hs(1)),Ie(n,128,B7()),Ie(n,131,En(!1)),Ie(n,132,En(!1)),d&&qU(n,i["!cols"]),Ie(n,512,$7(p,t)),d&&(i["!links"]=[]);for(var h=p.s.r;h<=p.e.r;++h){m=rn(h);for(var x=p.s.c;x<=p.e.c;++x){h===p.s.r&&(f[x]=fn(x)),u=f[x]+m;var w=c?(i[h]||[])[x]:i[u];w&&(XU(n,w,h,x,t),d&&w.l&&i["!links"].push([u,w.l]))}}var y=l.CodeName||l.name||a;return d&&Ie(n,574,P7((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&Ie(n,229,V7(i["!merges"])),d&&GU(n,i),Ie(n,442,rC(y)),d&&HU(n,i),Ie(n,10),n.end()}function YU(e,t,r){var n=Wn(),a=(e||{}).Workbook||{},i=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(Ie(n,2057,Pv(e,5,r)),r.bookType=="xla"&&Ie(n,135),Ie(n,225,l?hs(1200):null),Ie(n,193,N7(2)),c&&Ie(n,191),c&&Ie(n,192),Ie(n,226),Ie(n,92,A7("SheetJS",r)),Ie(n,66,hs(l?1200:1252)),l&&Ie(n,353,hs(0)),l&&Ie(n,448),Ie(n,317,Q7(e.SheetNames.length)),l&&e.vbaraw&&Ie(n,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";Ie(n,442,rC(d))}Ie(n,156,hs(17)),Ie(n,25,En(!1)),Ie(n,18,En(!1)),Ie(n,19,hs(0)),l&&Ie(n,431,En(!1)),l&&Ie(n,444,hs(0)),Ie(n,61,R7()),Ie(n,64,En(!1)),Ie(n,141,hs(0)),Ie(n,34,En(tU(e)=="true")),Ie(n,14,En(!0)),l&&Ie(n,439,En(!1)),Ie(n,218,hs(0)),UU(n,e,r),zU(n,e.SSF,r),VU(n,r),l&&Ie(n,352,En(!1));var u=n.end(),m=Wn();l&&Ie(m,140,X7()),l&&r.Strings&&MU(m,252,D7(r.Strings)),Ie(m,10);var f=m.end(),p=Wn(),g=0,h=0;for(h=0;h<e.SheetNames.length;++h)g+=(l?12:11)+(l?2:1)*e.SheetNames[h].length;var x=u.length+g+f.length;for(h=0;h<e.SheetNames.length;++h){var w=i[h]||{};Ie(p,133,O7({pos:x,hs:w.Hidden||0,dt:0,name:e.SheetNames[h]},r)),x+=t[h].length}var y=p.end();if(g!=y.length)throw new Error("BS8 "+g+" != "+y.length);var N=[];return u.length&&N.push(u),y.length&&N.push(y),f.length&&N.push(f),Zr(N)}function QU(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Hn(Nr)),e&&e.SSF&&(g0(),x0(e.SSF),r.revssf=v0(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Bv(r),r.cellXfs=[],Xi(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=KU(a,r,e);return n.unshift(YU(e,n,r)),Zr(n)}function kC(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=os(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return QU(e,t);case 4:case 3:case 2:return WU(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function JU(e,t,r,n){for(var a=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<a.length;++d)if(!(a[d].s.r>r||a[d].s.c>o)&&!(a[d].e.r<r||a[d].e.c<o)){if(a[d].s.r<r||a[d].s.c<o){l=-1;break}l=a[d].e.r-a[d].s.r+1,c=a[d].e.c-a[d].s.c+1;break}if(!(l<0)){var u=zt({r,c:o}),m=n.dense?(e[r]||[])[o]:e[u],f=m&&m.v!=null&&(m.h||kL(m.w||(Ia(m),m.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?f='<span contenteditable="true">'+f+"</span>":m&&(p["data-t"]=m&&m.t||"z",m.v!=null&&(p["data-v"]=m.v),m.z!=null&&(p["data-z"]=m.z),m.l&&(m.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+m.l.Target+'">'+f+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(Fe("td",f,p))}}var g="<tr>";return g+i.join("")+"</tr>"}var ZU='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',ez="</body></html>";function tz(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function AC(e,t){var r=t||{},n=r.header!=null?r.header:ZU,a=r.footer!=null?r.footer:ez,i=[n],o=os(e["!ref"]);r.dense=Array.isArray(e),i.push(tz(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(JU(e,o,l,r));return i.push("</table>"+a),i.join("")}function OC(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Vr(n.origin):n.origin;a=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var u=os(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),a==-1&&(d.e.r=a=u.e.r+1)}var m=[],f=0,p=e["!rows"]||(e["!rows"]=[]),g=0,h=0,x=0,w=0,y=0,N=0;for(e["!cols"]||(e["!cols"]=[]);g<l.length&&h<c;++g){var j=l[g];if(Qw(j)){if(n.display)continue;p[h]={hidden:!0}}var b=j.children;for(x=w=0;x<b.length;++x){var _=b[x];if(!(n.display&&Qw(_))){var S=_.hasAttribute("data-v")?_.getAttribute("data-v"):_.hasAttribute("v")?_.getAttribute("v"):RL(_.innerHTML),C=_.getAttribute("data-z")||_.getAttribute("z");for(f=0;f<m.length;++f){var A=m[f];A.s.c==w+i&&A.s.r<h+a&&h+a<=A.e.r&&(w=A.e.c+1-i,f=-1)}N=+_.getAttribute("colspan")||1,((y=+_.getAttribute("rowspan")||1)>1||N>1)&&m.push({s:{r:h+a,c:w+i},e:{r:h+a+(y||1)-1,c:w+i+(N||1)-1}});var U={t:"s",v:S},k=_.getAttribute("data-t")||_.getAttribute("t")||"";S!=null&&(S.length==0?U.t=k||"z":n.raw||S.trim().length==0||k=="s"||(S==="TRUE"?U={t:"b",v:!0}:S==="FALSE"?U={t:"b",v:!1}:isNaN(Ca(S))?isNaN(Wd(S).getDate())||(U={t:"d",v:kn(S)},n.cellDates||(U={t:"n",v:zn(U.v)}),U.z=n.dateNF||Nr[14]):U={t:"n",v:Ca(S)})),U.z===void 0&&C!=null&&(U.z=C);var R="",te=_.getElementsByTagName("A");if(te&&te.length)for(var Z=0;Z<te.length&&!(te[Z].hasAttribute("href")&&(R=te[Z].getAttribute("href"),R.charAt(0)!="#"));++Z);R&&R.charAt(0)!="#"&&(U.l={Target:R}),n.dense?(e[h+a]||(e[h+a]=[]),e[h+a][w+i]=U):e[zt({c:w+i,r:h+a})]=U,d.e.c<w+i&&(d.e.c=w+i),w+=N}}++h}return m.length&&(e["!merges"]=(e["!merges"]||[]).concat(m)),d.e.r=Math.max(d.e.r,h-1+a),e["!ref"]=Ar(d),h>=c&&(e["!fullref"]=Ar((d.e.r=l.length-g+h-1+a,d))),e}function DC(e,t){var r=t||{},n=r.dense?[]:{};return OC(n,e,t)}function rz(e,t){return Uo(DC(e,t),t)}function Qw(e){var t="",r=nz(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function nz(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var sz=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+zd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Or+t}}(),Jw=function(){var e=function(i){return Wt(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Wt(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,m=os(i["!ref"]||"A1"),f=i["!merges"]||[],p=0,g=Array.isArray(i);if(i["!cols"])for(u=0;u<=m.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var h="",x=i["!rows"]||[];for(d=0;d<m.s.r;++d)h=x[d]?' table:style-name="ro'+x[d].ods+'"':"",c.push("        <table:table-row"+h+`></table:table-row>
`);for(;d<=m.e.r;++d){for(h=x[d]?' table:style-name="ro'+x[d].ods+'"':"",c.push("        <table:table-row"+h+`>
`),u=0;u<m.s.c;++u)c.push(t);for(;u<=m.e.c;++u){var w=!1,y={},N="";for(p=0;p!=f.length;++p)if(!(f[p].s.c>u)&&!(f[p].s.r>d)&&!(f[p].e.c<u)&&!(f[p].e.r<d)){(f[p].s.c!=u||f[p].s.r!=d)&&(w=!0),y["table:number-columns-spanned"]=f[p].e.c-f[p].s.c+1,y["table:number-rows-spanned"]=f[p].e.r-f[p].s.r+1;break}if(w){c.push(r);continue}var j=zt({r:d,c:u}),b=g?(i[d]||[])[u]:i[j];if(b&&b.f&&(y["table:formula"]=Wt(SB(b.f)),b.F&&b.F.slice(0,j.length)==j)){var _=os(b.F);y["table:number-matrix-columns-spanned"]=_.e.c-_.s.c+1,y["table:number-matrix-rows-spanned"]=_.e.r-_.s.r+1}if(!b){c.push(t);continue}switch(b.t){case"b":N=b.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=b.v?"true":"false";break;case"n":N=b.w||String(b.v||0),y["office:value-type"]="float",y["office:value"]=b.v||0;break;case"s":case"str":N=b.v==null?"":b.v,y["office:value-type"]="string";break;case"d":N=b.w||kn(b.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=kn(b.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(t);continue}var S=e(N);if(b.l&&b.l.Target){var C=b.l.Target;C=C.charAt(0)=="#"?"#"+EB(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),S=Fe("text:a",S,{"xlink:href":C.replace(/&/g,"&amp;")})}c.push("          "+Fe("table:table-cell",Fe("text:p",S,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var m=d["!cols"][u];if(m.width==null&&m.wpx==null&&m.wch==null)continue;Fv(m),m.ods=l;var f=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var m=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+m+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Or],d=zd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=zd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(q_().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var m=0;m!=o.SheetNames.length;++m)c.push(n(o.Sheets[o.SheetNames[m]],o,m));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function RC(e,t){if(t.bookType=="fods")return Jw(e,t);var r=Sv(),n="",a=[],i=[];return n="mimetype",xt(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",xt(r,n,Jw(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",xt(r,n,sz(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",xt(r,n,Or+q_()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",xt(r,n,x7(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",xt(r,n,m7(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Th(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function az(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Ms(Ud(e))}function iz(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function $i(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function oz(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Hd(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Lt(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Dl(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Pr(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Hd(e,r),i=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Hd(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var d={data:l,type:i};t[a]==null?t[a]=[d]:t[a].push(d)}return t}function Yr(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Lt(n*8+a.type)),a.type==2&&t.push(Lt(a.data.length)),t.push(a.data))})}),$i(t)}function Ts(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Hd(e,n),i=Pr(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:Dl(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Pr(l.data),d=Dl(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Dl(i[3][0].data)>>>0>0),r.push(o)}return r}function el(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Lt(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Lt(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Lt(o.data.length)}],n[2].push({data:Yr(o.meta),type:2})});var i=Yr(n);t.push(Lt(i.length)),t.push(i),a.forEach(function(o){return t.push(o)})}),$i(t)}function lz(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Hd(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[$i(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(a.push(a[0].slice(-c)),d-=c;d>=a[a.length-1].length;)a.push(a[a.length-1]),d-=a[a.length-1].length;a.push(a[0].slice(-c,-c+d))}}var u=$i(a);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function ks(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(lz(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return $i(t)}function tl(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Lt(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return $i(t)}function Am(e,t){var r=new Uint8Array(32),n=Th(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,oz(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function Om(e,t){var r=new Uint8Array(32),n=Th(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function Ka(e){var t=Pr(e);return Hd(t[1][0].data)}function cz(e,t,r){var n,a,i,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Dl(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Th(e[7][0].data),u=0,m=[],f=Th(e[4][0].data),p=0,g=[],h=0;h<t.length;++h){if(t[h]==null){d.setUint16(h*2,65535,!0),f.setUint16(h*2,65535);continue}d.setUint16(h*2,u,!0),f.setUint16(h*2,p,!0);var x,w;switch(typeof t[h]){case"string":x=Am({t:"s",v:t[h]},r),w=Om({t:"s",v:t[h]},r);break;case"number":x=Am({t:"n",v:t[h]},r),w=Om({t:"n",v:t[h]},r);break;case"boolean":x=Am({t:"b",v:t[h]},r),w=Om({t:"b",v:t[h]},r);break;default:throw new Error("Unsupported value "+t[h])}m.push(x),u+=x.length,g.push(w),p+=w.length,++c}for(e[2][0].data=Lt(c);h<e[7][0].data.length/2;++h)d.setUint16(h*2,65535,!0),f.setUint16(h*2,65535,!0);return e[6][0].data=$i(m),e[3][0].data=$i(g),c}function dz(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=os(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Ar(n)));var i=kh(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(X){return X.forEach(function(V){typeof V=="string"&&o.push(V)})});var l={},c=[],d=Vt.read(t.numbers,{type:"base64"});d.FileIndex.map(function(X,V){return[X,d.FullPaths[V]]}).forEach(function(X){var V=X[0],E=X[1];if(V.type==2&&V.name.match(/\.iwa/)){var I=V.content,G=ks(I),me=Ts(G);me.forEach(function(he){c.push(he.id),l[he.id]={deps:[],location:E,type:Dl(he.messages[0].meta[1][0].data)}})}}),c.sort(function(X,V){return X-V});var u=c.filter(function(X){return X>1}).map(function(X){return[X,Lt(X)]});d.FileIndex.map(function(X,V){return[X,d.FullPaths[V]]}).forEach(function(X){var V=X[0];if(X[1],!!V.name.match(/\.iwa/)){var E=Ts(ks(V.content));E.forEach(function(I){I.messages.forEach(function(G){u.forEach(function(me){I.messages.some(function(he){return Dl(he.meta[1][0].data)!=11006&&iz(he.data,me[1])})&&l[me[0]].deps.push(I.id)})})})}});for(var m=Vt.find(d,l[1].location),f=Ts(ks(m.content)),p,g=0;g<f.length;++g){var h=f[g];h.id==1&&(p=h)}var x=Ka(Pr(p.messages[0].data)[1][0].data);for(m=Vt.find(d,l[x].location),f=Ts(ks(m.content)),g=0;g<f.length;++g)h=f[g],h.id==x&&(p=h);for(x=Ka(Pr(p.messages[0].data)[2][0].data),m=Vt.find(d,l[x].location),f=Ts(ks(m.content)),g=0;g<f.length;++g)h=f[g],h.id==x&&(p=h);for(x=Ka(Pr(p.messages[0].data)[2][0].data),m=Vt.find(d,l[x].location),f=Ts(ks(m.content)),g=0;g<f.length;++g)h=f[g],h.id==x&&(p=h);var w=Pr(p.messages[0].data);{w[6][0].data=Lt(n.e.r+1),w[7][0].data=Lt(n.e.c+1);var y=Ka(w[46][0].data),N=Vt.find(d,l[y].location),j=Ts(ks(N.content));{for(var b=0;b<j.length&&j[b].id!=y;++b);if(j[b].id!=y)throw"Bad ColumnRowUIDMapArchive";var _=Pr(j[b].messages[0].data);_[1]=[],_[2]=[],_[3]=[];for(var S=0;S<=n.e.c;++S){var C=[];C[1]=C[2]=[{type:0,data:Lt(S+420690)}],_[1].push({type:2,data:Yr(C)}),_[2].push({type:0,data:Lt(S)}),_[3].push({type:0,data:Lt(S)})}_[4]=[],_[5]=[],_[6]=[];for(var A=0;A<=n.e.r;++A)C=[],C[1]=C[2]=[{type:0,data:Lt(A+726270)}],_[4].push({type:2,data:Yr(C)}),_[5].push({type:0,data:Lt(A)}),_[6].push({type:0,data:Lt(A)});j[b].messages[0].data=Yr(_)}N.content=tl(el(j)),N.size=N.content.length,delete w[46];var U=Pr(w[4][0].data);{U[7][0].data=Lt(n.e.r+1);var k=Pr(U[1][0].data),R=Ka(k[2][0].data);N=Vt.find(d,l[R].location),j=Ts(ks(N.content));{if(j[0].id!=R)throw"Bad HeaderStorageBucket";var te=Pr(j[0].messages[0].data);for(A=0;A<i.length;++A){var Z=Pr(te[2][0].data);Z[1][0].data=Lt(A),Z[4][0].data=Lt(i[A].length),te[2][A]={type:te[2][0].type,data:Yr(Z)}}j[0].messages[0].data=Yr(te)}N.content=tl(el(j)),N.size=N.content.length;var se=Ka(U[2][0].data);N=Vt.find(d,l[se].location),j=Ts(ks(N.content));{if(j[0].id!=se)throw"Bad HeaderStorageBucket";for(te=Pr(j[0].messages[0].data),S=0;S<=n.e.c;++S)Z=Pr(te[2][0].data),Z[1][0].data=Lt(S),Z[4][0].data=Lt(n.e.r+1),te[2][S]={type:te[2][0].type,data:Yr(Z)};j[0].messages[0].data=Yr(te)}N.content=tl(el(j)),N.size=N.content.length;var ae=Ka(U[4][0].data);(function(){for(var X=Vt.find(d,l[ae].location),V=Ts(ks(X.content)),E,I=0;I<V.length;++I){var G=V[I];G.id==ae&&(E=G)}var me=Pr(E.messages[0].data);{me[3]=[];var he=[];o.forEach(function(pe,Y){he[1]=[{type:0,data:Lt(Y)}],he[2]=[{type:0,data:Lt(1)}],he[3]=[{type:2,data:az(pe)}],me[3].push({type:2,data:Yr(he)})})}E.messages[0].data=Yr(me);var B=el(V),be=tl(B);X.content=be,X.size=X.content.length})();var ne=Pr(U[3][0].data);{var K=ne[1][0];delete ne[2];var re=Pr(K.data);{var xe=Ka(re[2][0].data);(function(){for(var X=Vt.find(d,l[xe].location),V=Ts(ks(X.content)),E,I=0;I<V.length;++I){var G=V[I];G.id==xe&&(E=G)}var me=Pr(E.messages[0].data);{delete me[6],delete ne[7];var he=new Uint8Array(me[5][0].data);me[5]=[];for(var B=0,be=0;be<=n.e.r;++be){var pe=Pr(he);B+=cz(pe,i[be],o),pe[1][0].data=Lt(be),me[5].push({data:Yr(pe),type:2})}me[1]=[{type:0,data:Lt(n.e.c+1)}],me[2]=[{type:0,data:Lt(n.e.r+1)}],me[3]=[{type:0,data:Lt(B)}],me[4]=[{type:0,data:Lt(n.e.r+1)}]}E.messages[0].data=Yr(me);var Y=el(V),P=tl(Y);X.content=P,X.size=X.content.length})()}K.data=Yr(re)}U[3][0].data=Yr(ne)}w[4][0].data=Yr(U)}p.messages[0].data=Yr(w);var J=el(f),D=tl(J);return m.content=D,m.size=m.content.length,d}function uz(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function Bv(e){uz([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function fz(e,t){return t.bookType=="ods"?RC(e,t):t.bookType=="numbers"?dz(e,t):t.bookType=="xlsb"?hz(e,t):mz(e,t)}function hz(e,t){pl=1024,e&&!e.SSF&&(e.SSF=Hn(Nr)),e&&e.SSF&&(g0(),x0(e.SSF),t.revssf=v0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ad?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=pC.indexOf(t.bookType)>-1,a=H_();Bv(t=t||{});var i=Sv(),o="",l=0;if(t.cellXfs=[],Xi(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",xt(i,o,X_(e.Props,t)),a.coreprops.push(o),Bt(t.rels,2,o,St.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,xt(i,o,Y_(e.Props)),a.extprops.push(o),Bt(t.rels,3,o,St.EXT_PROPS),e.Custprops!==e.Props&&an(e.Custprops||{}).length>0&&(o="docProps/custom.xml",xt(i,o,Q_(e.Custprops)),a.custprops.push(o),Bt(t.rels,4,o,St.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],f=(m||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,xt(i,o,xU(l-1,o,t,e,u)),a.sheets.push(o),Bt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,St.WS[0])}if(m){var p=m["!comments"],g=!1,h="";p&&p.length>0&&(h="xl/comments"+l+"."+r,xt(i,h,yU(p,h)),a.comments.push(h),Bt(u,-1,"../comments"+l+"."+r,St.CMNT),g=!0),m["!legacy"]&&g&&xt(i,"xl/drawings/vmlDrawing"+l+".vml",hC(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}u["!id"].rId1&&xt(i,G_(o),Al(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,xt(i,o,vU(t.Strings,o,t)),a.strs.push(o),Bt(t.wbrels,-1,"sharedStrings."+r,St.SST)),o="xl/workbook."+r,xt(i,o,pU(e,o)),a.workbooks.push(o),Bt(t.rels,1,o,St.WB),o="xl/theme/theme1.xml",xt(i,o,uC(e.Themes,t)),a.themes.push(o),Bt(t.wbrels,-1,"theme/theme1.xml",St.THEME),o="xl/styles."+r,xt(i,o,gU(e,o,t)),a.styles.push(o),Bt(t.wbrels,-1,"styles."+r,St.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",xt(i,o,e.vbaraw),a.vba.push(o),Bt(t.wbrels,-1,"vbaProject.bin",St.VBA)),o="xl/metadata."+r,xt(i,o,wU(o)),a.metadata.push(o),Bt(t.wbrels,-1,"metadata."+r,St.XLMETA),xt(i,"[Content_Types].xml",V_(a,t)),xt(i,"_rels/.rels",Al(t.rels)),xt(i,"xl/_rels/workbook."+r+".rels",Al(t.wbrels)),delete t.revssf,delete t.ssf,i}function mz(e,t){pl=1024,e&&!e.SSF&&(e.SSF=Hn(Nr)),e&&e.SSF&&(g0(),x0(e.SSF),t.revssf=v0(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ad?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=pC.indexOf(t.bookType)>-1,a=H_();Bv(t=t||{});var i=Sv(),o="",l=0;if(t.cellXfs=[],Xi(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",xt(i,o,X_(e.Props,t)),a.coreprops.push(o),Bt(t.rels,2,o,St.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,xt(i,o,Y_(e.Props)),a.extprops.push(o),Bt(t.rels,3,o,St.EXT_PROPS),e.Custprops!==e.Props&&an(e.Custprops||{}).length>0&&(o="docProps/custom.xml",xt(i,o,Q_(e.Custprops)),a.custprops.push(o),Bt(t.rels,4,o,St.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var m={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,xt(i,o,SC(l-1,t,e,m)),a.sheets.push(o),Bt(t.wbrels,-1,"worksheets/sheet"+l+"."+r,St.WS[0])}if(f){var g=f["!comments"],h=!1,x="";if(g&&g.length>0){var w=!1;g.forEach(function(y){y[1].forEach(function(N){N.T==!0&&(w=!0)})}),w&&(x="xl/threadedComments/threadedComment"+l+"."+r,xt(i,x,V9(g,u,t)),a.threadedcomments.push(x),Bt(m,-1,"../threadedComments/threadedComment"+l+"."+r,St.TCMNT)),x="xl/comments"+l+"."+r,xt(i,x,mC(g)),a.comments.push(x),Bt(m,-1,"../comments"+l+"."+r,St.CMNT),h=!0}f["!legacy"]&&h&&xt(i,"xl/drawings/vmlDrawing"+l+".vml",hC(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}m["!id"].rId1&&xt(i,G_(o),Al(m))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,xt(i,o,aC(t.Strings,t)),a.strs.push(o),Bt(t.wbrels,-1,"sharedStrings."+r,St.SST)),o="xl/workbook."+r,xt(i,o,CC(e)),a.workbooks.push(o),Bt(t.rels,1,o,St.WB),o="xl/theme/theme1.xml",xt(i,o,uC(e.Themes,t)),a.themes.push(o),Bt(t.wbrels,-1,"theme/theme1.xml",St.THEME),o="xl/styles."+r,xt(i,o,cC(e,t)),a.styles.push(o),Bt(t.wbrels,-1,"styles."+r,St.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",xt(i,o,e.vbaraw),a.vba.push(o),Bt(t.wbrels,-1,"vbaProject.bin",St.VBA)),o="xl/metadata."+r,xt(i,o,fC()),a.metadata.push(o),Bt(t.wbrels,-1,"metadata."+r,St.XLMETA),u.length>1&&(o="xl/persons/person.xml",xt(i,o,G9(u)),a.people.push(o),Bt(t.wbrels,-1,"persons/person.xml",St.PEOPLE)),xt(i,"[Content_Types].xml",V_(a,t)),xt(i,"_rels/.rels",Al(t.rels)),xt(i,"xl/_rels/workbook."+r+".rels",Al(t.wbrels)),delete t.revssf,delete t.ssf,i}function pz(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ma(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function PC(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ju(t.file,Vt.write(e,{type:Tt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Vt.write(e,t)}function xz(e,t){var r=Hn(t||{}),n=fz(e,r);return gz(n,r)}function gz(e,t){var r={},n=Tt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Vt.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(p0(a))}return t.password&&typeof encrypt_agile<"u"?PC(encrypt_agile(a,t.password),t):t.type==="file"?ju(t.file,a):t.type=="string"?td(a):a}function vz(e,t){var r=t||{},n=PU(e,r);return PC(n,r)}function Ys(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Bd(Ud(n));case"binary":return Ud(n);case"string":return e;case"file":return ju(t.file,n,"utf8");case"buffer":return Tt?za(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ys(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function yz(e,t){switch(t.type){case"base64":return Bd(e);case"binary":return e;case"string":return e;case"file":return ju(t.file,e,"binary");case"buffer":return Tt?za(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function of(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Bd(r):t.type=="string"?td(r):r;case"file":return ju(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function FC(e,t){q8(),sU(e);var r=Hn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=FC(e,r);return r.type="array",p0(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ys(DU(e,r),r);case"slk":case"sylk":return Ys(t9.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Ys(AC(e.Sheets[e.SheetNames[a]],r),r);case"txt":return yz(IC(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Ys(Wv(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Ys(r9.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return of(e9.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Ys(n9.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Ys(d9.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Ys(sC.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Ys(RC(e,r),r);case"wk1":return of(Vw.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return of(Vw.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),of(kC(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),vz(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return xz(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function wz(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function MC(e,t,r){var n={};return n.type="file",n.file=t,wz(n),FC(e,n)}function Nz(e,t,r,n,a,i,o,l){var c=rn(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),m=!0,f=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=o?e[r][p]:e[n[p]+c];if(g===void 0||g.t===void 0){if(d===void 0)continue;i[p]!=null&&(f[i[p]]=d);continue}var h=g.v;switch(g.t){case"z":if(h==null)break;continue;case"e":h=h==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(i[p]!=null){if(h==null)if(g.t=="e"&&h===null)f[i[p]]=null;else if(d!==void 0)f[i[p]]=d;else if(u&&h===null)f[i[p]]=null;else continue;else f[i[p]]=u&&(g.t!=="n"||g.t==="n"&&l.rawNumbers!==!1)?h:Ia(g,h,l);h!=null&&(m=!1)}}return{row:f,isempty:m}}function kh(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof u){case"string":c=lr(u);break;case"number":c=lr(e["!ref"]),c.s.r=u;break;default:c=u}n>0&&(a=0);var m=rn(c.s.r),f=[],p=[],g=0,h=0,x=Array.isArray(e),w=c.s.r,y=0,N={};x&&!e[w]&&(e[w]=[]);var j=d.skipHidden&&e["!cols"]||[],b=d.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(j[y]||{}).hidden)switch(f[y]=fn(y),r=x?e[w][y]:e[f[y]+m],n){case 1:i[y]=y-c.s.c;break;case 2:i[y]=f[y];break;case 3:i[y]=d.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Ia(r,null,d),h=N[o]||0,!h)N[o]=1;else{do l=o+"_"+h++;while(N[l]);N[o]=h,N[l]=1}i[y]=l}for(w=c.s.r+a;w<=c.e.r;++w)if(!(b[w]||{}).hidden){var _=Nz(e,c,w,f,n,i,x,d);(_.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(p[g++]=_.row)}return p.length=g,p}var Zw=/"/g;function jz(e,t,r,n,a,i,o,l){for(var c=!0,d=[],u="",m=rn(r),f=t.s.c;f<=t.e.c;++f)if(n[f]){var p=l.dense?(e[r]||[])[f]:e[n[f]+m];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(l.rawNumbers&&p.t=="n"?p.v:Ia(p,null,l));for(var g=0,h=0;g!==u.length;++g)if((h=u.charCodeAt(g))===a||h===i||h===34||l.forceQuotes){u='"'+u.replace(Zw,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(Zw,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function Wv(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=lr(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",m=[];n.dense=Array.isArray(e);for(var f=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(f[g]||{}).hidden||(m[g]=fn(g));for(var h=0,x=a.s.r;x<=a.e.r;++x)(p[x]||{}).hidden||(u=jz(e,a,x,m,o,c,i,n),u!=null&&(n.strip&&(u=u.replace(d,"")),(u||n.blankrows!==!1)&&r.push((h++?l:"")+u)));return delete n.dense,r.join("")}function IC(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=Wv(e,t);return r}function bz(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=lr(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=fn(l);for(var u=a.s.r;u<=a.e.r;++u)for(i=rn(u),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function LC(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Vr(n.origin):n.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(i["!ref"]){var m=lr(i["!ref"]);u.e.c=Math.max(u.e.c,m.e.c),u.e.r=Math.max(u.e.r,m.e.r),o==-1&&(o=m.e.r+1,u.e.r=o+t.length-1+a)}else o==-1&&(o=0,u.e.r=t.length-1+a);var f=n.header||[],p=0;t.forEach(function(h,x){an(h).forEach(function(w){(p=f.indexOf(w))==-1&&(f[p=f.length]=w);var y=h[w],N="z",j="",b=zt({c:l+p,r:o+x+a});d=Vd(i,b),y&&typeof y=="object"&&!(y instanceof Date)?i[b]=y:(typeof y=="number"?N="n":typeof y=="boolean"?N="b":typeof y=="string"?N="s":y instanceof Date?(N="d",n.cellDates||(N="n",y=zn(y)),j=n.dateNF||Nr[14]):y===null&&n.nullError&&(N="e",y=0),d?(d.t=N,d.v=y,delete d.w,delete d.R,j&&(d.z=j)):i[b]=d={t:N,v:y},j&&(d.z=j))})}),u.e.c=Math.max(u.e.c,l+f.length-1);var g=rn(o);if(a)for(p=0;p<f.length;++p)i[fn(p+l)+g]={t:"s",v:f[p]};return i["!ref"]=Ar(u),i}function Sz(e,t){return LC(null,e,t)}function Vd(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Vr(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Vd(e,zt(t)):Vd(e,zt({r:t,c:r||0}))}function Ez(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function _z(){return{SheetNames:[],Sheets:{}}}function Cz(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var o=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(_C(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Tz(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Ez(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function kz(e,t){return e.z=t,e}function $C(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Az(e,t,r){return $C(e,"#"+t,r)}function Oz(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Dz(e,t,r,n){for(var a=typeof t!="string"?t:lr(t),i=typeof t=="string"?t:Ar(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=Vd(e,o,l);c.t="n",c.F=i,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var wt={encode_col:fn,encode_row:rn,encode_cell:zt,encode_range:Ar,decode_col:Av,decode_row:kv,split_cell:qL,decode_cell:Vr,decode_range:os,format_cell:Ia,sheet_add_aoa:L_,sheet_add_json:LC,sheet_add_dom:OC,aoa_to_sheet:mc,json_to_sheet:Sz,table_to_sheet:DC,table_to_book:rz,sheet_to_csv:Wv,sheet_to_txt:IC,sheet_to_json:kh,sheet_to_html:AC,sheet_to_formulae:bz,sheet_to_row_object_array:kh,sheet_get_cell:Vd,book_new:_z,book_append_sheet:Cz,book_set_sheet_visibility:Tz,cell_set_number_format:kz,cell_set_hyperlink:$C,cell_set_internal_link:Az,cell_add_comment:Oz,sheet_set_array_formula:Dz,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function Rz({services:e,schools:t,masterClasses:r,onAddMasterClass:n,onEditMasterClass:a,onViewMasterClass:i,onDeleteMasterClass:o}){var Y;const{toast:l}=Gt();console.log("MasterClassesTab: компонент загружен"),console.log("MasterClassesTab: props:",{services:e.length,schools:t.length,masterClasses:r.length}),console.log("MasterClassesTab: masterClasses:",r);const[c,d]=v.useState(!1),[u,m]=v.useState({date:"",time:"",schoolId:"",classGroup:"",serviceId:"",executors:[],notes:""}),[f,p]=v.useState([]),[g,h]=v.useState(!1),[x,w]=v.useState(!1),[y,N]=v.useState(null),[j,b]=v.useState([]),[_,S]=v.useState("all"),[C,A]=v.useState("all"),[U,k]=v.useState("all"),[R,te]=v.useState(""),[Z,se]=v.useState(""),ae=()=>{const P=t.map(ce=>ce.address?ce.address.split(",")[0].trim():"").filter(Boolean);return[...new Set(P)]},ne=()=>_==="all"?t:t.filter(P=>(P.address?P.address.split(",")[0].trim():"")===_),K=()=>{if(!u.schoolId)return[];const P=t.find(ce=>ce.id===u.schoolId);return P?P.classes:[]},re=()=>{let P=r;return _!=="all"&&(P=P.filter(ce=>{const Se=t.find(ue=>ue.id===ce.schoolId);return Se&&Se.address?Se.address.split(",")[0].trim()===_:!1})),C!=="all"&&(P=P.filter(ce=>ce.schoolId===C)),U!=="all"&&(P=P.filter(ce=>ce.classGroup===U)),R&&(P=P.filter(ce=>ce.date>=R)),Z&&(P=P.filter(ce=>ce.date<=Z)),P},xe=()=>{const P=re(),ce=P.reduce((Pe,je)=>Pe+je.statistics.totalAmount,0),Se=P.reduce((Pe,je)=>{const ke=je.participants.filter(gt=>gt.isPaid);return Pe+ke.reduce((gt,dt)=>gt+dt.totalAmount,0)},0),ue=ce-Se;return{totalAmount:ce,paidAmount:Se,unpaidAmount:ue,totalClasses:P.length}},J=async()=>{h(!0);try{const P=await et.users.getUsers({role:"executor"});p(P.users.map(ce=>({id:ce.id,name:`${ce.name}${ce.surname?` ${ce.surname}`:""}`})))}catch(P){console.error("Error loading executors:",P)}finally{h(!1)}},D=P=>{N(P),b([...P.executors]),w(!0)},X=async()=>{if(y)try{await a(y.id,{executors:j});const P={...y,executors:j};w(!1),N(null),b([]),l({title:"Успешно",description:"Исполнители обновлены"})}catch(P){console.error("Error saving executors:",P),l({title:"Ошибка",description:"Не удалось обновить исполнителей",variant:"destructive"})}},V=()=>{w(!1),N(null),b([])},E=()=>{console.log("🔍 getStylesAndOptionsStats: ФУНКЦИЯ ВЫЗВАНА!");const P=re(),ce={},Se={};return console.log("getStylesAndOptionsStats: начало подсчета статистики"),console.log("getStylesAndOptionsStats: отфильтрованных мастер-классов:",P.length),console.log("getStylesAndOptionsStats: все мастер-классы:",r.length),console.log("getStylesAndOptionsStats: все мастер-классы:",r),console.log("getStylesAndOptionsStats: отфильтрованные мастер-классы:",P),P.forEach((ue,Pe)=>{var je;console.log(`getStylesAndOptionsStats: Мастер-класс ${Pe+1}:`,{id:ue.id,date:ue.date,participantsCount:((je=ue.participants)==null?void 0:je.length)||0,participants:ue.participants}),ue.participants&&ue.participants.length>0&&ue.participants.forEach((ke,gt)=>{console.log(`getStylesAndOptionsStats: Участник ${gt+1} в МК ${Pe+1}:`,{id:ke.id,selectedStyles:ke.selectedStyles,selectedOptions:ke.selectedOptions}),ke.selectedStyles&&ke.selectedStyles.length>0&&(console.log("getStylesAndOptionsStats: selectedStyles детально:",ke.selectedStyles),ke.selectedStyles.forEach((dt,qt)=>{console.log(`getStylesAndOptionsStats: style ${qt}:`,{type:typeof dt,value:dt,isObject:typeof dt=="object",keys:typeof dt=="object"?Object.keys(dt):"N/A"})})),ke.selectedOptions&&ke.selectedOptions.length>0&&(console.log("getStylesAndOptionsStats: selectedOptions детально:",ke.selectedOptions),ke.selectedOptions.forEach((dt,qt)=>{console.log(`getStylesAndOptionsStats: option ${qt}:`,{type:typeof dt,value:dt,isObject:typeof dt=="object",keys:typeof dt=="object"?Object.keys(dt):"N/A"})}))})}),P.forEach((ue,Pe)=>{var je;if(console.log(`getStylesAndOptionsStats: мастер-класс ${Pe+1}:`,{id:ue.id,date:ue.date,schoolName:ue.schoolName,classGroup:ue.classGroup,participantsCount:((je=ue.participants)==null?void 0:je.length)||0,participants:ue.participants}),!ue.participants||ue.participants.length===0){console.log(`getStylesAndOptionsStats: мастер-класс ${Pe+1} не имеет участников`);return}ue.participants.forEach((ke,gt)=>{console.log(`getStylesAndOptionsStats: участник ${gt+1}:`,{id:ke.id,childName:ke.childName,selectedStyles:ke.selectedStyles,selectedOptions:ke.selectedOptions}),ke.selectedStyles&&ke.selectedStyles.length>0?ke.selectedStyles.forEach(dt=>{const qt=typeof dt=="string"?dt:dt.id;if(!qt){console.log("getStylesAndOptionsStats: не удалось извлечь styleId из:",dt);return}const Ot=e.find(H=>H.id===ue.serviceId);if(!Ot){console.log(`getStylesAndOptionsStats: услуга не найдена для serviceId: ${ue.serviceId}`);return}const Kt=Ot.styles.find(H=>H.id===qt);Kt?(ce[Kt.name]=(ce[Kt.name]||0)+1,console.log(`getStylesAndOptionsStats: добавлен стиль "${Kt.name}" (ID: ${qt})`)):console.log(`getStylesAndOptionsStats: стиль не найден для styleId: ${qt} из ${dt}`)}):console.log(`getStylesAndOptionsStats: участник ${gt+1} не выбрал стили`),ke.selectedOptions&&ke.selectedOptions.length>0?ke.selectedOptions.forEach(dt=>{const qt=typeof dt=="string"?dt:dt.id;if(!qt){console.log("getStylesAndOptionsStats: не удалось извлечь optionId из:",dt);return}const Ot=e.find(H=>H.id===ue.serviceId);if(!Ot){console.log(`getStylesAndOptionsStats: услуга не найдена для serviceId: ${ue.serviceId}`);return}const Kt=Ot.options.find(H=>H.id===qt);Kt?(Se[Kt.name]=(Se[Kt.name]||0)+1,console.log(`getStylesAndOptionsStats: добавлена опция "${Kt.name}" (ID: ${qt})`)):console.log(`getStylesAndOptionsStats: опция не найдена для optionId: ${qt} из ${dt}`)}):console.log(`getStylesAndOptionsStats: участник ${gt+1} не выбрал опции`)})}),console.log("getStylesAndOptionsStats: итоговая статистика:",{stylesStats:ce,optionsStats:Se}),{stylesStats:ce,optionsStats:Se}},I=v.useCallback(P=>{const ce=G(P);console.log(`getMasterClassesForDate: ищем для даты ${ce}`),console.log("getMasterClassesForDate: доступные даты в данных:",r.map(ue=>ue.date));const Se=r.filter(ue=>{let Pe=ue.date;Pe.includes("T")&&(Pe=Pe.split("T")[0]);const je=Pe===ce;return console.log(`getMasterClassesForDate: проверяем ${Pe} === ${ce} -> ${je}`),je&&console.log(`getMasterClassesForDate: найдено совпадение: ${Pe} === ${ce}`),je});return Se.length>0?console.log(`getMasterClassesForDate: ${ce} -> ${Se.length} мастер-классов`):console.log(`getMasterClassesForDate: для ${ce} мастер-классов не найдено`),Se},[r]),G=P=>{const ce=P.getFullYear(),Se=String(P.getMonth()+1).padStart(2,"0"),ue=String(P.getDate()).padStart(2,"0"),Pe=`${ce}-${Se}-${ue}`;return console.log(`formatDateForComparison: ${P.toLocaleDateString()} -> ${Pe}`),Pe},me=P=>{if(P){console.log("handleDateSelect: получена дата:",{originalDate:P,toLocaleDateString:P.toLocaleDateString(),toISOString:P.toISOString(),getTime:P.getTime(),getFullYear:P.getFullYear(),getMonth:P.getMonth(),getDate:P.getDate()});const ce=G(P);m(Se=>({...Se,date:ce})),d(!0),console.log(`Открыто модальное окно для даты ${P.toLocaleDateString()} -> ${ce}`)}},he=P=>{m(ce=>({...ce,schoolId:P,classGroup:""}))},B=P=>{var ue,Pe,je,ke,gt;if(P.preventDefault(),u.executors.length===0){l({title:"Ошибка",description:"Выберите хотя бы одного исполнителя",variant:"destructive"});return}if(console.log("handleSubmit: отправляем мастер-класс с датой:",{formDataDate:u.date,formDataType:typeof u.date,currentFormData:u,parsedDate:new Date(u.date),parsedDateISO:new Date(u.date).toISOString(),parsedDateLocal:new Date(u.date).toLocaleDateString()}),!u.date){l({title:"Ошибка",description:"Дата не выбрана",variant:"destructive"});return}const ce=new Date(u.date),Se=new Date;if(Se.setHours(0,0,0,0),ce<Se){l({title:"Ошибка",description:"Нельзя создавать мастер-класс в прошлом",variant:"destructive"});return}n({date:u.date,time:u.time,schoolId:u.schoolId,classGroup:u.classGroup,serviceId:u.serviceId,executors:u.executors,notes:u.notes,city:((je=(Pe=(ue=t.find(dt=>dt.id===u.schoolId))==null?void 0:ue.address)==null?void 0:Pe.split(",")[0])==null?void 0:je.trim())||"",schoolName:((ke=t.find(dt=>dt.id===u.schoolId))==null?void 0:ke.name)||"",serviceName:((gt=e.find(dt=>dt.id===u.serviceId))==null?void 0:gt.name)||""}),m({date:"",time:"",schoolId:"",classGroup:"",serviceId:"",executors:[],notes:""}),d(!1),l({title:"Успешно",description:"Мастер-класс создан"})},be=(P,ce)=>{m(Se=>({...Se,executors:ce?[...Se.executors,P]:Se.executors.filter(ue=>ue!==P)}))};v.useEffect(()=>{if(console.log("MasterClassesTab: useEffect сработал"),console.log("MasterClassesTab: Получены данные:",{masterClassesCount:r.length,masterClasses:r,schoolsCount:t.length,servicesCount:e.length}),J(),r.length>0&&r.forEach((P,ce)=>{var Se;console.log(`MasterClassesTab: Мастер-класс ${ce+1} (${P.date}):`,{id:P.id,participantsCount:((Se=P.participants)==null?void 0:Se.length)||0,participants:P.participants})}),r.length>0){console.log("MasterClassesTab: Пример мастер-класса:",r[0]),console.log("MasterClassesTab: Все даты мастер-классов:",r.map(Pe=>Pe.date));const P=new Date,ce=P.getMonth(),Se=P.getFullYear();console.log("MasterClassesTab: Проверяем даты для текущего месяца:",ce+1,Se);for(let Pe=1;Pe<=31;Pe++){const je=new Date(Se,ce,Pe),ke=I(je);ke.length>0&&console.log(`MasterClassesTab: Тест даты ${je.toLocaleDateString()}: найдено ${ke.length} мастер-классов`)}console.log("🔍 MasterClassesTab: Принудительно вызываем getStylesAndOptionsStats()");const ue=E();console.log("🔍 MasterClassesTab: Результат getStylesAndOptionsStats():",ue)}},[r,t,e,I]);const pe=()=>{const P=xe(),ce=re(),{stylesStats:Se,optionsStats:ue}=E(),Pe=wt.book_new(),je=wt.aoa_to_sheet([]);let ke=0;wt.sheet_add_aoa(je,[["ИНФОРМАЦИЯ ПО ШКОЛАМ"]],{origin:{r:ke,c:0}});const gt=wt.encode_cell({r:ke,c:0});je["!rows"]||(je["!rows"]=[]),je["!rows"][ke]||(je["!rows"][ke]={}),je[gt]||(je[gt]={}),je[gt].s={font:{bold:!0,sz:14}},ke+=1,wt.sheet_add_aoa(je,[["Название школы","Адрес"]],{origin:{r:ke,c:0}}),["A","B"].forEach((we,M)=>{const ge=we+(ke+1);je[ge]||(je[ge]={}),je[ge].s={font:{bold:!0}}}),ke+=1;const qt=Array.from(new Set(ce.map(we=>we.schoolId))).map(we=>t.find(M=>M.id===we)).filter(Boolean).map(we=>[(we==null?void 0:we.name)||"Неизвестная школа",(we==null?void 0:we.address)||"Адрес не указан"]);wt.sheet_add_aoa(je,qt,{origin:{r:ke,c:0}}),ke+=qt.length+2,wt.sheet_add_aoa(je,[["ФИНАНСОВАЯ СТАТИСТИКА"]],{origin:{r:ke,c:0}});const Ot=wt.encode_cell({r:ke,c:0});je["!rows"][ke]||(je["!rows"][ke]={}),je[Ot]||(je[Ot]={}),je[Ot].s={font:{bold:!0,sz:14}},ke+=1,wt.sheet_add_aoa(je,[["Общая сумма",P.totalAmount.toLocaleString()+" ₽"],["Оплатили",P.paidAmount.toLocaleString()+" ₽"],["Не оплатили",P.unpaidAmount.toLocaleString()+" ₽"],["Всего мастер-классов",P.totalClasses],["Дата экспорта",new Date().toLocaleDateString("ru-RU")]],{origin:{r:ke,c:0}});for(let we=0;we<5;we++){const M="A"+(ke+we+1);je[M]||(je[M]={}),je[M].s={font:{bold:!0}}}ke+=6,wt.sheet_add_aoa(je,[["СТАТИСТИКА ПО ВАРИАНТАМ РУЧЕК"]],{origin:{r:ke,c:0}});const Kt=wt.encode_cell({r:ke,c:0});if(je["!rows"][ke]||(je["!rows"][ke]={}),je[Kt]||(je[Kt]={}),je[Kt].s={font:{bold:!0,sz:14}},ke+=1,Object.keys(Se).length>0){wt.sheet_add_aoa(je,[["Вариант ручки","Количество выборов"]],{origin:{r:ke,c:0}}),["A","B"].forEach((M,ge)=>{const Ne=M+(ke+1);je[Ne]||(je[Ne]={}),je[Ne].s={font:{bold:!0}}}),ke+=1;const we=Object.entries(Se).map(([M,ge])=>[M,ge]);wt.sheet_add_aoa(je,we,{origin:{r:ke,c:0}}),ke+=we.length+2}else wt.sheet_add_aoa(je,[["Нет данных по вариантам ручек"]],{origin:{r:ke,c:0}}),ke+=2;wt.sheet_add_aoa(je,[["СТАТИСТИКА ПО ДОПОЛНИТЕЛЬНЫМ УСЛУГАМ"]],{origin:{r:ke,c:0}});const H=wt.encode_cell({r:ke,c:0});if(je["!rows"][ke]||(je["!rows"][ke]={}),je[H]||(je[H]={}),je[H].s={font:{bold:!0,sz:14}},ke+=1,Object.keys(ue).length>0){wt.sheet_add_aoa(je,[["Дополнительная услуга","Количество выборов"]],{origin:{r:ke,c:0}}),["A","B"].forEach((M,ge)=>{const Ne=M+(ke+1);je[Ne]||(je[Ne]={}),je[Ne].s={font:{bold:!0}}}),ke+=1;const we=Object.entries(ue).map(([M,ge])=>[M,ge]);wt.sheet_add_aoa(je,we,{origin:{r:ke,c:0}}),ke+=we.length+2}else wt.sheet_add_aoa(je,[["Нет данных по дополнительным услугам"]],{origin:{r:ke,c:0}}),ke+=2;je["!cols"]=[{wch:30},{wch:25},{wch:20},{wch:20},{wch:20},{wch:20}],wt.book_append_sheet(Pe,je,"Статистика");const fe=`Финансовая_статистика_${new Date().toLocaleDateString("ru-RU")}.xlsx`;MC(Pe,fe),l({title:"Успешно!",description:"Финансовая статистика экспортирована в Excel",variant:"default"})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(gr,{open:c,onOpenChange:d,children:[s.jsx(Xg,{asChild:!0,children:s.jsxs(q,{className:"flex items-center gap-2",children:[s.jsx(ys,{className:"h-4 w-4"}),"Создать мастер-класс"]})}),s.jsxs(dr,{className:"max-w-2xl",children:[s.jsxs(jr,{children:[s.jsx(ur,{children:"Создать мастер-класс"}),s.jsx(br,{children:"Заполните информацию о новом мастер-классе"})]}),s.jsxs("form",{onSubmit:B,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"date",children:"Дата"}),s.jsx(st,{id:"date",type:"date",value:u.date,onChange:P=>{console.log(`Форма: изменение даты с ${u.date} на ${P.target.value}`),m(ce=>({...ce,date:P.target.value}))},required:!0}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Установлена дата: ",u.date]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"time",children:"Время"}),s.jsx(st,{id:"time",type:"time",value:u.time,onChange:P=>m(ce=>({...ce,time:P.target.value})),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"school",children:"Школа/Садик"}),s.jsxs(kt,{value:u.schoolId,onValueChange:he,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите школу/садик"})}),s.jsx(_t,{children:t.map(P=>s.jsx(Ze,{value:P.id,children:P.name},P.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"class",children:"Класс/Группа"}),s.jsxs(kt,{value:u.classGroup,onValueChange:P=>m(ce=>({...ce,classGroup:P})),disabled:!u.schoolId,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите класс/группу"})}),s.jsx(_t,{children:K().map(P=>s.jsx(Ze,{value:P,children:P},P))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"service",children:"Услуга"}),s.jsxs(kt,{value:u.serviceId,onValueChange:P=>m(ce=>({...ce,serviceId:P})),children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите услугу"})}),s.jsx(_t,{children:e.map(P=>s.jsx(Ze,{value:P.id,children:P.name},P.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{children:"Исполнители"}),g?s.jsx("div",{className:"text-sm text-muted-foreground",children:"Загрузка исполнителей..."}):s.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(P=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:`executor-${P.id}`,checked:u.executors.includes(P.id),onChange:ce=>be(P.id,ce.target.checked),className:"rounded"}),s.jsx(Te,{htmlFor:`executor-${P.id}`,children:P.name})]},P.id))}),f.length===0&&!g&&s.jsx("div",{className:"text-sm text-muted-foreground",children:"Нет доступных исполнителей"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"notes",children:"Примечания"}),s.jsx(Fr,{id:"notes",value:u.notes,onChange:P=>m(ce=>({...ce,notes:P.target.value})),placeholder:"Дополнительная информация..."})]}),s.jsxs(kd,{children:[s.jsx(q,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Отмена"}),s.jsx(q,{type:"submit",children:"Создать"})]})]})]})]}),s.jsx(q,{variant:"outline",onClick:()=>{console.log("Текущие мастер-классы:",r),console.log("Даты мастер-классов:",r.map(P=>P.date))},children:"Отладка данных"})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Найдено: ",re().length," мастер-классов"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs(Ce,{className:"lg:col-span-3",children:[s.jsx(Je,{children:s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(n0,{className:"h-5 w-5"}),"Фильтры поиска"]})}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"city-filter",children:"Город"}),s.jsxs(kt,{value:_,onValueChange:S,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите город"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все города"}),ae().map(P=>s.jsx(Ze,{value:P,children:P},P))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"school-filter",children:"Школа/Садик"}),s.jsxs(kt,{value:C,onValueChange:A,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите школу"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все школы"}),ne().map(P=>s.jsx(Ze,{value:P.id,children:P.name},P.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"class-filter",children:"Класс/Группа"}),s.jsxs(kt,{value:U,onValueChange:k,children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите класс"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все классы"}),re().map(P=>P.classGroup).filter((P,ce,Se)=>Se.indexOf(P)===ce).map(P=>s.jsx(Ze,{value:P,children:P},P))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"date-from-filter",children:"Дата от"}),s.jsx(st,{id:"date-from-filter",type:"date",value:R,onChange:P=>te(P.target.value),placeholder:"Выберите дату"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"date-to-filter",children:"Дата до"}),s.jsx(st,{id:"date-to-filter",type:"date",value:Z,onChange:P=>se(P.target.value),placeholder:"Выберите дату"})]}),s.jsx("div",{className:"space-y-2 flex items-end",children:s.jsx(q,{variant:"outline",onClick:()=>{S("all"),A("all"),k("all"),te(""),se("")},className:"w-full",children:"Сбросить фильтры"})})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(iD,{className:"h-5 w-5"}),s.jsx("h4",{className:"font-semibold text-lg",children:"Статистика по вариантам ручек и дополнительным услугам"})]}),(()=>{console.log("Компонент статистики: начало рендеринга");const{stylesStats:P,optionsStats:ce}=E(),Se=Object.values(P).reduce((Pe,je)=>Pe+je,0),ue=Object.values(ce).reduce((Pe,je)=>Pe+je,0);return console.log("Статистика в компоненте:",{stylesStats:P,optionsStats:ce,totalStyles:Se,totalOptions:ue,masterClassesCount:r.length,filteredCount:re().length}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm",children:"Варианты ручек"}),s.jsxs(rt,{variant:"secondary",className:"text-xs px-2 py-1",children:["Всего: ",Se]})]}),s.jsx("div",{className:"space-y-2",children:Object.entries(P).length>0?Object.entries(P).sort(([,Pe],[,je])=>je-Pe).map(([Pe,je])=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded text-sm",children:[s.jsx("span",{className:"font-medium",children:Pe}),s.jsx(rt,{variant:"outline",className:"text-xs",children:je})]},Pe)):s.jsx("div",{className:"text-center text-muted-foreground py-2 text-sm",children:"Нет данных по вариантам ручек"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm",children:"Дополнительные услуги"}),s.jsxs(rt,{variant:"secondary",className:"text-xs px-2 py-1",children:["Всего: ",ue]})]}),s.jsx("div",{className:"space-y-2",children:Object.entries(ce).length>0?Object.entries(ce).sort(([,Pe],[,je])=>je-Pe).map(([Pe,je])=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded text-sm",children:[s.jsx("span",{className:"font-medium",children:Pe}),s.jsx(rt,{variant:"outline",className:"text-xs",children:je})]},Pe)):s.jsx("div",{className:"text-center text-muted-foreground py-2 text-sm",children:"Нет данных по дополнительным услугам"})})]})]})})()]})]})]}),s.jsxs(Ce,{className:"w-fit",children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-5 w-5"}),"Календарь"]}),s.jsx(ft,{children:"Кликните на дату для создания нового мастер-класса"})]}),s.jsx(Ae,{children:s.jsx(wv,{mode:"single",onSelect:me,locale:TE,className:"rounded-md border",components:{DayContent:({date:P,displayMonth:ce,activeModifiers:Se,...ue})=>{const Pe=I(P);if(Pe.length>0){const je=G(P);console.log(`DayContent: ${P.toLocaleDateString()} (${je}) -> ${Pe.length} мастер-классов`)}else if(P.getDate()<=5){const ke=G(P);console.log(`DayContent: ${P.toLocaleDateString()} (${ke}) -> 0 мастер-классов`)}return s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("div",{...ue,className:"w-full h-full p-2 text-center hover:bg-accent rounded-md cursor-pointer",children:P.getDate()}),Pe.length>0&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-white/90 text-black text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold shadow-lg z-10 border border-gray-300",children:Pe.length})]})}},onMonthChange:P=>{console.log(`Calendar: месяц изменен на ${P.toLocaleDateString()}`)}})})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(ih,{className:"h-5 w-5 text-green-600"}),"Финансовая статистика"]}),s.jsxs(ft,{children:["Статистика по финансам ",xe().totalClasses>0?`(${xe().totalClasses} мастер-классов)`:""]})]}),s.jsxs(q,{variant:"outline",className:"flex items-center gap-2",onClick:()=>pe(),children:[s.jsx(ex,{className:"h-4 w-4"}),"Экспорт в Excel"]})]})}),s.jsx(Ae,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[xe().totalAmount.toLocaleString()," ₽"]}),s.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Общая сумма"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[xe().paidAmount.toLocaleString()," ₽"]}),s.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Оплатили"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg border",children:[s.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[xe().unpaidAmount.toLocaleString()," ₽"]}),s.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"Не оплатили"})]})]})})]}),s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsx(qe,{children:"Список мастер-классов"}),s.jsx(ft,{children:"Все запланированные мастер-классы"})]}),s.jsx(Ae,{children:s.jsx("div",{className:"space-y-3",children:re().map(P=>{var ce;return s.jsx(Ce,{className:"cursor-pointer hover:shadow-md transition-shadow",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:new Date(P.date).toLocaleDateString("ru-RU")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:P.time})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:((ce=t.find(Se=>Se.id===P.schoolId))==null?void 0:ce.name)||"Школа"})]}),s.jsx(rt,{variant:"outline",children:P.classGroup}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Исполнители:"}),s.jsx("div",{className:"flex gap-1",children:P.executors.map((Se,ue)=>{var je;const Pe=((je=f.find(ke=>ke.id===Se))==null?void 0:je.name)||Se;return s.jsx(rt,{variant:"secondary",className:"text-xs",children:Pe},ue)})}),s.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:Se=>{Se.stopPropagation(),D(P)},children:s.jsx(ND,{className:"h-3 w-3"})})]}),P.notes&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Примечания:"}),s.jsx("span",{className:"text-sm text-muted-foreground max-w-48 truncate",title:P.notes,children:P.notes})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:P.statistics.totalParticipants})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ih,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:[P.statistics.totalAmount," ₽"]})]}),s.jsx(q,{variant:"outline",size:"sm",onClick:()=>i(P),children:"Подробнее"}),s.jsxs(mh,{children:[s.jsx(ph,{asChild:!0,children:s.jsx(q,{variant:"destructive",size:"sm",className:"h-8 w-8 p-0",onClick:Se=>Se.stopPropagation(),children:s.jsx(Ao,{className:"h-4 w-4"})})}),s.jsxs(Dd,{children:[s.jsxs(Rd,{children:[s.jsx(Fd,{children:"Удалить мастер-класс?"}),s.jsx(Md,{children:"Это действие нельзя отменить. Мастер-класс будет удален навсегда."})]}),s.jsxs(Pd,{children:[s.jsx(Ld,{children:"Отмена"}),s.jsx(Id,{onClick:()=>o(P.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Удалить"})]})]})]})]})]})})},P.id)})})})]}),s.jsx(gr,{open:x,onOpenChange:w,children:s.jsxs(dr,{className:"max-w-md",children:[s.jsxs(jr,{children:[s.jsx(ur,{children:"Управление исполнителями"}),s.jsx(br,{children:y&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:["Мастер-класс: ",s.jsx("strong",{children:y.serviceName})]}),s.jsxs("p",{children:["Дата: ",s.jsx("strong",{children:new Date(y.date).toLocaleDateString("ru-RU")})]}),s.jsxs("p",{children:["Время: ",s.jsx("strong",{children:y.time})]}),s.jsxs("p",{children:["Место: ",s.jsx("strong",{children:(Y=t.find(P=>P.id===y.schoolId))==null?void 0:Y.name})]}),s.jsxs("p",{children:["Класс: ",s.jsx("strong",{children:y.classGroup})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-base font-semibold",children:"Выберите исполнителей:"}),g?s.jsx("div",{className:"text-sm text-muted-foreground py-4",children:"Загрузка исполнителей..."}):s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-md p-3",children:f.map(P=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-muted/50 p-2 rounded",children:[s.jsx("input",{type:"checkbox",checked:j.includes(P.id),onChange:ce=>{ce.target.checked?b(Se=>[...Se,P.id]):b(Se=>Se.filter(ue=>ue!==P.id))},className:"rounded"}),s.jsx("span",{className:"text-sm",children:P.name})]},P.id))}),f.length===0&&!g&&s.jsx("div",{className:"text-sm text-muted-foreground py-4 text-center",children:"Нет доступных исполнителей"})]}),j.length>0&&s.jsxs("div",{className:"bg-muted/30 p-3 rounded-md",children:[s.jsxs(Te,{className:"text-sm font-medium",children:["Выбрано исполнителей: ",j.length]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:j.map(P=>{var Se;const ce=((Se=f.find(ue=>ue.id===P))==null?void 0:Se.name)||P;return s.jsx(rt,{variant:"secondary",className:"text-xs",children:ce},P)})})]})]}),s.jsxs(kd,{children:[s.jsx(q,{variant:"outline",onClick:V,children:"Отмена"}),s.jsx(q,{onClick:X,disabled:g,children:"Сохранить изменения"})]})]})})]})}var Uv="Switch",[Pz,wH]=Hi(Uv),[Fz,Mz]=Pz(Uv),BC=v.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...m}=e,[f,p]=v.useState(null),g=Mt(t,N=>p(N)),h=v.useRef(!1),x=f?u||!!f.closest("form"):!0,[w=!1,y]=Fi({prop:a,defaultProp:i,onChange:d});return s.jsxs(Fz,{scope:r,checked:w,disabled:l,children:[s.jsx(ht.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":zC(w),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:at(e.onClick,N=>{y(j=>!j),x&&(h.current=N.isPropagationStopped(),h.current||N.stopPropagation())})}),x&&s.jsx(Iz,{control:f,bubbles:!h.current,name:n,value:c,checked:w,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});BC.displayName=Uv;var WC="SwitchThumb",UC=v.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=Mz(WC,r);return s.jsx(ht.span,{"data-state":zC(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});UC.displayName=WC;var Iz=e=>{const{control:t,checked:r,bubbles:n=!0,...a}=e,i=v.useRef(null),o=Lg(r),l=Eg(t);return v.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&m){const f=new Event("click",{bubbles:n});m.call(c,r),c.dispatchEvent(f)}},[o,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function zC(e){return e?"checked":"unchecked"}var HC=BC,Lz=UC;const xx=v.forwardRef(({className:e,...t},r)=>s.jsx(HC,{className:We("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(Lz,{className:We("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xx.displayName=HC.displayName;const Gd=v.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:We("w-full caption-bottom text-sm",e),...t})}));Gd.displayName="Table";const qd=v.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:We("[&_tr]:border-b",e),...t}));qd.displayName="TableHeader";const Xd=v.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:We("[&_tr:last-child]:border-0",e),...t}));Xd.displayName="TableBody";const $z=v.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:We("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));$z.displayName="TableFooter";const oa=v.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:We("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));oa.displayName="TableRow";const Pt=v.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:We("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Pt.displayName="TableHead";const Ct=v.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:We("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ct.displayName="TableCell";const Bz=v.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:We("mt-4 text-sm text-muted-foreground",e),...t}));Bz.displayName="TableCaption";var Wz="Separator",e2="horizontal",Uz=["horizontal","vertical"],VC=v.forwardRef((e,t)=>{const{decorative:r,orientation:n=e2,...a}=e,i=zz(n)?n:e2,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(ht.div,{"data-orientation":i,...l,...a,ref:t})});VC.displayName=Wz;function zz(e){return Uz.includes(e)}var GC=VC;const gx=v.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(GC,{ref:a,decorative:r,orientation:t,className:We("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));gx.displayName=GC.displayName;const t2=(e,t,r)=>{try{const n=wt.book_new(),a=wt.aoa_to_sheet([]);let i=0;if(wt.sheet_add_aoa(a,[["ОТЧЕТ ПО МАСТЕР-КЛАССУ"]],{origin:{r:i,c:0}}),i+=2,wt.sheet_add_aoa(a,[["Параметр","Значение"],["Название мастер класса",t.name],["Дата",new Date(e.date).toLocaleDateString("ru-RU")],["Время",e.time],["Школа",e.schoolName],["Город",e.city],["Группа",e.classGroup],["Всего участников",r.length],["Оплачено",r.filter(u=>u.isPaid).length],["Ожидает оплаты",r.filter(u=>!u.isPaid).length],["Получили услугу",r.filter(u=>u.hasReceived).length],["Общая сумма",r.reduce((u,m)=>u+m.totalAmount,0)],["Оплаченная сумма",r.filter(u=>u.isPaid).reduce((u,m)=>u+m.totalAmount,0)]],{origin:{r:i,c:0}}),i+=14,t.styles.length>0){wt.sheet_add_aoa(a,[["СТАТИСТИКА ВАРИАНТОВ РУЧЕК"]],{origin:{r:i,c:0}}),i+=1;const u=t.styles.map(m=>{const f=r.filter(p=>p.selectedStyles.some(g=>typeof g=="string"?g===m.id:g.id===m.id)).length;return[m.name,f]});wt.sheet_add_aoa(a,[["Вариант ручки","Количество выборов"]],{origin:{r:i,c:0}}),i+=1,wt.sheet_add_aoa(a,u,{origin:{r:i,c:0}}),i+=t.styles.length+2}if(t.options.length>0){wt.sheet_add_aoa(a,[["СТАТИСТИКА ДОПОЛНИТЕЛЬНЫХ УСЛУГ"]],{origin:{r:i,c:0}}),i+=1;const u=t.options.map(m=>{const f=r.filter(p=>p.selectedOptions.some(g=>typeof g=="string"?g===m.id:g.id===m.id)).length;return[m.name,f]});wt.sheet_add_aoa(a,[["Дополнительная услуга","Количество выборов"]],{origin:{r:i,c:0}}),i+=1,wt.sheet_add_aoa(a,u,{origin:{r:i,c:0}}),i+=t.options.length+2}wt.sheet_add_aoa(a,[["ТАБЛИЦА УЧАСТНИКОВ"]],{origin:{r:i,c:0}}),i+=1;const o=["Участник","Родитель"];t.styles.forEach(u=>{o.push(u.name)}),t.options.forEach(u=>{o.push(u.name)}),o.push("Сумма","Статус оплаты","Получил услугу","Дата оплаты","Способ оплаты","Примечания"),wt.sheet_add_aoa(a,[o],{origin:{r:i,c:0}}),i+=1;const l=r.map(u=>{const m=[u.childName,u.parentName];return t.styles.forEach(f=>{const p=u.selectedStyles.some(g=>typeof g=="string"?g===f.id:g.id===f.id);m.push(p?"1":"")}),t.options.forEach(f=>{const p=u.selectedOptions.some(g=>typeof g=="string"?g===f.id:g.id===f.id);m.push(p?"1":"")}),m.push(String(u.totalAmount),u.isPaid?"Оплачено":"Ожидает",u.hasReceived?"Да":"Нет",u.paymentDate||"-",u.paymentMethod==="cash"?"Наличные":u.paymentMethod==="transfer"?"Перевод":"-",u.notes||"-"),m});wt.sheet_add_aoa(a,l,{origin:{r:i,c:0}});const c=[{wch:20},{wch:25}];t.styles.forEach(()=>c.push({wch:15})),t.options.forEach(()=>c.push({wch:15})),c.push({wch:12},{wch:15},{wch:15},{wch:15},{wch:15},{wch:30}),a["!cols"]=c,wt.book_append_sheet(n,a,"Отчет");const d=`Мастер-класс_${t.name}_${new Date(e.date).toLocaleDateString("ru-RU")}.xlsx`;MC(n,d),console.log("✅ Excel файл успешно экспортирован:",d)}catch(n){throw console.error("❌ Ошибка при экспорте в Excel:",n),new Error("Не удалось экспортировать данные в Excel")}},Hz=({masterClass:e,service:t})=>{const[r,n]=v.useState(null),[a,i]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState(e.participants.map(B=>({...B,hasReceived:B.hasReceived||!1}))),[u,m]=v.useState("all"),[f,p]=v.useState(!1),[g,h]=v.useState({date:e.date,time:e.time,executors:e.executors,notes:e.notes||""}),[x,w]=v.useState([]),[y,N]=v.useState(!1),[j,b]=v.useState(!1),[_,S]=v.useState(""),[C,A]=v.useState("teacher"),{toast:U}=Gt(),k=vP();v.useEffect(()=>{e.participants&&e.participants.length>0?(console.log("🔍 MasterClassDetails: Загружаем участников:",e.participants),d(e.participants.map(B=>({...B,hasReceived:B.hasReceived||!1})))):(console.log("⚠️ MasterClassDetails: Нет участников в masterClass"),d([]))},[e.participants]);const R=()=>{switch(u){case"paid":return c.filter(B=>B.isPaid);case"unpaid":return c.filter(B=>!B.isPaid);default:return c}},te=()=>{const B=R(),be=B.reduce((P,ce)=>P+ce.totalAmount,0),pe=B.filter(P=>P.isPaid).reduce((P,ce)=>P+ce.totalAmount,0),Y=be-pe;return{totalParticipants:B.length,totalAmount:be,paidAmount:pe,unpaidAmount:Y}},Z=()=>{const be=(e.participants||[]).filter(Y=>!Y.isPaid||Y.isPaid),pe=be.map(Y=>`• ${Y.childName}`).join(`
`);return`Учащиеся вашего класса №${e.classGroup} в количестве ${be.length} человек участвуют в мастер-классе "${t.name}" ${e.date} в ${e.time}.

Участники:
${pe}

С уважением,
Администрация`},se=()=>{const B=e.participants||[],be=B.filter(Se=>Se.isPaid),pe=B.filter(Se=>!Se.isPaid),Y=be.map(Se=>`• ${Se.childName}`).join(`
`),P=pe.map(Se=>`• ${Se.childName}`).join(`
`);let ce=`Мастер-класс "${t.name}" ${e.date} в ${e.time}

Класс: №${e.classGroup}
Общее количество участников: ${B.length}

`;return be.length>0&&(ce+=`✅ ОПЛАЧЕННЫЕ (${be.length}):
${Y}

`),pe.length>0&&(ce+=`❌ НЕ ОПЛАЧЕННЫЕ (${pe.length}):
${P}

`),ce+=`С уважением,
Администрация`,ce},ae=()=>{const B=Z();S(B),A("teacher"),b(!0)},ne=()=>{const B=se();S(B),A("admin"),b(!0)},K=B=>{const pe=`https://wa.me/?text=${encodeURIComponent(B)}`;window.open(pe,"_blank"),b(!1),U({title:"Сообщение отправлено",description:`Откройте WhatsApp и отправьте сообщение ${C==="teacher"?"учителю":"администратору"}`})},re=()=>{S(C==="teacher"?Z():se())},xe=()=>{b(!1),S("")};v.useEffect(()=>{J(),D(),X(),console.log("MasterClass data:",e),console.log("Participants:",c)},[e.id]);const J=async()=>{i(!0);try{const B={...e.statistics,stylesStats:{},optionsStats:{}};n(B)}catch(B){console.error("Error loading stats:",B)}finally{i(!1)}},D=async()=>{try{l({teacher:"Учитель не указан",teacherPhone:"Телефон не указан"})}catch(B){console.error("Error loading school data:",B)}},X=async()=>{N(!0);try{w([{id:"1",name:"Исполнитель 1"},{id:"2",name:"Исполнитель 2"}])}catch(B){console.error("Error loading executors:",B)}finally{N(!1)}},V=async()=>{try{console.log("Saving changes:",g),Object.assign(e,{date:g.date,time:g.time,executors:g.executors.map(B=>{var be;return{id:B,name:((be=x.find(pe=>pe.id===B))==null?void 0:be.name)||B}}),notes:g.notes}),p(!1),U({title:"Успешно",description:"Изменения сохранены"})}catch(B){console.error("Error saving changes:",B),U({title:"Ошибка",description:"Не удалось сохранить изменения",variant:"destructive"})}},E=()=>{h({date:e.date,time:e.time,executors:e.executors,notes:e.notes||""}),p(!1)},I=B=>{try{const be=new Date(B);return isNaN(be.getTime())?B:be.toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})}catch{return B}},G=B=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(B),me=async(B,be)=>{try{await k.mutateAsync({masterClassId:e.id,participantId:B,isPaid:be}),d(pe=>pe.map(Y=>Y.id===B?{...Y,isPaid:be}:Y)),U({title:"Статус оплаты обновлен",description:`Статус оплаты участника изменен на ${be?"оплачено":"не оплачено"}`})}catch(pe){console.error("Error updating payment status:",pe),U({title:"Ошибка",description:"Не удалось обновить статус оплаты",variant:"destructive"})}},he=async(B,be)=>{try{d(pe=>pe.map(Y=>Y.id===B?{...Y,hasReceived:be}:Y)),U({title:"Статус получения обновлен",description:`Статус получения услуги изменен на ${be?"получено":"не получено"}`})}catch(pe){console.error("Error updating service received status:",pe),U({title:"Ошибка",description:"Не удалось обновить статус получения услуги",variant:"destructive"})}};return s.jsxs("div",{className:"space-y-6 p-6 max-h-screen overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx("h2",{className:"text-3xl font-bold text-primary",children:t.name})}),s.jsx(rt,{variant:"outline",className:"text-xl px-6 py-3",children:e.classGroup})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsxs(qe,{className:"flex items-center gap-3 text-2xl",children:[s.jsx(El,{className:"h-6 w-6"}),"Информация о мастер-классе",s.jsx(q,{variant:"outline",size:"sm",onClick:()=>p(!f),className:"ml-auto",children:f?"Отменить":"Редактировать"})]})}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[s.jsx(Cn,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Дата"}),f?s.jsx("input",{type:"date",value:g.date,onChange:B=>h(be=>({...be,date:B.target.value})),className:"text-sm text-blue-600 bg-white border border-blue-200 rounded px-2 py-1 w-full"}):s.jsx("p",{className:"text-sm text-blue-600",children:I(e.date)})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-green-50 rounded-lg",children:[s.jsx(Xr,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Время"}),f?s.jsx("input",{type:"time",value:g.time,onChange:B=>h(be=>({...be,time:B.target.value})),className:"text-sm text-green-600 bg-white border border-green-200 rounded px-2 py-1 w-full"}):s.jsx("p",{className:"text-sm text-green-600",children:e.time})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-purple-50 rounded-lg",children:[s.jsx(Tn,{className:"w-6 h-6 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Место проведения"}),s.jsx("p",{className:"text-sm text-purple-600",children:e.schoolName})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-orange-50 rounded-lg",children:[s.jsx(or,{className:"w-6 h-6 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Класс"}),s.jsx("p",{className:"text-sm text-orange-600",children:e.classGroup})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(Te,{className:"text-lg font-semibold",children:"Исполнители:"}),f?s.jsx("div",{className:"space-y-3",children:y?s.jsx("p",{className:"text-sm text-muted-foreground",children:"Загрузка исполнителей..."}):s.jsx("div",{className:"space-y-2",children:x.map(B=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:g.executors.includes(B.id),onChange:be=>{be.target.checked?h(pe=>({...pe,executors:[...pe.executors,B.id]})):h(pe=>({...pe,executors:pe.executors.filter(Y=>Y!==B.id)}))},className:"rounded"}),s.jsx("span",{className:"text-sm",children:B.name})]},B.id))})}):s.jsx("div",{className:"space-y-2",children:e.executors.map(B=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Oo,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:B})]},B))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Te,{className:"text-lg font-semibold",children:"Контактное лицо:"}),s.jsxs("div",{className:"space-y-2",children:[o!=null&&o.teacher?s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-muted rounded-md",children:[s.jsx(Oo,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm",children:o.teacher})]}):s.jsx("p",{className:"text-muted-foreground text-sm",children:"Не указано"}),(o==null?void 0:o.teacherPhone)&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-muted rounded-md",children:[s.jsx(uu,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm",children:o.teacherPhone})]})]})]})]}),f&&s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx(q,{onClick:V,className:"bg-green-600 hover:bg-green-700",children:"Сохранить изменения"}),s.jsx(q,{onClick:E,variant:"outline",children:"Отмена"})]}),s.jsx("div",{className:"mt-6",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx(Te,{className:"text-lg font-semibold",children:"Примечания:"}),f?s.jsx("textarea",{value:g.notes,onChange:B=>h(be=>({...be,notes:B.target.value})),placeholder:"Введите примечания к мастер-классу...",className:"text-sm text-blue-600 bg-white border border-blue-200 rounded px-2 py-1 w-full h-24"}):s.jsx("div",{className:"min-h-[6rem]",children:e.notes?s.jsx("p",{className:"text-muted-foreground bg-muted p-4 rounded-md text-base",children:e.notes}):s.jsx("p",{className:"text-muted-foreground bg-muted/30 p-4 rounded-md text-base italic",children:"Примечания не добавлены"})})]})})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsxs(qe,{className:"flex items-center gap-3 text-2xl",children:[s.jsx(wD,{className:"h-6 w-6 text-green-600"}),"Статистика"]})}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:e.statistics.totalParticipants}),s.jsx("div",{className:"text-base text-blue-600",children:"Участников"})]}),s.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:G(e.statistics.totalAmount)}),s.jsx("div",{className:"text-base text-green-600",children:"Общая сумма"})]}),s.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:G(e.statistics.paidAmount)}),s.jsx("div",{className:"text-base text-purple-600",children:"Оплатили"})]}),s.jsxs("div",{className:"text-center p-6 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-orange-600",children:G(e.statistics.unpaidAmount)}),s.jsx("div",{className:"text-base text-orange-600",children:"Не оплатили"})]})]}),s.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("h4",{className:"text-lg font-semibold text-green-800 mb-3 flex items-center gap-2",children:[s.jsx(Is,{className:"h-5 w-5"}),"Отправить информацию через WhatsApp"]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(q,{onClick:ae,className:"bg-green-600 hover:bg-green-700 text-white",size:"lg",children:[s.jsx(Is,{className:"w-4 h-4 mr-2"}),"Учителю класса"]}),s.jsxs(q,{onClick:ne,className:"bg-blue-600 hover:bg-blue-700 text-white",size:"lg",children:[s.jsx(Is,{className:"w-4 h-4 mr-2"}),"Администратору"]})]}),s.jsxs("div",{className:"mt-3 text-sm text-green-700",children:[s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Учителю:"})," список всех участников класса"]}),s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Администратору:"})," разделение по статусу оплаты"]})]})]}),s.jsx(gx,{className:"my-6"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-lg font-semibold",children:"Статистика по вариантам ручек:"}),s.jsx("div",{className:"space-y-2",children:Object.entries(e.statistics.stylesStats).map(([B,be])=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted rounded",children:[s.jsx("span",{className:"text-sm",children:B}),s.jsx(rt,{variant:"secondary",children:be})]},B))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-lg font-semibold",children:"Статистика по дополнительным услугам:"}),s.jsx("div",{className:"space-y-2",children:Object.entries(e.statistics.optionsStats).map(([B,be])=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-muted rounded",children:[s.jsx("span",{className:"text-sm",children:B}),s.jsx(rt,{variant:"secondary",children:be})]},B))})]})]})]})]}),s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-3 text-2xl",children:[s.jsx(or,{className:"h-6 w-6"}),"Участники",u!=="all"&&s.jsx(rt,{variant:"secondary",className:"text-sm ml-2",children:u==="paid"?"Оплаченные":"Ожидающие оплаты"}),s.jsxs(rt,{variant:"outline",className:"text-sm ml-auto",children:[R().length," из ",c.length]})]}),s.jsxs(ft,{children:[u==="all"?"Список всех участников мастер-класса":u==="paid"?"Список участников с подтвержденной оплатой":"Список участников, ожидающих оплаты",u!=="all"&&s.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["• Показано ",R().length," из ",c.length," участников"]})]})]}),s.jsxs(Ae,{children:[s.jsx("div",{className:"mb-4 p-3 bg-muted rounded",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Количество участников: ",R().length," из ",c.length]}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("span",{className:"text-green-600",children:["Оплачено: ",te().paidAmount.toLocaleString("ru-RU")," ₽"]}),s.jsxs("span",{className:"text-red-600",children:["Ожидает: ",te().unpaidAmount.toLocaleString("ru-RU")," ₽"]}),s.jsxs("span",{className:"text-blue-600",children:["Всего: ",te().totalAmount.toLocaleString("ru-RU")," ₽"]})]})]})}),s.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-muted/50 rounded-lg border",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(n0,{className:"w-4 h-4 text-muted-foreground"}),s.jsx(Te,{className:"text-sm font-medium",children:"Фильтр по статусу оплаты:"}),s.jsxs(kt,{onValueChange:B=>m(B),value:u,children:[s.jsx(Et,{className:"w-[180px]",children:s.jsx(At,{placeholder:"Выберите статус"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все участники"}),s.jsx(Ze,{value:"paid",children:"Оплаченные"}),s.jsx(Ze,{value:"unpaid",children:"Ожидающие оплаты"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[u!=="all"&&s.jsxs(s.Fragment,{children:[s.jsx(q,{variant:"outline",size:"sm",onClick:()=>m("all"),className:"text-xs",children:"Сбросить фильтр"}),s.jsx(gx,{orientation:"vertical",className:"h-4"})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[u==="all"&&"Показаны все участники",u==="paid"&&`Показаны ${R().length} оплаченных участников`,u==="unpaid"&&`Показаны ${R().length} участников, ожидающих оплаты`]})]})]}),u!=="all"&&R().length>0&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["Быстрые действия для ",R().length," отфильтрованных участников:"]})}),s.jsxs("div",{className:"flex space-x-2",children:[u==="unpaid"&&s.jsxs(q,{size:"sm",variant:"outline",className:"text-green-600 border-green-200 hover:bg-green-50",onClick:()=>{alert(`Подтвердить оплату для ${R().length} участников`)},children:[s.jsx(Wy,{className:"w-3 h-3 mr-1"}),"Подтвердить оплату всем"]}),u==="paid"&&s.jsxs(q,{size:"sm",variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:()=>{alert(`Отменить оплату для ${R().length} участников`)},children:[s.jsx(Uy,{className:"w-3 h-3 mr-1"}),"Отменить оплату всем"]})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Gd,{children:[s.jsx(qd,{children:s.jsxs(oa,{children:[s.jsx(Pt,{className:"font-semibold",children:"Участник"}),t==null?void 0:t.styles.map(B=>s.jsx(Pt,{className:"font-semibold text-center min-w-[100px]",children:B.name},B.id)),t==null?void 0:t.options.map(B=>s.jsx(Pt,{className:"font-semibold text-center min-w-[100px]",children:B.name},B.id)),s.jsx(Pt,{className:"font-semibold",children:"Сумма"}),s.jsx(Pt,{className:"font-semibold",children:"Статус оплаты"}),s.jsx(Pt,{className:"font-semibold",children:"Получил услугу"}),s.jsx(Pt,{className:"font-semibold",children:"Действия"})]})}),s.jsx(Xd,{children:R().length>0?R().map(B=>{const be=!B.isPaid,pe=B.hasReceived||!1;console.log(`🔍 MasterClassDetails: Данные участника ${B.childName}:`,{id:B.id,childName:B.childName,parentName:B.parentName,selectedStyles:B.selectedStyles,selectedOptions:B.selectedOptions,totalAmount:B.totalAmount,isPaid:B.isPaid,hasReceived:B.hasReceived});const Y=ce=>{var ue;const Se=((ue=B.selectedStyles)==null?void 0:ue.some(Pe=>typeof Pe=="string"?Pe===ce:Pe.id===ce))||!1;return B.selectedStyles&&B.selectedStyles.length>0&&console.log(`🔍 isStyleSelected для ${B.childName}, стиль ${ce}:`,{selectedStyles:B.selectedStyles,result:Se,styleId:ce}),Se},P=ce=>{var ue;const Se=((ue=B.selectedOptions)==null?void 0:ue.some(Pe=>typeof Pe=="string"?Pe===ce:Pe.id===ce))||!1;return B.selectedOptions&&B.selectedOptions.length>0&&console.log(`🔍 isOptionSelected для ${B.childName}, опция ${ce}:`,{selectedOptions:B.selectedOptions,result:Se,optionId:ce}),Se};return s.jsxs(oa,{className:`
                                                    ${be?"bg-red-100 border-l-4 border-l-red-500":""}
                                                    ${pe?"bg-green-100 border-l-4 border-l-green-500":""}
                                                `,children:[s.jsx(Ct,{className:"font-medium",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:B.childName}),B.childName!==B.parentName&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Родитель: ",B.parentName]})]})}),t==null?void 0:t.styles.map(ce=>s.jsx(Ct,{className:"text-center",children:Y(ce.id)?s.jsx(zr,{className:"h-5 w-5 text-green-600 mx-auto"}):s.jsx("div",{className:"h-5 w-5 mx-auto border-2 border-gray-300 rounded"})},ce.id)),t==null?void 0:t.options.map(ce=>s.jsx(Ct,{className:"text-center",children:P(ce.id)?s.jsx(zr,{className:"h-5 w-5 text-blue-600 mx-auto"}):s.jsx("div",{className:"h-5 w-5 mx-auto border-2 border-gray-300 rounded"})},ce.id)),s.jsx(Ct,{className:"font-semibold text-green-600",children:G(B.totalAmount)}),s.jsx(Ct,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xx,{checked:B.isPaid,onCheckedChange:ce=>me(B.id,ce)}),s.jsx(rt,{variant:B.isPaid?"default":"destructive",children:B.isPaid?s.jsxs(s.Fragment,{children:[s.jsx(Wy,{className:"w-3 h-3 mr-1"}),"Оплачено"]}):s.jsxs(s.Fragment,{children:[s.jsx(Uy,{className:"w-3 h-3 mr-1"}),"Ожидает"]})})]})}),s.jsx(Ct,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xx,{checked:pe,onCheckedChange:ce=>he(B.id,ce)}),s.jsx(rt,{variant:pe?"default":"secondary",children:pe?s.jsxs(s.Fragment,{children:[s.jsx(zr,{className:"w-3 h-3 mr-1"}),"Получил"]}):s.jsxs(s.Fragment,{children:[s.jsx(ua,{className:"w-3 h-3 mr-1"}),"Не получил"]})})]})}),s.jsx(Ct,{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(q,{size:"sm",variant:"outline",onClick:()=>me(B.id,!B.isPaid),className:B.isPaid?"text-green-600 border-green-200":"text-red-600 border-red-200",children:B.isPaid?"Отменить оплату":"Подтвердить оплату"}),s.jsx(q,{size:"sm",variant:"outline",onClick:()=>he(B.id,!pe),className:pe?"text-green-600 border-green-200":"text-blue-600 border-blue-200",children:pe?"Отменить получение":"Отметить получение"})]})})]},B.id)}):s.jsx(oa,{children:s.jsx(Ct,{colSpan:7,className:"text-center py-8",children:s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx(or,{className:"w-12 h-12 text-muted-foreground opacity-50"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Участники пока не зарегистрированы"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Таблица будет заполнена при появлении участников"})]})]})})})})]})})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsx(qe,{children:"Действия"})}),s.jsxs(Ae,{className:"space-y-3",children:[s.jsx(q,{variant:"outline",className:"w-full",disabled:a,children:a?"Обновляем...":"Обновить статистику"}),s.jsx("div",{className:"space-y-2",children:s.jsxs(q,{variant:"outline",className:"w-full",onClick:()=>{try{t2(e,t,c),U({title:"Успешно!",description:"Данные экспортированы в Excel файл",variant:"default"})}catch{U({title:"Ошибка!",description:"Не удалось экспортировать данные в Excel",variant:"destructive"})}},children:[s.jsx(ex,{className:"w-4 h-4 mr-2"}),"Экспорт в Excel"]})}),u!=="all"&&s.jsx("div",{className:"space-y-2",children:s.jsxs(q,{variant:"outline",className:"w-full",onClick:()=>{try{const B=R();t2(e,t,B),U({title:"Успешно!",description:`Экспорт ${u==="paid"?"оплаченных":"ожидающих оплаты"} участников в Excel`,variant:"default"})}catch{U({title:"Ошибка!",description:"Не удалось экспортировать отфильтрованные данные",variant:"destructive"})}},children:[s.jsx(ex,{className:"w-4 h-4 mr-2"}),"Excel (",R().length," участников)"]})}),s.jsx("div",{className:"text-xs text-muted-foreground text-center pt-2 border-t",children:u==="all"?"Показаны все участники мастер-класса":`Показаны ${u==="paid"?"оплаченные":"ожидающие оплаты"} участники (${R().length} из ${c.length})`})]})]}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Предварительный просмотр сообщения"}),s.jsx(q,{variant:"ghost",size:"sm",onClick:xe,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),s.jsx("div",{className:"mb-4",children:s.jsx(Te,{className:"text-base font-medium",children:C==="teacher"?"Сообщение для учителя:":"Сообщение для администратора:"})}),s.jsx("div",{className:"mb-4",children:s.jsx("textarea",{value:_,onChange:B=>S(B.target.value),className:"w-full h-80 p-4 border border-gray-300 rounded-md text-sm font-mono resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent leading-relaxed",placeholder:"Редактируйте текст сообщения...",style:{whiteSpace:"pre-wrap"}})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Символов: ",_.length]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs(q,{variant:"outline",onClick:re,className:"px-4",children:[s.jsx(Fg,{className:"w-4 h-4 mr-2"}),"Сбросить"]}),s.jsx(q,{variant:"outline",onClick:xe,className:"px-6",children:"Отмена"}),s.jsxs(q,{onClick:()=>K(_),className:"bg-green-600 hover:bg-green-700 px-6",children:[s.jsx(Is,{className:"w-4 h-4 mr-2"}),"Отправить в WhatsApp"]})]})]})]})})]})};function Vz(){console.log("🚀 WorkshopRequestsTab: Инициализация компонента...");const{getAllRequests:e,updateRequestStatus:t,deleteRequest:r,getRequestsStats:n,loading:a,error:i}=xE(),{getSchoolsWithAddresses:o}=Ba(),{toast:l}=Gt(),{isConnected:c,sendMessage:d}=sv("admin",!0,E=>{console.log("🔌 WorkshopRequestsTab: Получено WebSocket сообщение:",E),E.type==="workshop_request_status_change"||E.type==="workshop_request_update"?(console.log("📋 WorkshopRequestsTab: Обновление заявки через WebSocket, перезагружаем данные..."),ne()):E.type==="workshop_request_created"||E.type==="workshop_request_deleted"?(console.log("📋 WorkshopRequestsTab: Изменение заявки через WebSocket, перезагружаем данные..."),ne()):console.log("🔌 WorkshopRequestsTab: Неизвестный тип сообщения:",E.type)}),[u,m]=v.useState([]),[f,p]=v.useState([]),[g,h]=v.useState({total:0,pending:0,approved:0,rejected:0}),[x,w]=v.useState(null),[y,N]=v.useState(!1),[j,b]=v.useState({status:"pending",admin_notes:""}),[_,S]=v.useState(null),[C,A]=v.useState({city:"",school:"",classGroup:"",status:""}),U=[...new Set(u.map(E=>E.school_name))].sort(),k=[...new Set(u.map(E=>E.class_group))].sort(),R=E=>{const I=f.find(G=>G.name===E);return I&&I.address?I.address.split(",")[0].trim():"Неизвестно"},te=[...new Set(f.map(E=>E.address.split(",")[0].trim()).filter(E=>E&&E!==""))].sort();console.log("🔍 WorkshopRequestsTab: Отладка фильтрации:",{schoolsWithAddresses:f.length,uniqueCities:te,filters:C,requestsCount:u.length});const Z=E=>{if(!E)return[];const I=f.find(G=>G.name===E);return I&&I.classes&&Array.isArray(I.classes)?I.classes.sort():u.filter(G=>G.school_name===E).map(G=>G.class_group).filter((G,me,he)=>he.indexOf(G)===me).sort()},se=E=>E?f.filter(I=>I.address&&I.address.split(",")[0].trim()===E).map(I=>I.name).sort():U,ae=u.filter(E=>!(C.city&&R(E.school_name)!==C.city||C.school&&E.school_name!==C.school||C.classGroup&&E.class_group!==C.classGroup||C.status&&E.status!==C.status));v.useEffect(()=>{C.city&&!te.includes(C.city)&&A(E=>({...E,city:"",school:"",classGroup:""})),C.school&&!U.includes(C.school)&&A(E=>({...E,school:"",classGroup:""})),C.classGroup&&C.school&&(Z(C.school).includes(C.classGroup)||A(I=>({...I,classGroup:""})))},[u,C.city,C.school,C.classGroup,te,U]),v.useEffect(()=>{console.log("🚀 WorkshopRequestsTab: Компонент смонтирован, WebSocket состояние:",c),console.log("🚀 WorkshopRequestsTab: Проверяем авторизацию пользователя...");const E=localStorage.getItem("authToken");if(!E){console.error("❌ WorkshopRequestsTab: Токен авторизации отсутствует"),S("Токен авторизации отсутствует. Войдите в систему заново.");return}console.log("✅ WorkshopRequestsTab: Токен авторизации найден, загружаем данные..."),console.log("🔍 WorkshopRequestsTab: Длина токена:",E.length),console.log("🔍 WorkshopRequestsTab: Начало токена:",E.substring(0,20)+"..."),ne()},[]),v.useEffect(()=>{console.log("🔌 WorkshopRequestsTab: WebSocket состояние изменилось:",{isConnected:c,timestamp:new Date().toISOString()}),c&&console.log("🔌 WorkshopRequestsTab: WebSocket подключен, подписка активна")},[c]);const ne=async()=>{try{console.log("🔄 WorkshopRequestsTab.loadData: Начинаем загрузку данных..."),console.log("🔍 WorkshopRequestsTab.loadData: Токен авторизации:",!!localStorage.getItem("authToken"));const E=await o();console.log("🏫 WorkshopRequestsTab.loadData: Результат загрузки школ:",E),E!=null&&E.success&&E.data?(console.log("✅ WorkshopRequestsTab.loadData: Школы с адресами загружены, количество:",E.data.length),console.log("🏫 WorkshopRequestsTab.loadData: Первая школа:",E.data[0]),console.log("🏫 WorkshopRequestsTab.loadData: Все школы:",E.data),p(E.data)):(console.warn("⚠️ WorkshopRequestsTab.loadData: Школы с адресами не загружены"),console.warn("⚠️ WorkshopRequestsTab.loadData: Результат:",E),p([]));const I=await e();console.log("📋 WorkshopRequestsTab.loadData: Результат загрузки заявок:",I),console.log("📋 WorkshopRequestsTab.loadData: Тип результата:",typeof I),console.log("📋 WorkshopRequestsTab.loadData: Структура результата:",Object.keys(I||{})),I!=null&&I.success&&I.data?(console.log("✅ WorkshopRequestsTab.loadData: Заявки загружены, количество:",I.data.length),console.log("📋 WorkshopRequestsTab.loadData: Первая заявка:",I.data[0]),console.log("📋 WorkshopRequestsTab.loadData: Все заявки:",I.data),m(I.data)):Array.isArray(I)?(console.log("✅ WorkshopRequestsTab.loadData: Заявки загружены (массив), количество:",I.length),console.log("📋 WorkshopRequestsTab.loadData: Первая заявка:",I[0]),console.log("📋 WorkshopRequestsTab.loadData: Все заявки:",I),m(I)):(console.warn("⚠️ WorkshopRequestsTab.loadData: Заявки не загружены:",I),console.warn("⚠️ WorkshopRequestsTab.loadData: Устанавливаем пустой массив"),m([]));const G=await n();console.log("📊 WorkshopRequestsTab.loadData: Результат загрузки статистики:",G),console.log("📊 WorkshopRequestsTab.loadData: Тип результата:",typeof G),G!=null&&G.success&&G.data?(console.log("✅ WorkshopRequestsTab.loadData: Статистика загружена:",G.data),h(G.data)):G&&typeof G=="object"&&"total"in G&&"pending"in G&&"approved"in G&&"rejected"in G?(console.log("✅ WorkshopRequestsTab.loadData: Статистика загружена (объект):",G),h(G)):(console.warn("⚠️ WorkshopRequestsTab.loadData: Статистика не загружена:",G),console.warn("⚠️ WorkshopRequestsTab.loadData: Устанавливаем нулевую статистику"),h({total:0,pending:0,approved:0,rejected:0})),console.log("✅ WorkshopRequestsTab.loadData: Загрузка завершена"),console.log("📊 WorkshopRequestsTab.loadData: Финальное состояние:",{requests:u.length,schoolsWithAddresses:f.length,stats:g,filteredRequests:ae.length}),_&&S(null)}catch(E){console.error("❌ WorkshopRequestsTab.loadData: Ошибка при загрузке данных:",E),console.error("❌ WorkshopRequestsTab.loadData: Детали ошибки:",{name:E.name,message:E.message,stack:E.stack});const I=E instanceof Error?E.message:"Неизвестная ошибка при загрузке данных";S(I)}},K=E=>{w(E),b({status:E.status,admin_notes:E.admin_notes||""}),N(!0)},re=async()=>{if(x){console.log("🔍 WorkshopRequestsTab.handleSaveStatus: Начинаем обновление статуса"),console.log("📋 WorkshopRequestsTab.handleSaveStatus: ID заявки:",x.id),console.log("📋 WorkshopRequestsTab.handleSaveStatus: Данные для обновления:",j);try{const E=await t(x.id,j);if(console.log("📋 WorkshopRequestsTab.handleSaveStatus: Результат обновления:",E),E&&(E.success||E.id||E.data&&E.data.id)){if(console.log("✅ WorkshopRequestsTab.handleSaveStatus: Статус успешно обновлен:",E),l({title:"Статус обновлен! ✅",description:"Заявка успешно обновлена"}),m(I=>I.map(G=>G.id===x.id?{...G,...j,updated_at:new Date().toISOString()}:G)),c){console.log("🔌 WorkshopRequestsTab: Отправляем WebSocket уведомление об обновлении статуса");const I={type:"workshop_request_status_change",data:{requestId:x.id,newStatus:j.status,adminNotes:j.admin_notes,updatedAt:new Date().toISOString()},timestamp:Date.now()};console.log("🔌 WorkshopRequestsTab: WebSocket сообщение:",I);const G=d(I);console.log("🔌 WorkshopRequestsTab: WebSocket сообщение отправлено:",G)}else console.warn("⚠️ WorkshopRequestsTab: WebSocket не подключен, уведомление не отправлено");await xe(),N(!1),w(null)}else console.warn("⚠️ WorkshopRequestsTab.handleSaveStatus: Неожиданный формат ответа:",E),l({title:"Ошибка",description:(E==null?void 0:E.error)||"Не удалось обновить статус",variant:"destructive"})}catch(E){console.error("Ошибка при обновлении статуса:",E),l({title:"Ошибка",description:"Произошла ошибка при обновлении статуса",variant:"destructive"})}}},xe=async()=>{try{const E=await n();E!=null&&E.success&&E.data?h(E.data):E&&typeof E=="object"&&"total"in E&&"pending"in E&&"approved"in E&&"rejected"in E&&h(E)}catch(E){console.error("Ошибка при обновлении статистики:",E)}},J=async E=>{if(confirm("Вы уверены, что хотите удалить эту заявку?"))try{const I=await r(E);if(I!=null&&I.success){l({title:"Заявка удалена! 🗑️",description:"Заявка успешно удалена из системы"}),m(me=>me.filter(he=>he.id!==E));const G=await n();G!=null&&G.success&&G.data&&h(G.data)}else l({title:"Ошибка",description:(I==null?void 0:I.error)||"Не удалось удалить заявку",variant:"destructive"})}catch(I){console.error("Ошибка при удалении заявки:",I),l({title:"Ошибка",description:"Произошла ошибка при удалении заявки",variant:"destructive"})}},D=E=>{switch(E){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},X=E=>{switch(E){case"pending":return s.jsx(Xr,{className:"w-4 h-4"});case"approved":return s.jsx(zr,{className:"w-4 h-4"});case"rejected":return s.jsx(Qc,{className:"w-4 h-4"});default:return s.jsx(ua,{className:"w-4 h-4"})}},V=E=>{switch(E){case"pending":return"Ожидает рассмотрения";case"approved":return"Одобрено";case"rejected":return"Отклонено";default:return"Неизвестно"}};return console.log("🔄 WorkshopRequestsTab: Рендер компонента",{requestsCount:u.length,filteredCount:ae.length,stats:g,loading:a,error:i,componentError:_,wsConnected:c}),console.log("🔍 WorkshopRequestsTab: Детали состояния:",{requests:u,filteredRequests:ae,filters:C,uniqueSchools:U,uniqueClassGroups:k}),_?s.jsx("div",{className:"space-y-6",children:s.jsx(Ce,{className:"bg-red-50/80 backdrop-blur-sm border-red-200",children:s.jsxs(Ae,{className:"p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:"❌"}),s.jsx("div",{className:"text-lg font-semibold text-red-600 mb-2",children:"Ошибка загрузки заявок"}),s.jsx("p",{className:"text-red-500 mb-4",children:_}),s.jsx(q,{onClick:ne,className:"bg-red-600 hover:bg-red-700 text-white",children:"Попробовать снова"})]})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Ce,{className:"bg-blue-50/80 backdrop-blur-sm border-blue-200",children:s.jsxs(Ae,{className:"p-4 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx(El,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.total})]}),s.jsx("div",{className:"text-sm text-blue-600",children:"Всего заявок"})]})}),s.jsx(Ce,{className:"bg-yellow-50/80 backdrop-blur-sm border-yellow-200",children:s.jsxs(Ae,{className:"p-4 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx(Xr,{className:"w-6 h-6 text-yellow-600 mr-2"}),s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:g.pending})]}),s.jsx("div",{className:"text-sm text-yellow-600",children:"Ожидают рассмотрения"})]})}),s.jsx(Ce,{className:"bg-green-50/80 backdrop-blur-sm border-green-200",children:s.jsxs(Ae,{className:"p-4 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx(zr,{className:"w-6 h-6 text-green-600 mr-2"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:g.approved})]}),s.jsx("div",{className:"text-sm text-green-600",children:"Одобрено"})]})}),s.jsx(Ce,{className:"bg-red-50/80 backdrop-blur-sm border-red-200",children:s.jsxs(Ae,{className:"p-4 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx(Qc,{className:"w-6 h-6 text-red-600 mr-2"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:g.rejected})]}),s.jsx("div",{className:"text-sm text-red-600",children:"Отклонено"})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Заявки на проведение мастер-классов"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${c?"bg-green-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm text-gray-600",children:c?"Автообновление":"Ручное обновление"})]})]}),s.jsxs(q,{onClick:ne,disabled:a,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(El,{className:"w-4 h-4"}),"Обновить"]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-gray-50/80 rounded-lg border",children:[s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Город"}),s.jsxs(kt,{value:C.city||"all",onValueChange:E=>A(I=>({...I,city:E==="all"?"":E})),children:[s.jsx(Et,{className:"w-full",children:s.jsx(At,{placeholder:"Выберите город"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все города"}),te.map(E=>s.jsx(Ze,{value:E,children:E},E))]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Школа"}),s.jsxs(kt,{value:C.school||"all",onValueChange:E=>A(I=>({...I,school:E==="all"?"":E})),children:[s.jsx(Et,{className:"w-full",children:s.jsx(At,{placeholder:"Выберите школу"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все школы"}),C.city?se(C.city).map(E=>s.jsx(Ze,{value:E,children:E},E)):null]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Класс"}),s.jsxs(kt,{value:C.classGroup||"all",onValueChange:E=>A(I=>({...I,classGroup:E==="all"?"":E})),children:[s.jsx(Et,{className:"w-full",children:s.jsx(At,{placeholder:"Выберите класс"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все классы"}),C.school?Z(C.school).map(E=>s.jsx(Ze,{value:E,children:E},E)):null]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Статус"}),s.jsxs(kt,{value:C.status||"all",onValueChange:E=>A(I=>({...I,status:E==="all"?"":E})),children:[s.jsx(Et,{className:"w-full",children:s.jsx(At,{placeholder:"Выберите статус"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все статусы"}),s.jsx(Ze,{value:"pending",children:"Ожидает рассмотрения"}),s.jsx(Ze,{value:"approved",children:"Одобрено"}),s.jsx(Ze,{value:"rejected",children:"Отклонено"})]})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs(q,{variant:"outline",onClick:()=>A({city:"",school:"",classGroup:"",status:""}),className:"flex items-center gap-2",children:[s.jsx(Qc,{className:"w-4 h-4"}),"Сбросить"]})})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Показано ",ae.length," из ",u.length," заявок",C.city||C.school||C.classGroup?s.jsx("span",{className:"ml-2 text-blue-600",children:"(применены фильтры)"}):null]}),u.length===0?s.jsx(Ce,{className:"bg-white/80 backdrop-blur-sm",children:s.jsxs(Ae,{className:"p-8 text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:"📋"}),s.jsx("div",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Заявок пока нет"}),s.jsx("p",{className:"text-gray-500",children:"Когда родители будут подавать заявки, они появятся здесь"})]})}):s.jsx("div",{className:"space-y-4",children:ae.map(E=>s.jsxs(Ce,{className:"hover:shadow-lg transition-all duration-300 bg-white/80 backdrop-blur-sm",children:[s.jsxs(Je,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tn,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:E.school_name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tc,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-medium",children:E.class_group})]})]}),s.jsxs(rt,{className:`${D(E.status)} border flex items-center gap-1`,children:[X(E.status),V(E.status)]})]}),s.jsxs(ft,{className:"text-gray-600 flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oo,{className:"w-4 h-4"}),s.jsxs("span",{children:[E.parent_name,E.parent_surname&&` ${E.parent_surname}`]})]}),E.parent_phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uu,{className:"w-4 h-4"}),s.jsx("span",{children:E.parent_phone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(s0,{className:"w-4 h-4"}),s.jsx("span",{children:E.parent_email})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),s.jsx("span",{children:new Date(E.desired_date).toLocaleDateString("ru-RU")})]})]})]}),s.jsxs(Ae,{className:"space-y-3",children:[E.notes&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Примечания:"}),s.jsx("div",{className:"text-gray-600 mt-1",children:E.notes})]}),E.admin_notes&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Заметки администратора:"}),s.jsx("div",{className:"text-gray-600 mt-1",children:E.admin_notes})]}),s.jsxs("div",{className:"text-xs text-gray-500 border-t pt-2",children:["Создано: ",new Date(E.created_at).toLocaleString("ru-RU"),E.updated_at!==E.created_at&&` • Обновлено: ${new Date(E.updated_at).toLocaleString("ru-RU")}`]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(q,{variant:"outline",size:"sm",onClick:()=>K(E),className:"flex items-center gap-1",children:[s.jsx(El,{className:"w-4 h-4"}),"Статус"]}),s.jsxs(q,{variant:"outline",size:"sm",onClick:()=>J(E.id),className:"flex items-center gap-1 text-red-600 hover:text-red-700",children:[s.jsx(Ao,{className:"w-4 h-4"}),"Удалить"]})]})]})]},E.id))})]}),s.jsx(gr,{open:y,onOpenChange:N,children:s.jsxs(dr,{className:"sm:max-w-[500px]",children:[s.jsxs(jr,{children:[s.jsx(ur,{className:"text-xl font-bold text-gray-900",children:"Изменить статус заявки"}),s.jsx(br,{children:"Обновите статус заявки и добавьте заметки"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Родитель:"}),s.jsxs("div",{className:"text-gray-600",children:[x==null?void 0:x.parent_name,(x==null?void 0:x.parent_surname)&&` ${x.parent_surname}`]})]}),(x==null?void 0:x.parent_phone)&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Телефон:"}),s.jsx("div",{className:"text-gray-600",children:x.parent_phone})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Email:"}),s.jsx("div",{className:"text-gray-600",children:x==null?void 0:x.parent_email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Школа:"}),s.jsx("div",{className:"text-gray-600",children:x==null?void 0:x.school_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Класс:"}),s.jsx("div",{className:"text-gray-600",children:x==null?void 0:x.class_group})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Статус:"}),s.jsxs(kt,{value:j.status,onValueChange:E=>b(I=>({...I,status:E})),children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите статус"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"pending",children:"Ожидает рассмотрения"}),s.jsx(Ze,{value:"approved",children:"Одобрено"}),s.jsx(Ze,{value:"rejected",children:"Отклонено"})]})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Заметки администратора:"}),s.jsx(Fr,{value:j.admin_notes,onChange:E=>b(I=>({...I,admin_notes:E.target.value})),placeholder:"Добавьте заметки по заявке...",className:"mt-1",rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(q,{variant:"outline",onClick:()=>N(!1),children:"Отмена"}),s.jsx(q,{onClick:re,className:"bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white",children:"Сохранить"})]})]})]})})]})}const Gz=()=>{const{toast:e}=Gt(),t=$a(),[r,n]=v.useState(void 0),[a,i]=v.useState({city:"",school_name:"",class_group:"",status:"all",workshop_date:""}),[o,l]=v.useState({}),{data:c,isLoading:d,error:u}=I4(a),m=wP(),f=async k=>{try{const R=[...new Set(k)].filter(ae=>!o[ae]);if(R.length===0)return;const te=R.map(async ae=>{try{const ne=await fetch(`https://waxhands.ru/api/users/${ae}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(ne.ok){const K=await ne.json();if(K.success&&K.data){const re=K.data,xe=re.surname?`${re.name} ${re.surname}`:re.name;return{userId:ae,fullName:xe}}}}catch(ne){console.error(`Ошибка при получении данных пользователя ${ae}:`,ne)}return null}),se=(await Promise.all(te)).filter(Boolean).reduce((ae,ne)=>(ne&&(ae[ne.userId]=ne.fullName),ae),{});Object.keys(se).length>0&&l(ae=>({...ae,...se}))}catch(R){console.error("Ошибка при получении полных имен пользователей:",R)}},[p,g]=v.useState(!1);v.useEffect(()=>{let k=!1;const te=setTimeout(async()=>{if(!k)try{k=!0,g(!0),console.log("🔄 Автоматическая синхронизация счетов...");const Z=await et.invoices.syncAllInvoicesWithParticipants();console.log("✅ Автосинхронизация завершена:",Z),t.invalidateQueries({queryKey:["master-classes"]}),t.invalidateQueries({queryKey:["workshop-stats"]}),t.invalidateQueries({queryKey:["workshop-registrations"]}),t.invalidateQueries({queryKey:["invoices"]})}catch(Z){console.error("❌ Ошибка автосинхронизации:",Z)}finally{k=!1,g(!1)}},1e3);return()=>clearTimeout(te)},[]),console.log("InvoicesTab - invoicesData:",c),console.log("InvoicesTab - error:",u),console.log("InvoicesTab - invoicesData.invoices:",c==null?void 0:c.invoices),console.log("InvoicesTab - invoicesData.total:",c==null?void 0:c.total);const h=(c==null?void 0:c.invoices)||[],x=(c==null?void 0:c.total)||0;v.useEffect(()=>{if(h.length>0){const k=h.map(R=>R.participant_id);f(k)}},[h]);const w=async(k,R)=>{try{await m.mutateAsync({id:k,status:R}),t.invalidateQueries({queryKey:["master-classes"]}),t.invalidateQueries({queryKey:["workshop-stats"]}),t.invalidateQueries({queryKey:["workshop-registrations"]}),e({title:"Статус обновлен",description:`Счет №${k} теперь имеет статус "${R}"`})}catch{e({title:"Ошибка",description:"Не удалось обновить статус счета",variant:"destructive"})}},y=async(k,R,te)=>{try{await fetch("https://waxhands.ru/api/workshop-registrations/remove-participant",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({workshopId:R,userId:te})}),await fetch(`https://waxhands.ru/api/invoices/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),e({title:"Счет удален",description:"Счет и участник успешно удалены из мастер-класса"}),t.invalidateQueries({queryKey:["invoices"]}),t.invalidateQueries({queryKey:["masterClasses"]})}catch(Z){console.error("Ошибка при удалении счета:",Z),e({title:"Ошибка",description:"Не удалось удалить счет",variant:"destructive"})}},N=k=>{switch(k){case"paid":return s.jsx(rt,{className:"bg-green-500 text-white",children:"✅ Оплачено"});case"pending":return s.jsx(rt,{className:"bg-yellow-500 text-white",children:"⏳ Ожидает оплаты"});case"cancelled":return s.jsx(rt,{className:"bg-red-500 text-white",children:"❌ Отменено"});default:return s.jsx(rt,{variant:"secondary",children:k})}},j=k=>k.status==="pending"?s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(q,{size:"sm",onClick:()=>w(k.id,"paid"),className:"bg-green-500 hover:bg-green-600 text-white",children:[s.jsx(zr,{className:"w-4 h-4 mr-1"}),"Оплачено"]}),s.jsxs(q,{size:"sm",variant:"destructive",onClick:()=>w(k.id,"cancelled"),children:[s.jsx(Qc,{className:"w-4 h-4 mr-1"}),"Отменить"]})]}):k.status==="paid"?s.jsx(q,{size:"sm",variant:"outline",disabled:!0,className:"cursor-not-allowed",children:"✅ Оплачено"}):k.status==="cancelled"?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(q,{size:"sm",variant:"outline",disabled:!0,className:"cursor-not-allowed",children:"❌ Отменено"}),s.jsxs(q,{size:"sm",variant:"destructive",onClick:()=>y(k.id,k.master_class_id,k.participant_id),className:"bg-red-600 hover:bg-red-700 text-white",children:[s.jsx(Ao,{className:"w-4 h-4 mr-1"}),"Удалить"]})]}):s.jsx(q,{size:"sm",variant:"outline",disabled:!0,className:"cursor-not-allowed",children:"❌ Отменено"}),b=k=>{const R=k.getFullYear(),te=String(k.getMonth()+1).padStart(2,"0"),Z=String(k.getDate()).padStart(2,"0"),se=`${R}-${te}-${Z}`;return h.filter(ae=>{const ne=new Date(ae.workshop_date),K=ne.getFullYear(),re=String(ne.getMonth()+1).padStart(2,"0"),xe=String(ne.getDate()).padStart(2,"0");return`${K}-${re}-${xe}`===se})},_=k=>{if(n(k),k){const R=k.getFullYear(),te=String(k.getMonth()+1).padStart(2,"0"),Z=String(k.getDate()).padStart(2,"0"),se=`${R}-${te}-${Z}`;i(ae=>({...ae,workshop_date:se}))}else i(R=>({...R,workshop_date:""}))},S=()=>{i({city:"",school_name:"",class_group:"",status:"all",workshop_date:""}),n(void 0)},C=h.reduce((k,R)=>k+R.amount,0),A=h.filter(k=>k.status==="paid").reduce((k,R)=>k+R.amount,0),U=h.filter(k=>k.status==="pending").reduce((k,R)=>k+R.amount,0);return d?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"}),s.jsx("span",{className:"ml-3 text-lg text-orange-600",children:"Загрузка счетов..."})]}):u?s.jsx(Ce,{className:"bg-red-50 border-red-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("p",{className:"text-red-600",children:["Ошибка при загрузке счетов: ",u.message]})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-primary",children:"Счета мастер-классов"}),s.jsx("p",{className:"text-muted-foreground",children:"Управление счетами и статусами оплаты"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium ${p?"bg-blue-50 border border-blue-200 text-blue-700":"bg-green-50 border border-green-200 text-green-700"}`,children:[s.jsx(Fg,{className:`w-4 h-4 ${p?"animate-spin":""}`}),s.jsx("span",{children:p?"Синхронизация...":"Автосинхронизация"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Ce,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ih,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-600",children:"Общая сумма"}),s.jsxs("p",{className:"text-xl font-bold text-blue-800",children:[C," ₽"]})]})]})})}),s.jsx(Ce,{className:"bg-gradient-to-r from-green-50 to-green-100 border-green-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(zr,{className:"w-5 h-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-600",children:"Оплачено"}),s.jsxs("p",{className:"text-xl font-bold text-green-800",children:[A," ₽"]})]})]})})}),s.jsx(Ce,{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Xr,{className:"w-5 h-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-yellow-600",children:"Ожидает оплаты"}),s.jsxs("p",{className:"text-xl font-bold text-yellow-800",children:[U," ₽"]})]})]})})}),s.jsx(Ce,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:s.jsx(Ae,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-purple-600",children:"Всего счетов"}),s.jsx("p",{className:"text-xl font-bold text-purple-800",children:x})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs(Ce,{className:"lg:col-span-2",children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(n0,{className:"h-5 w-5"}),"Фильтры поиска"]}),s.jsx(ft,{children:"Настройте параметры для поиска счетов"})]}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"city-filter",children:"Город"}),s.jsx(st,{id:"city-filter",placeholder:"Все города",value:a.city,onChange:k=>i(R=>({...R,city:k.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"school-filter",children:"Школа"}),s.jsx(st,{id:"school-filter",placeholder:"Все школы",value:a.school_name,onChange:k=>i(R=>({...R,school_name:k.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"class-filter",children:"Класс"}),s.jsx(st,{id:"class-filter",placeholder:"Все классы",value:a.class_group,onChange:k=>i(R=>({...R,class_group:k.target.value}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"status-filter",children:"Статус"}),s.jsxs(kt,{value:a.status,onValueChange:k=>i(R=>({...R,status:k})),children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Все статусы"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все статусы"}),s.jsx(Ze,{value:"pending",children:"Ожидает оплаты"}),s.jsx(Ze,{value:"paid",children:"Оплачено"}),s.jsx(Ze,{value:"cancelled",children:"Отменено"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"date-filter",children:"Дата"}),s.jsx(st,{id:"date-filter",type:"date",value:a.workshop_date,onChange:k=>i(R=>({...R,workshop_date:k.target.value}))})]})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx(q,{variant:"outline",onClick:S,className:"flex-1",children:"Сбросить фильтры"}),s.jsxs(q,{className:"flex-1 bg-orange-500 hover:bg-orange-600",children:[s.jsx(Ef,{className:"w-4 h-4 mr-2"}),"Поиск"]})]})]})]}),s.jsxs(Ce,{className:"w-full",children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(Cn,{className:"h-5 w-5"}),"Календарь счетов"]}),s.jsx(ft,{children:"Нажмите на дату для фильтрации по счетам"})]}),s.jsxs(Ae,{children:[s.jsx(wv,{mode:"single",selected:r,onSelect:_,className:"rounded-md border w-full",locale:TE,weekStartsOn:1,modifiers:{hasInvoices:k=>b(k).length>0},modifiersStyles:{hasInvoices:{backgroundColor:"hsl(var(--accent))"}},components:{DayContent:({date:k,displayMonth:R,activeModifiers:te,...Z})=>{const se=b(k);return s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("div",{...Z,className:`w-full h-full p-1 text-center text-sm ${te.hasInvoices?"font-bold":""}`,children:k.getDate()}),se.length>0&&s.jsx("div",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-orange-500 text-white text-xs rounded-full flex items-center justify-center font-medium",children:se.length})]})}}}),r&&s.jsxs("div",{className:"mt-4 p-3 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsxs("p",{className:"text-sm font-medium text-orange-800",children:["Счета на ",r.toLocaleDateString("ru-RU"),":"]}),s.jsxs("p",{className:"text-lg font-bold text-orange-900",children:[b(r).length," шт."]})]})]})]})]}),s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Счета мастер-классов"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Найдено: ",h.length," счетов"]})]}),s.jsx(ft,{children:"Управление счетами и статусами оплаты"})]}),s.jsx(Ae,{children:h.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(ih,{className:"mx-auto h-16 w-16 mb-4 opacity-30"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"Счета не найдены"}),s.jsx("p",{className:"text-sm",children:"Попробуйте изменить параметры поиска или создать новый счет"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Gd,{children:[s.jsx(qd,{children:s.jsxs(oa,{children:[s.jsx(Pt,{children:"№"}),s.jsx(Pt,{children:"Плательщик"}),s.jsx(Pt,{children:"Мастер-класс"}),s.jsx(Pt,{children:"Школа"}),s.jsx(Pt,{children:"Класс"}),s.jsx(Pt,{children:"Дата"}),s.jsx(Pt,{children:"Сумма"}),s.jsx(Pt,{children:"Статус"}),s.jsx(Pt,{children:"Действия"})]})}),s.jsx(Xd,{children:h.map(k=>s.jsxs(oa,{children:[s.jsxs(Ct,{className:"font-mono text-sm",children:[k.id.slice(0,8),"..."]}),s.jsx(Ct,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:o[k.participant_id]||k.participant_name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",k.participant_id.slice(0,8),"..."]})]})}),s.jsx(Ct,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Мастер-класс"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",k.master_class_id.slice(0,8),"..."]})]})}),s.jsx(Ct,{children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Tn,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:k.school_name})]})}),s.jsx(Ct,{children:k.class_group}),s.jsx(Ct,{children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Cn,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:new Date(k.workshop_date).toLocaleDateString("ru-RU")})]})}),s.jsxs(Ct,{className:"font-mono font-medium",children:[k.amount," ₽"]}),s.jsx(Ct,{children:N(k.status)}),s.jsx(Ct,{children:j(k)})]},k.id))})]})})})]})]})},no="https://waxhands.ru/api";function qC(){const[e,t]=v.useState(null),[r,n]=v.useState(!0),[a,i]=v.useState(null),{toast:o}=Gt(),l=v.useCallback(async()=>{try{n(!0),i(null);const d=await fetch(`${no}/about/content`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const u=await d.json();t(u)}catch(d){const u=d instanceof Error?d.message:"Ошибка загрузки контента";i(u),console.error("Ошибка загрузки контента about:",d)}finally{n(!1)}},[]),c=v.useCallback(async(d,u)=>{try{const m=localStorage.getItem("authToken");if(!m)throw new Error("Токен авторизации не найден");let f={...u};if("advantages_list"in u&&typeof u.advantages_list=="string"&&(f.advantages_list=u.advantages_list.split(`
`).filter(g=>g.trim())),"process_steps"in u&&typeof u.process_steps=="string")try{f.process_steps=JSON.parse(u.process_steps)}catch{throw new Error("Неверный формат JSON для шагов процесса")}const p=await fetch(`${no}/about/content/${d}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(f)});if(!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);return await l(),o({title:"Контент обновлен",description:"Контент страницы 'О нас' успешно обновлен"}),!0}catch(m){const f=m instanceof Error?m.message:"Ошибка обновления контента";return i(f),o({title:"Ошибка",description:f,variant:"destructive"}),console.error("Ошибка обновления контента about:",m),!1}},[l,o]);return v.useEffect(()=>{l()},[l]),{content:e,loading:r,error:a,loadContent:l,updateContent:c}}function XC(){const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,i]=v.useState(null),{toast:o}=Gt(),l=v.useCallback(async()=>{try{n(!0),i(null);const f=await fetch(`${no}/about/media`);if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);const p=await f.json();t(p)}catch(f){const p=f instanceof Error?f.message:"Ошибка загрузки медиа";i(p),console.error("Ошибка загрузки медиа about:",f)}finally{n(!1)}},[]),c=v.useCallback(async f=>{try{const p=localStorage.getItem("authToken");if(!p)throw new Error("Токен авторизации не найден");const g=await fetch(`${no}/about/media`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify(f)});if(!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);return await l(),o({title:"Медиа добавлено",description:"Медиа-файл успешно добавлен"}),!0}catch(p){const g=p instanceof Error?p.message:"Ошибка добавления медиа";return i(g),o({title:"Ошибка",description:g,variant:"destructive"}),console.error("Ошибка добавления медиа about:",p),!1}},[l,o]),d=v.useCallback(async(f,p)=>{try{const g=localStorage.getItem("authToken");if(!g)throw new Error("Токен авторизации не найден");const h=await fetch(`${no}/about/media/${f}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(p)});if(!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);return await l(),o({title:"Медиа обновлено",description:"Медиа-файл успешно обновлен"}),!0}catch(g){const h=g instanceof Error?g.message:"Ошибка обновления медиа";return i(h),o({title:"Ошибка",description:h,variant:"destructive"}),console.error("Ошибка обновления медиа about:",g),!1}},[l,o]),u=v.useCallback(async f=>{try{const p=localStorage.getItem("authToken");if(!p)throw new Error("Токен авторизации не найден");const g=await fetch(`${no}/about/media/${f}`,{method:"DELETE",headers:{Authorization:`Bearer ${p}`}});if(!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);return await l(),o({title:"Медиа удалено",description:"Медиа-файл успешно удален"}),!0}catch(p){const g=p instanceof Error?p.message:"Ошибка удаления медиа";return i(g),o({title:"Ошибка",description:g,variant:"destructive"}),console.error("Ошибка удаления медиа about:",p),!1}},[l,o]),m=v.useCallback(async f=>{try{const p=localStorage.getItem("authToken");if(!p)throw new Error("Токен авторизации не найден");const g=await fetch(`${no}/about/media/reorder`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({mediaIds:f})});if(!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);return await l(),o({title:"Порядок обновлен",description:"Порядок медиа-файлов успешно изменен"}),!0}catch(p){const g=p instanceof Error?p.message:"Ошибка изменения порядка";return i(g),o({title:"Ошибка",description:g,variant:"destructive"}),console.error("Ошибка изменения порядка медиа about:",p),!1}},[l,o]);return v.useEffect(()=>{l()},[l]),{media:e,loading:r,error:a,loadMedia:l,addMedia:c,updateMedia:d,deleteMedia:u,reorderMedia:m}}function KC(){const[e,t]=v.useState(0);return v.useEffect(()=>{const r=localStorage.getItem("authToken"),n=localStorage.getItem("user");if(!r||!n)return;const a=JSON.parse(n),i=`${WS_BASE_URL}/chat/ws?userId=${a.id}&isAdmin=${a.role==="admin"}`;try{const o=new WebSocket(i);return o.onmessage=l=>{try{const c=JSON.parse(l.data);(c.type==="about_content_update"||c.type==="about_media_update"||c.type==="about_media_added"||c.type==="about_media_deleted")&&(console.log("📡 Получено обновление about:",c.type),t(Date.now()))}catch(c){console.error("Ошибка парсинга WebSocket сообщения:",c)}},o.onerror=l=>{console.error("WebSocket ошибка:",l)},()=>{o.close()}}catch(o){console.error("Ошибка подключения к WebSocket:",o)}},[]),{lastUpdate:e}}const qz=()=>{const{toast:e}=Gt(),{content:t,loading:r,updateContent:n}=qC(),{media:a,loading:i,addMedia:o,updateMedia:l,deleteMedia:c,reorderMedia:d}=XC(),{lastUpdate:u}=KC(),{services:m,loading:f,fetchServices:p,updateService:g}=Wa(),[h,x]=v.useState(null),[w,y]=v.useState(""),[N,j]=v.useState(!1),[b,_]=v.useState(null),[S,C]=v.useState({title:"",description:"",type:"image"}),[A,U]=v.useState(null),[k,R]=v.useState({title:"",description:""}),[te,Z]=v.useState(null),[se,ae]=v.useState(null),[ne,K]=v.useState(!1);Yn.useEffect(()=>{u>0&&console.log("🔄 Получено обновление about через WebSocket, перезагружаем данные")},[u]),Yn.useEffect(()=>{p()},[p]);const re=(Y,P)=>{x(Y),y(P)},xe=async Y=>{if(!t)return;await n(t.id,{[Y]:w})&&(x(null),y(""))},J=()=>{x(null),y("")},D=async(Y,P,ce)=>{try{await g(Y,{[P]:ce}),x(null),y(""),e({title:"Успешно",description:"Услуга обновлена"})}catch{e({title:"Ошибка",description:"Не удалось обновить услугу",variant:"destructive"})}},X=Y=>{U(Y),R({title:Y.title,description:Y.description||""})},V=async()=>{if(!A)return;await l(A.id,k)&&(U(null),R({title:"",description:""}),e({title:"Успешно",description:"Медиа обновлено"}))},E=()=>{U(null),R({title:"",description:""})},I=Y=>{console.log("🔍 Просмотр медиа:",{id:Y.id,title:Y.title,type:Y.type,filename:Y.filename,file_path:Y.file_path}),ae(Y),K(!0)},G=Y=>{var ce;const P=(ce=Y.target.files)==null?void 0:ce[0];if(P){if(P.size>5242880){e({title:"Ошибка",description:`Файл слишком большой. Максимальный размер: ${5242880/1024/1024}MB`,variant:"destructive"});return}_(P),C(ue=>({...ue,type:P.type.startsWith("image/")?"image":"video",title:ue.title||P.name.split(".")[0]}))}},me=async()=>{if(!b)return;const Y=`${S.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}.${b.name.split(".").pop()}`,P=`/uploads/${S.type==="image"?"images":"videos"}/${Y}`;await o({filename:Y,original_name:b.name,type:S.type,title:S.title,description:S.description,file_path:P})&&(j(!1),_(null),C({title:"",description:"",type:"image"}),e({title:"Успешно",description:"Медиа добавлено"}))},he=async Y=>{await c(Y)&&e({title:"Успешно",description:"Медиа удалено"})},B=(Y,P)=>{Z(P),Y.dataTransfer.effectAllowed="move"},be=Y=>{Y.preventDefault(),Y.dataTransfer.dropEffect="move"},pe=async(Y,P)=>{if(Y.preventDefault(),!te||te.id===P.id)return;const ce=a.findIndex(ue=>ue.id===te.id),Se=a.findIndex(ue=>ue.id===P.id);if(ce!==-1&&Se!==-1){const ue=[...a],[Pe]=ue.splice(ce,1);ue.splice(Se,0,Pe);const ke=ue.map((gt,dt)=>({...gt,order_index:dt+1})).map(gt=>gt.id);await d(ke)}Z(null)};return r||i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-2"}),s.jsx("p",{children:"Загрузка контента..."})]})}):t?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsx(qe,{children:"Основная информация"})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Заголовок"}),h==="title"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(st,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1"}),s.jsx(q,{size:"sm",onClick:()=>xe("title"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-lg font-medium",children:t.title}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("title",t.title),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Подзаголовок"}),h==="subtitle"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(st,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1"}),s.jsx(q,{size:"sm",onClick:()=>xe("subtitle"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-gray-600",children:t.subtitle}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("subtitle",t.subtitle),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Описание"}),h==="description"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Fr,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1",rows:4}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(q,{size:"sm",onClick:()=>xe("description"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"flex items-start justify-between mt-1",children:[s.jsx("p",{className:"text-gray-600 flex-1",children:t.description}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("description",t.description),children:s.jsx(hr,{className:"w-4 h-4"})})]})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsx(qe,{children:'Карточка "О нашей студии"'})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Заголовок карточки"}),h==="studio_title"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(st,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1"}),s.jsx(q,{size:"sm",onClick:()=>xe("studio_title"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-gray-600",children:t.studio_title}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("studio_title",t.studio_title),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Описание студии"}),h==="studio_description"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Fr,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1",rows:3}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(q,{size:"sm",onClick:()=>xe("studio_description"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"flex items-start justify-between mt-1",children:[s.jsx("p",{className:"text-gray-600 flex-1",children:t.studio_description}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("studio_description",t.studio_description),children:s.jsx(hr,{className:"w-4 h-4"})})]})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsx(qe,{children:'Карточка "Наши преимущества"'})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Заголовок карточки"}),h==="advantages_title"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(st,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1"}),s.jsx(q,{size:"sm",onClick:()=>xe("advantages_title"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-gray-600",children:t.advantages_title}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("advantages_title",t.advantages_title),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Список преимуществ"}),h==="advantages_list"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Fr,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1",rows:6,placeholder:"Каждое преимущество с новой строки"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(q,{size:"sm",onClick:()=>xe("advantages_list"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"flex items-start justify-between mt-1",children:[s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"space-y-2",children:t.advantages_list.map((Y,P)=>s.jsx("div",{className:"border-l-2 border-purple-500 pl-3",children:s.jsx("div",{className:"text-sm text-gray-600",children:Y})},P))})}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("advantages_list",t.advantages_list.join(`
`)),children:s.jsx(hr,{className:"w-4 h-4"})})]})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsx(qe,{children:'Карточка "Как проходит мастер-класс"'})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Заголовок карточки"}),h==="process_title"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(st,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1"}),s.jsx(q,{size:"sm",onClick:()=>xe("process_title"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-gray-600",children:t.process_title}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("process_title",t.process_title),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Шаги процесса"}),h==="process_steps"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Fr,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1",rows:8,placeholder:"JSON формат: [{'title': 'Заголовок', 'description': 'Описание'}]"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(q,{size:"sm",onClick:()=>xe("process_steps"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"flex items-start justify-between mt-1",children:[s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"space-y-2",children:t.process_steps.map((Y,P)=>s.jsxs("div",{className:"border-l-2 border-blue-500 pl-3",children:[s.jsx("div",{className:"font-medium text-gray-800",children:Y.title}),s.jsx("div",{className:"text-sm text-gray-600",children:Y.description})]},P))})}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("process_steps",JSON.stringify(t.process_steps,null,2)),children:s.jsx(hr,{className:"w-4 h-4"})})]})]})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsx(qe,{children:'Карточка "Безопасность и качество"'})}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Заголовок карточки"}),h==="safety_title"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(st,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1"}),s.jsx(q,{size:"sm",onClick:()=>xe("safety_title"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-gray-600",children:t.safety_title}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("safety_title",t.safety_title),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Описание безопасности"}),h==="safety_description"?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Fr,{value:w,onChange:Y=>y(Y.target.value),className:"flex-1",rows:3}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(q,{size:"sm",onClick:()=>xe("safety_description"),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"flex items-start justify-between mt-1",children:[s.jsx("p",{className:"text-gray-600 flex-1",children:t.safety_description}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re("safety_description",t.safety_description),children:s.jsx(hr,{className:"w-4 h-4"})})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(Jc,{className:"w-5 h-5"}),"Медиа-контент"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:'Управляйте фото и видео для страницы "О нас"'})]}),s.jsxs(Ae,{className:"space-y-4",children:[s.jsxs(q,{onClick:()=>j(!0),className:"w-full bg-gradient-to-r from-blue-500 to-purple-500",children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),"Добавить медиа"]}),s.jsxs("div",{className:"space-y-3",children:[a.map(Y=>s.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${(te==null?void 0:te.id)===Y.id?"opacity-50":""}`,draggable:!0,onDragStart:P=>B(P,Y),onDragOver:be,onDrop:P=>pe(P,Y),children:[s.jsx("div",{className:"flex-shrink-0 cursor-move",children:s.jsx(cD,{className:"w-4 h-4 text-gray-400"})}),s.jsx("div",{className:"flex-shrink-0",children:Y.type==="image"?s.jsx(Ic,{className:"w-8 h-8 text-blue-500"}):s.jsx(Lc,{className:"w-8 h-8 text-purple-500"})}),s.jsx("div",{className:"flex-1 min-w-0",children:(A==null?void 0:A.id)===Y.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx(st,{value:k.title,onChange:P=>R(ce=>({...ce,title:P.target.value})),placeholder:"Название",size:1}),s.jsx(Fr,{value:k.description,onChange:P=>R(ce=>({...ce,description:P.target.value})),placeholder:"Описание",rows:2})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium truncate",children:Y.title}),s.jsx("div",{className:"text-sm text-gray-500 truncate",children:Y.description||"Без описания"}),s.jsx("div",{className:"text-xs text-gray-400",children:Y.filename})]})}),s.jsx(rt,{variant:"secondary",children:Y.order_index}),s.jsx("div",{className:"flex gap-1",children:(A==null?void 0:A.id)===Y.id?s.jsxs(s.Fragment,{children:[s.jsx(q,{size:"sm",onClick:V,children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:E,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>I(Y),children:s.jsx(Zp,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>X(Y),children:s.jsx(hr,{className:"w-4 h-4"})}),s.jsxs(mh,{children:[s.jsx(ph,{asChild:!0,children:s.jsx(q,{size:"sm",variant:"ghost",className:"text-red-500 hover:text-red-700",children:s.jsx(Ao,{className:"w-4 h-4"})})}),s.jsxs(Dd,{children:[s.jsxs(Rd,{children:[s.jsx(Fd,{children:"Удалить медиа?"}),s.jsx(Md,{children:"Это действие нельзя отменить. Медиа-файл будет удален навсегда."})]}),s.jsxs(Pd,{children:[s.jsx(Ld,{children:"Отмена"}),s.jsx(Id,{onClick:()=>he(Y.id),className:"bg-red-500 hover:bg-red-600",children:"Удалить"})]})]})]})]})})]},Y.id)),a.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Jc,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),s.jsx("p",{children:"Медиа-файлы не добавлены"}),s.jsx("p",{className:"text-sm",children:'Добавьте фото и видео для страницы "О нас"'})]})]})]})]}),s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🎨"}),'Управление услугами для раздела "О нашем мастер-классе"']}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Редактируйте названия и описания услуг, которые отображаются родителям"})]}),s.jsx(Ae,{className:"space-y-4",children:f?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500 mx-auto mb-2"}),s.jsx("p",{children:"Загрузка услуг..."})]}):m.length>0?s.jsx("div",{className:"space-y-4",children:m.map(Y=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm font-medium text-gray-600",children:"Название услуги"}),h===`service_name_${Y.id}`?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(st,{value:w,onChange:P=>y(P.target.value),className:"flex-1"}),s.jsx(q,{size:"sm",onClick:()=>D(Y.id,"name",w),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:"text-gray-800",children:Y.name}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re(`service_name_${Y.id}`,Y.name),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm font-medium text-gray-600",children:"Краткое описание"}),h===`service_short_${Y.id}`?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Fr,{value:w,onChange:P=>y(P.target.value),className:"flex-1",rows:2}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(q,{size:"sm",onClick:()=>D(Y.id,"shortDescription",w),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"flex items-start justify-between mt-1",children:[s.jsx("p",{className:"text-gray-600 flex-1",children:Y.shortDescription}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re(`service_short_${Y.id}`,Y.shortDescription),children:s.jsx(hr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm font-medium text-gray-600",children:"Полное описание"}),h===`service_full_${Y.id}`?s.jsxs("div",{className:"flex gap-2 mt-1",children:[s.jsx(Fr,{value:w,onChange:P=>y(P.target.value),className:"flex-1",rows:3}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(q,{size:"sm",onClick:()=>D(Y.id,"fullDescription",w),children:s.jsx(Kr,{className:"w-4 h-4"})}),s.jsx(q,{size:"sm",variant:"outline",onClick:J,children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}):s.jsxs("div",{className:"flex items-start justify-between mt-1",children:[s.jsx("p",{className:"text-gray-600 flex-1",children:Y.fullDescription}),s.jsx(q,{size:"sm",variant:"ghost",onClick:()=>re(`service_full_${Y.id}`,Y.fullDescription),children:s.jsx(hr,{className:"w-4 h-4"})})]})]})]})},Y.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{children:"Услуги не найдены"}),s.jsx("p",{className:"text-sm",children:'Добавьте услуги на вкладке "Услуги"'})]})})]})]})]}),ne&&se&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Просмотр медиа"}),s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>K(!1),children:s.jsx(Rt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-lg",children:se.title}),se.description&&s.jsx("p",{className:"text-gray-600 mt-1",children:se.description}),s.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Файл: ",se.filename]})]}),s.jsx("div",{className:"flex justify-center",children:se.type==="image"?s.jsx("img",{src:se.file_path,alt:se.title,className:"max-w-full max-h-[60vh] object-contain rounded-lg shadow-lg",onError:Y=>{const P=Y.target;P.src="/placeholder.svg",P.alt="Ошибка загрузки изображения"}}):s.jsx("video",{src:se.file_path,controls:!0,preload:"metadata",className:"max-w-full max-h-[60vh] rounded-lg shadow-lg",onError:Y=>{const P=Y.target;P.poster="/placeholder.svg"},children:"Ваш браузер не поддерживает воспроизведение видео."})}),s.jsx("div",{className:"flex justify-end pt-4 border-t",children:s.jsx(q,{onClick:()=>K(!1),children:"Закрыть"})})]})]})}),N&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Добавить медиа"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Файл"}),s.jsx(st,{type:"file",accept:"image/*,video/*",onChange:G,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Название"}),s.jsx(st,{value:S.title,onChange:Y=>C(P=>({...P,title:Y.target.value})),placeholder:"Введите название",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Описание"}),s.jsx(Fr,{value:S.description,onChange:Y=>C(P=>({...P,description:Y.target.value})),placeholder:"Введите описание (необязательно)",rows:3,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Тип"}),s.jsxs("select",{value:S.type,onChange:Y=>C(P=>({...P,type:Y.target.value})),className:"w-full mt-1 p-2 border border-gray-300 rounded-md",children:[s.jsx("option",{value:"image",children:"Фото"}),s.jsx("option",{value:"video",children:"Видео"})]})]})]}),s.jsxs("div",{className:"flex gap-2 mt-6",children:[s.jsx(q,{onClick:me,className:"flex-1",children:"Добавить"}),s.jsx(q,{variant:"outline",onClick:()=>j(!1),className:"flex-1",children:"Отмена"})]})]})})]}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-red-500",children:"Ошибка загрузки контента"})})},Xz=()=>{var Hv,Vv,Gv;const{user:e,logout:t}=Sr(),{toast:r}=Gt();console.log("Dashboard: logoImage импортирован:",cx),v.useState("");const[n,a]=v.useState(""),[i,o]=v.useState(""),[l,c]=v.useState(""),[d,u]=v.useState("overview"),[m,f]=v.useState(!1),[p,g]=v.useState(null),[h,x]=v.useState({total:0,pending:0,approved:0,rejected:0}),{isConnected:w,sendMessage:y}=sv("admin",!0,ee=>{(ee.type==="workshop_request_status_change"||ee.type==="workshop_request_update")&&(console.log("📋 Dashboard: Получено WebSocket уведомление о заявке, обновляем статистику"),L())});v.useEffect(()=>{console.log("🔌 Dashboard: WebSocket состояние заявок:",{isConnected:w,timestamp:new Date().toISOString()}),w&&(console.log("🔌 Dashboard: WebSocket подключен, загружаем статистику заявок..."),L())},[w]),v.useEffect(()=>{if(!localStorage.getItem("authToken")){console.error("❌ Dashboard: Токен авторизации отсутствует в WebSocket эффекте"),window.location.href="/admin/login";return}},[w]);const[N,j]=v.useState({city:"",school:"",class:""}),[b,_]=v.useState("all"),[S,C]=v.useState(null),[A,U]=v.useState(""),[k,R]=v.useState(!1),[te,Z]=v.useState(!1),{chats:se,messages:ae,isLoadingChats:ne,isLoadingMessages:K,sendMessage:re,updateChatStatus:xe}=sF(S),{isConnected:J,isConnecting:D}=uF(S==null?void 0:S.id,e==null?void 0:e.id,!0),[X,V]=v.useState({role:"all",school:"all"}),[E,I]=v.useState(!1),[G,me]=v.useState(!1),[he,B]=v.useState(null),[be,pe]=v.useState("style"),[Y,P]=v.useState(null),[ce,Se]=v.useState(null),[ue,Pe]=v.useState(!1),{users:je,loading:ke,error:gt,total:dt,deleteUser:qt,fetchUsers:Ot,lastFetch:Kt}=nv(),{schools:H,loading:fe,error:we,total:M,deleteSchool:ge,createSchool:Ne,updateSchool:Le}=Ba(),{data:ze,isLoading:nt,error:_e}=I4({});v.useEffect(()=>{console.log("Dashboard: Данные счетов:",{invoicesData:ze,total:ze==null?void 0:ze.total,invoices:ze==null?void 0:ze.invoices,loading:nt,error:_e})},[ze,nt,_e]);const{services:$e,loading:Qe,error:Me,total:Ye,deleteService:it,createService:Ht,addStyleToService:Yt,addOptionToService:xn,updateServiceStyle:rr,updateServiceOption:bt,reorderServiceStyles:_r,reorderServiceOptions:Xt,fetchServices:fr}=Wa(),{masterClasses:Xe,loading:Dt,error:on,total:It,fetchMasterClasses:$r,createMasterClass:gn,updateMasterClass:qo,deleteMasterClass:T}=Kg();v.useEffect(()=>{d==="users"&&je.length===0&&(console.log("🔄 Switching to users tab, fetching users..."),Ot())},[d,je.length,Ot]),v.useEffect(()=>{d==="schools"&&H.length===0&&console.log("🔄 Switching to schools tab, fetching schools...")},[d,H.length]),v.useEffect(()=>{d==="services"&&$e.length===0&&console.log("🔄 Switching to services tab, fetching services...")},[d,$e.length]),v.useEffect(()=>{d==="master-classes"&&Xe.length===0&&(console.log("🔄 Switching to master-classes tab, fetching master classes..."),$r())},[d,Xe.length,$r]),v.useEffect(()=>{if(console.log("🚀 Dashboard: Компонент смонтирован, проверяем авторизацию..."),!localStorage.getItem("authToken")){console.error("❌ Dashboard: Токен авторизации отсутствует при монтировании"),window.location.href="/admin/login";return}console.log("✅ Dashboard: Токен авторизации найден, загружаем статистику заявок..."),L(),$e.length===0&&(console.log("🔄 Dashboard: Загружаем сервисы для мастер-классов..."),fr()),setTimeout(()=>{console.log("⏰ Dashboard: Принудительная загрузка статистики заявок..."),L()},2e3)},[]),v.useEffect(()=>{w&&(y({type:"subscribe",channels:["admin:workshop_requests","workshop_requests:all"]}),console.log("🔌 Dashboard: WebSocket подключен для заявок, подписка активна"))},[w,y]);const L=async()=>{try{console.log("🔄 Dashboard: Загружаем статистику заявок...");const ee=localStorage.getItem("authToken");if(console.log("🔄 Dashboard: Токен авторизации:",ee?"Есть":"Нет"),!ee){console.error("❌ Dashboard: Токен авторизации отсутствует, перенаправляем на логин"),window.location.href="/admin/login";return}const tt="https://waxhands.ru/api",Zt=`${tt}/workshop-requests/stats/overview`;console.log("🔄 Dashboard: API URL для статистики заявок:",Zt);try{const Br=`${tt}/health`;console.log("🏥 Dashboard: Проверяем health endpoint:",Br);const _s=await fetch(Br,{method:"HEAD"});console.log("✅ Dashboard: Backend сервер доступен, статус:",_s.status)}catch(Br){console.warn("⚠️ Dashboard: Backend сервер недоступен, используем fallback:",Br),x({total:0,pending:0,approved:0,rejected:0});return}const nr=await fetch(Zt,{headers:{Authorization:`Bearer ${ee}`,"Cache-Control":"no-cache",Pragma:"no-cache"}});if(console.log("📋 Dashboard: Ответ API статистики заявок:",nr.status,nr.ok),console.log("📋 Dashboard: Заголовки ответа:",Object.fromEntries(nr.headers.entries())),console.log("📋 Dashboard: Content-Type ответа:",nr.headers.get("content-type")),nr.ok){const Br=nr.headers.get("content-type");if(console.log("📋 Dashboard: Content-Type ответа:",Br),!Br||!Br.includes("application/json")){console.error("❌ Dashboard: Ответ не является JSON. Content-Type:",Br);const xa=await nr.text();console.error("❌ Dashboard: Сырой ответ (не JSON):",xa.substring(0,200)+"..."),x({total:0,pending:0,approved:0,rejected:0});return}const _s=await nr.text();console.log("📋 Dashboard: Сырой ответ API:",_s);let Rr;try{Rr=JSON.parse(_s)}catch(xa){console.error("❌ Dashboard: Ошибка парсинга JSON:",xa),console.error("❌ Dashboard: Сырой ответ:",_s);return}if(console.log("📋 Dashboard: Данные статистики заявок:",Rr),Rr.success&&Rr.data)x(Rr.data),console.log("✅ Dashboard: Статистика заявок обновлена:",Rr.data);else if(console.warn("⚠️ Dashboard: Неожиданный формат ответа статистики заявок:",Rr),Rr.data&&typeof Rr.data=="object"){const xa={total:Rr.data.total||0,pending:Rr.data.pending||0,approved:Rr.data.approved||0,rejected:Rr.data.rejected||0};console.log("🔄 Dashboard: Используем fallback статистику:",xa),x(xa)}}else{console.error("❌ Dashboard: Ошибка API статистики заявок:",nr.status,nr.statusText);const Br=await nr.text();if(console.error("❌ Dashboard: Текст ошибки:",Br),nr.status===403){console.error("❌ Dashboard: Токен недействителен, перенаправляем на логин"),localStorage.removeItem("authToken"),window.location.href="/admin/login";return}x({total:0,pending:0,approved:0,rejected:0})}}catch(ee){console.error("❌ Dashboard: Ошибка при загрузке статистики заявок:",ee)}};v.useEffect(()=>{console.log("Dashboard: Данные мастер-классов:",{count:Xe.length,data:Xe,loading:Dt,error:on}),Xe.length>0&&Xe.forEach((ee,tt)=>{var Zt;console.log(`Dashboard: Мастер-класс ${tt+1}:`,{id:ee.id,date:ee.date,schoolName:ee.schoolName,classGroup:ee.classGroup,participantsCount:((Zt=ee.participants)==null?void 0:Zt.length)||0,participants:ee.participants}),ee.participants&&ee.participants.length>0&&ee.participants.forEach((nr,Br)=>{console.log(`Dashboard: Участник ${Br+1} в мастер-классе ${tt+1}:`,{id:nr.id,childName:nr.childName,selectedStyles:nr.selectedStyles,selectedOptions:nr.selectedOptions,totalAmount:nr.totalAmount})})})},[Xe,Dt,on]),v.useEffect(()=>{console.log("Dashboard: Данные школ:",{count:H.length,data:H,loading:fe,error:we}),H.length>0&&(console.log("Dashboard: Пример школы с teacherPhone:",H[0]),console.log("Dashboard: Все школы teacherPhone:",H.map(ee=>({id:ee.id,name:ee.name,teacherPhone:ee.teacherPhone}))))},[H,fe,we]),v.useEffect(()=>{console.log("Dashboard: Данные пользователей:",{count:je.length,data:je,loading:ke,error:gt})},[je,ke,gt]);const O=()=>{g(null),f(!0)},F=ee=>{g(ee),f(!0)},W=()=>{I(!0)},z=async ee=>{try{await Ht(ee),r({title:"Успех",description:"Услуга успешно создана"})}catch{r({title:"Ошибка",description:"Не удалось создать услугу",variant:"destructive"})}},oe=async ee=>{try{await it(ee),r({title:"Успех",description:"Услуга успешно удалена"})}catch{r({title:"Ошибка",description:"Не удалось удалить услугу",variant:"destructive"})}},ye=ee=>{B(ee),pe("style"),P(null),me(!0)},ie=ee=>{B(ee),pe("option"),P(null),me(!0)},le=(ee,tt)=>{console.log("Dashboard: handleViewStyle called with:",ee,"serviceId:",tt),console.log("Dashboard: style price type:",typeof ee.price,"value:",ee.price),console.log("Dashboard: style media files:",{avatar:ee.avatar,images:ee.images,videos:ee.videos}),B(tt),P(ee),pe("style"),me(!0)},de=(ee,tt)=>{console.log("Dashboard: handleViewOption called with:",ee,"serviceId:",tt),B(tt),P(ee),pe("option"),me(!0)},Oe=async ee=>{if(he){console.log("Dashboard: handleCreateStyleOption called with:",ee),console.log("Dashboard: data price type:",typeof ee.price,"value:",ee.price),console.log("Dashboard: selectedStyleOption:",Y==null?void 0:Y.id,"type:",be);try{be==="style"?Y?(console.log("Dashboard: updating style with data:",ee),await rr(he,Y.id,ee)):(console.log("Dashboard: adding new style with data:",ee),await Yt(he,ee)):Y?(console.log("Dashboard: updating option with data:",ee),await bt(he,Y.id,ee)):(console.log("Dashboard: adding new option with data:",ee),await xn(he,ee)),me(!1),B(null),P(null),r({title:"Успех",description:`${be==="style"?"Стиль":"Опция"} успешно ${Y?"обновлен":"добавлен"}`})}catch(tt){console.error("Dashboard: error in handleCreateStyleOption:",tt),r({title:"Ошибка",description:`Не удалось ${Y?"обновить":"добавить"} ${be==="style"?"стиль":"опцию"}`,variant:"destructive"})}}},Be=async ee=>{try{p?(await Le(p.id,ee),r({title:"Школа обновлена",description:"Школа успешно обновлена в системе."})):(await Ne(ee),r({title:"Школа добавлена",description:"Новая школа успешно добавлена в систему."})),f(!1),g(null)}catch{r({title:"Ошибка",description:"Не удалось сохранить школу. Попробуйте еще раз.",variant:"destructive"})}},Ve=ee=>{j(ee)},Re=async ee=>{try{await qt(ee),r({title:"Пользователь удален",description:"Пользователь успешно удален из системы"})}catch{r({title:"Ошибка",description:"Не удалось удалить пользователя",variant:"destructive"})}},Ue=async ee=>{try{await ge(ee),r({title:"Школа удалена",description:"Школа успешно удалена из системы"})}catch{r({title:"Ошибка",description:"Не удалось удалить школу",variant:"destructive"})}},ut=async ee=>{try{await T(ee),r({title:"Мастер-класс удален",description:"Мастер-класс успешно удален из системы"})}catch{r({title:"Ошибка",description:"Не удалось удалить мастер-класс",variant:"destructive"})}},Qt=ee=>{switch(ee){case"active":return"bg-green-500";case"pending":return"bg-yellow-500";case"closed":return"bg-gray-500";default:return"bg-gray-500"}},Jt=ee=>{switch(ee){case"active":return"Активен";case"pending":return"Ожидает";case"closed":return"Закрыт";default:return"Неизвестно"}},Dr=ee=>ee.unreadCount||0,Ha=ee=>{const tt=new Date(ee);return Number.isNaN(tt.getTime())?"":tt.toLocaleString("ru-RU",{timeZone:"Asia/Vladivostok",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},Ki=async(ee,tt)=>{Z(!0);try{await xe(ee,tt),r({title:"Статус обновлен",description:"Статус чата успешно обновлен."})}catch(Zt){console.error("Ошибка обновления статуса чата:",Zt),r({title:"Ошибка",description:"Не удалось обновить статус чата.",variant:"destructive"})}finally{Z(!1)}},Yi=async ee=>{if(ee&&(ee.preventDefault(),ee.stopPropagation()),!(!A.trim()||!(S!=null&&S.id))){R(!0);try{await re(A.trim()),U(""),r({title:"Сообщение отправлено",description:"Сообщение успешно отправлено."})}catch(tt){console.error("Ошибка отправки сообщения:",tt),r({title:"Ошибка",description:"Не удалось отправить сообщение.",variant:"destructive"})}finally{R(!1)}}},pa=async ee=>{try{await gn({...ee}),r({title:"Мастер-класс создан",description:"Событие сохранено"})}catch{r({title:"Ошибка",description:"Не удалось создать событие",variant:"destructive"})}},gc=async(ee,tt)=>{try{await qo(ee,{...tt}),r({title:"Мастер-класс обновлен",description:"Изменения сохранены"})}catch{r({title:"Ошибка",description:"Не удалось сохранить изменения",variant:"destructive"})}},Es=ee=>{Se(ee),Pe(!0)},YC=je.filter(ee=>{var Br,_s,Rr;const tt=(((Br=ee.name)==null?void 0:Br.toLowerCase())||"").includes(n.toLowerCase())||(((_s=ee.surname)==null?void 0:_s.toLowerCase())||"").includes(n.toLowerCase())||(((Rr=ee.email)==null?void 0:Rr.toLowerCase())||"").includes(n.toLowerCase()),Zt=X.role==="all"||ee.role===X.role,nr=X.school==="all"||S0(ee)===X.school;return tt&&Zt&&nr}),b0=H.filter(ee=>{var _s,Rr,xa,qv;const tt=(((_s=ee.name)==null?void 0:_s.toLowerCase())||"").includes(i.toLowerCase())||(((Rr=ee.address)==null?void 0:Rr.toLowerCase())||"").includes(i.toLowerCase())||(((xa=ee.teacher)==null?void 0:xa.toLowerCase())||"").includes(i.toLowerCase()),Zt=!N.city||ee.address&&((qv=ee.address.split(",")[0])==null?void 0:qv.trim())===N.city,nr=!N.school||ee.name===N.school,Br=!N.class||ee.classes&&ee.classes.includes(N.class);return tt&&Zt&&nr&&Br}),zv=$e.filter(ee=>{var tt,Zt;return(((tt=ee.name)==null?void 0:tt.toLowerCase())||"").includes(l.toLowerCase())||(((Zt=ee.shortDescription)==null?void 0:Zt.toLowerCase())||"").includes(l.toLowerCase())}),S0=ee=>{if(ee.schoolName)return ee.schoolName;if(ee.schoolId){const tt=H.find(Zt=>Zt.id===ee.schoolId);return tt?tt.name:null}return null},QC=ee=>{switch(ee){case"admin":return s.jsx(or,{className:"w-4 h-4"});case"parent":return s.jsx(or,{className:"w-4 h-4"});case"child":return s.jsx(tc,{className:"w-4 h-4"});case"executor":return s.jsx(im,{className:"w-4 h-4"});default:return s.jsx(or,{className:"w-4 h-4"})}},JC=ee=>{switch(ee){case"admin":return"bg-red-100 text-red-800";case"parent":return"bg-blue-100 text-blue-800";case"child":return"bg-green-100 text-green-800";case"executor":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return!e||e.role!=="admin"?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs(Ce,{className:"w-96",children:[s.jsxs(Je,{children:[s.jsx(qe,{children:"Доступ запрещен"}),s.jsx(ft,{children:"У вас нет прав для доступа к админ-панели"})]}),s.jsx(Ae,{children:s.jsx(q,{onClick:t,className:"w-full",children:"Выйти"})})]})}):s.jsx("div",{className:"w-full max-w-none px-8 py-6 relative",children:s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Админ-панель"}),s.jsx("p",{className:"text-muted-foreground"})]}),s.jsx(q,{onClick:t,variant:"outline",children:"Выйти"})]}),s.jsxs(pE,{value:d,onValueChange:u,className:"space-y-4",children:[s.jsxs(rv,{className:"grid w-full grid-cols-9",children:[s.jsx(Gn,{value:"overview",children:"Обзор"}),s.jsx(Gn,{value:"users",children:"Пользователи"}),s.jsx(Gn,{value:"schools",children:"Школы"}),s.jsx(Gn,{value:"services",children:"Услуги"}),s.jsx(Gn,{value:"master-classes",children:"Мастер-классы"}),s.jsx(Gn,{value:"invoices",children:"Счета"}),s.jsx(Gn,{value:"workshop-requests",children:"Заявки"}),s.jsx(Gn,{value:"about",children:"О нас"}),s.jsx(Gn,{value:"chat",children:"Чат"})]}),s.jsx(qn,{value:"overview",className:"space-y-4 relative",children:s.jsxs("div",{className:"relative z-10 grid gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 w-full",children:[s.jsxs(Ce,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full min-w-0",onClick:()=>u("users"),children:[s.jsxs(Ja,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(qe,{className:"text-sm font-medium",children:"Пользователи"}),s.jsx(or,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Za,{children:[s.jsx("div",{className:"text-2xl font-bold",children:dt}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Всего пользователей"})]})]}),s.jsxs(Ce,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full min-w-0",onClick:()=>u("schools"),children:[s.jsxs(Ja,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(qe,{className:"text-sm font-medium",children:"Школы"}),s.jsx(aD,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Za,{children:[s.jsx("div",{className:"text-2xl font-bold",children:M}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Всего школ"})]})]}),s.jsxs(Ce,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full min-w-0",onClick:()=>u("services"),children:[s.jsxs(Ja,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(qe,{className:"text-sm font-medium",children:"Услуги"}),s.jsx(im,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Za,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Ye}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Всего услуг"})]})]}),s.jsxs(Ce,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full min-w-0",onClick:()=>u("master-classes"),children:[s.jsxs(Ja,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(qe,{className:"text-sm font-medium",children:"Мастер-классы"}),s.jsx(tc,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Za,{children:[s.jsx("div",{className:"text-2xl font-bold",children:Xe.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Запланированных мастер-классов"})]})]}),s.jsxs(Ce,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full min-w-0",onClick:()=>u("invoices"),children:[s.jsxs(Ja,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(qe,{className:"text-sm font-medium",children:"Счета"}),s.jsx(gD,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(Za,{children:[nt?s.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:"..."}):_e?s.jsx("div",{className:"text-2xl font-bold text-red-500",children:"!"}):s.jsx("div",{className:"text-2xl font-bold",children:(ze==null?void 0:ze.total)??0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Всего счетов"})]})]}),s.jsxs(Ce,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full min-w-0",onClick:()=>u("chat"),children:[s.jsxs(Ja,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(qe,{className:"text-sm font-medium",children:"Чат"}),s.jsx(Is,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(Za,{children:se&&se.length>0?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:se.filter(ee=>ee.unreadCount>0).length>0?"🔔":"✅"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:se.filter(ee=>ee.unreadCount>0).length>0?"Есть непрочитанные":"Все прочитано"})]}):s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"-"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Нет чатов"})]})})]}),s.jsxs(Ce,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg w-full min-w-0",onClick:()=>u("workshop-requests"),children:[s.jsxs(Ja,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(qe,{className:"text-sm font-medium",children:"Заявки"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(El,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("div",{className:`w-2 h-2 rounded-full ${w?"bg-green-500":"bg-red-500"}`})]})]}),s.jsxs(Za,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.total}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),s.jsx("span",{className:"text-xs text-yellow-600",children:h.pending})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),s.jsx("span",{className:"text-xs text-green-600",children:h.approved})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),s.jsx("span",{className:"text-xs text-red-600",children:h.rejected})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:w?"Автообновление":"Ручное обновление"}),s.jsx(q,{variant:"ghost",size:"sm",onClick:ee=>{ee.stopPropagation(),L()},className:"h-6 w-6 p-0 hover:bg-blue-100",children:s.jsx(Fg,{className:"h-3 w-3"})})]})]})]})]})}),s.jsxs(qn,{value:"users",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ef,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(st,{placeholder:"Поиск пользователей...",value:n,onChange:ee=>a(ee.target.value),className:"pl-8"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(q,{variant:"outline",onClick:()=>{console.log("🔄 Manually refreshing users..."),Ot()},disabled:ke,children:ke?"Обновление...":"🔄 Обновить"}),s.jsxs(q,{className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),"👤 Добавить пользователя"]})]})]}),s.jsxs(Ce,{children:[s.jsx(Je,{children:s.jsxs(qe,{className:"flex items-center gap-2",children:[s.jsx(n0,{className:"h-5 w-5"}),"Фильтры пользователей"]})}),s.jsxs(Ae,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"role-filter",children:"Роль"}),s.jsxs(kt,{value:X.role,onValueChange:ee=>V(tt=>({...tt,role:ee})),children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите роль"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все роли"}),s.jsx(Ze,{value:"admin",children:"Администратор"}),s.jsx(Ze,{value:"executor",children:"Исполнитель"}),s.jsx(Ze,{value:"parent",children:"Родитель"}),s.jsx(Ze,{value:"child",children:"Ребенок"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{htmlFor:"school-filter",children:"Школа"}),s.jsxs(kt,{value:X.school,onValueChange:ee=>V(tt=>({...tt,school:ee})),children:[s.jsx(Et,{children:s.jsx(At,{placeholder:"Выберите школу"})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все школы"}),(()=>{const ee=je.map(tt=>S0(tt)).filter(Boolean);return console.log("Available school names for filter:",ee),[...new Set(ee)].map(tt=>s.jsx(Ze,{value:tt,children:tt},tt))})()]})]})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx(q,{variant:"outline",onClick:()=>V({role:"all",school:"all"}),className:"w-full",children:"Сбросить фильтры"})})]})]}),s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsxs(qe,{children:["Пользователи (",dt,")"]}),s.jsxs(ft,{children:["Управление пользователями системы",Kt&&s.jsxs("span",{className:"block text-xs text-muted-foreground mt-1",children:["Последнее обновление: ",Kt.toLocaleTimeString()]})]})]}),s.jsx(Ae,{children:ke?s.jsx("div",{className:"text-center py-4",children:"Загрузка..."}):gt?s.jsx("div",{className:"text-center py-4 text-red-500",children:gt}):s.jsxs(Gd,{children:[s.jsx(qd,{children:s.jsxs(oa,{children:[s.jsx(Pt,{children:"Пользователь"}),s.jsx(Pt,{children:"Роль"}),s.jsx(Pt,{children:"Контакт"}),s.jsx(Pt,{children:"Школа/Садик"}),s.jsx(Pt,{children:"Класс/Группа"}),s.jsx(Pt,{children:"Действия"})]})}),s.jsx(Xd,{children:YC.map(ee=>s.jsxs(oa,{children:[s.jsx(Ct,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[QC(ee.role),s.jsx("div",{children:s.jsxs("div",{className:"font-medium",children:[ee.name," ",ee.surname]})})]})}),s.jsx(Ct,{children:s.jsx(rt,{className:JC(ee.role),children:ee.role})}),s.jsx(Ct,{children:ee.phone||ee.email||"-"}),s.jsx(Ct,{children:S0(ee)||"-"}),s.jsx(Ct,{children:ee.class||"-"}),s.jsx(Ct,{children:s.jsx("div",{className:"flex space-x-2",children:s.jsxs(mh,{children:[s.jsx(ph,{asChild:!0,children:s.jsx(q,{size:"sm",variant:"outline",className:"text-red-600",children:s.jsx(Ao,{className:"w-4 h-4"})})}),s.jsxs(Dd,{children:[s.jsxs(Rd,{children:[s.jsx(Fd,{children:"Удалить пользователя?"}),s.jsx(Md,{children:"Это действие нельзя отменить. Пользователь будет удален навсегда."})]}),s.jsxs(Pd,{children:[s.jsx(Ld,{children:"Отмена"}),s.jsx(Id,{onClick:()=>Re(ee.id),className:"bg-red-600 hover:bg-red-700",children:"Удалить"})]})]})]})})})]},ee.id))})]})})]})]}),s.jsxs(qn,{value:"schools",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ef,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(st,{placeholder:"Поиск школ...",value:i,onChange:ee=>o(ee.target.value),className:"pl-8"})]}),s.jsxs(q,{onClick:O,className:"bg-green-600 hover:bg-green-700",children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),"🏫 Добавить школу"]})]}),H.length>0&&s.jsx(hF,{schools:H,onFiltersChange:Ve}),s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsxs(qe,{children:["Школы (",b0.length," из ",H.length,")"]}),s.jsx(ft,{children:"Управление школами в системе"})]}),s.jsx(Ae,{children:fe?s.jsx("div",{className:"text-center py-4",children:"Загрузка..."}):we?s.jsx("div",{className:"text-center py-4 text-red-500",children:we}):b0.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500",children:"Нет школ для отображения. Попробуйте изменить фильтры или поисковый запрос."}):s.jsxs(Gd,{children:[s.jsx(qd,{children:s.jsxs(oa,{children:[s.jsx(Pt,{children:"Название"}),s.jsx(Pt,{children:"Адрес"}),s.jsx(Pt,{children:"Контактное лицо"}),s.jsx(Pt,{children:"Телефон"}),s.jsx(Pt,{children:"Классы/группы"}),s.jsx(Pt,{children:"Примечания"}),s.jsx(Pt,{children:"Действия"})]})}),s.jsx(Xd,{children:b0.map(ee=>s.jsxs(oa,{children:[s.jsx(Ct,{className:"font-medium",children:ee.name}),s.jsx(Ct,{children:ee.address}),s.jsx(Ct,{children:ee.teacher||"-"}),s.jsx(Ct,{children:ee.teacherPhone||"-"}),s.jsx(Ct,{children:ee.classes.length>0?ee.classes.join(", "):"-"}),s.jsx(Ct,{children:ee.notes||"-"}),s.jsx(Ct,{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(q,{size:"sm",variant:"outline",onClick:()=>F(ee),children:s.jsx(hr,{className:"w-4 h-4"})}),s.jsxs(mh,{children:[s.jsx(ph,{asChild:!0,children:s.jsx(q,{size:"sm",variant:"outline",className:"text-red-600",children:s.jsx(Ao,{className:"w-4 h-4"})})}),s.jsxs(Dd,{children:[s.jsxs(Rd,{children:[s.jsx(Fd,{children:"Удалить школу?"}),s.jsx(Md,{children:"Это действие нельзя отменить. Школа будет удалена навсегда."})]}),s.jsxs(Pd,{children:[s.jsx(Ld,{children:"Отмена"}),s.jsx(Id,{onClick:()=>Ue(ee.id),className:"bg-red-600 hover:bg-red-700",children:"Удалить"})]})]})]})]})})]},ee.id))})]})})]})]}),s.jsxs(qn,{value:"services",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ef,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(st,{placeholder:"Поиск услуг...",value:l,onChange:ee=>c(ee.target.value),className:"pl-8"})]}),s.jsxs(q,{onClick:W,children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),"Добавить услугу"]})]}),s.jsxs(Ce,{children:[s.jsxs(Je,{children:[s.jsx(qe,{children:"Услуги"}),s.jsx(ft,{children:"Управление услугами в системе"})]}),s.jsx(Ae,{children:Qe?s.jsx("div",{className:"text-center py-4",children:"Загрузка..."}):Me?s.jsx("div",{className:"text-center py-4 text-red-500",children:Me}):zv.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(im,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),s.jsx("p",{children:"Услуги не найдены"}),s.jsxs(q,{onClick:W,className:"mt-4",children:[s.jsx(ys,{className:"w-4 h-4 mr-2"}),"Добавить первую услугу"]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-4",children:zv.map(ee=>s.jsx("div",{className:"w-full",children:s.jsx(gE,{service:ee,onAddStyle:ye,onAddOption:ie,onViewStyle:le,onViewOption:de,onReorderStyles:(tt,Zt)=>_r(tt,Zt),onReorderOptions:(tt,Zt)=>Xt(tt,Zt),onDelete:oe})},ee.id))})})]})]}),s.jsx(qn,{value:"master-classes",className:"space-y-4",children:s.jsx(Rz,{services:$e,schools:H,masterClasses:Xe,onAddMasterClass:pa,onEditMasterClass:gc,onViewMasterClass:Es,onDeleteMasterClass:ut})}),s.jsxs(qn,{value:"invoices",className:"space-y-4",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Счета"}),s.jsx("p",{className:"text-muted-foreground",children:nt?"Загрузка...":_e?"Ошибка загрузки":`Всего счетов: ${(ze==null?void 0:ze.total)??0}`})]})}),s.jsx(Gz,{})]}),s.jsxs(qn,{value:"workshop-requests",className:"space-y-4",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-2xl font-bold",children:"Заявки на проведение мастер-классов"})}),s.jsx(Vz,{})]}),s.jsx(qn,{value:"about",className:"space-y-4",children:s.jsx(qz,{})}),s.jsxs(qn,{value:"chat",className:"space-y-4",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Управление чатами"}),s.jsx("p",{className:"text-muted-foreground",children:"Поддержка пользователей"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 w-full h-[calc(100vh-300px)] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Is,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Управление чатами"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Поддержка пользователей"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Фильтр:"}),s.jsxs(kt,{value:b,onValueChange:_,children:[s.jsx(Et,{className:"w-32",children:s.jsx(At,{})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"all",children:"Все"}),s.jsx(Ze,{value:"pending",children:"Ожидают"}),s.jsx(Ze,{value:"active",children:"Активные"}),s.jsx(Ze,{value:"closed",children:"Закрытые"})]})]})]})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-96 border-r border-gray-200 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Чаты"}),s.jsxs(rt,{variant:"secondary",children:[se.length," всего"]})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[se.filter(ee=>ee.status==="pending").length," ожидают ответа"]}),s.jsxs("div",{className:"text-xs text-gray-400 mt-2 p-2 bg-gray-100 rounded",children:["Debug: Всего непрочитанных: ",se.reduce((ee,tt)=>ee+(tt.unreadCount||0),0)]}),s.jsxs("div",{className:"text-xs mt-2 p-2 rounded flex items-center space-x-2",children:[s.jsx("div",{className:We("w-2 h-2 rounded-full",J?"bg-green-500":D?"bg-yellow-500":"bg-red-500")}),s.jsxs("span",{className:We(J?"text-green-600":D?"text-yellow-600":"text-red-600"),children:["WebSocket: ",J?"Подключен":D?"Подключение...":"Отключен"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:ne?s.jsx("div",{className:"p-4 text-center text-gray-500",children:"Загрузка чатов..."}):se.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:"Нет чатов"}):se.map(ee=>{var tt,Zt,nr;return s.jsxs("div",{onClick:()=>C(ee),className:We("p-4 border-b border-gray-100 cursor-pointer transition-colors",(S==null?void 0:S.id)===ee.id&&"bg-blue-50 border-blue-200"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:We("w-2 h-2 rounded-full",Qt(ee.status))}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:Jt(ee.status)})]}),Dr(ee)>0&&s.jsx(rt,{variant:"destructive",className:"text-xs",children:Dr(ee)})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900",children:(tt=ee.user)!=null&&tt.name&&((Zt=ee.user)!=null&&Zt.surname)?`${ee.user.name} ${ee.user.surname}`.trim():((nr=ee.user)==null?void 0:nr.name)||"Пользователь"}),ee.lastMessage&&s.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:ee.lastMessage}),s.jsx("div",{className:"flex items-center justify-end mt-2",children:s.jsx("span",{className:"text-xs text-gray-400",children:Ha(ee.lastMessageAt)})})]},ee.id)})})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:S?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:(Hv=S.user)!=null&&Hv.name&&((Vv=S.user)!=null&&Vv.surname)?`${S.user.name} ${S.user.surname}`.trim():((Gv=S.user)==null?void 0:Gv.name)||"Пользователь"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("div",{className:We("w-2 h-2 rounded-full",Qt(S.status))}),s.jsx("span",{className:"text-sm text-gray-600",children:Jt(S.status)})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(kt,{value:S.status,onValueChange:ee=>Ki(S.id,ee),disabled:te,children:[s.jsx(Et,{className:"w-32",children:s.jsx(At,{})}),s.jsxs(_t,{children:[s.jsx(Ze,{value:"pending",children:"Ожидает"}),s.jsx(Ze,{value:"active",children:"Активен"}),s.jsx(Ze,{value:"closed",children:"Закрыт"})]})]}),s.jsx(q,{variant:"ghost",size:"sm",onClick:()=>C(null),children:"Закрыть"})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:K?s.jsx("div",{className:"text-center text-gray-500",children:"Загрузка сообщений..."}):ae.length===0?s.jsx("div",{className:"text-center text-gray-500",children:"Нет сообщений"}):ae.map(ee=>{var tt,Zt;return s.jsx("div",{className:We("flex",ee.senderType==="admin"?"justify-end":"justify-start"),children:s.jsxs("div",{className:We("max-w-[70%] sm:max-w-xs lg:max-w-md px-4 py-2 rounded-lg break-words",ee.senderType==="admin"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[ee.senderType==="admin"?s.jsx(gS,{className:"w-3 h-3"}):s.jsx(Oo,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs opacity-75",children:ee.senderType==="admin"?"Администратор":`${((tt=ee.sender)==null?void 0:tt.name)||""} ${((Zt=ee.sender)==null?void 0:Zt.surname)||""}`.trim()||"Пользователь"})]}),s.jsx("p",{className:"text-sm break-words whitespace-pre-wrap",children:ee.message}),s.jsxs("div",{className:"flex items-center justify-end mt-1",children:[s.jsx(Xr,{className:"w-3 h-3 opacity-50 mr-1"}),s.jsx("span",{className:"text-xs opacity-75",children:Ha(ee.createdAt)})]})]})},ee.id)})}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:s.jsxs("form",{onSubmit:Yi,className:"flex space-x-2",children:[s.jsx(st,{value:A,onChange:ee=>U(ee.target.value),placeholder:"Введите сообщение...",className:"flex-1",disabled:k}),s.jsx(q,{type:"submit",disabled:!A.trim()||k,className:"bg-blue-600 hover:bg-blue-700",children:s.jsx(xS,{className:"w-4 h-4"})})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx(Is,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Выберите чат для просмотра"})]})})})]})]})]})]}),s.jsx(fF,{isOpen:m,onOpenChange:f,school:p,onSubmit:Be,trigger:s.jsx(s.Fragment,{})}),s.jsx(mF,{open:E,onClose:()=>I(!1),onSubmit:z,loading:Qe}),s.jsx(pF,{open:G,onClose:()=>{me(!1),B(null),P(null)},type:be,data:Y,onSubmit:Oe,loading:Qe}),s.jsx(Yg,{open:ue,onOpenChange:Pe,children:s.jsx(u0,{className:"w-screen h-screen max-w-none max-h-none p-0 border-0",side:"bottom",children:ce&&s.jsx(Hz,{masterClass:{...ce,executors:ce.executors},service:$e.find(ee=>ee.id===ce.serviceId)||{id:"",name:"Неизвестная услуга",shortDescription:"",fullDescription:"",styles:[],options:[],createdAt:"",updatedAt:""}})})})]})})},Kz=()=>{const{id:e}=Z3(),t=ha(),{services:r,loading:n,addStyleToService:a,addOptionToService:i,updateServiceStyle:o,updateServiceOption:l,reorderServiceStyles:c,reorderServiceOptions:d,deleteService:u}=Wa(),m=v.useMemo(()=>r.find(f=>f.id===e),[r,e]);return e?s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(q,{variant:"outline",onClick:()=>t(-1),children:[s.jsx(sD,{className:"h-4 w-4 mr-2"}),"Назад"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Услуга"})]})}),s.jsxs(Ce,{className:"w-full",children:[s.jsx(Je,{children:s.jsx(qe,{children:"Детали услуги"})}),s.jsxs(Ae,{children:[n&&s.jsx("div",{className:"py-6",children:"Загрузка..."}),!n&&m&&s.jsx(gE,{service:m,onAddStyle:f=>{console.log("Add style requested for",f)},onAddOption:f=>{console.log("Add option requested for",f)},onViewStyle:f=>{console.log("View style",f.id)},onViewOption:f=>{console.log("View option",f.id)},onReorderStyles:(f,p)=>c(f,p),onReorderOptions:(f,p)=>d(f,p),onDelete:f=>{u(f).then(()=>{t("/admin/services")}).catch(console.error)}}),!n&&!m&&s.jsx("div",{className:"py-6 text-muted-foreground",children:"Услуга не найдена"})]})]})]}):null},Yz=`
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
`,Qz=()=>{const{content:e,loading:t}=qC(),{media:r,loading:n}=XC(),{lastUpdate:a}=KC(),{services:i,loading:o}=Wa(),[l,c]=v.useState(!1),[d,u]=v.useState("images"),[m,f]=v.useState([]),[p,g]=v.useState(0);Yn.useEffect(()=>{a>0&&console.log("🔄 Получено обновление about через WebSocket")},[a]),Yn.useEffect(()=>{i.length>0&&(console.log("🔍 AboutNew: Полученные услуги:",i),i.forEach((j,b)=>{var _,S;console.log(`🔍 Услуга ${b+1}:`,{name:j.name,stylesCount:((_=j.styles)==null?void 0:_.length)||0,optionsCount:((S=j.options)==null?void 0:S.length)||0}),j.styles&&j.styles.forEach((C,A)=>{console.log(`  🎨 Стиль ${A+1}:`,{name:C.name,avatar:C.avatar,images:C.images,videos:C.videos})}),j.options&&j.options.forEach((C,A)=>{console.log(`  ✨ Опция ${A+1}:`,{name:C.name,avatar:C.avatar,images:C.images,videos:C.videos})})}))},[i]);const h=j=>{if(console.log("🔗 getMediaUrl вызван с:",j),j.startsWith("/src/assets/"))return console.log("  → Vite assets путь:",j),j;if(j.startsWith("@uploads/")){const b=j.replace("@uploads/","/uploads/");return console.log("  → @uploads путь преобразован:",b),b}if(j.startsWith("/uploads/"))return console.log("  → Backend uploads путь:",j),j;if(j.startsWith("uploads/")){const b=`/${j}`;return console.log("  → uploads путь преобразован:",b),b}return console.log("  → Неизвестный формат пути:",j),j},x=(j,b)=>{const _=b.map(S=>`http://localhost:3001${S}`);u(j),f(_),g(0),c(!0)},w=()=>{c(!1),f([]),g(0)},y=()=>{g(j=>(j+1)%m.length)},N=()=>{g(j=>(j-1+m.length)%m.length)};return t||n||o?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-purple-50",children:[s.jsx(Zc,{}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-2"}),s.jsx("p",{children:"Загрузка контента..."})]})})})]}):e?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-purple-50 relative overflow-hidden",children:[s.jsx("style",{children:Yz}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(20)].map((j,b)=>s.jsx("div",{className:"absolute animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`},children:s.jsx(ss,{className:"text-yellow-400/40 w-4 h-4",fill:"currentColor"})},b))}),s.jsx("div",{className:"absolute top-20 left-10 animate-bounce-gentle",children:s.jsx("div",{className:"bg-gradient-to-br from-orange-400 to-yellow-400 rounded-full p-4 shadow-glow",children:s.jsx(Hr,{className:"w-8 h-8 text-white"})})}),s.jsx("div",{className:"absolute top-40 right-20 animate-float",children:s.jsx("div",{className:"bg-gradient-to-br from-purple-400 to-pink-400 rounded-full p-3 shadow-glow",children:s.jsx(Mi,{className:"w-6 h-6 text-white"})})}),s.jsx("div",{className:"absolute bottom-40 left-20 animate-bounce-gentle",style:{animationDelay:"1s"},children:s.jsx("div",{className:"bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full p-3 shadow-glow",children:s.jsx(or,{className:"w-6 h-6 text-white"})})}),s.jsx(Zc,{}),s.jsxs("div",{className:"container mx-auto px-4 pt-28 pb-16 relative z-10",children:[s.jsx("div",{className:"text-center space-y-8 mb-16",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/90 backdrop-blur-sm rounded-full px-6 py-3 shadow-card border border-orange-200",children:[s.jsx(sn,{className:"w-6 h-6 text-orange-600 animate-spin-slow"}),s.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"🎨 Творческие мастер-классы для детей"})]}),s.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-bold leading-tight",children:[s.jsx("span",{className:"bg-gradient-to-r from-orange-600 via-purple-600 to-blue-600 bg-clip-text text-transparent animate-pulse",children:e.title}),s.jsx("span",{className:"text-3xl md:text-4xl text-gray-600 font-normal",children:"✨ Магия творчества ✨"})]}),s.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:e.subtitle}),s.jsx("p",{className:"text-lg text-gray-700 max-w-3xl mx-auto",children:e.description})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[s.jsx(Ce,{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-card border border-red-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:s.jsxs(Ae,{className:"p-0",children:[s.jsxs("h3",{className:"text-2xl font-bold text-red-800 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:"❤️"}),e.studio_title]}),s.jsx("p",{className:"text-red-700 text-lg leading-relaxed",children:e.studio_description})]})}),s.jsx(Ce,{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-card border border-purple-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:s.jsxs(Ae,{className:"p-0",children:[s.jsxs("h3",{className:"text-2xl font-bold text-purple-800 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:"🏆"}),e.advantages_title]}),s.jsx("ul",{className:"space-y-4",children:e.advantages_list.map((j,b)=>s.jsxs("li",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-3 flex-shrink-0"}),s.jsx("p",{className:"text-purple-700 text-lg",children:j})]},b))})]})}),s.jsx(Ce,{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-card border border-blue-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:s.jsxs(Ae,{className:"p-0",children:[s.jsxs("h3",{className:"text-2xl font-bold text-blue-800 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:"⏰"}),e.process_title]}),s.jsx("div",{className:"space-y-6",children:e.process_steps.map((j,b)=>s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:b+1}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2 text-lg",children:j.title}),s.jsx("p",{className:"text-blue-700 text-lg",children:j.description})]})]},b))})]})}),s.jsx(Ce,{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-card border border-green-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:s.jsxs(Ae,{className:"p-0",children:[s.jsxs("h3",{className:"text-2xl font-bold text-green-800 mb-6 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:"🛡️"}),e.safety_title]}),s.jsx("p",{className:"text-green-700 text-lg leading-relaxed",children:e.safety_description})]})})]}),r.length>0&&s.jsxs("div",{className:"mt-16",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Наши работы и мастер-классы"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Посмотрите, как проходят наши мастер-классы и какие уникальные работы создают дети"})]}),s.jsx("div",{className:"md:hidden",children:s.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 px-4 -mx-4 scrollbar-hide",children:r.sort((j,b)=>j.order_index-b.order_index).map((j,b)=>s.jsx(Ce,{className:"min-w-[280px] flex-shrink-0 overflow-hidden group bg-white/90 backdrop-blur-sm rounded-2xl shadow-card border border-orange-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:s.jsxs(Ae,{className:"p-0",children:[s.jsxs("div",{className:"relative",children:[j.type==="image"?s.jsx("div",{className:"aspect-[4/3] overflow-hidden",children:s.jsx("img",{src:h(j.file_path),alt:j.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:_=>{const S=_.target;S.src="/placeholder.svg",S.alt="Изображение недоступно"}})}):s.jsxs("div",{className:"aspect-[4/3] relative bg-gray-100",children:[s.jsx("video",{src:h(j.file_path),className:"w-full h-full object-cover",poster:"/placeholder.svg",controls:!0,onError:_=>{const S=_.target;S.poster="/placeholder.svg"}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"bg-black/50 rounded-full p-3",children:s.jsx(tx,{className:"w-8 h-8 text-white"})})})]}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(rt,{variant:"secondary",className:"bg-white/80",children:[j.type==="image"?s.jsx(Ic,{className:"w-3 h-3 mr-1"}):s.jsx(Lc,{className:"w-3 h-3 mr-1"}),j.type==="image"?"Фото":"Видео"]})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:j.title}),j.description&&s.jsx("p",{className:"text-gray-600 leading-relaxed",children:j.description}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsx(rt,{variant:"secondary",className:"capitalize",children:j.type==="image"?"Фото":"Видео"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["#",b+1]})]})]})]})},j.id))})}),s.jsx("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.sort((j,b)=>j.order_index-b.order_index).map((j,b)=>s.jsx(Ce,{className:"group relative bg-white/90 backdrop-blur-sm rounded-2xl overflow-hidden shadow-card border border-orange-200 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:s.jsxs(Ae,{className:"p-0",children:[s.jsxs("div",{className:"relative",children:[j.type==="image"?s.jsx("div",{className:"aspect-[4/3] overflow-hidden",children:s.jsx("img",{src:h(j.file_path),alt:j.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:_=>{const S=_.target;S.src="/placeholder.svg",S.alt="Изображение недоступно"}})}):s.jsxs("div",{className:"aspect-[4/3] relative bg-gray-100",children:[s.jsx("video",{src:h(j.file_path),className:"w-full h-full object-cover",poster:"/placeholder.svg",controls:!0,onError:_=>{const S=_.target;S.poster="/placeholder.svg"}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:s.jsx("div",{className:"bg-black/50 rounded-full p-3",children:s.jsx(tx,{className:"w-8 h-8 text-white"})})})]}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(rt,{variant:"secondary",className:"bg-white/80",children:[j.type==="image"?s.jsx(Ic,{className:"w-3 h-3 mr-1"}):s.jsx(Lc,{className:"w-3 h-3 mr-1"}),j.type==="image"?"Фото":"Видео"]})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:j.title}),j.description&&s.jsx("p",{className:"text-gray-600 leading-relaxed",children:j.description}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsx(rt,{variant:"secondary",className:"capitalize",children:j.type==="image"?"Фото":"Видео"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["#",b+1]})]})]})]})},j.id))})]}),i.length>0&&s.jsxs("div",{className:"mt-16",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:"О наших ценах и вариантах ручек"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Узнайте о наших вариантах ручек и дополнительных услугах"})]}),s.jsx("div",{className:"space-y-8",children:i.map(j=>s.jsx(Ce,{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-card border border-orange-200 hover:shadow-xl transition-all duration-300",children:s.jsxs(Ae,{className:"p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h3",{className:"text-3xl font-bold text-orange-800 mb-4",children:j.name}),s.jsx("p",{className:"text-lg text-gray-700 max-w-3xl mx-auto",children:j.shortDescription}),j.fullDescription&&s.jsx("p",{className:"text-lg text-gray-600 mt-4 max-w-2xl mx-auto",children:j.fullDescription})]}),j.styles&&j.styles.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-2xl font-bold text-purple-800 mb-6 text-center",children:"Варианты ручек"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.styles.map(b=>s.jsx(Ce,{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 hover:border-purple-300 transition-all duration-300 transform hover:-translate-y-1",children:s.jsxs(Ae,{className:"p-6 text-center",children:[s.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg overflow-hidden relative",children:[b.avatar?s.jsx("img",{src:`http://localhost:3001${b.avatar}`,alt:b.name,className:"w-full h-full object-cover rounded-full",style:{zIndex:1},onError:_=>{var C;const S=_.target;S.style.display="none",(C=S.nextElementSibling)==null||C.classList.remove("hidden")}}):null,s.jsx("span",{className:`text-3xl ${b.avatar?"hidden":""}`,style:{zIndex:0},children:"🎨"})]}),s.jsx("h5",{className:"text-xl font-bold text-purple-800 mb-3",children:b.name}),b.fullDescription&&s.jsx("p",{className:"text-gray-600 mb-4 text-sm leading-relaxed",children:b.fullDescription}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[b.images&&b.images.length>0&&s.jsx("button",{onClick:()=>x("images",b.images||[]),className:"w-8 h-8 bg-gradient-to-r from-orange-400 via-red-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform duration-200 cursor-pointer",title:`${b.images.length} фото`,children:s.jsx(Ic,{className:"w-5 h-5 text-white"})}),b.videos&&b.videos.length>0&&s.jsx("button",{onClick:()=>x("videos",b.videos||[]),className:"w-8 h-8 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform duration-200 cursor-pointer",title:`${b.videos.length} видео`,children:s.jsx(Lc,{className:"w-5 h-5 text-white"})})]}),s.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-500 rounded-full px-6 py-3 inline-block shadow-lg",children:s.jsxs("span",{className:"text-lg font-bold text-white",children:[b.price," ₽"]})})]})},b.id))})]}),j.options&&j.options.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-2xl font-bold text-blue-800 mb-6 text-center",children:"Дополнительные услуги"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.options.map(b=>s.jsx(Ce,{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200 hover:border-blue-300 transition-all duration-300 transform hover:-translate-y-1",children:s.jsxs(Ae,{className:"p-6 text-center",children:[s.jsxs("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-200 to-cyan-200 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg overflow-hidden relative",children:[b.avatar?s.jsx("img",{src:`http://localhost:3001${b.avatar}`,alt:b.name,className:"w-full h-full object-cover rounded-full",style:{zIndex:1},onError:_=>{var C;const S=_.target;S.style.display="none",(C=S.nextElementSibling)==null||C.classList.remove("hidden")}}):null,s.jsx("span",{className:`text-3xl ${b.avatar?"hidden":""}`,style:{zIndex:0},children:"✨"})]}),s.jsx("h5",{className:"text-xl font-bold text-blue-800 mb-3",children:b.name}),b.fullDescription&&s.jsx("p",{className:"text-gray-600 mb-4 text-sm leading-relaxed",children:b.fullDescription}),s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[b.images&&b.images.length>0&&s.jsx("button",{onClick:()=>x("images",b.images||[]),className:"w-8 h-8 bg-gradient-to-r from-orange-400 via-red-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform duration-200 cursor-pointer",title:`${b.images.length} фото`,children:s.jsx(Ic,{className:"w-5 h-5 text-white"})}),b.videos&&b.videos.length>0&&s.jsx("button",{onClick:()=>x("videos",b.videos||[]),className:"w-8 h-8 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform duration-200 cursor-pointer",title:`${b.videos.length} видео`,children:s.jsx(Lc,{className:"w-5 h-5 text-white"})})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-cyan-500 rounded-full px-6 py-3 inline-block shadow-lg",children:s.jsxs("span",{className:"text-lg font-bold text-white",children:[b.price," ₽"]})})]})},b.id))})]})]})},j.id))})]})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:s.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full mx-4",children:[s.jsx("button",{onClick:w,className:"absolute top-4 right-4 z-10 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:s.jsx(Rt,{className:"w-6 h-6 text-white"})}),m.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:N,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:s.jsx("span",{className:"text-white text-2xl",children:"‹"})}),s.jsx("button",{onClick:y,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:s.jsx("span",{className:"text-white text-2xl",children:"›"})})]}),s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d==="images"?s.jsx("img",{src:m[p],alt:`Изображение ${p+1}`,className:"max-w-full max-h-full object-contain rounded-lg"}):s.jsx("video",{src:m[p],controls:!0,className:"max-w-full max-h-full rounded-lg",poster:"/placeholder.svg"})}),m.length>1&&s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:m.map((j,b)=>s.jsx("button",{onClick:()=>g(b),className:`w-3 h-3 rounded-full transition-colors ${b===p?"bg-white":"bg-white/40"}`},b))})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-purple-50",children:[s.jsx(Zc,{}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-red-500",children:"Ошибка загрузки контента"})})})]})},Jz=()=>{const e=iu();return v.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},r2=5*1024*1024,Zz=(e,t)=>{const r=Date.now(),n=Math.random().toString(36).substr(2,9),a=e.split(".").pop();return`${t}-${r}-${n}.${a}`},eH=(e,t=800)=>new Promise(r=>{const n=document.createElement("canvas"),a=n.getContext("2d"),i=new Image;i.onload=()=>{const o=Math.min(t/i.width,t/i.height);n.width=i.width*o,n.height=i.height*o,a.drawImage(i,0,0,n.width,n.height),n.toBlob(r,"image/jpeg",.8)},i.src=URL.createObjectURL(e)}),tH=async(e,t)=>{try{if(e.size>r2)throw new Error(`Файл слишком большой. Максимальный размер: ${r2/1024/1024}MB`);const r=Zz(e.name,t);let n=e;t==="image"&&e.type.startsWith("image/")&&(n=await eH(e));const a=URL.createObjectURL(n),i=JSON.parse(localStorage.getItem("aboutMediaFiles")||"{}");i[r]={type:n.type,originalName:e.name,size:n.size,lastModified:e.lastModified,isUploaded:!0,blobUrl:a};const o=Object.keys(i);return o.length>10&&o.slice(0,o.length-10).forEach(c=>{delete i[c]}),localStorage.setItem("aboutMediaFiles",JSON.stringify(i)),a}catch(r){throw console.error("Error saving media file:",r),new Error(r instanceof Error?r.message:"Не удалось сохранить медиа-файл")}},rH=async e=>{try{const r=JSON.parse(localStorage.getItem("aboutMediaFiles")||"{}")[e];if(r&&r.isUploaded&&r.blobUrl)try{if((await fetch(r.blobUrl)).ok)return r.blobUrl}catch{console.warn("Blob URL expired, trying static file:",e)}try{const n=await fetch(`/src/assets/about/${e}`);if(n.ok){const a=await n.blob();return URL.createObjectURL(a)}}catch{console.warn("Static file not found:",e)}return e.includes("image"),"/placeholder.svg"}catch(t){return console.error("Error loading media file:",t),"/placeholder.svg"}},nH=async e=>{try{const t=JSON.parse(localStorage.getItem("aboutMediaFiles")||"{}"),r=t[e];r&&r.blobUrl&&URL.revokeObjectURL(r.blobUrl),delete t[e],localStorage.setItem("aboutMediaFiles",JSON.stringify(t)),console.log(`Media file ${e} deleted from localStorage`)}catch(t){throw console.error("Error deleting media file:",t),new Error("Не удалось удалить медиа-файл")}},sH=()=>{try{const e=JSON.parse(localStorage.getItem("aboutMediaFiles")||"{}"),t=Object.keys(e);if(t.length>5){const r=t.slice(-5),n={};t.forEach(a=>{!r.includes(a)&&e[a].blobUrl&&URL.revokeObjectURL(e[a].blobUrl)}),r.forEach(a=>{n[a]=e[a]}),localStorage.setItem("aboutMediaFiles",JSON.stringify(n)),console.log(`Cleaned up media files, kept ${r.length} most recent`)}}catch(e){console.error("Error cleaning up blob URLs:",e)}};typeof window<"u"&&window.addEventListener("beforeunload",sH);const lf={heroTitle:"Восковые Ручки",heroSubtitle:"✨ Магия творчества ✨",heroDescription:"Создай свою уникальную 3D копию руки в восковом исполнении! Приезжаем в школы и детские сады. Незабываемые впечатления и уникальные сувениры за 5 минут! 🎉",aboutTitle:"О нашей студии",aboutDescription:"Студия «МК Восковые ручки» — это место, где рождается магия творчества! Мы специализируемся на создании уникальных 3D-копий рук детей в восковом исполнении.",advantages:["Быстрое создание — всего 5 минут на одного ребенка","Выездные мастер-классы в любые учреждения","Уникальные 3D-сувениры ручной работы","Безопасные материалы для детей"],processSteps:[{title:"Подготовка",description:"Ребенок выбирает цвет воска и готовится к творческому процессу"},{title:"Создание",description:"Под руководством мастера ребенок создает 3D-копию своей руки"},{title:"Готово!",description:"Уникальный сувенир готов и может быть забран домой"}],safetyTitle:"Безопасность и качество",safetyDescription:"Мы используем только высококачественные, безопасные для детей материалы. Все наши мастера имеют опыт работы с детьми и проходят специальное обучение.",contactTitle:"Свяжитесь с нами",contactDescription:"Готовы организовать незабываемый мастер-класс для ваших детей? Напишите нам, и мы обсудим все детали!",media:[]},aH=()=>{const[e,t]=v.useState(lf),[r,n]=v.useState(!0),[a,i]=v.useState(null);v.useEffect(()=>{(async()=>{try{n(!0);const p=localStorage.getItem("aboutContent");let g=p?JSON.parse(p):lf;if((!g.media||g.media.length===0)&&(g.media=[{id:"demo-1",type:"video",url:"/src/assets/about/demo-video-1.mp4",filename:"demo-video-1.mp4",title:"Мастер-класс: Восковые ручки",description:"Демонстрация процесса создания 3D-копии руки из воска",order:0},{id:"demo-2",type:"video",url:"/src/assets/about/demo-video-2.mp4",filename:"demo-video-2.mp4",title:"Двойные восковые ручки",description:"Создание парных восковых копий рук",order:1}]),g.media&&g.media.length>0){const h=await Promise.all(g.media.map(async x=>{if(x.filename)try{if(x.filename.includes("demo-"))return{...x,url:`/src/assets/about/${x.filename}`};if(x.filename.startsWith("uploaded-"))try{const w=await rH(x.filename);return{...x,url:w}}catch(w){return console.warn(`Failed to load media file: ${x.filename}`,w),x}}catch(w){console.warn(`Failed to load media file: ${x.filename}`,w)}return x}));g.media=h}t(g),console.log("Content loaded successfully:",g),(!p||!p.includes("demo-"))&&(localStorage.setItem("aboutContent",JSON.stringify({...g,media:g.media.map(h=>{var x;return{...h,url:(x=h.filename)!=null&&x.includes("demo-")?`/src/assets/about/${h.filename}`:""}})})),console.log("Demo content saved to localStorage"))}catch(p){i("Ошибка загрузки контента"),console.error("Error loading about content:",p)}finally{n(!1)}})()},[]);const o=async f=>{try{const p={...f,media:f.media.map(g=>{var h;return{...g,url:(h=g.filename)!=null&&h.includes("demo-")?`/src/assets/about/${g.filename}`:""}})};return localStorage.setItem("aboutContent",JSON.stringify(p)),t(f),console.log("Content saved successfully to localStorage"),!0}catch(p){return i("Ошибка сохранения контента"),console.error("Error saving about content:",p),!1}};return{content:e,isLoading:r,error:a,saveContent:o,updateField:async(f,p)=>{const g={...e,[f]:p},h=await o(g);return h&&(t(g),console.log("Field updated successfully:",f,p)),h},addMedia:async f=>{try{let p=f.url,g=f.filename;if(f.file){if(f.file.size>5242880)throw new Error(`Файл слишком большой. Максимальный размер: ${5242880/1024/1024}MB`);p=await tH(f.file,f.type),g=`uploaded-${Date.now()}-${f.file.name}`}else f.filename&&(g=f.filename);const h={...f,id:Date.now().toString(),order:e.media.length,url:p,filename:g},x={...e,media:[...e.media,h]},w=await o(x);return w&&(t(x),console.log("Media added successfully:",h)),w}catch(p){throw console.error("Error adding media:",p),p instanceof Error?new Error(p.message):new Error("Не удалось добавить медиа-файл")}},removeMedia:async f=>{try{const p=e.media.find(x=>x.id===f);p!=null&&p.filename&&p.filename.startsWith("uploaded-")&&await nH(p.filename);const g={...e,media:e.media.filter(x=>x.id!==f)},h=await o(g);return h&&(t(g),console.log("Media removed successfully:",f)),h}catch(p){return console.error("Error removing media:",p),!1}},reorderMedia:async f=>{const p=f.map((x,w)=>{const y=e.media.find(N=>N.id===x);return y?{...y,order:w}:null}).filter(Boolean),g={...e,media:p},h=await o(g);return h&&(t(g),console.log("Media reordered successfully:",p)),h},resetToDefault:async()=>{const f=await o(lf);return f&&t(lf),f}}},iH=v.createContext(void 0),oH=({children:e})=>{const t=aH();return s.jsx(iH.Provider,{value:t,children:e})},Ya=({children:e,allowedRoles:t,redirectTo:r="/login"})=>{const{user:n,loading:a,isAuthenticated:i}=Sr();return a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 via-purple-50 to-blue-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-600 mx-auto mb-4"}),s.jsx("p",{className:"text-orange-600 text-lg",children:"Проверка доступа..."})]})}):i?t&&n&&!t.includes(n.role)?s.jsx(cy,{to:"/unauthorized",replace:!0}):s.jsx(s.Fragment,{children:e}):s.jsx(cy,{to:r,replace:!0})},lH=new O5({defaultOptions:{queries:{staleTime:1e3*60*5}}});function cH(){return s.jsx(M5,{client:lH,children:s.jsx(tA,{children:s.jsx(kO,{children:s.jsxs(oH,{children:[s.jsxs(x5,{children:[s.jsx(TD,{}),s.jsxs(h5,{children:[s.jsx(yn,{path:"/",element:s.jsx(zy,{})}),s.jsx(yn,{path:"/landing",element:s.jsx(PD,{})}),s.jsx(yn,{path:"/login",element:s.jsx(zy,{})}),s.jsx(yn,{path:"/register",element:s.jsx(aP,{})}),s.jsx(yn,{path:"/admin/login",element:s.jsx(iP,{})}),s.jsx(yn,{path:"/child",element:s.jsx(Ya,{allowedRoles:["child"],children:s.jsx(DP,{})})}),s.jsx(yn,{path:"/child/profile",element:s.jsx(Ya,{allowedRoles:["child"],children:s.jsx(PP,{})})}),s.jsx(yn,{path:"/child/about",element:s.jsx(Ya,{allowedRoles:["child"],children:s.jsx(FP,{})})}),s.jsx(yn,{path:"/parent",element:s.jsx(Ya,{allowedRoles:["parent"],children:s.jsx(lF,{})})}),s.jsx(yn,{path:"/parent/profile",element:s.jsx(Ya,{allowedRoles:["parent"],children:s.jsx(dF,{})})}),s.jsx(yn,{path:"/about",element:s.jsx(Ya,{allowedRoles:["parent"],children:s.jsx(Qz,{})})}),s.jsx(yn,{path:"/admin",element:s.jsx(Ya,{allowedRoles:["admin"],children:s.jsx(Xz,{})})}),s.jsx(yn,{path:"/admin/services/:id",element:s.jsx(Ya,{allowedRoles:["admin"],children:s.jsx(Kz,{})})}),s.jsx(yn,{path:"*",element:s.jsx(Jz,{})})]})]}),s.jsx(CD,{})]})})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});Dm.createRoot(document.getElementById("root")).render(s.jsx(Yn.StrictMode,{children:s.jsx(cH,{})}));
